import{r as u,e as X,f as O,g as G,o as c,c as g,a as h,u as b,w as E,F as y,Z as L,d as e,h as T,v as Z,i as P,t as p,b as q,n as H,j as R}from"./app-W5jK--hd.js";import{_ as J}from"./AuthenticatedLayout-EngdqHTq.js";import{s as $,a as Q}from"./chart.esm-qIZ0a0Hz.js";import{s as z}from"./avatar.esm-cHsUc0Sv.js";import"./index.esm-VL55mRAf.js";import"./ripple.esm-z66V8OmI.js";import"./basecomponent.esm-oYzmb_uH.js";const W={class:""},Y={key:0,class:"flex flex-col justify-center"},ee={class:"sm:flex justify-center items-center"},te=e("option",{selected:"",value:"",disabled:""},"Elegir evento de votación",-1),se=["value"],oe={class:"flex inline-flex justify-center gap-4 sm:gap-6 mb-4 mt-6 text-lg sm:mb-auto"},ae=["onClick"],le={class:"sm:grid grid-cols-2 md:gap-6 sm:gap-4 mt-6"},ne={class:"flex h-full m-auto flex-col justify-center mb-4 px-4"},re=e("h2",{class:"text-gray-600 text-lg sm:text-xl font-bold text-center flex justify-center"}," Resultado Votaciones ",-1),ie={class:"flex h-full m-auto flex-col justify-center mb-4 px-4"},ce=e("h2",{class:"text-gray-600 text-lg sm:text-xl font-bold text-center flex justify-center"}," Nivel de votaciones ",-1),de={class:"h-full mt-4 w-full col-span-2"},ue={class:"flex flex-col overflow-x-auto"},ge={class:"inline-block rounded-lg shadow"},ve={class:"inline-block min-w-full py-2"},pe={class:"overflow-x-auto"},be={class:"w-full whitespace-no-wrap"},fe=e("thead",null,[e("tr",{class:"border-b bg-gray-50 text-left text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("th",{colspan:"2",class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Nombre "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Identificación "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," votos ")])],-1),he={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},xe={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},ye={class:"text-gray-900 whitespace-no-wrap"},me={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},_e={class:"text-gray-900 whitespace-no-wrap"},we={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},ke={class:"text-gray-900 whitespace-no-wrap"},Ce={class:"flex items-center border-b bg-gray-50 px-5 py-2 xs:flex-row justify-between text-gray-500 text-xs font-semibold"},je=["disabled"],Pe=e("i",{class:"fa-solid fa-arrow-left"},null,-1),Se=[Pe],Ve=["disabled"],Be=e("i",{class:"fa-solid fa-arrow-right"},null,-1),Ae=[Be],De={key:1,class:"flex justify-center"},Me={__name:"Index",props:{eventos:Object,candidatos:Object,votantes:Object},setup(f){const n=f;console.log(n);const m=u(),_=u(),w=u(),k=u(),r=u(n.eventos.length?n.eventos[0].id:""),d=u(n.eventos.length?n.eventos.find(s=>s.id==r.value).tipos.split("|")[0]:"NA"),x=u(n.candidatos.filter(s=>{let o=s.id_evento==r.value,t=s.tipo==d.value;return o&&t})),S=s=>{d.value=s,m.value=B(),_.value=A(),w.value=D(),k.value=N(),x.value=n.candidatos.filter(o=>{let t=o.id_evento==r.value,l=o.tipo==d.value;return t&&l}),console.log(x.value)},V=u(8),v=u(0),C=X(()=>Math.ceil(x.value.length/V.value)),I=()=>{v.value>0&&v.value--},M=()=>{v.value<C.value-1&&v.value++};O(V,()=>{v.value=0});const F=s=>`/storage/uploads/usuarios/${s}`,K=function(s){let o=s.split(" "),t="",l=0;for(var i=0;i<o.length&&l<2;i++)o[i].length>0&&o[i]!==""&&(t+=o[i][0],l++);return t};O(r,s=>{d.value=n.eventos.length?n.eventos.find(o=>o.id==s).tipos.split("|")[0]:"NA",S(d.value)}),G(()=>{m.value=B(),_.value=A(),w.value=D(),k.value=N()});const B=()=>{const s=getComputedStyle(document.body);let o=n.eventos.find(a=>a.id==r.value),t=n.candidatos.filter(a=>{let j=a.id_evento==r.value,U=a.tipo==d.value;return j&&U}),l=[],i=[];return t.forEach(a=>{l.push(a.votante.nombre),i.push(o.votos.filter(j=>j.id_candidato==a.id_votante).length)}),{labels:l.join(", ").split(",").map(a=>a.trim()),datasets:[{label:"Votos",data:i.join(", ").split(",").map(a=>a.trim()),backgroundColor:[s.getPropertyValue("--gray-500")]}]}},A=()=>{const s="#000";return{indexAxis:"x",maintainAspectRatio:!0,aspectRatio:1,plugins:{legend:{labels:{color:s}}},scales:{x:{ticks:{color:s,font:{weight:500}},grid:{display:!1,drawBorder:!0}},y:{ticks:{color:s},grid:{color:"#b0b6c0",drawBorder:!0}}}}},D=()=>{const s=getComputedStyle(document.body);let o=n.eventos.find(a=>a.id==r.value),t=[],l=n.votantes.filter(a=>a.tipo==d.value&&a.id_evento==o.id).length,i=o.votos.filter(a=>a.tipo==d.value).length;return t.push(l-i,i),console.log(o),{labels:["Abstinencia","votos realizados"],datasets:[{label:"Cantidad",data:t,backgroundColor:[s.getPropertyValue("--red-900"),s.getPropertyValue("--gray-500")],hoverBackgroundColor:[s.getPropertyValue("--red-800"),s.getPropertyValue("--gray-400")]}]}},N=()=>({maintainAspectRatio:!0,aspectRatio:1,plugins:{legend:{labels:{cutout:"60%",color:"#000"}}}});return(s,o)=>(c(),g(y,null,[h(b(L),{title:"Dashboard"}),h(J,null,{default:E(()=>[e("div",W,[f.eventos.length?(c(),g("div",Y,[e("div",ee,[T(e("select",{id:"evento_selected",name:"evento_selected","onUpdate:modelValue":o[0]||(o[0]=t=>r.value=t),onChange:o[1]||(o[1]=(...t)=>s.handleEnterKey&&s.handleEnterKey(...t)),class:"block w-full p-2 text-base text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"},[te,(c(!0),g(y,null,P(f.eventos,t=>(c(),g("option",{class:"flex cursor mb-2 sm:mb-auto",key:t.id,value:t.id},p(t.nombre),9,se))),128))],544),[[Z,r.value]])]),e("div",oe,[(c(!0),g(y,null,P(f.eventos.find(t=>t.id==r.value).tipos.split("|"),t=>(c(),g("button",{key:t,class:H(["flex cursor mb-2 sm:mb-auto",t==d.value?"underline text-blue-600":"text-gray-600"]),onClick:l=>S(t)},p(t)+" | ",11,ae))),128))]),e("div",le,[e("div",ne,[re,h(b($),{type:"bar",data:m.value,options:_.value,class:"h-full w-full mt-4"},null,8,["data","options"])]),e("div",ie,[ce,h(b($),{type:"doughnut",data:w.value,options:k.value,class:"h-full w-full mt-4"},null,8,["data","options"])]),e("div",de,[e("div",ue,[e("div",ge,[e("div",ve,[e("div",pe,[e("table",be,[fe,e("tbody",null,[(c(!0),g(y,null,P(x.value,t=>(c(),g("tr",{key:t.id,class:"text-gray-700"},[e("td",he,[t.votante.imagen=="user.png"?(c(),R(b(z),{key:0,label:K(t.votante.nombre),class:"bg-indigo-200 text-indigo-800 text-xl",size:"xlarge",shape:"circle"},null,8,["label"])):(c(),R(b(z),{key:1,image:F(t.votante.imagen),class:"bg-indigo-200 text-indigo-800",size:"xlarge",shape:"circle"},null,8,["image"]))]),e("td",xe,[e("p",ye,p(t.votante.nombre),1)]),e("td",me,[e("p",_e,p(t.votante.identificacion),1)]),e("td",we,[e("p",ke,p(f.eventos.find(l=>l.id==r.value).votos.filter(l=>l.id_candidato==t.id_votante).length),1)])]))),128))])]),e("div",Ce,[e("button",{class:"hover:scale-125 transition duration-500 cursor-pointer",onClick:I,disabled:v.value===0},Se,8,je),e("p",null,"Pagina "+p(v.value+1)+" de "+p(C.value),1),e("button",{class:"hover:scale-125 transition duration-500 cursor-pointer",onClick:M,disabled:v.value===C.value-1},Ae,8,Ve)])])])])])])])])):(c(),g("div",De,[h(b(Q),{severity:"info",sticky:s.sticky,class:"text-center w-fit",life:3e3},{default:E(()=>[q("El análisis de los eventos de votación se mostrará en esta sección")]),_:1},8,["sticky"])]))])]),_:1})],64))}};export{Me as default};
