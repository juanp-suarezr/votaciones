import{x as P,r as g,T as q,q as V,w as h,c as m,o as f,b as s,u as t,Z as B,d as v,e as r,j as u,B as C,n as j,p as k,t as _,f as L,v as O,F as T}from"./app-DaSfog_y.js";import{_ as z}from"./AuthenticatedLayout-DezdHtak.js";import{_ as n}from"./InputError-BYlCKJFr.js";import{_ as d}from"./InputLabel-DZ88GMkG.js";import{_ as F}from"./PrimaryButton-BlT5CfnP.js";import{_ as S}from"./TextInput-o9KtvMMi.js";import{_ as I}from"./SecondaryButton-BAMzAAvr.js";import{s as M}from"./index-D5kfUbxV.js";import{s as R}from"./index-ChyQUj3D.js";import{_ as Z}from"./SecondaryLink-Htc6hYQ3.js";import{s as G}from"./index-CScGqRjn.js";import{s as $}from"./index-BALR3mTY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BreadCrumb-BX8fHwZz.js";import"./SecondaryButtonReturn-BG4-XSLV.js";import"./XCircleIcon-DRWwzxKF.js";import"./index-rkRWrsd3.js";import"./index-ChvTxyXd.js";import"./index-BRL-7O5d.js";import"./index-C2cq_yKK.js";import"./index-BFyjr-tU.js";import"./index-BBx4k_e3.js";import"./index-C2g9oBge.js";const H={class:"flex flex-col bg-white border shadow-sm rounded-xl w-full"},J={class:"bg-gray-100 border-b rounded-t-xl py-3 px-4 md:py-4 md:px-5 grid grid-cols-2 gap-4"},K={class:"text-right"},Q={class:"p-4 md:p-5"},W={class:"mb-2"},X={class:"mb-2"},Y={class:"col-span-2 mb-2"},ee={key:0},oe={class:"col-span-2 flex md:grid grid-cols-2 flex-wrap gap-4"},te={class:"w-auto"},se={class:"w-auto"},re={class:"card flex inline-flex justify-content-center border border-gray-400 rounded-md shadow-md py-1 px-2 mt-2 !text-gray-500"},le={class:"w-auto mt-4"},ae={key:0,class:"card flex justify-content-center"},ie={key:1,class:"text-xs text-gray-600"},ne=["href"],de={class:"w-auto"},pe={class:"w-full h-full mt-2"},ue={class:"flex flex-wrap items-center w-auto gap-4"},ce={key:0,class:"px-2 py-4 w-full border border-gray-400 rounded-md shadow-md mt-4"},me={class:"mt-4"},fe={class:"mb-2"},ve={class:"mb-2"},be={class:"mt-4 flex flex-col items-end"},ze={__name:"Edit",props:{proyecto:{type:Object,default:()=>({})},tipos:{type:Object,default:()=>({})},eventos:{type:Object,default:()=>({})},parametros:{type:Array,default:()=>[]},subtipos:{type:Array,default:()=>[]},tipo_proyectos:{type:Array,default:()=>[]}},setup(p){const x=P("$swal");g(null);const b=g(!1),a=p;console.log(a);const E=a.proyecto.eventos!=="NA"?a.proyecto.eventos.split("|").map(i=>parseInt(i)):[],e=q({detalle:a.proyecto.detalle||"",descripcion:a.proyecto.descripcion||"",numero_tarjeton:a.proyecto.numero_tarjeton||"",tipo:a.proyecto.tipo||"",eventos:E||[],subtipo:a.proyecto.subtipo||"",tipo:a.proyecto.tipo,tipo_proyecto:a.proyecto.id_tipo||"",estado:a.proyecto.estado||""}),y=g(null),c=g(!1),A=[{url:"/proyectos",text:"Listado de proyectos"},{url:"",text:"Editar proyecto"}],N=()=>{var i;return e.subtipo==0?"por default":typeof e.subtipo=="object"?e.subtipo.detalle:(i=a.subtipos.find(o=>o.id===parseInt(e.subtipo)))==null?void 0:i.detalle},U=V(()=>y.value?a.subtipos.filter(i=>i.codParametro===y.value):[]);h(c,i=>{i||(e.subtipo=0)});const w=V(()=>{const o=e.descripcion.trim().length;return o>=500?b.value=!0:b.value=!1,o});h(w,()=>{e.descripcion=e.descripcion.trim()});const D=()=>{console.log(e),e.post(route("proyectoUpdate",{id:a.proyecto.id}),{forceFormData:!0,onError:()=>x({title:"Error en el registro",text:"Por favor verifique los datos ingresados",icon:"error"}),onSuccess:()=>x({title:"Registro Actualizado",text:"El proyecto se ha actualizado exitosamente",icon:"success"}).then(i=>{window.location.reload()})})};return(i,o)=>(f(),m(T,null,[s(t(B),{title:"Editar proyecto"}),s(z,{breadCrumbLinks:A},{header:v(()=>[u(" Editar Proyecto "+_(p.proyecto.id),1)]),default:v(()=>[r("div",H,[r("div",J,[o[10]||(o[10]=r("h3",{class:"mt-1 text-gray-500"},"Nuevo proyecto",-1)),r("div",K,[s(Z,{href:i.route("proyectos.index")},{default:v(()=>o[9]||(o[9]=[u(" Regresar ")])),_:1},8,["href"])])]),r("div",Q,[r("form",{onSubmit:C(D,["prevent"]),class:"grid sm:grid-cols-2 gap-4"},[r("div",W,[s(d,{for:"nombre",value:"Nombre del proyecto"}),s(S,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:t(e).detalle,"onUpdate:modelValue":o[0]||(o[0]=l=>t(e).detalle=l),required:"",autofocus:"",autocomplete:"nombre"},null,8,["modelValue"]),s(n,{class:"mt-2",message:t(e).errors.detalle},null,8,["message"])]),r("div",X,[s(d,{for:"numero_tarjeton",value:"Numero tarjeton"}),s(S,{id:"numero_tarjeton",type:"number",class:"mt-1 block w-full",modelValue:t(e).numero_tarjeton,"onUpdate:modelValue":o[1]||(o[1]=l=>t(e).numero_tarjeton=l),autocomplete:"numero_tarjeton"},null,8,["modelValue"]),s(n,{class:"mt-2",message:t(e).errors.numero_tarjeton},null,8,["message"])]),r("div",Y,[o[11]||(o[11]=r("p",{class:"text-gray-600 text-sm"}," Información adicional sobre el evento (max 500 caracteres) ",-1)),s(t(R),{modelValue:t(e).descripcion,"onUpdate:modelValue":o[2]||(o[2]=l=>t(e).descripcion=l),variant:"filled",autoResize:"",rows:"5",class:"mt-1 block w-full",required:"",autocomplete:"descripcion"},null,8,["modelValue"]),r("p",{class:j(["text-gray-500 text-sm mt-2",{"text-red-500":b.value}])},[u(_(w.value)+" caracteres ",1),b.value?(f(),m("span",ee,"Limite de caracteres superado")):k("",!0)],2),s(n,{class:"mt-2",message:t(e).errors.descripcion},null,8,["message"])]),r("div",oe,[r("div",te,[r("div",se,[s(d,{for:"tipos",value:"Tipos de usuarios"}),r("div",re,_(t(e).tipo),1),s(n,{class:"mt-2",message:t(e).errors.tipos},null,8,["message"])]),r("div",le,[s(d,{for:"evento",value:"Asignar evento"}),p.eventos.length?(f(),m("div",ae,[s(t(M),{id:"eventos",modelValue:t(e).eventos,"onUpdate:modelValue":o[3]||(o[3]=l=>t(e).eventos=l),display:"chip",options:p.eventos,"option-label":"nombre","option-value":"id",placeholder:"Seleccione los eventos",maxSelectedLabels:6,class:"w-full md:w-20rem"},null,8,["modelValue","options"])])):(f(),m("p",ie,[o[12]||(o[12]=u(" No hay eventos registrados, registrar uno nuevo ")),r("a",{href:i.route("eventos.create")},"Aquí",8,ne)])),s(n,{class:"mt-2",message:t(e).errors.eventos},null,8,["message"])])]),r("div",de,[r("div",pe,[r("div",ue,[s(d,{for:"tipo_user",value:"Subtipos - "+N()},null,8,["value"]),s(I,{onClick:o[4]||(o[4]=l=>c.value=!c.value),class:"items-center"},{default:v(()=>[u(_(c.value?"Cancelar":"Agregar subtipo"),1)]),_:1})]),c.value?(f(),m("div",ce,[r("div",null,[s(d,{for:"parametro",value:"Parámetro"}),s(t($),{id:"parametro",modelValue:y.value,"onUpdate:modelValue":o[5]||(o[5]=l=>y.value=l),options:p.parametros,"option-label":"detalle","option-value":"cod",placeholder:"Seleccione un parámetro",class:"w-full"},null,8,["modelValue","options"]),s(n,{class:"mt-2",message:t(e).errors.parametro},null,8,["message"])]),r("div",me,[s(d,{for:"parametroDetalle",value:"Subtipo"}),s(t(G),{id:"parametroDetalle",modelValue:t(e).subtipo,"onUpdate:modelValue":o[6]||(o[6]=l=>t(e).subtipo=l),options:U.value,filter:"",optionLabel:"detalle",placeholder:"Seleccione un subtipo",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),s(n,{class:"mt-2",message:t(e).errors.subtipo},null,8,["message"])])])):k("",!0)])])]),r("div",fe,[s(d,{for:"estado",value:"Estado"}),L(r("select",{id:"estado","onUpdate:modelValue":o[7]||(o[7]=l=>t(e).estado=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-auto p-2. px-4"},o[13]||(o[13]=[r("option",{value:"1"},"Activo",-1),r("option",{value:"0"},"Bloqueado",-1)]),512),[[O,t(e).estado]]),s(n,{class:"mt-2",message:t(e).errors.estado},null,8,["message"])]),r("div",ve,[s(d,{for:"tipo_proyecto",value:"Tipo Proyecto"}),s(t($),{id:"tipo_proyecto",modelValue:t(e).tipo_proyecto,"onUpdate:modelValue":o[8]||(o[8]=l=>t(e).tipo_proyecto=l),options:p.tipo_proyectos,"option-label":"nombre","option-value":"id",placeholder:"Seleccione el tipo de proyecto",class:"w-full"},null,8,["modelValue","options"]),s(n,{class:"mt-2",message:t(e).errors.tipo_proyecto},null,8,["message"])]),r("div",null,[r("div",be,[s(F,{class:j({"opacity-25":t(e).processing}),disabled:t(e).processing},{default:v(()=>o[14]||(o[14]=[u(" Editar proyecto ")])),_:1},8,["class","disabled"])])])],32)])])]),_:1})],64))}};export{ze as default};
