import{x as E,r as m,T as O,q as h,w as V,c,o as f,b as s,u as t,Z as P,d as v,e as r,j as d,B as q,n as k,p as j,t as _,f as B,v as D,F as T}from"./app-CFBaOztR.js";import{_ as R}from"./AuthenticatedLayout-BkDX1equ.js";import{_ as i}from"./InputError-LZoYQYeV.js";import{_ as n}from"./InputLabel-D_8ndV_G.js";import{_ as M}from"./PrimaryButton-Cg5xeUm9.js";import{_ as S}from"./TextInput-CIX2-XEX.js";import{_ as z}from"./SecondaryButton-BGKNG641.js";import{s as F}from"./index-B-fjq-x5.js";import{_ as I}from"./SecondaryLink-BQYzZIDb.js";import{s as G}from"./index-D9Aj7lN6.js";import{s as $}from"./index-CifNnZNz.js";import{s as H}from"./index-BfN7PsYt.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BreadCrumb-DLrX2ki6.js";import"./SecondaryButtonReturn-DoYj7S2Y.js";import"./XCircleIcon-XBs56EcL.js";import"./index-BZ05fJ44.js";import"./index-DusSCP9E.js";import"./index-DNRC6mx0.js";import"./index-CaF5Cztd.js";import"./index-9ysSbQnm.js";import"./index-DeAfrC9a.js";import"./index-B0V05YCE.js";const Z={class:"flex flex-col bg-white border shadow-sm rounded-xl w-full"},J={class:"bg-gray-100 border-b rounded-t-xl py-3 px-4 md:py-4 md:px-5 grid grid-cols-2 gap-4"},K={class:"text-right"},Q={class:"p-4 md:p-5"},W={class:"mb-2"},X={class:"mb-2"},Y={class:"col-span-2 mb-2"},ee={key:0},oe={class:"col-span-2 flex md:grid grid-cols-2 flex-wrap gap-4"},te={class:"w-auto"},se={class:"w-auto"},re={class:"card flex inline-flex justify-content-center border border-gray-400 rounded-md shadow-md py-1 px-2 mt-2 !text-gray-500"},le={class:"w-auto mt-4"},ae={key:0,class:"card flex justify-content-center"},ie={key:1,class:"text-xs text-gray-600"},ne=["href"],de={class:"w-auto"},ue={class:"w-full h-full mt-2"},pe={class:"flex flex-wrap items-center w-auto gap-4"},me={key:0,class:"px-2 py-4 w-full border border-gray-400 rounded-md shadow-md mt-4"},ce={class:"mt-4"},fe={class:"mb-2"},ve={class:"mb-2"},be={class:"mt-4 flex flex-col items-end"},Re={__name:"Add",props:{roles:{type:Object,default:()=>({})},tipos:{type:Object,default:()=>({})},eventos:{type:Object,default:()=>({})},parametros:{type:Array,default:()=>[]},subtipos:{type:Array,default:()=>[]},tipo_proyectos:{type:Array,default:()=>[]}},setup(u){const x=E("$swal"),N=m(null),y=u;console.log(y);const e=O({detalle:"",descripcion:"",numero_tarjeton:"",tipo:"Proyecto",eventos:[],subtipo:0,estado:1,tipo_proyecto:0});m([]);const b=m(null),p=m(!1),g=m(!1),A=[{url:route("proyectos.index"),text:"Listado de proyectos"},{url:"",text:"Nuevo proyecto"}],U=()=>{var a;return e.subtipo==0?"por default":typeof e.subtipo=="object"?e.subtipo.detalle:(a=y.subtipos.find(o=>o.id===parseInt(e.subtipo)))==null?void 0:a.detalle},C=h(()=>b.value?y.subtipos.filter(a=>a.codParametro===b.value):[]);V(p,a=>{a||(e.subtipo=0)});const w=h(()=>{const o=e.descripcion.trim().length;return o>=500?g.value=!0:g.value=!1,o});V(w,()=>{e.descripcion=e.descripcion.trim()});const L=()=>{console.log(e),e.subtipo=e.subtipo.id,e.tipo_proyecto=e.tipo_proyecto.id,e.post(route("proyectos.store"),{onSuccess:function(){x({title:"Registro Guardado",text:"El proyecto se ha almacenado exitosamente",icon:"success",didClose:()=>{e.reset(),N.value=null,window.location.href=route("proyectos.index")}})},onError:function(a){console.log(a),x({title:"Error",text:"Ha ocurrido un error al intentar guardar el proyecto",icon:"error"})}})};return(a,o)=>(f(),c(T,null,[s(t(P),{title:"Agregar proyecto"}),s(R,{breadCrumbLinks:A},{header:v(()=>o[9]||(o[9]=[d(" Nuevo proyecto ")])),default:v(()=>[r("div",Z,[r("div",J,[o[11]||(o[11]=r("h3",{class:"mt-1 text-gray-500"},"Nuevo proyecto",-1)),r("div",K,[s(I,{href:a.route("proyectos.index")},{default:v(()=>o[10]||(o[10]=[d(" Regresar ")])),_:1},8,["href"])])]),r("div",Q,[r("form",{onSubmit:q(L,["prevent"]),class:"grid sm:grid-cols-2 gap-4"},[r("div",W,[s(n,{for:"nombre",value:"Nombre del proyecto"}),s(S,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:t(e).detalle,"onUpdate:modelValue":o[0]||(o[0]=l=>t(e).detalle=l),required:"",autofocus:"",autocomplete:"nombre"},null,8,["modelValue"]),s(i,{class:"mt-2",message:t(e).errors.detalle},null,8,["message"])]),r("div",X,[s(n,{for:"numero_tarjeton",value:"Numero tarjeton"}),s(S,{id:"numero_tarjeton",type:"number",class:"mt-1 block w-full",modelValue:t(e).numero_tarjeton,"onUpdate:modelValue":o[1]||(o[1]=l=>t(e).numero_tarjeton=l),autocomplete:"numero_tarjeton"},null,8,["modelValue"]),s(i,{class:"mt-2",message:t(e).errors.numero_tarjeton},null,8,["message"])]),r("div",Y,[o[12]||(o[12]=r("p",{class:"text-gray-600 text-sm"}," Información adicional sobre el evento (max 500 caracteres) ",-1)),s(t(H),{modelValue:t(e).descripcion,"onUpdate:modelValue":o[2]||(o[2]=l=>t(e).descripcion=l),variant:"filled",autoResize:"",rows:"5",class:"mt-1 block w-full",required:"",autocomplete:"descripcion"},null,8,["modelValue"]),r("p",{class:k(["text-gray-500 text-sm mt-2",{"text-red-500":g.value}])},[d(_(w.value)+" caracteres ",1),g.value?(f(),c("span",ee,"Limite de caracteres superado")):j("",!0)],2),s(i,{class:"mt-2",message:t(e).errors.descripcion},null,8,["message"])]),r("div",oe,[r("div",te,[r("div",se,[s(n,{for:"tipos",value:"Tipos de usuarios"}),r("div",re,_(t(e).tipo),1),s(i,{class:"mt-2",message:t(e).errors.tipos},null,8,["message"])]),r("div",le,[s(n,{for:"evento",value:"Asignar evento"}),u.eventos.length?(f(),c("div",ae,[s(t(F),{id:"eventos",modelValue:t(e).eventos,"onUpdate:modelValue":o[3]||(o[3]=l=>t(e).eventos=l),display:"chip",options:u.eventos,"option-label":"nombre","option-value":"id",placeholder:"Seleccione los eventos",maxSelectedLabels:6,class:"w-full md:w-20rem"},null,8,["modelValue","options"])])):(f(),c("p",ie,[o[13]||(o[13]=d(" No hay eventos registrados, registrar uno nuevo ")),r("a",{href:a.route("eventos.create")},"Aquí",8,ne)])),s(i,{class:"mt-2",message:t(e).errors.eventos},null,8,["message"])])]),r("div",de,[r("div",ue,[r("div",pe,[s(n,{for:"tipo_user",value:"Subtipos - "+U()},null,8,["value"]),s(z,{onClick:o[4]||(o[4]=l=>p.value=!p.value),class:"items-center"},{default:v(()=>[d(_(p.value?"Cancelar":"Agregar subtipo"),1)]),_:1})]),p.value?(f(),c("div",me,[r("div",null,[s(n,{for:"parametro",value:"Parámetro"}),s(t(G),{id:"parametro",modelValue:b.value,"onUpdate:modelValue":o[5]||(o[5]=l=>b.value=l),options:u.parametros,"option-label":"detalle","option-value":"cod",placeholder:"Seleccione un parámetro",class:"w-full"},null,8,["modelValue","options"]),s(i,{class:"mt-2",message:t(e).errors.parametro},null,8,["message"])]),r("div",ce,[s(n,{for:"parametroDetalle",value:"Subtipo"}),s(t($),{id:"parametroDetalle",modelValue:t(e).subtipo,"onUpdate:modelValue":o[6]||(o[6]=l=>t(e).subtipo=l),options:C.value,filter:"",optionLabel:"detalle",placeholder:"Seleccione un subtipo",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),s(i,{class:"mt-2",message:t(e).errors.subtipo},null,8,["message"])])])):j("",!0)])])]),r("div",fe,[s(n,{for:"estado",value:"Estado"}),B(r("select",{id:"estado","onUpdate:modelValue":o[7]||(o[7]=l=>t(e).estado=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-auto p-2. px-4"},o[14]||(o[14]=[r("option",{value:"1"},"Activo",-1),r("option",{value:"0"},"Bloqueado",-1)]),512),[[D,t(e).estado]]),s(i,{class:"mt-2",message:t(e).errors.estado},null,8,["message"])]),r("div",ve,[s(n,{for:"tipo_proyecto",value:"Tipo Proyecto"}),s(t($),{id:"tipo_proyecto",modelValue:t(e).tipo_proyecto,"onUpdate:modelValue":o[8]||(o[8]=l=>t(e).tipo_proyecto=l),options:u.tipo_proyectos,filter:"",optionLabel:"nombre",placeholder:"Seleccione el tipo de proyecto",ckeckmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),s(i,{class:"mt-2",message:t(e).errors.tipo_proyecto},null,8,["message"])]),r("div",null,[r("div",be,[s(M,{class:k({"opacity-25":t(e).processing}),disabled:t(e).processing},{default:v(()=>o[15]||(o[15]=[d(" Registrar proyecto ")])),_:1},8,["class","disabled"])])])],32)])])]),_:1})],64))}};export{Re as default};
