import{r as p,T as N,c as u,o as m,a as s,u as r,Z as R,w as c,b as a,d as v,p as M,n as b,m as h,F as U}from"./app-BOWQi3vA.js";import{_ as A}from"./AuthenticatedLayout-BVHppbkJ.js";import{_ as f}from"./InputError-KxQZraxw.js";import{_ as x}from"./InputLabel-DJLswjCw.js";import{_ as B}from"./PrimaryButton-B0_jN4sU.js";import{_}from"./TextInput-DpLm7118.js";import{_ as T}from"./SecondaryLink-teDPN0H8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"max-w-2xl mx-auto bg-white border shadow-sm rounded-xl mt-8"},S={class:"bg-gray-100 border-b rounded-t-xl py-3 px-4 md:py-4 md:px-5 flex justify-between items-center"},j={class:"p-4 md:p-5"},q={class:"flex gap-4 mb-2"},P={key:0},X={key:0,class:"mt-2"},Y=["src"],z={key:1},E={key:0,class:"mt-2"},W=["src"],Z={class:"mt-4 flex flex-col items-end"},te={__name:"Add",setup(G){const n=p(null),d=p("imagen"),i=p(null);let g=!1;const t=N({nombre:"",cargo:"",firma:null}),k=o=>{const e=o.target.files[0];if(t.firma=e,e){const l=new FileReader;l.onload=D=>{n.value=D.target.result},l.readAsDataURL(e)}else n.value=null},C=o=>{g=!0;const e=i.value.getContext("2d");e.beginPath(),e.moveTo(o.offsetX,o.offsetY)},V=o=>{if(!g)return;const e=i.value.getContext("2d");e.lineTo(o.offsetX,o.offsetY),e.strokeStyle="#222",e.lineWidth=2,e.stroke()},w=()=>{g=!1},y=()=>{i.value.getContext("2d").clearRect(0,0,i.value.width,i.value.height),n.value=null,t.firma=null},F=()=>{i.value.toBlob(o=>{t.firma=new File([o],"firma.webp",{type:"image/webp"});const e=new FileReader;e.onload=l=>{n.value=l.target.result},e.readAsDataURL(t.firma)},"image/webp")},$=()=>{t.post(route("delegado.store"),{forceFormData:!0,onSuccess:()=>{t.reset(),n.value=null,y()}})};return(o,e)=>(m(),u(U,null,[s(r(R),{title:"Agregar delegado"}),s(A,null,{header:c(()=>e[4]||(e[4]=[v(" Nuevo delegado ")])),default:c(()=>[a("div",L,[a("div",S,[e[6]||(e[6]=a("h3",{class:"text-gray-500"},"Nuevo delegado",-1)),s(T,{href:o.route("delegado.index")},{default:c(()=>e[5]||(e[5]=[v(" Regresar ")])),_:1},8,["href"])]),a("div",j,[a("form",{onSubmit:M($,["prevent"]),enctype:"multipart/form-data",class:"grid gap-4"},[a("div",null,[s(x,{for:"nombre",value:"Nombre"}),s(_,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:r(t).nombre,"onUpdate:modelValue":e[0]||(e[0]=l=>r(t).nombre=l),required:"",autofocus:"",autocomplete:"off"},null,8,["modelValue"]),s(f,{class:"mt-2",message:r(t).errors.nombre},null,8,["message"])]),a("div",null,[s(x,{for:"cargo",value:"Cargo"}),s(_,{id:"cargo",type:"text",class:"mt-1 block w-full",modelValue:r(t).cargo,"onUpdate:modelValue":e[1]||(e[1]=l=>r(t).cargo=l),required:"",autocomplete:"off"},null,8,["modelValue"]),s(f,{class:"mt-2",message:r(t).errors.cargo},null,8,["message"])]),a("div",null,[s(x,{for:"firma",value:"Firma"}),a("div",q,[a("button",{type:"button",class:b(["px-2 py-1 rounded",d.value==="imagen"?"bg-blue-600 text-white":"bg-gray-200"]),onClick:e[2]||(e[2]=l=>d.value="imagen")}," Cargar imagen ",2),a("button",{type:"button",class:b(["px-2 py-1 rounded",d.value==="canvas"?"bg-blue-600 text-white":"bg-gray-200"]),onClick:e[3]||(e[3]=l=>d.value="canvas")}," Dibujar firma ",2)]),d.value==="imagen"?(m(),u("div",P,[s(_,{id:"firma",type:"file",class:"mt-1 block w-full",accept:"image/*",onChange:k}),s(f,{class:"mt-2",message:r(t).errors.firma},null,8,["message"]),n.value?(m(),u("div",X,[a("img",{src:n.value,alt:"Vista previa de la firma",class:"h-24 border rounded"},null,8,Y)])):h("",!0)])):(m(),u("div",z,[a("canvas",{ref_key:"canvas",ref:i,width:"200",height:"100",class:"border border-gray-400 rounded-md bg-white cursor-crosshair",onMousedown:C,onMousemove:V,onMouseup:w,onMouseleave:w},null,544),a("div",{class:"flex gap-2 mt-1"},[a("button",{type:"button",onClick:y,class:"text-xs text-blue-600 underline"}," Limpiar "),a("button",{type:"button",onClick:F,class:"text-xs text-green-600 underline"}," Usar firma ")]),s(f,{class:"mt-2",message:r(t).errors.firma},null,8,["message"]),n.value?(m(),u("div",E,[a("img",{src:n.value,alt:"Vista previa de la firma",class:"h-24 border rounded"},null,8,W)])):h("",!0)]))]),a("div",Z,[s(B,{class:b({"opacity-25":r(t).processing}),disabled:r(t).processing},{default:c(()=>e[7]||(e[7]=[v(" Registrar Delegado ")])),_:1},8,["class","disabled"])])],32)])])]),_:1})],64))}};export{te as default};
