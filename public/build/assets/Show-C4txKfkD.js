import{M as W,T as _,r as k,e as O,c as a,o as l,a as m,u as f,Z as tt,w as b,b as t,d as r,t as s,m as et,h as ot,v as nt,F as q,i as st}from"./app-Bf3msOSc.js";import{_ as it}from"./AuthenticatedLayout-DfRbJ4UA.js";import{_ as at}from"./SecondaryButton-4IjD9_10.js";import{_ as lt}from"./PrimaryButton-vaD-V7Mr.js";import{c as rt}from"./comunas-CgAZlVl9.js";import{N as dt}from"./vue-easy-lightbox.esm.min-eV6i7QFb.js";import{_ as ct}from"./Modal-DzO-HqWh.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ut={class:"p-4"},vt={class:"bg-white shadow-md rounded-lg p-6 mb-6"},mt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ft={class:"bg-white shadow-md rounded-lg p-6 flex flex-wrap gap-8 items-start"},bt={class:"flex-shrink-0 flex flex-col items-center"},gt=["src"],xt={key:1,class:"text-gray-400 italic"},pt={class:"flex-shrink-0 flex flex-col items-center"},ht=["src"],wt={key:1,class:"text-gray-400 italic"},yt={class:"flex-shrink-0 flex flex-col items-center"},kt=["src"],$t={key:1,class:"text-gray-400 italic"},Ft={class:"flex-shrink-0 flex flex-col items-center"},Nt=["src"],Dt={key:1,class:"text-gray-400 italic"},St={class:"bg-white shadow-md rounded-lg p-6 mt-6 flex flex-col md:flex-row gap-8 items-start"},Ct={class:"w-auto"},jt={class:""},Rt={key:0,class:""},At={class:"flex flex-col gap-2 w-full md:w-1/3"},Et={class:"flex flex-col md:flex-row gap-4 mt-8 justify-center items-center h-full"},Pt={class:"flex justify-between items-center bg-azul text-white px-4 py-4"},zt={class:"px-6 py-4"},It=["src"],Vt={class:"text-gray-800 font-medium"},Lt={class:"text-gray-800 font-medium"},Mt={class:"text-gray-800 font-medium"},Tt={class:"text-gray-800 font-medium"},Bt={class:"text-gray-800 font-medium"},Ut={class:"flex justify-end items-center gap-2 mt-6"},Gt=["disabled"],Ot=["disabled"],D=5,Wt={__name:"Show",props:{votante:{type:Object,required:!0},duplicados:{type:Object}},setup(o){const g=W("$swal"),x=o;console.log(x);const c=_({id:x.votante.id,motivo:""}),S=k(""),$=k(!1),F=k(!1),u=k(1),C=O(()=>Math.ceil(x.duplicados.length/D)),H=O(()=>{const i=(u.value-1)*D;return x.duplicados.slice(i,i+D)}),p=i=>{S.value=i,$.value=!0},X=()=>{$.value=!1},Y=i=>{const e=new Date(i),v=e.getFullYear(),w=String(e.getMonth()+1).padStart(2,"0"),y=String(e.getDate()).padStart(2,"0");return`${v}-${w}-${y}`},Z=[{url:route("gestion_registros.index"),text:"Gestion de registros"},{url:"",text:"Detalle registro"}],N=i=>`/storage/uploads/fotos/${i}`,h=i=>`/storage/uploads/documentos/${i}`,j=i=>`/storage/uploads/firmas/${i}`,J=i=>{var e;return console.log(i),(e=rt.find(v=>v.value==i))==null?void 0:e.label},K=()=>{c.post(route("aprobarRegistro"),{onSuccess:function(){g({title:"Registro Aprobado",text:"El registro ha sido aprobado exitosamente",icon:"success"}).then(()=>{window.location.href=route("gestion_registros.index")})},onError:function(){g({title:"Error al aprobar registro",text:"Error al intentar aprobar este registro, por favor vuelve a intentar",icon:"error"})}})},Q=()=>{c.post(route("rechazarRegistro"),{onSuccess:function(){g({title:"Registro Rechazado",text:"El registro ha sido rechazado exitosamente",icon:"success"}).then(()=>{window.location.href=route("gestion_registros.index")})},onError:function(){g({title:"Error al rechazar registro",text:"Error al intentar rechazar este registro, por favor vuelve a intentar",icon:"error"})}})};return(i,e)=>(l(),a(q,null,[m(f(tt),{title:"Validación del votante"}),m(it,{breadCrumbLinks:Z},{header:b(()=>e[9]||(e[9]=[t("div",{class:"flex justify-between items-center"},[t("h1",{class:"text-2xl font-bold"},"Detalle del Registro")],-1)])),default:b(()=>{var v,w,y,R,A,E,P,z,I,V,L,M,T,B,U,G;return[t("div",ut,[t("div",vt,[e[19]||(e[19]=t("h2",{class:"text-lg font-bold mb-4 text-blue-900"},"Datos del votante",-1)),t("div",mt,[t("div",null,[e[10]||(e[10]=t("b",null,"Nombre:",-1)),r(" "+s(((v=o.votante.votante)==null?void 0:v.nombre)||"Sin información"),1)]),t("div",null,[e[11]||(e[11]=t("b",null,"Tipo de documento:",-1)),r(" "+s(((w=o.votante.votante)==null?void 0:w.tipo_documento)||"N/A"),1)]),t("div",null,[e[12]||(e[12]=t("b",null,"Número de documento:",-1)),r(" "+s(((y=o.votante.votante)==null?void 0:y.identificacion)||"N/A"),1)]),t("div",null,[e[13]||(e[13]=t("b",null,"Fecha expedición documento:",-1)),r(" "+s(((R=o.votante.votante)==null?void 0:R.fecha_expedicion)||"N/A"),1)]),t("div",null,[e[14]||(e[14]=t("b",null,"Fecha de nacimiento:",-1)),r(" "+s(((A=o.votante.votante)==null?void 0:A.nacimiento)||"N/A"),1)]),t("div",null,[e[15]||(e[15]=t("b",null,"Genero:",-1)),r(" "+s(((E=o.votante.votante)==null?void 0:E.genero)||"N/A"),1)]),t("div",null,[e[16]||(e[16]=t("b",null,"Comuna:",-1)),r(" "+s(J(o.votante.subtipo)||"N/A"),1)]),t("div",null,[e[17]||(e[17]=t("b",null,"Barrio:",-1)),r(" "+s(((P=o.votante.votante)==null?void 0:P.barrio)||"N/A"),1)]),t("div",null,[e[18]||(e[18]=t("b",null,"Dirección:",-1)),r(" "+s(((z=o.votante.votante)==null?void 0:z.direccion)||"N/A"),1)])])]),t("div",ft,[t("div",bt,[e[20]||(e[20]=t("h2",null,"Fotografía",-1)),(I=o.votante.votante)!=null&&I.user.biometrico?(l(),a("img",{key:0,src:N((V=o.votante.votante)==null?void 0:V.user.biometrico.photo),alt:"Foto del votante",onClick:e[0]||(e[0]=n=>{var d;return p(N((d=o.votante.votante)==null?void 0:d.user.biometrico.photo))}),class:"w-64 h-64 cursor-pointer object-cover rounded-lg border shadow"},null,8,gt)):(l(),a("span",xt,"Sin foto"))]),t("div",pt,[e[21]||(e[21]=t("h2",null,"frontal",-1)),(L=o.votante.votante)!=null&&L.user.biometrico?(l(),a("img",{key:0,src:h((M=o.votante.votante)==null?void 0:M.user.biometrico.cedula_front),alt:"Foto del votante",onClick:e[1]||(e[1]=n=>{var d;return p(h((d=o.votante.votante)==null?void 0:d.user.biometrico.cedula_front))}),class:"w-full h-64 cursor-pointer object-cover rounded-lg border shadow"},null,8,ht)):(l(),a("span",wt,"Sin foto"))]),t("div",yt,[e[22]||(e[22]=t("h2",null,"Posterior",-1)),(T=o.votante.votante)!=null&&T.user.biometrico?(l(),a("img",{key:0,src:h((B=o.votante.votante)==null?void 0:B.user.biometrico.cedula_back),alt:"Foto del votante",onClick:e[2]||(e[2]=n=>{var d;return p(h((d=o.votante.votante)==null?void 0:d.user.biometrico.cedula_back))}),class:"w-full h-64 cursor-pointer object-cover rounded-lg border shadow"},null,8,kt)):(l(),a("span",$t,"Sin foto"))]),t("div",Ft,[e[23]||(e[23]=t("h2",null,"Firma",-1)),(U=o.votante.votante)!=null&&U.user.biometrico?(l(),a("img",{key:0,src:j((G=o.votante.votante)==null?void 0:G.user.biometrico.firma),alt:"Foto del votante",onClick:e[3]||(e[3]=n=>{var d;return p(j((d=o.votante.votante)==null?void 0:d.user.biometrico.firma))}),class:"w-full h-64 cursor-pointer object-cover rounded-lg border shadow"},null,8,Nt)):(l(),a("span",Dt,"Sin foto"))])]),t("div",St,[t("div",Ct,[t("div",jt,[e[24]||(e[24]=t("b",null,"Validación:",-1)),r(" "+s(o.votante.validaciones),1)]),o.duplicados.length>0?(l(),a("div",Rt,[t("button",{onClick:e[4]||(e[4]=n=>F.value=!0),class:"bg-secondary text-white hover:scale-105 hover:bg-primary p-2 cursor-pointer rounded-md mt-2"}," Ver duplicados ")])):et("",!0)]),t("div",At,[e[26]||(e[26]=t("b",null,"Motivo de rechazo:",-1)),ot(t("select",{"onUpdate:modelValue":e[5]||(e[5]=n=>f(c).motivo=n),class:"border rounded p-2"},e[25]||(e[25]=[t("option",{value:"",disabled:""},"Seleccione un motivo",-1),t("option",{value:"aprobado"},"No hay motivos (aprobado)",-1),t("option",{value:"Documentos incorrectos"}," Documentos incorrectos ",-1),t("option",{value:"Identidad no validada"},"Identidad no validada",-1),t("option",{value:"Parte frontal del documento poco visible"}," Parte frontal del documento poco visible ",-1),t("option",{value:"Parte Trasera del documento poco visible"}," Parte Trasera del documento poco visible ",-1),t("option",{value:"Firma poco visible"},"Firma poco visible",-1),t("option",{value:"Firma diferente a la presentada en el documento de identificación"}," Firma diferente a la presentada en el documento de identificación ",-1),t("option",{value:"Registro duplicado"},"Registro duplicado",-1),t("option",{value:"Información errónea, en comparación con la documentación"}," Información errónea, en comparación con la documentación ",-1),t("option",{value:"Dirección diferente a la comuna"}," Dirección diferente a la comuna ",-1)]),512),[[nt,f(c).motivo]])])]),t("div",Et,[m(lt,{onClick:K,class:"flex h-full items-center",disabled:f(c).processing},{default:b(()=>e[27]||(e[27]=[r(" Aprobar ")])),_:1},8,["disabled"]),m(at,{onClick:Q,class:"!bg-red-500 text-white",disabled:f(c).processing},{default:b(()=>e[28]||(e[28]=[r(" Rechazar ")])),_:1},8,["disabled"])]),m(f(dt),{visible:$.value,imgs:[S.value],onHide:X},null,8,["visible","imgs"])]),m(ct,{show:F.value,closeable:!0},{default:b(()=>[t("div",Pt,[e[29]||(e[29]=t("h2",{class:"text-2xl font-semibold text-center"}," Registros duplicados o similares ",-1)),t("button",{onClick:e[6]||(e[6]=n=>F.value=!1),class:"text-white text-xl hover:text-gray-300"}," X ")]),t("div",zt,[(l(!0),a(q,null,st(H.value,n=>(l(),a("div",{key:n.id,class:"flex gap-4 items-center mb-4 border-b pb-2"},[t("img",{src:N(n.photo),alt:"Foto",class:"w-36 h-full object-cover rounded"},null,8,It),t("div",null,[t("p",Vt,"ID: "+s(n.user.votantes.hash_votantes[0].id),1),t("p",Lt,"Nombre: "+s(n.user.votantes.nombre),1),t("p",Mt,"Identificación: "+s(n.user.votantes.identificacion),1),t("p",Tt,"Creación: "+s(Y(n.user.votantes.hash_votantes[0].created_at)),1),t("p",Bt,"Estado: "+s(n.estado),1)])]))),128)),t("div",Ut,[t("button",{class:"px-3 py-1 bg-gray-200 text-sm rounded hover:bg-gray-300",disabled:u.value===1,onClick:e[7]||(e[7]=n=>u.value--)}," Anterior ",8,Gt),t("span",null,"Página "+s(u.value)+" de "+s(C.value),1),t("button",{class:"px-3 py-1 bg-gray-200 text-sm rounded hover:bg-gray-300",disabled:u.value===C.value,onClick:e[8]||(e[8]=n=>u.value++)}," Siguiente ",8,Ot)])])]),_:1},8,["show"])]}),_:1})],64))}};export{Wt as default};
