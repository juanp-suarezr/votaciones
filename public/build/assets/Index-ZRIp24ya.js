import{x as C,r as N,T as I,Q as A,w as $,s as F,c as i,o as r,b as u,u as f,Z as R,d as m,e as t,F as g,k as y,t as n,j as S,z as V,N as j}from"./app-TJQZWMAm.js";import{_ as D}from"./AuthenticatedLayout-BalrvRu5.js";import{_ as b}from"./Pagination-BnqUYAQK.js";import{c as E}from"./comunas_completas-Gg-gMHNz.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BreadCrumb-BfUiGVSh.js";import"./SecondaryButtonReturn-Co0Np618.js";import"./index-CtihQ_d1.js";import"./index-DhR7CXGv.js";import"./index-DgnBo_H7.js";import"./PrimaryButton-DfyFLSVS.js";import"./XCircleIcon-C5PjPIYh.js";const L={class:"flex items-center gap-4 mb-8"},T={class:"flex flex-col"},B=["disabled"],M={key:0},z={key:1},G={class:"mb-10"},H={class:"overflow-x-auto"},Q={class:"min-w-full divide-y divide-gray-200 rounded-lg overflow-hidden"},Z={class:"px-4 py-2 text-sm text-gray-900"},q={class:"px-4 py-2 text-sm text-gray-700"},J={class:"px-4 py-2 text-sm text-gray-700"},K={class:"px-4 py-2 text-sm text-gray-700"},O={class:"flex flex-col items-center border-t bg-white/40 mt-1 px-5 py-3 xs:flex-row xs:justify-between"},P={class:"overflow-x-auto"},U={class:"min-w-full divide-y divide-gray-200 rounded-lg overflow-hidden"},W={class:"px-4 py-2 text-sm text-gray-900"},X={class:"px-4 py-2 text-sm text-gray-900"},Y={class:"px-4 py-2 text-sm text-gray-900"},tt={class:"px-4 py-2 text-sm text-gray-900"},et={class:"px-4 py-2 text-sm text-gray-700"},st={class:"px-4 py-2 text-sm text-gray-700"},ot={class:"px-4 py-2 text-sm text-gray-700"},nt={class:"flex flex-col items-center border-t bg-white/40 mt-1 px-5 py-3 xs:flex-row xs:justify-between"},ht={__name:"Index",props:{votantes_fisicos:{type:Array,default:()=>[]},votos_anulados:{type:Array,default:()=>[]},numRegistrosInsertados:{type:Number,default:void 0},numInconsistencias:{type:Number,default:void 0}},setup(l){const d=C("$swal");console.log(l);const h=[{url:"",text:"Cargue de votantes físicos"}],c=N(null),a=I({file:null}),v=o=>{c.value=o.target.files[0],a.file=c.value},_=o=>{var e;return console.log(o),(e=E.find(s=>s.value==o))==null?void 0:e.label},w=()=>{if(!a.file)return;const o=new FormData;o.append("file",a.file),V.post(route("votantesFisicos.cargueMasivo"),o,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{const s=e.data.numRegistrosInsertados??0,p=e.data.numInconsistencias??0;d({title:"Registros Cargados",text:`Se han importado ${s} nuevos registros correctamente y se ha generado ${p} inconsistencias`,icon:"success"}),a.reset(),c.value=null,j.get(route("votantesFisicos.index"),{},{preserveState:!1})}).catch(e=>{console.error(e),d.fire("Error","Hubo un problema al cargar el archivo.","error")})},k=o=>o?new Date(o).toLocaleString():"",x=A();return $(()=>({inserted:x.props.value.numRegistrosInsertados,inconsistencias:x.props.value.numInconsistencias}),o=>{const{inserted:e,inconsistencias:s}=o;(e!==void 0||s!==void 0)&&(d({title:"Registros Cargados",text:`Se han importado ${e??0} nuevos registros correctamente y se ha generado ${s??0} inconsistencias`,icon:"success"}),a.reset(),c.value=null)}),F(()=>{const o=x.props.value.numRegistrosInsertados||void 0,e=x.props.value.numInconsistencias||void 0;(o!==void 0||e!==void 0)&&(d({title:"Registros Cargados",text:`Se han importado ${o??0} nuevos registros correctamente y se ha generado ${e??0} inconsistencias`,icon:"success"}),a.reset(),c.value=null)}),(o,e)=>(r(),i(g,null,[u(f(R),{title:"Cargue de votantes físicos"}),u(D,{breadCrumbLinks:h},{header:m(()=>e[0]||(e[0]=[S(" Cargue de votantes físicos ")])),default:m(()=>[t("div",L,[t("div",T,[e[1]||(e[1]=t("label",{for:"carga-masiva",class:"text-xs font-semibold mb-1"},"Carga masiva de votantes físicos",-1)),t("input",{id:"carga-masiva",type:"file",class:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none",onChange:v,accept:".csv,.xlsx"},null,32),t("button",{class:"mt-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:!f(a).file||f(a).processing,onClick:w},[f(a).processing?(r(),i("span",M,"Cargando...")):(r(),i("span",z,"Enviar archivo"))],8,B)])]),t("div",G,[e[3]||(e[3]=t("h2",{class:"text-lg font-bold mb-2"},"Votantes físicos",-1)),t("div",H,[t("table",Q,[e[2]||(e[2]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Nombre "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Identificación "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Género "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Fecha de creación ")])],-1)),t("tbody",null,[(r(!0),i(g,null,y(l.votantes_fisicos.data,s=>(r(),i("tr",{key:s.id,class:"bg-white hover:bg-gray-50"},[t("td",Z,n(s.votante.nombre||"N/A"),1),t("td",q,n(s.votante.identificacion),1),t("td",J,n(s.votante.genero||"N/A"),1),t("td",K,n(k(s.created_at)),1)]))),128))])])]),t("div",O,[u(b,{links:l.votantes_fisicos.links},null,8,["links"])])]),t("div",null,[e[5]||(e[5]=t("h2",{class:"text-lg font-bold mb-2"},"Votos anulados",-1)),t("div",P,[t("table",U,[e[4]||(e[4]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Nombre de votante "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Identificación de votante "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Comuna/Corregimiento "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Tipo "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Cantidad de votos anulados "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Fecha de creación "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Evento ")])],-1)),t("tbody",null,[(r(!0),i(g,null,y(l.votos_anulados.data,s=>(r(),i("tr",{key:s.id,class:"bg-white hover:bg-gray-50"},[t("td",W,n(s.votante.nombre||"N/A"),1),t("td",X,n(s.votante.identificacion||"N/A"),1),t("td",Y,n(_(s.votante.comuna)||"N/A"),1),t("td",tt,n(s.tipo||"N/A"),1),t("td",et,n(s.cantidad_anulada),1),t("td",st,n(s.created_at),1),t("td",ot,n(s.evento.nombre),1)]))),128))])])]),t("div",nt,[u(b,{links:l.votos_anulados.links},null,8,["links"])])])]),_:1})],64))}};export{ht as default};
