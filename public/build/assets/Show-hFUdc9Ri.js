import{x as _,T as tt,r as k,c as O,a,b as l,d as b,u as c,Z as et,e as f,f as e,m as q,j as r,t as n,g as ot,v as nt,F as H,h as st}from"./app-DOYI1U6D.js";import{_ as it}from"./AuthenticatedLayout-BRW6EkAx.js";import{_ as at}from"./SecondaryButton-lsjiEQre.js";import{_ as lt}from"./PrimaryButton-ChPurnI9.js";import{c as rt}from"./comunas-CgAZlVl9.js";import{N as dt}from"./vue-easy-lightbox.esm.min-CrZMC8dN.js";import{_ as ut}from"./Modal-B7eN-I1P.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ct={class:"p-4"},vt={class:"bg-white shadow-md rounded-lg p-6 mb-6"},mt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},bt={key:0},ft={class:"bg-white shadow-md rounded-lg p-6 flex flex-wrap gap-8 items-start"},gt={class:"flex-shrink-0 flex flex-col items-center"},xt=["src"],pt={key:1,class:"text-gray-400 italic"},ht={class:"flex-shrink-0 flex flex-col items-center"},wt=["src"],yt={key:1,class:"text-gray-400 italic"},kt={class:"flex-shrink-0 flex flex-col items-center"},$t=["src"],Nt={key:1,class:"text-gray-400 italic"},Ft={class:"flex-shrink-0 flex flex-col items-center"},Dt=["src"],St={key:1,class:"text-gray-400 italic"},Ct={class:"bg-white shadow-md rounded-lg p-6 mt-6 flex flex-col md:flex-row gap-8 items-start"},jt={class:"w-auto"},At={class:""},Rt={key:0,class:""},zt={class:"flex flex-col gap-2 w-full md:w-1/3"},Et={class:"flex flex-col md:flex-row gap-4 mt-8 justify-center items-center h-full"},Pt={class:"flex justify-between items-center bg-azul text-white px-4 py-4"},It={class:"px-6 py-4"},Vt=["src"],Lt={class:"text-gray-800 font-medium"},Tt={class:"text-gray-800 font-medium"},Bt={class:"text-gray-800 font-medium"},Mt={class:"text-gray-800 font-medium"},Ut={class:"text-gray-800 font-medium"},Gt={class:"flex justify-end items-center gap-2 mt-6"},Ot=["disabled"],qt=["disabled"],D=5,_t={__name:"Show",props:{votante:{type:Object,required:!0},duplicados:{type:Object}},setup(o){const g=_("$swal"),x=o;console.log(x);const u=tt({id:x.votante.id,motivo:""}),S=k(""),$=k(!1),N=k(!1),v=k(1),C=O(()=>Math.ceil(x.duplicados.length/D)),X=O(()=>{const i=(v.value-1)*D;return x.duplicados.slice(i,i+D)}),p=i=>{S.value=i,$.value=!0},Y=()=>{$.value=!1},Z=i=>{const t=new Date(i),m=t.getFullYear(),w=String(t.getMonth()+1).padStart(2,"0"),y=String(t.getDate()).padStart(2,"0");return`${m}-${w}-${y}`},J=[{url:route("gestion_registros.index"),text:"Gestion de registros"},{url:"",text:"Detalle registro"}],F=i=>`/storage/uploads/fotos/${i}`,h=i=>`/storage/uploads/documentos/${i}`,j=i=>`/storage/uploads/firmas/${i}`,K=i=>{var t;return console.log(i),(t=rt.find(m=>m.value==i))==null?void 0:t.label},Q=()=>{u.post(route("aprobarRegistro"),{onSuccess:function(){g({title:"Registro Aprobado",text:"El registro ha sido aprobado exitosamente",icon:"success"}).then(()=>{window.location.href=route("gestion_registros.index")})},onError:function(){g({title:"Error al aprobar registro",text:"Error al intentar aprobar este registro, por favor vuelve a intentar",icon:"error"})}})},W=()=>{u.post(route("rechazarRegistro"),{onSuccess:function(){g({title:"Registro Rechazado",text:"El registro ha sido rechazado exitosamente",icon:"success"}).then(()=>{window.location.href=route("gestion_registros.index")})},onError:function(){g({title:"Error al rechazar registro",text:"Error al intentar rechazar este registro, por favor vuelve a intentar",icon:"error"})}})};return(i,t)=>(l(),a(H,null,[b(c(et),{title:"Validación del votante"}),b(it,{breadCrumbLinks:J},{header:f(()=>t[9]||(t[9]=[e("div",{class:"flex justify-between items-center"},[e("h1",{class:"text-2xl font-bold"},"Detalle del Registro")],-1)])),default:f(()=>{var m,w,y,A,R,z,E,P,I,V,L,T,B,M,U,G;return[e("div",ct,[e("div",vt,[t[20]||(t[20]=e("h2",{class:"text-lg font-bold mb-4 text-blue-900"},"Datos del votante",-1)),e("div",mt,[e("div",null,[t[10]||(t[10]=e("b",null,"Nombre:",-1)),r(" "+n(((m=o.votante.votante)==null?void 0:m.nombre)||"Sin información"),1)]),e("div",null,[t[11]||(t[11]=e("b",null,"Tipo de documento:",-1)),r(" "+n(((w=o.votante.votante)==null?void 0:w.tipo_documento)||"N/A"),1)]),e("div",null,[t[12]||(t[12]=e("b",null,"Número de documento:",-1)),r(" "+n(((y=o.votante.votante)==null?void 0:y.identificacion)||"N/A"),1)]),e("div",null,[t[13]||(t[13]=e("b",null,"Fecha expedición documento:",-1)),r(" "+n(((A=o.votante.votante)==null?void 0:A.fecha_expedicion)||"N/A"),1)]),e("div",null,[t[14]||(t[14]=e("b",null,"Fecha de nacimiento:",-1)),r(" "+n(((R=o.votante.votante)==null?void 0:R.nacimiento)||"N/A"),1)]),e("div",null,[t[15]||(t[15]=e("b",null,"Genero:",-1)),r(" "+n(((z=o.votante.votante)==null?void 0:z.genero)||"N/A"),1)]),e("div",null,[t[16]||(t[16]=e("b",null,"Comuna:",-1)),r(" "+n(K(o.votante.subtipo)||"N/A"),1)]),e("div",null,[t[17]||(t[17]=e("b",null,"Barrio:",-1)),r(" "+n(((E=o.votante.votante)==null?void 0:E.barrio)||"N/A"),1)]),e("div",null,[t[18]||(t[18]=e("b",null,"Dirección:",-1)),r(" "+n(((P=o.votante.votante)==null?void 0:P.direccion)||"N/A"),1)]),o.votante.intentos>0?(l(),a("div",bt,[t[19]||(t[19]=e("b",null,"motivo rechazo:",-1)),r(" "+n(o.votante.motivo||"N/A"),1)])):q("",!0)])]),e("div",ft,[e("div",gt,[t[21]||(t[21]=e("h2",null,"Fotografía",-1)),(I=o.votante.votante)!=null&&I.user.biometrico?(l(),a("img",{key:0,src:F((V=o.votante.votante)==null?void 0:V.user.biometrico.photo),alt:"Foto del votante",onClick:t[0]||(t[0]=s=>{var d;return p(F((d=o.votante.votante)==null?void 0:d.user.biometrico.photo))}),class:"w-64 h-64 cursor-pointer object-cover rounded-lg border shadow"},null,8,xt)):(l(),a("span",pt,"Sin foto"))]),e("div",ht,[t[22]||(t[22]=e("h2",null,"frontal",-1)),(L=o.votante.votante)!=null&&L.user.biometrico?(l(),a("img",{key:0,src:h((T=o.votante.votante)==null?void 0:T.user.biometrico.cedula_front),alt:"Foto del votante",onClick:t[1]||(t[1]=s=>{var d;return p(h((d=o.votante.votante)==null?void 0:d.user.biometrico.cedula_front))}),class:"w-full h-64 cursor-pointer object-cover rounded-lg border shadow"},null,8,wt)):(l(),a("span",yt,"Sin foto"))]),e("div",kt,[t[23]||(t[23]=e("h2",null,"Posterior",-1)),(B=o.votante.votante)!=null&&B.user.biometrico?(l(),a("img",{key:0,src:h((M=o.votante.votante)==null?void 0:M.user.biometrico.cedula_back),alt:"Foto del votante",onClick:t[2]||(t[2]=s=>{var d;return p(h((d=o.votante.votante)==null?void 0:d.user.biometrico.cedula_back))}),class:"w-full h-64 cursor-pointer object-cover rounded-lg border shadow"},null,8,$t)):(l(),a("span",Nt,"Sin foto"))]),e("div",Ft,[t[24]||(t[24]=e("h2",null,"Firma",-1)),(U=o.votante.votante)!=null&&U.user.biometrico?(l(),a("img",{key:0,src:j((G=o.votante.votante)==null?void 0:G.user.biometrico.firma),alt:"Foto del votante",onClick:t[3]||(t[3]=s=>{var d;return p(j((d=o.votante.votante)==null?void 0:d.user.biometrico.firma))}),class:"w-full h-64 cursor-pointer object-cover rounded-lg border shadow"},null,8,Dt)):(l(),a("span",St,"Sin foto"))])]),e("div",Ct,[e("div",jt,[e("div",At,[t[25]||(t[25]=e("b",null,"Validación:",-1)),r(" "+n(o.votante.validaciones),1)]),o.duplicados.length>0?(l(),a("div",Rt,[e("button",{onClick:t[4]||(t[4]=s=>N.value=!0),class:"bg-secondary text-white hover:scale-105 hover:bg-primary p-2 cursor-pointer rounded-md mt-2"}," Ver duplicados ")])):q("",!0)]),e("div",zt,[t[27]||(t[27]=e("b",null,"Motivo de rechazo:",-1)),ot(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>c(u).motivo=s),class:"border rounded p-2"},t[26]||(t[26]=[e("option",{value:"",disabled:""},"Seleccione un motivo",-1),e("option",{value:"aprobado"},"No hay motivos (aprobado)",-1),e("option",{value:"Documentos incorrectos"}," Documentos incorrectos ",-1),e("option",{value:"Identidad no validada"},"Identidad no validada",-1),e("option",{value:"Parte frontal del documento poco visible"}," Parte frontal del documento poco visible ",-1),e("option",{value:"Parte Trasera del documento poco visible"}," Parte Trasera del documento poco visible ",-1),e("option",{value:"Firma poco visible"},"Firma poco visible",-1),e("option",{value:"Firma diferente a la presentada en el documento de identificación"}," Firma diferente a la presentada en el documento de identificación ",-1),e("option",{value:"Registro duplicado"},"Registro duplicado",-1),e("option",{value:"Información errónea, en comparación con la documentación"}," Información errónea, en comparación con la documentación ",-1),e("option",{value:"Dirección diferente a la comuna"}," Dirección diferente a la comuna ",-1)]),512),[[nt,c(u).motivo]])])]),e("div",Et,[b(lt,{onClick:Q,class:"flex h-full items-center",disabled:c(u).processing||c(u).motivo!==""&&c(u).motivo!=="aprobado"},{default:f(()=>t[28]||(t[28]=[r(" Aprobar ")])),_:1},8,["disabled"]),b(at,{onClick:W,class:"!bg-red-500 text-white",disabled:c(u).processing},{default:f(()=>t[29]||(t[29]=[r(" Rechazar ")])),_:1},8,["disabled"])]),b(c(dt),{visible:$.value,imgs:[S.value],onHide:Y},null,8,["visible","imgs"])]),b(ut,{show:N.value,closeable:!0},{default:f(()=>[e("div",Pt,[t[30]||(t[30]=e("h2",{class:"text-2xl font-semibold text-center"}," Registros duplicados o similares ",-1)),e("button",{onClick:t[6]||(t[6]=s=>N.value=!1),class:"text-white text-xl hover:text-gray-300"}," X ")]),e("div",It,[(l(!0),a(H,null,st(X.value,s=>(l(),a("div",{key:s.id,class:"flex gap-4 items-center mb-4 border-b pb-2"},[e("img",{src:F(s.photo),alt:"Foto",class:"w-36 h-full object-cover rounded"},null,8,Vt),e("div",null,[e("p",Lt,"ID: "+n(s.user.votantes.hash_votantes[0].id),1),e("p",Tt,"Nombre: "+n(s.user.votantes.nombre),1),e("p",Bt,"Identificación: "+n(s.user.votantes.identificacion),1),e("p",Mt,"Creación: "+n(Z(s.user.votantes.hash_votantes[0].created_at)),1),e("p",Ut,"Estado: "+n(s.estado),1)])]))),128)),e("div",Gt,[e("button",{class:"px-3 py-1 bg-gray-200 text-sm rounded hover:bg-gray-300",disabled:v.value===1,onClick:t[7]||(t[7]=s=>v.value--)}," Anterior ",8,Ot),e("span",null,"Página "+n(v.value)+" de "+n(C.value),1),e("button",{class:"px-3 py-1 bg-gray-200 text-sm rounded hover:bg-gray-300",disabled:v.value===C.value,onClick:t[8]||(t[8]=s=>v.value++)}," Siguiente ",8,qt)])])]),_:1},8,["show"])]}),_:1})],64))}};export{_t as default};
