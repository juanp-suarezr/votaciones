import{r as u,e as G,f as E,g as T,c as g,o as d,a as x,u as b,Z,w as P,b as e,h as q,F as m,i as A,t as p,v as H,n as J,j as R,d as $}from"./app-C3rN8Gkq.js";import{_ as Q}from"./AuthenticatedLayout-Bmu7u6ys.js";import{s as z,a as W}from"./index-1ZIourUB.js";import{s as I}from"./index-CMg5MGdA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BPgkeyxA.js";import"./index-CtmJRQyY.js";import"./index-BXCOUtye.js";const Y={class:""},tt={key:0,class:"flex flex-col justify-center"},et={class:"sm:flex justify-center items-center"},st=["value"],ot={class:"flex inline-flex justify-center gap-4 sm:gap-6 mb-4 mt-6 text-lg sm:mb-auto"},at=["onClick"],lt={class:"sm:grid grid-cols-2 md:gap-6 sm:gap-4 mt-6"},nt={class:"flex h-full m-auto flex-col justify-center mb-4 px-4"},rt={class:"flex h-full m-auto flex-col justify-center mb-4 px-4"},it={class:"h-full mt-4 w-full col-span-2"},dt={class:"flex flex-col overflow-x-auto"},ct={class:"inline-block rounded-lg shadow"},ut={class:"inline-block min-w-full py-2"},gt={class:"overflow-x-auto"},vt={class:"w-full whitespace-no-wrap"},pt={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},bt={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},ft={class:"text-gray-900 whitespace-no-wrap"},xt={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},yt={class:"text-gray-900 whitespace-no-wrap"},mt={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},ht={class:"text-gray-900 whitespace-no-wrap"},_t={class:"flex items-center border-b bg-gray-50 px-5 py-2 xs:flex-row justify-between text-gray-500 text-xs font-semibold"},wt=["disabled"],kt=["disabled"],Ct={key:1,class:"flex justify-center"},Dt={__name:"Index",props:{eventos:Object,candidatos:Object,votantes:Object},setup(f){const n=f,L=[{url:"/",text:"Análisis"}];console.log(n);const h=u(),_=u(),w=u(),k=u(),r=u(n.eventos.length?n.eventos[0].id:""),c=u(n.eventos.length?n.eventos.find(o=>o.id==r.value).tipos.split("|")[0]:"NA"),y=u(n.candidatos.filter(o=>{let t=o.id_evento==r.value,s=o.tipo==c.value;return t&&s})),S=o=>{c.value=o,h.value=B(),_.value=N(),w.value=O(),k.value=D(),y.value=n.candidatos.filter(t=>{let s=t.id_evento==r.value,l=t.tipo==c.value;return s&&l}),console.log(y.value)},V=u(8),v=u(0),C=G(()=>Math.ceil(y.value.length/V.value)),M=()=>{v.value>0&&v.value--},F=()=>{v.value<C.value-1&&v.value++};E(V,()=>{v.value=0});const K=o=>`/storage/uploads/usuarios/${o}`,U=function(o){let t=o.split(" "),s="",l=0;for(var i=0;i<t.length&&l<2;i++)t[i].length>0&&t[i]!==""&&(s+=t[i][0],l++);return s};E(r,o=>{c.value=n.eventos.length?n.eventos.find(t=>t.id==o).tipos.split("|")[0]:"NA",S(c.value)}),T(()=>{h.value=B(),_.value=N(),w.value=O(),k.value=D()});const B=()=>{const o=getComputedStyle(document.body);let t=n.eventos.find(a=>a.id==r.value),s=n.candidatos.filter(a=>{let j=a.id_evento==r.value,X=a.tipo==c.value;return j&&X}),l=[],i=[];return s.forEach(a=>{l.push(a.votante.nombre),i.push(t.votos.filter(j=>j.id_candidato==a.id_votante).length)}),{labels:l.join(", ").split(",").map(a=>a.trim()),datasets:[{label:"Votos",data:i.join(", ").split(",").map(a=>a.trim()),backgroundColor:[o.getPropertyValue("--gray-500")]}]}},N=()=>{const o="#000";return{indexAxis:"x",maintainAspectRatio:!0,aspectRatio:1,plugins:{legend:{labels:{color:o}}},scales:{x:{ticks:{color:o,font:{weight:500}},grid:{display:!1,drawBorder:!0}},y:{ticks:{color:o},grid:{color:"#b0b6c0",drawBorder:!0}}}}},O=()=>{const o=getComputedStyle(document.body);let t=n.eventos.find(a=>a.id==r.value),s=[],l=n.votantes.filter(a=>a.tipo==c.value&&a.id_evento==t.id).length,i=t.votos.filter(a=>a.tipo==c.value).length;return s.push(l-i,i),console.log(t),{labels:["Abstinencia","votos realizados"],datasets:[{label:"Cantidad",data:s,backgroundColor:[o.getPropertyValue("--red-900"),o.getPropertyValue("--gray-500")],hoverBackgroundColor:[o.getPropertyValue("--red-800"),o.getPropertyValue("--gray-400")]}]}},D=()=>({maintainAspectRatio:!0,aspectRatio:1,plugins:{legend:{labels:{cutout:"60%",color:"#000"}}}});return(o,t)=>(d(),g(m,null,[x(b(Z),{title:"Análisis"}),x(Q,{breadCrumbLinks:L},{header:P(()=>t[2]||(t[2]=[$(" Análisis resultados ")])),default:P(()=>[e("div",Y,[f.eventos.length?(d(),g("div",tt,[e("div",et,[q(e("select",{id:"evento_selected",name:"evento_selected","onUpdate:modelValue":t[0]||(t[0]=s=>r.value=s),onChange:t[1]||(t[1]=(...s)=>o.handleEnterKey&&o.handleEnterKey(...s)),class:"block w-full p-2 text-base text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"},[t[3]||(t[3]=e("option",{selected:"",value:"",disabled:""},"Elegir evento de votación",-1)),(d(!0),g(m,null,A(f.eventos,s=>(d(),g("option",{class:"flex cursor mb-2 sm:mb-auto",key:s.id,value:s.id},p(s.nombre),9,st))),128))],544),[[H,r.value]])]),e("div",ot,[(d(!0),g(m,null,A(f.eventos.find(s=>s.id==r.value).tipos.split("|"),s=>(d(),g("button",{key:s,class:J(["flex cursor mb-2 sm:mb-auto",s==c.value?"underline text-blue-600":"text-gray-600"]),onClick:l=>S(s)},p(s)+" | ",11,at))),128))]),e("div",lt,[e("div",nt,[t[4]||(t[4]=e("h2",{class:"text-gray-600 text-lg sm:text-xl font-bold text-center flex justify-center"}," Resultado Votaciones ",-1)),x(b(z),{type:"bar",data:h.value,options:_.value,class:"h-full w-full mt-4"},null,8,["data","options"])]),e("div",rt,[t[5]||(t[5]=e("h2",{class:"text-gray-600 text-lg sm:text-xl font-bold text-center flex justify-center"}," Nivel de votaciones ",-1)),x(b(z),{type:"doughnut",data:w.value,options:k.value,class:"h-full w-full mt-4"},null,8,["data","options"])]),e("div",it,[e("div",dt,[e("div",ct,[e("div",ut,[e("div",gt,[e("table",vt,[t[6]||(t[6]=e("thead",null,[e("tr",{class:"border-b bg-gray-50 text-left text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("th",{colspan:"2",class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Nombre "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Identificación "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," votos ")])],-1)),e("tbody",null,[(d(!0),g(m,null,A(y.value,s=>(d(),g("tr",{key:s.id,class:"text-gray-700"},[e("td",pt,[s.votante.imagen=="user.png"?(d(),R(b(I),{key:0,label:U(s.votante.nombre),class:"bg-indigo-200 text-indigo-800 text-xl",size:"xlarge",shape:"circle"},null,8,["label"])):(d(),R(b(I),{key:1,image:K(s.votante.imagen),class:"bg-indigo-200 text-indigo-800",size:"xlarge",shape:"circle"},null,8,["image"]))]),e("td",bt,[e("p",ft,p(s.votante.nombre),1)]),e("td",xt,[e("p",yt,p(s.votante.identificacion),1)]),e("td",mt,[e("p",ht,p(f.eventos.find(l=>l.id==r.value).votos.filter(l=>l.id_candidato==s.id_votante).length),1)])]))),128))])]),e("div",_t,[e("button",{class:"hover:scale-125 transition duration-500 cursor-pointer",onClick:M,disabled:v.value===0},t[7]||(t[7]=[e("i",{class:"fa-solid fa-arrow-left"},null,-1)]),8,wt),e("p",null,"Pagina "+p(v.value+1)+" de "+p(C.value),1),e("button",{class:"hover:scale-125 transition duration-500 cursor-pointer",onClick:F,disabled:v.value===C.value-1},t[8]||(t[8]=[e("i",{class:"fa-solid fa-arrow-right"},null,-1)]),8,kt)])])])])])])])])):(d(),g("div",Ct,[x(b(W),{severity:"info",sticky:o.sticky,class:"text-center w-fit",life:3e3},{default:P(()=>t[9]||(t[9]=[$("El análisis de los eventos de votación se mostrará en esta sección")])),_:1},8,["sticky"])]))])]),_:1})],64))}};export{Dt as default};
