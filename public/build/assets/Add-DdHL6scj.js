import{k as I,r as f,T as R,c as j,w as S,q as T,a as u,b as n,d as a,u as s,Z as q,e as g,f as t,j as c,s as B,n as $,l as _,t as w,g as O,v as P,i as F,F as z}from"./app-B4Orus7x.js";import{_ as M}from"./AuthenticatedLayout-DSC93Zo2.js";import{_ as i}from"./InputError-C725U2q7.js";import{_ as d}from"./InputLabel-BfP2H9KI.js";import{_ as G}from"./PrimaryButton-DYTXYitq.js";import{_ as h}from"./TextInput-D079ZVyk.js";import{_ as H}from"./SecondaryButton-CAOiWVe9.js";import{s as Z}from"./index-C8cWYCiN.js";import{_ as J}from"./SecondaryLink-BFZlLexA.js";import{s as K}from"./index-BWmpWWL0.js";import{s as Q}from"./index-B3M-hpXB.js";import{r as W}from"./PhotoIcon-qqH14wHH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButtonReturn-BnkGduyX.js";import"./index-KU9kFofb.js";import"./index-D1bvcFp8.js";import"./index-DIUg-m-I.js";import"./index-Be1fzYNM.js";import"./index-titXEmeW.js";import"./index-2nDPcJ0y.js";import"./index-Dc67ldDM.js";import"./index-DfH7dZQi.js";import"./index-p3HdiX32.js";const X={class:"flex flex-col bg-white border shadow-sm rounded-xl w-full"},Y={class:"bg-gray-100 border-b rounded-t-xl py-3 px-4 md:py-4 md:px-5 grid grid-cols-2 gap-4"},ee={class:"text-right"},oe={class:"p-4 md:p-5"},te={class:"mb-2"},se={class:"mb-2"},ae={class:"col-span-2 mb-2"},re={key:0},le={class:"col-span-2 flex md:grid grid-cols-2 flex-wrap gap-4"},ie={class:"w-auto"},ne={class:"w-auto"},de={class:"card flex inline-flex justify-content-center border border-gray-400 rounded-md shadow-md py-1 px-2 mt-2 !text-gray-500"},ue={class:"w-auto mt-4"},me={key:0,class:"card flex justify-content-center"},ce={key:1,class:"text-xs text-gray-600"},pe=["href"],fe={class:"w-auto"},ge={class:"w-full h-full mt-2"},ve={class:"flex flex-wrap items-center w-auto gap-4"},be={key:0,class:"px-2 py-4 w-full border border-gray-400 rounded-md shadow-md mt-4"},ye={class:"mt-4"},xe={class:"mb-2"},_e={class:"col-span-2"},we={class:"border-2 border-gray-300 rounded-md p-2"},he={class:"flex justify-center"},Ve=["src","alt"],ke={key:0,class:"flex justify-center mt-2"},je={class:"mt-4 flex flex-col items-end"},Ke={__name:"Add",props:{roles:{type:Object,default:()=>({})},tipos:{type:Object,default:()=>({})},eventos:{type:Object,default:()=>({})},parametros:{type:Array,default:()=>[]},subtipos:{type:Array,default:()=>[]}},setup(v){const V=I("$swal"),m=f(null),x=v;console.log(x);const e=R({detalle:"",descripcion:"",numero_tarjeton:"",tipo:"Proyecto",eventos:[],subtipo:0,estado:1,imagen:""});f([]);const b=f(null),p=f(!1),y=f(!1),A=[{url:route("proyectos.index"),text:"Listado de proyectos"},{url:"",text:"Nuevo proyecto"}],N=()=>{var l;return e.subtipo==0?"por default":typeof e.subtipo=="object"?e.subtipo.detalle:(l=x.subtipos.find(o=>o.id===parseInt(e.subtipo)))==null?void 0:l.detalle},U=j(()=>b.value?x.subtipos.filter(l=>l.codParametro===b.value):[]);S(p,l=>{l||(e.subtipo=0)});const k=j(()=>{const o=e.descripcion.trim().length;return o>=500?y.value=!0:y.value=!1,o});S(k,()=>{e.descripcion=e.descripcion.trim()});const C=l=>{if(e.imagen=l,console.log(e.imagen),!e.imagen)return;const o=new FileReader;o.onload=()=>{m.value=o.result},o.readAsDataURL(e.imagen)},E=()=>{e.imagen=null,m.value=null},L=()=>{e.subtipo=e.subtipo.id,e.post(route("proyectos.store"),{onSuccess:function(){V({title:"Registro Guardado",text:"El proyecto se ha almacenado exitosamente",icon:"success",didClose:()=>{e.reset(),m.value=null,window.location.href=route("proyectos.index")}})},onError:function(l){console.log(l),e.reset(),V({title:"Error",text:"Ha ocurrido un error al intentar guardar el proyecto",icon:"error"})}})};return(l,o)=>{const D=T("Textarea");return n(),u(z,null,[a(s(q),{title:"Agregar proyecto"}),a(M,{breadCrumbLinks:A},{header:g(()=>o[9]||(o[9]=[c(" Nuevo proyecto ")])),default:g(()=>[t("div",X,[t("div",Y,[o[11]||(o[11]=t("h3",{class:"mt-1 text-gray-500"},"Nuevo proyecto",-1)),t("div",ee,[a(J,{href:l.route("proyectos.index")},{default:g(()=>o[10]||(o[10]=[c(" Regresar ")])),_:1},8,["href"])])]),t("div",oe,[t("form",{onSubmit:B(L,["prevent"]),class:"grid sm:grid-cols-2 gap-4"},[t("div",te,[a(d,{for:"nombre",value:"Nombre del proyecto"}),a(h,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:s(e).detalle,"onUpdate:modelValue":o[0]||(o[0]=r=>s(e).detalle=r),required:"",autofocus:"",autocomplete:"nombre"},null,8,["modelValue"]),a(i,{class:"mt-2",message:s(e).errors.detalle},null,8,["message"])]),t("div",se,[a(d,{for:"numero_tarjeton",value:"Numero tarjeton"}),a(h,{id:"numero_tarjeton",type:"number",class:"mt-1 block w-full",modelValue:s(e).numero_tarjeton,"onUpdate:modelValue":o[1]||(o[1]=r=>s(e).numero_tarjeton=r),autocomplete:"numero_tarjeton"},null,8,["modelValue"]),a(i,{class:"mt-2",message:s(e).errors.numero_tarjeton},null,8,["message"])]),t("div",ae,[o[12]||(o[12]=t("p",{class:"text-gray-600 text-sm"}," Información adicional sobre el evento (max 500 caracteres) ",-1)),a(D,{modelValue:s(e).descripcion,"onUpdate:modelValue":o[2]||(o[2]=r=>s(e).descripcion=r),variant:"filled",autoResize:"",rows:"5",class:"mt-1 block w-full",required:"",autocomplete:"descripcion"},null,8,["modelValue"]),t("p",{class:$(["text-gray-500 text-sm mt-2",{"text-red-500":y.value}])},[c(w(k.value)+" caracteres ",1),y.value?(n(),u("span",re,"Limite de caracteres superado")):_("",!0)],2),a(i,{class:"mt-2",message:s(e).errors.descripcion},null,8,["message"])]),t("div",le,[t("div",ie,[t("div",ne,[a(d,{for:"tipos",value:"Tipos de usuarios"}),t("div",de,w(s(e).tipo),1),a(i,{class:"mt-2",message:s(e).errors.tipos},null,8,["message"])]),t("div",ue,[a(d,{for:"evento",value:"Asignar evento"}),v.eventos.length?(n(),u("div",me,[a(s(Z),{id:"eventos",modelValue:s(e).eventos,"onUpdate:modelValue":o[3]||(o[3]=r=>s(e).eventos=r),display:"chip",options:v.eventos,"option-label":"nombre","option-value":"id",placeholder:"Seleccione los eventos",maxSelectedLabels:6,class:"w-full md:w-20rem"},null,8,["modelValue","options"])])):(n(),u("p",ce,[o[13]||(o[13]=c(" No hay eventos registrados, registrar uno nuevo ")),t("a",{href:l.route("eventos.create")},"Aquí",8,pe)])),a(i,{class:"mt-2",message:s(e).errors.eventos},null,8,["message"])])]),t("div",fe,[t("div",ge,[t("div",ve,[a(d,{for:"tipo_user",value:"Subtipos - "+N()},null,8,["value"]),a(H,{onClick:o[4]||(o[4]=r=>p.value=!p.value),class:"items-center"},{default:g(()=>[c(w(p.value?"Cancelar":"Agregar subtipo"),1)]),_:1})]),p.value?(n(),u("div",be,[t("div",null,[a(d,{for:"parametro",value:"Parámetro"}),a(s(K),{id:"parametro",modelValue:b.value,"onUpdate:modelValue":o[5]||(o[5]=r=>b.value=r),options:v.parametros,"option-label":"detalle","option-value":"cod",placeholder:"Seleccione un parámetro",class:"w-full"},null,8,["modelValue","options"]),a(i,{class:"mt-2",message:s(e).errors.parametro},null,8,["message"])]),t("div",ye,[a(d,{for:"parametroDetalle",value:"Subtipo"}),a(s(Q),{id:"parametroDetalle",modelValue:s(e).subtipo,"onUpdate:modelValue":o[6]||(o[6]=r=>s(e).subtipo=r),options:U.value,filter:"",optionLabel:"detalle",placeholder:"Seleccione un subtipo",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),a(i,{class:"mt-2",message:s(e).errors.subtipo},null,8,["message"])])])):_("",!0)])])]),t("div",xe,[a(d,{for:"estado",value:"Estado"}),O(t("select",{id:"estado","onUpdate:modelValue":o[7]||(o[7]=r=>s(e).estado=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-auto p-2. px-4"},o[14]||(o[14]=[t("option",{value:"1"},"Activo",-1),t("option",{value:"0"},"Bloqueado",-1)]),512),[[P,s(e).estado]]),a(i,{class:"mt-2",message:s(e).errors.estado},null,8,["message"])]),t("div",_e,[o[15]||(o[15]=t("p",{class:"text-gray-600 text-sm"}," Imagen de proyecto (resolución recomendada: 1080x1080px) ",-1)),t("div",we,[a(h,{id:"imagen",type:"file",class:"mt-1 !border-0",accept:"image/*",onInput:o[8]||(o[8]=r=>C(r.target.files[0])),maxFileSize:2e6}),a(i,{class:"mt-2",message:s(e).errors.imagen},null,8,["message"]),t("div",he,[m.value?(n(),u("img",{key:0,src:m.value,alt:s(e).detalle,class:"w-2/6 h-auto"},null,8,Ve)):(n(),F(s(W),{key:1,class:"w-1/6 text-gray-300"}))]),m.value?(n(),u("div",ke,[t("button",{onClick:E,type:"button",class:"bg-red-500 text-white px-4 py-2 rounded"}," Eliminar Imagen ")])):_("",!0)])]),t("div",null,[t("div",je,[a(G,{class:$({"opacity-25":s(e).processing}),disabled:s(e).processing},{default:g(()=>o[16]||(o[16]=[c(" Registrar proyecto ")])),_:1},8,["class","disabled"])])])],32)])])]),_:1})],64)}}};export{Ke as default};
