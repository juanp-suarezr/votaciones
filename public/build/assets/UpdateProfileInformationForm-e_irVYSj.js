import{x as k,r as g,T as A,f as U,o as r,c as d,d as o,a as t,w as _,u as s,m as y,b as p,h as N,v as S,n as O,I as q,l as B}from"./app-M705427b.js";import{_ as c}from"./InputError-ep1vwne4.js";import{_ as u}from"./InputLabel-ogJd6lms.js";import{_ as C}from"./PrimaryButton-LB5zeq0Y.js";import{_ as x}from"./TextInput-YsE1rZnv.js";import{s as h}from"./multiselect.esm-sKZ3pnJR.js";import"./selectbutton.esm-ZE_cNNOJ.js";import{_ as R}from"./SecondaryLink-s9m6wMAR.js";import"./index.esm-2F0-SHzP.js";import"./ripple.esm-QW65taZq.js";import"./basecomponent.esm-IbdbWd1I.js";import"./portal.esm-UKgEEAAY.js";const $={class:"text-right"},I=o("h2",{class:"text-lg font-medium text-gray-900"},"Información usuario",-1),z=o("p",{class:"mt-1 text-sm text-gray-600"}," Actualice la información del usuario y la dirección de Usuario. ",-1),E={key:0},T={class:"sm:flex sm:flex-wrap gap-4"},L={key:0},D={key:0,class:"card flex justify-content-center"},M={key:1,class:"text-xs text-gray-600"},F=["href"],G={class:"card flex justify-content-center"},P={key:0,class:"card flex justify-content-center"},H={key:1,class:"text-xs text-gray-600"},J=["href"],K={class:"sm:flex gap-4"},Q=o("option",{value:"Activo"},"Activo",-1),W=o("option",{value:"Bloqueado"},"Bloqueado",-1),X=[Q,W],Y={class:"flex items-center gap-4"},Z={key:0,class:"text-sm text-gray-600"},me={__name:"UpdateProfileInformationForm",props:{user:{type:Object,default:()=>({})},roles:{type:Object,default:()=>({})},userRoles:{type:Object,default:()=>({})},tipos:{type:Object,default:()=>({})},eventos:{type:Object,default:()=>({})}},setup(m){const b=k("$swal"),f=m;console.log(f);const v=Object.values(f.userRoles),i=f.user,V=i.eventos!=="NA"?i.eventos.split("|").map(n=>parseInt(n)):[];g([]);const e=A({name:i.name,email:i.email,identificacion:i.votantes?i.votantes.identificacion:"",tipo:i.tipos!="NA"?i.tipos.split("|"):"",estado:i.estado,roles_user:v,eventos:V||[]}),w=()=>{e.tipo=e.tipo==""?"NA":e.tipo.join("|"),console.log(e.eventos),e.patch(route("users.update",i.id),{onSuccess:()=>b({title:"Registro Actualizado",text:"El usuario se ha actualizado exitosamente",icon:"success"}).then(n=>{window.location.reload()})})},j=g(e.candidato?"Candidato":"Usuario");return g(["Candidato","Usuario"]),U(j,n=>{n=="Candidato"?e.candidato=1:e.candidato=0}),(n,l)=>(r(),d("section",null,[o("header",null,[o("div",$,[t(R,{href:n.route("users.index")},{default:_(()=>[p(" Regresar ")]),_:1},8,["href"])]),I,z]),o("form",{onSubmit:B(w,["prevent"]),class:"mt-6 space-y-6"},[o("div",null,[t(u,{for:"name",value:"Nombre"}),t(x,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:s(e).name,"onUpdate:modelValue":l[0]||(l[0]=a=>s(e).name=a),required:"",autofocus:"",autocomplete:"name"},null,8,["modelValue"]),t(c,{class:"mt-2",message:s(e).errors.name},null,8,["message"])]),o("div",null,[t(u,{for:"email",value:"Usuario"}),t(x,{id:"email",type:"text",class:"mt-1 block w-full",modelValue:s(e).email,"onUpdate:modelValue":l[1]||(l[1]=a=>s(e).email=a),required:"",autocomplete:"username"},null,8,["modelValue"]),t(c,{class:"mt-2",message:s(e).errors.email},null,8,["message"])]),s(v).find(a=>a!="Administrador")?(r(),d("div",E,[t(u,{for:"identificacion",value:"Identificación"}),t(x,{id:"identificacion",type:"identificacion",class:"mt-1 block w-full",modelValue:s(e).identificacion,"onUpdate:modelValue":l[2]||(l[2]=a=>s(e).identificacion=a),required:"",autocomplete:"username"},null,8,["modelValue"]),t(c,{class:"mt-2",message:s(e).errors.identificacion},null,8,["message"])])):y("",!0),o("div",T,[s(v).find(a=>a!="Administrador")?(r(),d("div",L,[t(u,{for:"tipo",value:"Tipo votante"}),m.tipos?(r(),d("div",D,[t(s(h),{id:"tipo",modelValue:s(e).tipo,"onUpdate:modelValue":l[3]||(l[3]=a=>s(e).tipo=a),display:"chip",options:Object.values(m.tipos),placeholder:"Seleccione tipo votante",maxSelectedLabels:3,class:"w-full md:w-20rem"},null,8,["modelValue","options"])])):(r(),d("p",M,[p("No hay tipos de usuarios registrados, registrar uno nuevo "),o("a",{href:n.route("tipos.index")},"Aquí",8,F)])),t(c,{class:"mt-2",message:s(e).errors.tipo},null,8,["message"])])):y("",!0),o("div",null,[t(u,{for:"roles",value:"Roles"}),o("div",G,[t(s(h),{id:"roles",modelValue:s(e).roles_user,"onUpdate:modelValue":l[4]||(l[4]=a=>s(e).roles_user=a),display:"chip",options:Object.values(m.roles),placeholder:"Seleccione rol",maxSelectedLabels:3,class:"w-full md:w-20rem"},null,8,["modelValue","options"])]),t(c,{class:"mt-2",message:s(e).errors.roles_user},null,8,["message"])])]),o("div",null,[t(u,{for:"evento",value:"Evento votante"}),m.eventos.length?(r(),d("div",P,[t(s(h),{id:"eventos",modelValue:s(e).eventos,"onUpdate:modelValue":l[5]||(l[5]=a=>s(e).eventos=a),display:"chip",options:m.eventos,"option-label":"nombre","option-value":"id",placeholder:"Seleccione los eventos",maxSelectedLabels:6,class:"w-full md:w-20rem"},null,8,["modelValue","options"])])):(r(),d("p",H,[p("No hay eventos registrados, registrar uno nuevo "),o("a",{href:n.route("eventos.index")},"Aquí",8,J)])),t(c,{class:"mt-2",message:s(e).errors.eventos},null,8,["message"])]),o("div",K,[o("div",null,[t(u,{for:"estado",value:"Estado"}),N(o("select",{id:"estado","onUpdate:modelValue":l[6]||(l[6]=a=>s(e).estado=a),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},X,512),[[S,s(e).estado]]),t(c,{class:"mt-2",message:s(e).errors.estado},null,8,["message"])])]),o("div",Y,[t(C,{class:O({"opacity-25":s(e).processing}),disabled:s(e).processing},{default:_(()=>[p("Guardar ")]),_:1},8,["class","disabled"]),t(q,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:_(()=>[s(e).recentlySuccessful?(r(),d("p",Z,"Actualizado.")):y("",!0)]),_:1})])],32)]))}};export{me as default};
