import{x as y,r as w,T as S,c as r,o as c,b as a,u as t,Z as C,d as l,e as s,j as m,B as V,f as k,F as v,k as N,t as $,v as j,n as E}from"./app-Bl4GWes1.js";import{_ as L}from"./AuthenticatedLayout-1eFfr_xl.js";import{_ as g}from"./InputError-Dj_FR7wl.js";import{_ as b}from"./InputLabel-LzCIuqRf.js";import{_ as B}from"./PrimaryButton-329A14E0.js";import{s as O}from"./index-fZViT3wi.js";import{_ as A}from"./SecondaryLink-CvBM5_Or.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BreadCrumb-BMFnNBkl.js";import"./SecondaryButtonReturn-BccXVmpp.js";import"./XCircleIcon-BbLjaMZr.js";import"./index-8pQJ9hln.js";import"./index-GWlxiDl5.js";import"./index-Dq9_DXRe.js";import"./index-BjLkX2nJ.js";import"./index-CHEIz7xD.js";import"./index-KUWhZgFt.js";import"./index-CwJlqfaz.js";import"./index-C6-kv_Xz.js";const R={class:"flex flex-col bg-white border shadow-sm rounded-xl w-full"},z={class:"bg-gray-100 border-b rounded-t-xl py-3 px-4 md:py-4 md:px-5 grid grid-cols-2 gap-4"},D={class:"text-right"},F={class:"p-4 md:p-5"},M={class:"col-span-2 flex gap-4"},T={class:"card flex justify-content-center"},U=["value"],G={class:"col-span-2"},Z={class:"mt-4 flex flex-col items-end"},re={__name:"Add",props:{eventos:{type:Object,default:()=>({})},tipos:{type:Object,default:()=>({})}},setup(u){const p=y("$swal"),f=u;console.log(f);const i=w([]),o=S({eventos:"",candidatos:[]}),_=[{url:"/candidatos",text:"Listado de candidatos"},{url:"",text:"Nuevo candidato"}],x=()=>{if(o.eventos){o.candidatos=[],i.value=[],console.log(o.eventos);const d=f.eventos.find(e=>e.id===o.eventos);console.log(d),d.votantes.forEach(e=>{i.value.push({id:e.id_votante,nombre:e.votante.nombre})}),console.log(i.value)}else i.value=[]},h=()=>{console.log(o),o.patch(route("candidatos.update",o.eventos),{onSuccess:function(){p({title:"Registros Guardado",text:"los candidatos han sido asignados al evento",icon:"success"}).then(d=>{window.location.reload()})},onError:function(){p({title:"Registros fallados",text:"los candidatos no han sido asignados al evento",icon:"error"})}})};return(d,e)=>(c(),r(v,null,[a(t(C),{title:"Agregar candidato"}),a(L,{breadCrumbLinks:_},{header:l(()=>e[2]||(e[2]=[m(" Nuevo Candidato ")])),default:l(()=>[s("div",R,[s("div",z,[e[4]||(e[4]=s("h3",{class:"mt-1 text-gray-500"}," Nuevo Candidato ",-1)),s("div",D,[a(A,{href:d.route("candidatos.index")},{default:l(()=>e[3]||(e[3]=[m(" Regresar ")])),_:1},8,["href"])])]),s("div",F,[s("form",{onSubmit:V(h,["prevent"]),class:"grid sm:grid-cols-2 gap-4"},[s("div",M,[a(b,{for:"eventos",value:"Eventos"}),s("div",T,[k(s("select",{id:"eventos",name:"eventoSelect","onUpdate:modelValue":e[0]||(e[0]=n=>t(o).eventos=n),onChange:x,class:"block w-full p-2 text-base text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"},[e[5]||(e[5]=s("option",{selected:"",value:"",disabled:""},"Elegir evento de votaciÃ³n",-1)),(c(!0),r(v,null,N(u.eventos,n=>(c(),r("option",{class:"flex cursor mb-2 sm:mb-auto",key:n.id,value:n.id},$(n.nombre),9,U))),128))],544),[[j,t(o).eventos]])]),a(g,{class:"mt-2",message:t(o).errors.tipos},null,8,["message"])]),s("div",G,[a(b,{for:"candidatos",value:"Seleccionar Candidatos"}),a(t(O),{modelValue:t(o).candidatos,"onUpdate:modelValue":e[1]||(e[1]=n=>t(o).candidatos=n),options:i.value,filter:"",virtualScrollerOptions:{itemSize:44},optionLabel:"nombre",optionValue:"id",placeholder:"Seleccione candidatos",class:"w-full",disabled:!t(o).eventos},null,8,["modelValue","options","disabled"]),a(g,{class:"mt-2",message:t(o).errors.candidatos},null,8,["message"])]),s("div",null,[s("div",Z,[a(B,{class:E({"opacity-25":t(o).processing}),disabled:t(o).processing},{default:l(()=>e[6]||(e[6]=[m(" Asignar Candidato(s) ")])),_:1},8,["class","disabled"])])])],32)])])]),_:1})],64))}};export{re as default};
