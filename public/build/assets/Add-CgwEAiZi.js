import{k as P,T as $,r as u,c as A,w as v,a as c,b as p,d as a,u as o,Z as B,e as f,f as s,x as L,n as w,j as b,l as _,t as m,g as S,v as j,F as q}from"./app-BSz_17wq.js";import{_ as z}from"./AuthenticatedLayout-A4NPb-Fk.js";import{_ as y}from"./TextInput-DoQ75Klk.js";import{_ as g}from"./InputError-BKUvsaUc.js";import{_ as M}from"./PrimaryButton-CQ8SAskj.js";import"./index-CjI8-aBm.js";import"./index-EiGf4bvt.js";import"./index-CnSr7n4m.js";import"./SecondaryButtonReturn-CkU0Udk2.js";import"./XCircleIcon-1d_Hgegc.js";const T={class:"w-full grid md:grid-cols-3 gap-4"},U={class:"md:col-span-2 p-4 bg-white rounded-md shadow-md h-full"},D={class:"mb-4"},F={key:0},O={class:"mb-4"},R={class:"mb-4"},G={class:"mt-4 flex flex-col items-end"},Z={class:"md:col-span-1 flex flex-col items-center h-full p-5 bg-white shadow-sm rounded-md"},H={class:"p-4 md:p-5 w-full border border-gray rounded-md shadow-sm"},I={class:"mb-6"},J={class:""},K={class:"mb-8"},Q={key:0},W={class:"bg-red-600 font-bold text-white p-2"},ie={__name:"Add",props:{codigos:{type:Object,default:()=>({})}},setup(h){const x=P("$swal"),k=h,t=$({detalle:"",cod:"",estado:"1"}),C=[{url:"/parametros",text:"Listado de parámetros"},{url:"",text:"Nuevo parámetro"}],i=u(!1),d=u(!1),n=u(""),V=A(()=>{const e=t.detalle.trim().length;return e>=100?i.value=!0:i.value=!1,e});v(()=>t.detalle,()=>{t.detalle=t.detalle.trim()});const E=()=>{d.value=!1;const l=t.cod;k.codigos.find(r=>r.cod===l)?(n.value="El código ya existe.",d.value=!0):(n.value="",d.value=!1)};v(()=>t.cod,l=>{l&&E()});const N=()=>{d.value||t.post(route("parametros.store"),{onSuccess:()=>x({title:"Registro Guardado",text:"El parámetro se ha registrado exitosamente",icon:"success"}).then(l=>{window.location=route("parametros.index")}),onError:l=>{x({title:"Error",text:"Ocurrió un error al registrar el parámetro.",icon:"error"})}})};return(l,e)=>(p(),c(q,null,[a(o(B),{title:"Agregar parámetro"}),a(z,{breadCrumbLinks:C},{header:f(()=>e[3]||(e[3]=[b(" Nuevo Parámetro ")])),default:f(()=>[s("div",T,[s("div",U,[e[9]||(e[9]=s("h2",{class:"text-lg font-bold mb-4"},"Agregar Nuevo Parámetro",-1)),s("form",{onSubmit:L(N,["prevent"]),class:"sm:grid sm:grid-cols-2 gap-4"},[s("div",D,[e[4]||(e[4]=s("label",{for:"detalle",class:"block text-sm font-medium text-gray-700 mb-2"},"Nombre del parámetro",-1)),a(y,{id:"detalle",type:"text",class:"mt-1 block w-full",modelValue:o(t).detalle,"onUpdate:modelValue":e[0]||(e[0]=r=>o(t).detalle=r),required:"",autofocus:"",autocomplete:"nombre"},null,8,["modelValue"]),s("p",{class:w(["text-gray-500 text-sm mt-2",{"text-red-500":i.value}])},[b(m(V.value)+" caracteres ",1),i.value?(p(),c("span",F,"Límite de caracteres superado")):_("",!0)],2),a(g,{class:"mt-2",message:o(t).errors.detalle},null,8,["message"])]),s("div",O,[e[5]||(e[5]=s("label",{for:"cod",class:"block text-sm font-medium text-gray-700 mb-2"},"Código del parámetro",-1)),a(y,{id:"cod",type:"text",class:"mt-1 block w-full",modelValue:o(t).cod,"onUpdate:modelValue":e[1]||(e[1]=r=>o(t).cod=r),required:"",autocomplete:"cod"},null,8,["modelValue"]),a(g,{class:"mt-2",message:o(t).errors.cod},null,8,["message"])]),s("div",R,[e[7]||(e[7]=s("label",{for:"estado",class:"block text-sm font-medium text-gray-700 mb-2"},"Estado",-1)),S(s("select",{id:"estado","onUpdate:modelValue":e[2]||(e[2]=r=>o(t).estado=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2"},e[6]||(e[6]=[s("option",{value:"1"},"Activo",-1),s("option",{value:"0"},"Bloqueado",-1)]),512),[[j,o(t).estado]]),a(g,{class:"mt-2",message:o(t).errors.estado},null,8,["message"])]),s("div",G,[a(M,{class:w({"opacity-25":o(t).processing}),disabled:o(t).processing||i.value||d.value},{default:f(()=>e[8]||(e[8]=[b(" Registrar Parámetro ")])),_:1},8,["class","disabled"])])],32)]),s("div",Z,[s("div",H,[s("div",I,[e[10]||(e[10]=s("h3",{class:"pb-4"},[s("span",{class:"bg-azul text-white px-2 py-1 rounded-md shadow-md"}," Parámetro ")],-1)),s("p",J,m(o(t).detalle),1)]),s("div",K,[e[11]||(e[11]=s("h3",{class:"mb-3"},[s("span",{class:"bg-azul text-white px-2 py-1 rounded-md shadow-md"}," Código ")],-1)),s("p",null,m(o(t).cod),1)]),d.value?(p(),c("div",Q,[s("em",W,m(n.value),1)])):_("",!0)])])])]),_:1})],64))}};export{ie as default};
