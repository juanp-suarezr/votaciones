import{_ as U}from"./AuthenticatedLayout-KEEKZ_C4.js";import{x as q,T as F,r as x,c as n,o as r,b as c,u as f,Z as R,d as p,e,p as C,F as j,k as P,n as N,t as i,j as l,N as K}from"./app-Df9mlN7-.js";import{_ as $}from"./PrimaryButton-CaGpWDin.js";import{s as Z}from"./index-KiPk5_8_.js";import{c as G}from"./comunas_completas-Gg-gMHNz.js";import{_ as H}from"./Modal-0RDbzwqh.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BreadCrumb-CnCaVHZy.js";import"./SecondaryButtonReturn-D9qXq7pb.js";import"./XCircleIcon-BfS3VGEM.js";import"./index-lOAu1CmJ.js";import"./index-CeQ2GaNm.js";import"./index-DQuD10Cd.js";const J={class:"items-center flex flex-col justify-center mx-2"},Q={class:"sm:flex w-full sm:grid md:grid-cols-2 grid-cols-2 gap-4 mt-6"},W={class:"mx-auto w-full flex justify-center items-center"},X={key:0,class:"w-full flex justify-center items-center h-[200pt] sm:h-[300pt] bg-indigo-200 text-indigo-800"},Y={class:"m-auto sm:text-4xxl text-xxl object-cover"},tt={key:1,class:"w-full h-[200pt] sm:h-[300pt] bg-indigo-200 text-indigo-800"},et=["src"],ot={class:"mt-4 mx-auto"},st={class:"sm:text-4xl text-2xl font-bold capitalize text-justify"},lt={class:"sm:text-2xl text-xl text-justify"},it={class:"sm:text-2xl text-xl text-justify"},nt=["onClick"],rt={class:"mt-4 mx-auto"},at={class:"mx-auto"},dt={class:"w-full h-[200pt] sm:h-[300pt] bg-indigo-200 text-indigo-800"},ut=["src"],ct={class:"mt-8 mx-auto"},xt={key:0,class:"fixed inset-0 bg-black px-4 sm:px-44 bg-opacity-50 flex items-center justify-center z-50"},pt={class:"bg-white p-6 rounded-lg w-full"},mt={class:"mb-4 text-base sm:text-2xl"},bt={class:"mb-4 text-base sm:text-2xl"},gt={key:1,class:"fixed inset-0 bg-black px-4 sm:px-44 bg-opacity-50 flex items-center justify-center z-50"},vt={class:"bg-white p-6 rounded-lg w-full"},ft={class:"flex justify-end pr-6 pt-4"},yt={class:"flex flex-wrap gap-8 mt-4 text-base sm:text-4xl"},wt={class:"w-auto border-r pr-2 border-gray-600"},ht={class:"w-auto pr-2"},_t={class:"mt-6 text-base sm:text-4xl"},kt={class:"w-full flex flex-wrap justify-center gap-4 sm:gap-6 mt-6"},Ct={class:"flex justify-end pr-6 pt-4"},jt={class:"px-6 mt-4"},Nt={class:"max-h-80 overflow-y-auto pr-2 space-y-4"},$t={class:"space-y-4"},Ot={class:"flex flex-col gap-2"},Vt={class:"font-bold text-xl sm:text-2xl text-blue-900 flex items-center gap-2"},Et={class:"text-lg sm:text-xl text-gray-700 leading-relaxed"},Pt={class:"flex justify-center gap-4 text-center h-full my-8"},Kt={__name:"Proyectos",props:{proyectos:Object,votante:Object,last_vote:Number},setup(g){const y=q("$swal"),a=g;console.log(a);const u=F({isProyecto:!0,id_votante:a.votante[0].id,id_candidato:0,id_eventos:0,tipo:"",subtipo:0,estado:"Activo",last_vote:a.last_vote?parseInt(a.last_vote):0}),S=[{url:"",text:"Votaciones"}],O=x(!0),w=x(!1),h=x(!1),_=x({proyecto:{detalle:""}}),k=x(0),d=x([]),z=function(o){let t=o.split(" "),s="",v=0;for(var b=0;b<t.length&&v<2;b++)t[b].length>0&&t[b]!==""&&(s+=t[b][0],v++);return s},A=o=>`/storage/uploads/usuarios/${o}`,I=o=>`/storage/uploads/proyectos/${o}`,m=o=>{var t;return console.log(o),(t=G.find(s=>s.value==o))==null?void 0:t.label},B=(o,t)=>o?o.length>t?o.substring(0,t)+"...":o:"",T=o=>{_.value=o,w.value=!0},V=o=>{d.value=o,console.log(o),u.id_candidato=o?o.id_proyecto:0,u.id_eventos=o?o.id_evento:a.proyectos[0].id_evento,u.tipo=o?o.proyecto.tipo:a.proyectos[0].proyecto.tipo,u.subtipo=o?o.proyecto.subtipo:a.proyectos[0].proyecto.subtipo,k.value=o?o.id:null,h.value=!0},L=()=>{u.post(route("votos.store"),{onSuccess:()=>{y({title:"Voto registrado exitosamente",text:"Su voto ha sido registrado",icon:"success",buttons:!1,closeOnClickOutside:!1,closeOnEsc:!1}),setTimeout(()=>{y({title:"Voto registrado exitosamente",text:"Su voto ha sido registrado",icon:"success",buttons:{confirm:"OK"}}).then(()=>{K.get("dashboard")})},3e3)},onError:()=>y({title:"Error en el registro",text:"Su voto no fue asignado, vuelve a intentar nuevamente",icon:"error"})})},E=o=>{window.speechSynthesis.cancel();const t=new SpeechSynthesisUtterance(o);t.lang="es-CO",t.rate=1,t.pitch=1,window.speechSynthesis.speak(t)},D=()=>{let o="Aviso importante para el proceso de votaciÃ³n. Revise bien su elecciÃ³n antes de votar, ya que no se permitirÃ¡ una segunda oportunidad. Proyectos disponibles: ";a.proyectos.forEach((t,s)=>{o+=`. Proyecto: ${s+1}. ${t.proyecto.detalle}. `}),E(o)},M=o=>{let t="Confirmar voto EstÃ¡ a punto de votar por el siguiente proyecto: Proyectos disponibles: NÃºmero Proyecto: "+o?o.proyecto.numero_tarjeton:"Elecciones presupuesto participativo 2025 Comuna o Corregimiento: "+o?m(o.proyecto.subtipo):m(a.proyectos[0].proyecto.subtipo)+"Nombre Proyecto: "+o?o.proyecto.detalle:"VOTO EN BLANCO. ";E(t)};return(o,t)=>(r(),n(j,null,[c(f(R),{title:"Votaciones"}),c(U,{breadCrumbLinks:S},{header:p(()=>[l(i(o.$page.props.auth.user.email=="ppt"?"Elecciones Presupuesto Participativo":"Votaciones"),1)]),default:p(()=>[e("div",J,[e("div",Q,[(r(!0),n(j,null,P(g.proyectos,s=>(r(),n("div",{key:s.id,class:N(["flex flex-col w-full h-full p-2 inline-block m-auto mb-4 rounded-lg shadow-xl bg-gray-200 hover:bg-gray-300 text-gray-800",k.value===s.id?"border-4 border-red-500":""])},[e("div",W,[s.proyecto.tipo_proyecto.imagen==null?(r(),n("div",X,[e("p",Y,i(z(s.proyecto.detalle)),1)])):(r(),n("div",tt,[e("img",{src:I(s.proyecto.tipo_proyecto.imagen),alt:"Imagen de proyecto",class:"w-full h-full object-cover"},null,8,et)]))]),c(f(Z),{value:m(s.proyecto.subtipo),class:"!bg-primary text-[8px] sm:text-sm !text-white w-full flex p-2"},null,8,["value"]),e("div",ot,[e("h2",st," Proyecto -- "+i(s.proyecto.numero_tarjeton),1),e("p",lt,[t[7]||(t[7]=e("b",null,"Nombre Proyecto:",-1)),t[8]||(t[8]=l()),t[9]||(t[9]=e("br",null,null,-1)),l(" "+i(s.proyecto.detalle),1)]),e("p",it,[t[10]||(t[10]=e("b",null,"DescripciÃ³n:",-1)),t[11]||(t[11]=l()),t[12]||(t[12]=e("br",null,null,-1)),l(" "+i(B(s.proyecto.descripcion,80))+" ",1),s.proyecto.descripcion.length>80?(r(),n("span",{key:0,class:"text-blue-600 cursor-pointer underline",onClick:v=>T(s)}," Ver mÃ¡s ",8,nt)):C("",!0)])]),e("div",rt,[c($,{type:"button",onClick:v=>V(s),class:"sm:text-2xl text-xl"},{default:p(()=>t[13]||(t[13]=[l(" Votar ")])),_:2},1032,["onClick"])])],2))),128)),e("div",{class:N(["flex flex-col w-full h-full p-2 inline-block m-auto mb-4 rounded-lg shadow-xl bg-gray-200 hover:bg-gray-300 text-gray-800",k.value===null?"border-4 border-red-500":""])},[e("div",at,[e("div",dt,[e("img",{src:A("12345678_candidatos.jpg"),alt:"Imagen de voto en blanco",class:"w-full h-full object-cover"},null,8,ut)])]),t[15]||(t[15]=e("div",{class:"mt-6 mx-auto"},[e("h2",{class:"sm:text-4xl text-2xl font-bold capitalize text-justify"},[l(" VOTO "),e("br"),l(" EN BLANCO ")])],-1)),e("div",ct,[c($,{type:"button",onClick:t[0]||(t[0]=s=>V(null)),class:"sm:text-2xl text-xl"},{default:p(()=>t[14]||(t[14]=[l(" Votar ")])),_:1})])],2)])]),w.value?(r(),n("div",xt,[e("div",pt,[t[17]||(t[17]=e("h2",{class:"sm:text-4xl text-xl font-bold mb-4 text-center"}," Detalle del Proyecto ",-1)),e("p",mt,i(_.value.proyecto.detalle),1),e("p",bt,[t[16]||(t[16]=e("b",null,"descripciÃ³n:",-1)),l(" "+i(_.value.proyecto.descripcion),1)]),e("button",{onClick:t[1]||(t[1]=s=>w.value=!1),class:"bg-indigo-600 text-white px-4 py-2 rounded"}," Cerrar ")])])):C("",!0),h.value?(r(),n("div",gt,[e("div",vt,[t[21]||(t[21]=e("h2",{class:"sm:text-8xl text-2xl font-bold mb-8 pb-4 sm:py-8 border-b border-gray-300 text-center"}," ðŸ—³ï¸ Confirmar voto ",-1)),e("div",ft,[e("button",{onClick:t[2]||(t[2]=s=>M(d.value)),class:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-lg sm:text-xl shadow-md"}," ðŸ”Š Escuchar ")]),t[22]||(t[22]=e("p",{class:"mb-4 text-base sm:text-4xl"},[e("span",{class:"text-lg sm:text-5xl font-bold"},"EstÃ¡ a punto de votar por el siguiente proyecto:")],-1)),e("div",yt,[e("div",wt,[t[18]||(t[18]=e("span",{class:"text-gray-600"},"NÃºmero Proyecto:",-1)),l(" "+i(d.value?d.value.proyecto.numero_tarjeton:"Elecciones presupuesto participativo 2025"),1)]),e("div",ht,[t[19]||(t[19]=e("span",{class:"text-gray-600"},"Comuna/Corregimiento:",-1)),l(" "+i(d.value?m(d.value.proyecto.subtipo):m(g.proyectos[0].proyecto.subtipo)),1)])]),e("div",_t,[t[20]||(t[20]=e("span",{class:"text-gray-600"},"Nombre Proyecto:",-1)),l(" "+i(d.value?d.value.proyecto.detalle:"VOTO EN BLANCO"),1)]),e("div",kt,[e("button",{onClick:t[3]||(t[3]=s=>h.value=!1),class:"bg-red-600 text-white px-4 py-2 rounded sm:text-5xl"}," Cancelar "),e("button",{onClick:t[4]||(t[4]=s=>L()),class:"bg-indigo-600 text-white px-4 py-2 rounded sm:text-5xl"}," Confirmar ")])])])):C("",!0),c(H,{show:O.value,closeable:!0},{default:p(()=>[t[26]||(t[26]=e("h2",{class:"p-4 sm:text-4xl text-2xl font-bold flex justify-center text-center bg-azul text-white"}," Aviso Importante para el proceso de votaciÃ³n ",-1)),e("div",Ct,[e("button",{onClick:t[5]||(t[5]=s=>D()),class:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-lg sm:text-xl shadow-md"}," ðŸ”Š Escuchar ")]),t[27]||(t[27]=e("div",{class:"text-justify sm:text-2xl text-xl p-6 leading-relaxed"},[e("p",null," Revise bien su elecciÃ³n antes de votar, ya que no se permitirÃ¡ una segunda oportunidad para realizar esta acciÃ³n. ")],-1)),e("div",jt,[t[24]||(t[24]=e("h3",{class:"text-2xl sm:text-3xl font-semibold mb-4 text-gray-800"}," Proyectos Disponibles ",-1)),e("div",Nt,[e("ul",$t,[(r(!0),n(j,null,P(g.proyectos,s=>(r(),n("li",{key:s.id,class:"p-4 rounded-xl shadow-md bg-gray-50 border border-gray-200"},[e("div",Ot,[e("h4",Vt,[t[23]||(t[23]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-7 h-7 sm:w-8 sm:h-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 1.567-3 3.5S10.343 15 12 15s3-1.567 3-3.5S13.657 8 12 8zm0 10c-3.314 0-6-2.463-6-5.5S8.686 7 12 7s6 2.463 6 5.5S15.314 18 12 18z"})],-1)),l(" "+i(s.nombre),1)]),e("p",Et,i(s.proyecto.detalle),1)])]))),128))])])]),e("div",Pt,[c($,{type:"button",class:N(["h-full text-xl sm:text-2xl px-8 py-3",{"opacity-25":f(u).processing}]),onClick:t[6]||(t[6]=s=>O.value=!1),disabled:f(u).processing},{default:p(()=>t[25]||(t[25]=[l(" Continuar ")])),_:1},8,["class","disabled"])])]),_:1},8,["show"])]),_:1})],64))}};export{Kt as default};
