import{_ as F}from"./AuthenticatedLayout-B3tXP1Q5.js";import{x as R,T as K,r as g,c as i,o as r,b as u,u as b,Z,d as x,e,p as S,F as V,k as E,n as w,t as n,j as l,N as G}from"./app-BkWi3yaD.js";import{_ as h}from"./PrimaryButton-DWyn1trg.js";import{s as H}from"./index-XIsGBVuw.js";import{c as J}from"./comunas_completas-Gg-gMHNz.js";import{_ as Q}from"./Modal-BDIdJurY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BreadCrumb-DQjkX4kZ.js";import"./SecondaryButtonReturn-B423gh5W.js";import"./index-D2WDQxwZ.js";import"./index-pw-nVj9H.js";import"./index-DCjFGEm2.js";import"./XCircleIcon-D2DG6BGc.js";const W={class:"items-center flex flex-col justify-center mx-2"},X={class:"sm:flex w-full sm:grid md:grid-cols-2 grid-cols-2 gap-4 mt-6"},Y={class:"mx-auto w-full flex justify-center items-center"},tt={key:0,class:"w-full flex justify-center items-center h-[200pt] sm:h-[300pt] bg-indigo-200 text-indigo-800"},et={class:"m-auto sm:text-4xxl text-xxl object-cover"},st={key:1,class:"w-full h-[200pt] sm:h-[300pt] bg-indigo-200 text-indigo-800"},ot=["src"],lt={class:"mt-4 mx-auto"},nt={class:"sm:text-4xl text-2xl font-bold capitalize text-justify"},it={class:"sm:text-2xl text-xl text-justify"},rt={class:"sm:text-2xl text-xl text-justify"},at=["onClick"],dt={class:"mt-4 mx-auto"},ct={class:"mx-auto"},ut={class:"w-full h-[200pt] sm:h-[300pt] bg-indigo-200 text-indigo-800"},xt=["src"],pt={class:"mt-8 mx-auto"},mt={key:0,class:"fixed inset-0 bg-black px-4 sm:px-44 bg-opacity-50 flex items-center justify-center z-50"},gt={class:"bg-white p-6 rounded-lg w-full"},bt={class:"flex justify-end pr-6 pt-2"},vt={class:"mb-4 text-base sm:text-2xl"},ft={class:"mb-4 text-base sm:text-2xl"},yt={key:1,class:"fixed inset-0 bg-black px-4 sm:px-44 bg-opacity-50 flex items-center justify-center z-50"},wt={class:"bg-white p-6 rounded-lg w-full"},ht={class:"flex justify-end pr-6 pt-2"},_t={class:"mb-4 text-base sm:text-4xl"},kt={class:"text-lg sm:text-5xl font-bold"},Ct={class:"flex flex-wrap gap-8 mt-4 text-base sm:text-4xl"},jt={class:"w-auto"},$t={class:"mt-6 text-base sm:text-4xl"},Nt={class:"w-full flex flex-wrap justify-center gap-4 sm:gap-6 mt-6"},St={class:"flex justify-between items-center px-6 pt-4"},Vt={class:"px-6 mt-4"},Ot={class:"pr-2 space-y-4"},Et={class:"space-y-4"},zt={class:"flex flex-col gap-2"},Pt={class:"font-bold text-xl sm:text-2xl text-blue-900 flex items-center gap-2"},At={class:"text-lg sm:text-xl text-gray-700 leading-relaxed"},Bt={class:"flex justify-center text-center my-8"},Jt={__name:"Proyectos",props:{proyectos:Object,votante:Object,last_vote:Number,evento:String},setup(c){const _=R("$swal"),a=c;console.log(a);const d=K({isProyecto:!0,id_votante:a.votante[0].id,id_candidato:0,id_eventos:0,tipo:"",subtipo:0,estado:"Activo",last_vote:a.last_vote?parseInt(a.last_vote):0}),z=[{url:"",text:"Votaciones"}],k=g(!0),C=g(!1),j=g(!1),y=g({proyecto:{detalle:""}}),$=g(0),p=g([]),P=function(s){let t=s.split(" "),o="",m=0;for(var f=0;f<t.length&&m<2;f++)t[f].length>0&&t[f]!==""&&(o+=t[f][0],m++);return o},A=s=>{if(!s||typeof s!="string")return"";const t=s.toLowerCase(),o="vigencias";if(t.includes(o)){const m=t.indexOf(o);return s.substring(m).trim()}return""},B=s=>`/storage/uploads/usuarios/${s}`,I=s=>`/storage/uploads/proyectos/${s}`,v=s=>{var t;return console.log(s),(t=J.find(o=>o.value==s))==null?void 0:t.label},T=(s,t)=>s?s.length>t?s.substring(0,t)+"...":s:"",L=s=>{y.value=s,C.value=!0},O=s=>{p.value=s,console.log(s),d.id_candidato=s?s.id_proyecto:0,d.id_eventos=s?s.id_evento:a.proyectos[0].id_evento,d.tipo=s?s.proyecto.tipo:a.proyectos[0].proyecto.tipo,d.subtipo=s?s.proyecto.subtipo:a.proyectos[0].proyecto.subtipo,$.value=s?s.id:null,j.value=!0},D=()=>{d.post(route("votos.store"),{onSuccess:()=>{_({title:"Voto registrado exitosamente",text:"Su voto ha sido registrado",icon:"success",buttons:!1,closeOnClickOutside:!1,closeOnEsc:!1}),setTimeout(()=>{_({title:"Voto registrado exitosamente",text:"Su voto ha sido registrado",icon:"success",buttons:{confirm:"OK"}}).then(()=>{G.get("dashboard")})},3e3)},onError:()=>_({title:"Error en el registro",text:"Su voto no fue asignado, vuelve a intentar nuevamente",icon:"error"})})},N=s=>{window.speechSynthesis.cancel();const t=new SpeechSynthesisUtterance(s);t.lang="es-CO",t.rate=1,t.pitch=1,window.speechSynthesis.speak(t)},M=()=>{let s="Aviso importante para el proceso de votaciÃ³n. Revise bien su elecciÃ³n antes de votar, ya que no se permitirÃ¡ una segunda oportunidad. Proyectos disponibles: ";a.proyectos.forEach((t,o)=>{s+=`. Proyecto: ${o+1}. ${t.proyecto.detalle}. `}),N(s)},U=s=>{let t="ConfirmaciÃ³n de voto. ";if(s)t+="EstÃ¡ a punto de votar por el siguiente proyecto: NÃºmero del proyecto: "+s.proyecto.numero_tarjeton+". Comuna o Corregimiento: "+v(s.proyecto.subtipo)+". Nombre del proyecto: "+s.proyecto.detalle+". ";else{const o=a.proyectos[0];t+="EstÃ¡ a punto de emitir un voto en blanco para las elecciones de presupuesto participativo 2025. Comuna o Corregimiento: "+v(o.proyecto.subtipo)+". Voto en blanco. "}N(t)},q=s=>{let t="Detalle del proyecto. Nombre del proyecto: "+s.proyecto.detalle+". DescripciÃ³n: "+s.proyecto.descripcion+". ";N(t)};return(s,t)=>(r(),i(V,null,[u(b(Z),{title:"Votaciones"}),u(F,{breadCrumbLinks:z},{header:x(()=>[l(n(s.$page.props.auth.user.email=="ppt"?c.evento!=""&&c.evento!=null?c.evento:"Elecciones Presupuesto Participativo":"Votaciones"),1)]),default:x(()=>[e("div",W,[e("div",X,[(r(!0),i(V,null,E(c.proyectos,o=>(r(),i("div",{key:o.id,class:w(["flex flex-col w-full h-full p-2 inline-block m-auto mb-4 rounded-lg shadow-xl bg-gray-200 hover:bg-gray-300 text-gray-800",$.value===o.id?"border-4 border-red-500":""])},[e("div",Y,[o.proyecto.tipo_proyecto.imagen==null?(r(),i("div",tt,[e("p",et,n(P(o.proyecto.detalle)),1)])):(r(),i("div",st,[e("img",{src:I(o.proyecto.tipo_proyecto.imagen),alt:"Imagen de proyecto",class:"w-full h-full object-cover"},null,8,ot)]))]),u(b(H),{value:v(o.proyecto.subtipo),class:"!bg-primary text-[8px] sm:text-sm !text-white w-full flex p-2"},null,8,["value"]),e("div",lt,[e("h2",nt," TarjetÃ³n -- "+n(o.proyecto.numero_tarjeton),1),e("p",it,[t[9]||(t[9]=e("b",null,"Nombre Proyecto:",-1)),t[10]||(t[10]=l()),t[11]||(t[11]=e("br",null,null,-1)),l(" "+n(o.proyecto.detalle),1)]),e("p",rt,[t[12]||(t[12]=e("b",null,"DescripciÃ³n:",-1)),t[13]||(t[13]=l()),t[14]||(t[14]=e("br",null,null,-1)),l(" "+n(T(o.proyecto.descripcion,80))+" ",1),o.proyecto.descripcion.length>80?(r(),i("span",{key:0,class:"text-blue-600 cursor-pointer underline",onClick:m=>L(o)}," Ver mÃ¡s ",8,at)):S("",!0)])]),e("div",dt,[u(h,{type:"button",onClick:m=>O(o),class:"sm:text-2xl text-xl"},{default:x(()=>t[15]||(t[15]=[l(" Votar ")])),_:2},1032,["onClick"])])],2))),128)),e("div",{class:w(["flex flex-col w-full h-full p-2 inline-block m-auto mb-4 rounded-lg shadow-xl bg-gray-200 hover:bg-gray-300 text-gray-800",$.value===null?"border-4 border-red-500":""])},[e("div",ct,[e("div",ut,[e("img",{src:B("12345678_candidatos.jpg"),alt:"Imagen de voto en blanco",class:"w-full h-full object-cover"},null,8,xt)])]),t[17]||(t[17]=e("div",{class:"mt-6 mx-auto"},[e("h2",{class:"sm:text-4xl text-2xl font-bold capitalize text-justify"},[l(" VOTO "),e("br"),l(" EN BLANCO ")])],-1)),e("div",pt,[u(h,{type:"button",onClick:t[0]||(t[0]=o=>O(null)),class:"sm:text-2xl text-xl"},{default:x(()=>t[16]||(t[16]=[l(" Votar ")])),_:1})])],2)])]),C.value?(r(),i("div",mt,[e("div",gt,[t[19]||(t[19]=e("h2",{class:"sm:text-4xl text-xl font-bold mb-4 text-center"}," Detalle del Proyecto ",-1)),e("div",bt,[e("button",{onClick:t[1]||(t[1]=o=>q(y.value)),class:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-lg sm:text-xl shadow-md"}," ðŸ”Š Escuchar ")]),e("p",vt,n(y.value.proyecto.detalle),1),e("p",ft,[t[18]||(t[18]=e("b",null,"descripciÃ³n:",-1)),l(" "+n(y.value.proyecto.descripcion),1)]),e("button",{onClick:t[2]||(t[2]=o=>C.value=!1),class:"bg-indigo-600 text-white px-4 py-2 rounded"}," Cerrar ")])])):S("",!0),j.value?(r(),i("div",yt,[e("div",wt,[t[22]||(t[22]=e("h2",{class:"sm:text-8xl text-2xl font-bold mb-8 pb-4 sm:py-8 border-b border-gray-300 text-center"}," ðŸ—³ï¸ Confirmar voto ",-1)),e("div",ht,[e("button",{onClick:t[3]||(t[3]=o=>U(p.value)),class:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-lg sm:text-xl shadow-md"}," ðŸ”Š Escuchar ")]),e("p",_t,[e("span",kt,"EstÃ¡ a punto de votar por el siguiente proyecto de la "+n(A(c.evento))+":",1)]),e("div",Ct,[e("div",jt,[t[20]||(t[20]=e("span",{class:"text-gray-600"},"Comuna/Corregimiento:",-1)),l(" "+n(p.value?v(p.value.proyecto.subtipo):v(c.proyectos[0].proyecto.subtipo)),1)])]),e("div",$t,[t[21]||(t[21]=e("span",{class:"text-gray-600"},"Nombre Proyecto:",-1)),l(" "+n(p.value?p.value.proyecto.detalle:"VOTO EN BLANCO"),1)]),e("div",Nt,[e("button",{onClick:t[4]||(t[4]=o=>j.value=!1),class:"bg-red-600 text-white px-4 py-2 rounded sm:text-5xl"}," Cancelar "),e("button",{onClick:t[5]||(t[5]=o=>D()),class:"bg-indigo-600 text-white px-4 py-2 rounded sm:text-5xl"}," Confirmar ")])])])):S("",!0),u(Q,{show:k.value,closeable:!0,height:"90vh"},{default:x(()=>[t[28]||(t[28]=e("h2",{class:"p-4 sm:text-4xl text-2xl font-bold flex justify-center text-center bg-azul text-white items-center"}," Aviso Importante para el proceso de votaciÃ³n ",-1)),e("div",St,[e("button",{onClick:t[6]||(t[6]=o=>M()),class:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-lg sm:text-xl shadow-md"}," ðŸ”Š Escuchar "),u(h,{type:"button",class:w(["text-lg sm:text-xl px-6 py-2",{"opacity-25":b(d).processing}]),onClick:t[7]||(t[7]=o=>k.value=!1),disabled:b(d).processing},{default:x(()=>t[23]||(t[23]=[l(" Continuar ")])),_:1},8,["class","disabled"])]),t[29]||(t[29]=e("div",{class:"text-justify sm:text-2xl text-xl p-6 leading-relaxed"},[e("p",null," Revise bien su elecciÃ³n antes de votar, ya que no se permitirÃ¡ una segunda oportunidad para realizar esta acciÃ³n. ")],-1)),e("div",Vt,[t[26]||(t[26]=e("h3",{class:"text-2xl sm:text-3xl font-semibold mb-4 text-gray-800"}," Proyectos Disponibles ",-1)),e("div",Ot,[e("ul",Et,[(r(!0),i(V,null,E(c.proyectos,o=>(r(),i("li",{key:o.id,class:"p-4 rounded-xl shadow-md bg-gray-50 border border-gray-200"},[e("div",zt,[e("h4",Pt,[t[24]||(t[24]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-7 h-7 sm:w-8 sm:h-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 1.567-3 3.5S10.343 15 12 15s3-1.567 3-3.5S13.657 8 12 8zm0 10c-3.314 0-6-2.463-6-5.5S8.686 7 12 7s6 2.463 6 5.5S15.314 18 12 18z"})],-1)),l(" "+n(o.nombre),1)]),e("p",At,n(o.proyecto.detalle),1)])]))),128)),t[25]||(t[25]=e("li",{class:"p-4 rounded-xl shadow-md bg-gray-50 border border-gray-200"},[e("div",{class:"flex flex-col gap-2"},[e("h4",{class:"font-bold text-xl sm:text-2xl text-blue-900 flex items-center gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-7 h-7 sm:w-8 sm:h-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8c-1.657 0-3 1.567-3 3.5S10.343 15 12 15s3-1.567 3-3.5S13.657 8 12 8zm0 10c-3.314 0-6-2.463-6-5.5S8.686 7 12 7s6 2.463 6 5.5S15.314 18 12 18z"})])]),e("p",{class:"text-lg sm:text-xl text-gray-700 leading-relaxed"}," VOTO EN BLANCO ")])],-1))])])]),e("div",Bt,[u(h,{type:"button",class:w(["text-xl sm:text-2xl px-8 py-3",{"opacity-25":b(d).processing}]),onClick:t[8]||(t[8]=o=>k.value=!1),disabled:b(d).processing},{default:x(()=>t[27]||(t[27]=[l(" Continuar ")])),_:1},8,["class","disabled"])])]),_:1},8,["show"])]),_:1})],64))}};export{Jt as default};
