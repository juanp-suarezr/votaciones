import{r as b,T as N,c as u,o as c,b as o,u as a,Z as R,d as g,e as t,j as x,B as U,f as S,v as A,n as _,p as k,F as B}from"./app-BrbNyqBq.js";import{_ as L}from"./AuthenticatedLayout-DpmWB2mK.js";import{_ as d}from"./InputError-DqAz9kwy.js";import{_ as f}from"./InputLabel-YNTi7jDt.js";import{_ as T}from"./PrimaryButton-bcdnKt-A.js";import{_ as p}from"./TextInput-DDMdOlsd.js";import{_ as j}from"./SecondaryLink-CDzMZqII.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BreadCrumb-D-Bzut0a.js";import"./SecondaryButtonReturn-BtL6nP0K.js";import"./XCircleIcon-vpQHy-6_.js";import"./index-Cjl29ANA.js";import"./index-CX35mLVb.js";import"./index-Db2ckl9V.js";const q={class:"px-4 mx-auto bg-white border shadow-sm rounded-xl mt-8"},P={class:"bg-gray-100 border-b rounded-t-xl py-3 px-4 md:py-4 md:px-5 flex justify-between items-center"},X={class:"p-4 md:p-5"},Y={class:"mb-2"},z={class:"mb-2"},E={class:"mb-2"},G={class:"mb-2"},I={class:"flex gap-4 mb-2"},W={key:0},Z={key:0,class:"mt-2"},H=["src"],J={key:1},K={key:0,class:"mt-2"},O=["src"],Q={class:"mt-4 flex flex-col items-end"},pe={__name:"Add",setup(ee){const i=b(null),m=b("imagen"),n=b(null);let v=!1;const h=[{url:route("delegados.index"),text:"Gestion de delegados"},{url:"",text:"Añadir Delegado"}],s=N({nombre:"",identificacion:"",cargo:"",tipo:"secretario",firma:null}),C=r=>{const e=r.target.files[0];if(s.firma=e,e){const l=new FileReader;l.onload=M=>{i.value=M.target.result},l.readAsDataURL(e)}else i.value=null},V=r=>{v=!0;const e=n.value.getContext("2d");e.beginPath(),e.moveTo(r.offsetX,r.offsetY)},D=r=>{if(!v)return;const e=n.value.getContext("2d");e.lineTo(r.offsetX,r.offsetY),e.strokeStyle="#222",e.lineWidth=2,e.stroke()},w=()=>{v=!1},y=()=>{n.value.getContext("2d").clearRect(0,0,n.value.width,n.value.height),i.value=null,s.firma=null},F=()=>{n.value.toBlob(r=>{s.firma=new File([r],"firma.webp",{type:"image/webp"});const e=new FileReader;e.onload=l=>{i.value=l.target.result},e.readAsDataURL(s.firma)},"image/webp")},$=()=>{s.post(route("delegados.store"),{forceFormData:!0,onSuccess:()=>{s.reset(),i.value=null,y()}})};return(r,e)=>(c(),u(B,null,[o(a(R),{title:"Agregar delegado"}),o(L,{breadCrumbLinks:h},{header:g(()=>e[6]||(e[6]=[x(" Nuevo delegado ")])),default:g(()=>[t("div",q,[t("div",P,[e[8]||(e[8]=t("h3",{class:"text-gray-500"},"Nuevo delegado",-1)),o(j,{href:r.route("delegados.index")},{default:g(()=>e[7]||(e[7]=[x(" Regresar ")])),_:1},8,["href"])]),t("div",X,[t("form",{onSubmit:U($,["prevent"]),enctype:"multipart/form-data",class:"sm:grid sm:grid-cols-2 gap-4"},[t("div",Y,[o(f,{for:"nombre",value:"Nombre(*)"}),o(p,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:a(s).nombre,"onUpdate:modelValue":e[0]||(e[0]=l=>a(s).nombre=l),required:"",autofocus:"",autocomplete:"off"},null,8,["modelValue"]),o(d,{class:"mt-2",message:a(s).errors.nombre},null,8,["message"])]),t("div",z,[o(f,{for:"identificacion",value:"Identificación(*)"}),o(p,{id:"identificacion",type:"text",class:"mt-1 block w-full",modelValue:a(s).identificacion,"onUpdate:modelValue":e[1]||(e[1]=l=>a(s).identificacion=l),required:"",autofocus:"",autocomplete:"off"},null,8,["modelValue"]),o(d,{class:"mt-2",message:a(s).errors.identificacion},null,8,["message"])]),t("div",E,[o(f,{for:"cargo",value:"Cargo"}),o(p,{id:"cargo",type:"text",class:"mt-1 block w-full",modelValue:a(s).cargo,"onUpdate:modelValue":e[2]||(e[2]=l=>a(s).cargo=l),required:"",autocomplete:"off"},null,8,["modelValue"]),o(d,{class:"mt-2",message:a(s).errors.cargo},null,8,["message"])]),t("div",G,[o(f,{for:"tipo",value:"Tipo"}),S(t("select",{id:"tipo","onUpdate:modelValue":e[3]||(e[3]=l=>a(s).tipo=l),class:"block mt-1 w-full rounded-md form-select focus:border-sky-600"},e[9]||(e[9]=[t("option",{value:"",disabled:"",selected:""},"Seleccione un tipo",-1),t("option",{value:"secretario"},"Secretario",-1)]),512),[[A,a(s).tipo]]),o(d,{class:"mt-2",message:a(s).errors.tipo},null,8,["message"])]),t("div",null,[o(f,{for:"firma",value:"Firma"}),t("div",I,[t("button",{type:"button",class:_(["px-2 py-1 rounded",m.value==="imagen"?"bg-blue-600 text-white":"bg-gray-200"]),onClick:e[4]||(e[4]=l=>m.value="imagen")}," Cargar imagen ",2),t("button",{type:"button",class:_(["px-2 py-1 rounded",m.value==="canvas"?"bg-blue-600 text-white":"bg-gray-200"]),onClick:e[5]||(e[5]=l=>m.value="canvas")}," Dibujar firma ",2)]),m.value==="imagen"?(c(),u("div",W,[o(p,{id:"firma",type:"file",class:"mt-1 block w-full",accept:"image/*",onChange:C}),o(d,{class:"mt-2",message:a(s).errors.firma},null,8,["message"]),i.value?(c(),u("div",Z,[t("img",{src:i.value,alt:"Vista previa de la firma",class:"h-24 border rounded"},null,8,H)])):k("",!0)])):(c(),u("div",J,[t("canvas",{ref_key:"canvas",ref:n,width:"200",height:"100",class:"border border-gray-400 rounded-md bg-white cursor-crosshair",onMousedown:V,onMousemove:D,onMouseup:w,onMouseleave:w},null,544),t("div",{class:"flex gap-2 mt-1"},[t("button",{type:"button",onClick:y,class:"text-xl text-blue-600 underline"}," Limpiar "),t("button",{type:"button",onClick:F,class:"text-xl text-green-600 underline"}," Usar firma ")]),o(d,{class:"mt-2",message:a(s).errors.firma},null,8,["message"]),i.value?(c(),u("div",K,[t("img",{src:i.value,alt:"Vista previa de la firma",class:"h-24 border rounded"},null,8,O)])):k("",!0)]))]),t("div",Q,[o(T,{class:_({"opacity-25":a(s).processing}),disabled:a(s).processing},{default:g(()=>e[10]||(e[10]=[x(" Registrar Delegado ")])),_:1},8,["class","disabled"])])],32)])])]),_:1})],64))}};export{pe as default};
