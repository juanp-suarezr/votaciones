import{x as q,r as c,T as N,e as y,f as z,o as p,c as g,a as s,u as i,w as a,F as C,Z as B,b as n,d as e,i as D,t as x,z as F,n as I}from"./app-DlCkFuR7.js";import{_ as L}from"./AuthenticatedLayout-wUcV2vZ9.js";import{_ as S}from"./PrimaryLink-vQiXJsMg.js";import{a as T,_ as A}from"./Modal-Pb8lMDBu.js";import{_ as k}from"./DangerButton-GlK4Dafb.js";import{_ as K,a as M,b as O}from"./TextInput-NCKf4ynQ.js";import{_ as Z}from"./SecondaryLink-6Ddd8gcN.js";const G={class:"lg:w-1/2 md:w-2/3 overflow-x-scroll md:overflow-x-auto"},H={class:"text-right p-4"},J={class:"lg:w-1/2 md:w-2/3 overflow-x-scroll md:overflow-x-auto rounded-lg shadow"},Q={class:"w-full whitespace-no-wrap overflow-x-auto"},W=e("thead",null,[e("tr",{class:"border-b bg-gray-50 text-left text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("th",{class:"border-b-2 border-gray-200 bg-gray-100 sm:px-5 sm:py-3 p-2 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Nombre "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 sm:px-5 sm:py-3 p-2 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Acciones ")])],-1),X={class:"border-b border-gray-200 bg-white sm:px-5 sm:py-5 p-2 sm:text-sm text-xs"},Y={class:"text-gray-900 whitespace-no-wrap"},ee={class:"inline-flex w-full border-b border-gray-200 bg-white sm:px-5 sm:py-5 p-2 sm:text-sm text-xs"},se={class:"flex items-center border-b bg-gray-50 px-5 py-2 xs:flex-row justify-between text-gray-500 text-xs font-semibold"},te=["disabled"],oe=e("i",{class:"fa-solid fa-arrow-left"},null,-1),ae=[oe],re=["disabled"],le=e("i",{class:"fa-solid fa-arrow-right"},null,-1),ie=[le],ne={class:"p-6"},ce=e("h2",{class:"text-lg font-medium text-gray-900"}," ¿Estás seguro de que quieres eliminar un rol de usuario? ",-1),de=e("p",{class:"mt-1 text-sm text-gray-600"}," Una vez que se elimine el rol, todos los permisos se eliminaran permanentemente de los usuarios. Por favor ingrese su contraseña para confirmar que desea eliminar. ",-1),ue={class:"mt-6"},me={class:"mt-6 flex justify-end"},ve={__name:"Index",props:{roles:Object},setup($){const h=$,E=q("$swal"),m=c(!1),w=c(),o=N({password:""}),_=()=>{m.value=!1,o.reset()},P=r=>{m.value=!0,w.value=r},v=()=>{o.delete(route("roles.destroy",w.value),{preserveScroll:!0,onSuccess:()=>{_(),E({title:"Registro Eliminado",text:"El rol se ha eliminado exitosamente",icon:"success"})},onError:()=>passwordInput.value.focus(),onFinish:()=>o.reset()})},d=c(8),t=c(0),f=y(()=>Math.ceil(h.roles.length/d.value)),V=()=>{t.value>0&&t.value--},R=()=>{t.value<f.value-1&&t.value++};z(d,()=>{t.value=0});const U=c(""),j=y(()=>{const r=t.value*d.value,u=r+d.value;return h.roles.filter(b=>b.name.toLowerCase().includes(U.value.toLowerCase())).slice(r,u)});return(r,u)=>(p(),g(C,null,[s(i(B),{title:"Roles del sistema"}),s(L,null,{header:a(()=>[n(" Roles del sistema ")]),default:a(()=>[e("div",G,[e("div",H,[s(S,{href:r.route("roles.create")},{default:a(()=>[n(" Agregar ")]),_:1},8,["href"])])]),e("div",J,[e("table",Q,[W,e("tbody",null,[(p(!0),g(C,null,D(j.value,l=>(p(),g("tr",{key:l.id,class:"text-gray-700"},[e("td",X,[e("p",Y,x(l.name),1)]),e("td",ee,[s(Z,{href:r.route("roles.edit",l.id),class:"mr-2"},{default:a(()=>[n(" Editar ")]),_:2},1032,["href"]),s(k,{onClick:b=>P(l.id)},{default:a(()=>[n("Eliminar")]),_:2},1032,["onClick"])])]))),128))])]),e("div",se,[e("button",{class:"hover:scale-125 transition duration-500 cursor-pointer",onClick:V,disabled:t.value===0},ae,8,te),e("p",null,"Pagina "+x(t.value+1)+" de "+x(f.value),1),e("button",{class:"hover:scale-125 transition duration-500 cursor-pointer",onClick:R,disabled:t.value===f.value-1},ie,8,re)])]),s(T,{show:m.value,onClose:_},{default:a(()=>[e("div",ne,[ce,de,e("div",ue,[s(K,{for:"password",value:"Contraseña",class:"sr-only"}),s(M,{id:"password",ref:"passwordInput",modelValue:i(o).password,"onUpdate:modelValue":u[0]||(u[0]=l=>i(o).password=l),type:"password",class:"mt-1 block w-3/4",placeholder:"Contraseña",onKeyup:F(v,["enter"])},null,8,["modelValue"]),s(O,{message:i(o).errors.password,class:"mt-2"},null,8,["message"])]),e("div",me,[s(A,{onClick:_},{default:a(()=>[n(" Cancelar ")]),_:1}),s(k,{class:I(["ms-3",{"opacity-25":i(o).processing}]),disabled:i(o).processing,onClick:v},{default:a(()=>[n(" Eliminar rol ")]),_:1},8,["class","disabled"])])])]),_:1},8,["show"])]),_:1})],64))}};export{ve as default};
