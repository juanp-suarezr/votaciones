import{x as Ie,T as Re,r as n,w as q,s as $e,c as u,o as d,b as r,u as s,Z as ze,d as $,e as t,p as B,f as k,F as T,k as Z,t as F,v as J,E as te,C as fe,j as L,n as ve,l as Ne,z as Oe}from"./app-BVXglOwJ.js";import{_ as Te}from"./AuthenticatedLayout-MmGv485G.js";import{c as pe}from"./comunas-DceGOULS.js";import{b as Le,s as ge,t as Ae,e as Pe,c as Ye}from"./etnia-BJhygttj.js";import{_ as p}from"./InputError-CP9QQ6KO.js";import{_ as f}from"./InputLabel-CAI7mbYi.js";import{_ as be}from"./PrimaryButton-Ct443pLg.js";import{_ as xe}from"./Modal-CftPTsJn.js";import{_ as x}from"./TextInput-zEASgQhd.js";import{s as he}from"./index-_8nVdeqQ.js";import{s as Ge}from"./index-DbvyKyp7.js";import{f as He}from"./cedulaFrontEjemplo-eqgE4YJW.js";import{d as We,T as Xe,n as se}from"./FaceMatcher-DQZ88WER.js";import{r as Ze}from"./PhotoIcon-D3CrAnw4.js";import"./index-DFH5ZPEr.js";import"./index-BRKJn7Sx.js";import"./index-BfCJ4ZBR.js";import"./SecondaryButtonReturn-CREFREZc.js";import"./XCircleIcon-BMfPdikW.js";import"./index-DJrURWio.js";import"./index-Dj1C0Iyt.js";import"./index-CRv3iUAl.js";import"./index-HbGF7fZX.js";const Je={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ke={class:"mt-4 justify-center"},Qe={class:"m-auto py-4 px-4"},eo={key:0,class:"sm:grid sm:grid-cols-2 gap-6 h-full"},oo={class:"mb-2"},ao={class:"mb-2"},to={class:"mb-2"},so=["value"],io={class:"mb-2 sm:block hidden"},ro={key:0,class:"text-red-500"},lo={class:"mb-2 sm:hidden grid grid-cols-3 gap-2"},no={class:"w-auto mt-1"},co={class:"w-auto mt-1"},uo={class:"w-auto mt-1"},mo={key:0,class:"text-red-500"},fo={class:"col-span-2 flex justify-end"},vo={key:1,class:"sm:grid sm:grid-cols-2 gap-6"},po={class:"mb-2"},go={class:"mt-2 block sm:flex"},bo={class:""},xo={class:"sm:ms-6"},ho={key:0,class:"sm:ms-6"},yo={key:1,class:"sm:ms-6"},wo={class:"mb-2"},_o=["value"],ko={class:"mb-2"},Vo=["value"],Co={class:"mb-2"},Eo={class:"mb-2"},Do={key:0,class:"w-full mt-2"},So={class:"mb-2"},jo={class:"my-4 col-span-2 mb-2"},Uo={class:"mb-4 col-span-2 mb-2"},qo={class:"col-span-2 flex justify-between gap-2"},Bo={class:"flex pt-4 justify-end"},Fo={class:"flex pt-4 justify-end h-full"},Mo={key:2,class:"gap-6"},Io={class:"sm:grid sm:grid-cols-2 gap-2 h-full sm:px-16 px-4"},Ro={class:"w-full h-full mt-4"},$o={class:"w-full"},zo=["src"],No={class:"mb-2 h-full flex justify-center items-center mt-4"},Oo={class:"border-2 border-gray-300 rounded-md p-2 h-full"},To={class:"flex justify-center"},Lo=["src","alt"],Ao={key:0,class:"flex justify-center mt-2"},Po={class:"w-full"},Yo={class:"col-span-2 flex justify-between gap-2 mt-4"},Go={class:"flex pt-4 justify-end"},Ho={class:"flex pt-4 justify-end"},Wo={class:"flex justify-center my-12"},Xo={class:"my-12 px-4"},Zo=["value"],Jo=["disabled"],wa={__name:"RegistroVotante",props:{info:{type:Object}},setup(ye){const m=Ie("$swal"),we=[{url:"",text:"Corregir datos"}],c=ye;console.log("info data:",c.info);const o=Re({id_votante:c.info.id||"",nombre:c.info.nombre||"",identificacion:c.info.identificacion||"",tipo_documento:c.info.tipo_documento||"",nacimiento:c.info.nacimiento||"",cedula_front:null,genero:c.info.genero||"",etnia:c.info.etnia||"",condicion:c.info.condicion||"",direccion:c.info.direccion||"",comuna:c.info.hash_votantes?c.info.hash_votantes[0].subtipo:null,barrio:c.info.barrio||"",embedding:null,photo:null,checked:!1,declaracion:!1,campoObligatorio:"",recaptcha_token:""}),K=n(""),Q=n([]),h=n(!1);n(!0);const _e=n([{label:"Información Personal"},{label:"Datos Demográficos"},{label:"Registro datos"}]),ke=n([{label:"paso 1"},{label:"paso 2"},{label:"paso 3"}]),g=n(0),ee=n(""),j=n(""),b=n(!1),w=n(!1),A=n(!1),U=n(null),P=n([]),z=n(""),V=n(null),y=n(""),ie=n(!1),C=n(!1),M=n(0),re=n(!1),Y=n(""),G=n(""),H=n(""),Ve=(i,e)=>o.cedula_front===null?`/storage/uploads/documentos/${i}`:i;q([Y,G,H],([i,e,a])=>{if(i&&e&&a){const l=String(i).padStart(2,"0"),_=String(e).padStart(2,"0");o.nacimiento=`${a}-${_}-${l}`}}),q(A,i=>{i&&(o.genero="")}),q(K,i=>{i&&(o.comuna=i,Q.value=Le.find(e=>e.id===parseInt(i.value)).barrios,console.log(Q.value))}),q(()=>o.barrio,i=>{console.log(i),i=="Otro"&&(o.barrio="",re.value=!0)}),q(()=>o.data(),i=>{Object.keys(o.errors).forEach(e=>{i[e]&&(o.errors[e]=null)})},{deep:!0});const Ce=(i,e)=>{const a=e.target.files[0];if(!a)return;((_,O)=>{const W=new FileReader;W.onload=X=>{const E=new Image;E.onload=()=>{const v=document.createElement("canvas"),I=v.getContext("2d"),R=1024,ae=1024;let D=E.width,S=E.height;(D>R||S>ae)&&(D>S?(S=Math.round(S*R/D),D=R):(D=Math.round(D*ae/S),S=ae)),v.width=D,v.height=S,I.drawImage(E,0,0,D,S),v.toBlob(ue=>{if(ue.size>2e6){Swal.fire({icon:"error",title:"Error",text:"Incluso comprimida, la imagen supera los 2MB."});return}const me=new File([ue],_.name,{type:"image/jpeg",lastModified:Date.now()});O(me,URL.createObjectURL(me))},"image/jpeg",.8)},E.src=X.target.result},W.readAsDataURL(_)})(a,(_,O)=>{o[i]=_,U.value=O})},Ee=i=>{o.cedula_front=null,U.value=null},le=i=>{if(!i)return"";const e=new Date(i),a=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),_=String(e.getDate()).padStart(2,"0");return`${a}-${l}-${_}`},ne=i=>{g.value=i,b.value=!0},De=async()=>{h.value=!0;try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(l=>l.stop()),await se.tinyFaceDetector.loadFromUri("/models/tiny_face_detector"),await se.faceRecognitionNet.loadFromUri("/models/face_recognition"),await se.faceLandmark68Net.loadFromUri("/models/face_landmark_68");const e=await navigator.mediaDevices.enumerateDevices();P.value=e.filter(l=>l.kind==="videoinput");const a=P.value.find(l=>l.label.toLowerCase().includes("user"))||P.value[0];console.log(a),z.value=(a==null?void 0:a.deviceId)||"",h.value=!1,w.value=!0,await de(z.value)}catch(i){h.value=!1,M.value==3,m.fire({icon:"error",title:"Error al acceder a la cámara",text:"No se pudo acceder a la cámara. Por favor, asegúrese de que su dispositivo tenga una cámara y que haya otorgado los permisos necesarios."}),console.error("Error al iniciar:",i),y.value="No se pudo acceder a la cámara."}},Se=async()=>{C.value=!0,h.value=!0,y.value="";const i=a=>parseInt(sessionStorage.getItem(a)||"0"),e=(a,l)=>sessionStorage.setItem(a,l.toString());if(!ie.value){i("fallo_camara")+1,y.value="La cámara no está lista.",C.value=!1,h.value=!1;return}try{const a=await We(V.value,new Xe).withFaceLandmarks().withFaceDescriptor();console.log("entro -- validador"),m.fire({title:"Validación en progreso",text:"Mire a la cámara hasta que finalice la validación.",icon:"info",timer:2e3,showConfirmButton:!1,didClose:()=>{}});const l=document.createElement("canvas");l.width=V.value.videoWidth,l.height=V.value.videoHeight,l.getContext("2d").drawImage(V.value,0,0,l.width,l.height);const O=await new Promise(v=>l.toBlob(v,"image/jpeg")),W=new File([O],"photo.jpg",{type:"image/jpeg"});if(o.photo=W,!a){h.value=!1,C.value=!1,y.value="No se detectó un rostro.",M.value+=1,M.value==3&&m.fire({title:"Error en validación",text:"Error, no se detectó un rostro, vuelve a intentar o avanzar con la imagen poco visible y posiblemente sin registro biométrico (alta probabilidad de rechazo)",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(v=>{v.isConfirmed?(o.embedding="",o.validaciones="no_rostro",w.value=!1,N()):v.dismiss===m.DismissReason.cancel&&(console.log("Usuario decide volver a intentar"),y.value="",M.value=0)});return}const X=a.descriptor;o.embedding=X;const E=new FormData;E.append("embedding",X),C.value=!1,w.value=!1,Oe.post(route("face-validate"),E,{headers:{"Content-Type":"multipart/form-data"}}).then(v=>{y.value=v.data.message,console.log(v),C.value=!1,h.value=!1,v.data.match?m.fire({title:"Error en validación",text:"Usted ya tiene un registro biométrico. Si está seguro que no se ha registrado, puede volver a intentarlo o continuar (probabilidad de rechazo).",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(I=>{I.isConfirmed?(o.validaciones="registro_duplicado",w.value=!1,N()):I.dismiss===m.DismissReason.cancel&&console.log("Usuario decide volver a intentar")}):m({title:"Validación exitosa",text:"Validación biométrica exitosa",icon:"success",didClose:()=>{w.value=!1,N()}})}).catch(v=>{C.value=!1,h.value=!1,console.log(v);const I=i("fallo_registro")+1;e("fallo_registro",I),m.fire({title:"Error en validación",text:"Error en la validación, vuelve a intentar o avanzar sin registro biometrico (posibilidad de rechazo)",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(R=>{R.isConfirmed?(o.embedding="",o.validaciones="fallo_registro_biometrico",w.value=!1,N()):R.dismiss===m.DismissReason.cancel&&console.log("Usuario decide volver a intentar")})})}catch(a){console.error(a),C.value=!1,h.value=!1,M.value==3&&m.fire({title:"Error en validación",text:"Error al procesar el rostro, vuelve a intentar o avanzar sin registro biometrico (posibilidad de rechazo)",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(l=>{l.isConfirmed?(o.embedding="",o.validaciones="fallo_registro",w.value=!1,N()):l.dismiss===m.DismissReason.cancel&&(console.log("Usuario decide volver a intentar"),y.value="",M.value=0)}),y.value="Error al procesar el rostro."}},je=()=>{if(!o.nacimiento)return j.value="Debes ingresar la fecha de nacimiento.",!1;const i=new Date,e=new Date(o.nacimiento);let a=i.getFullYear()-e.getFullYear();const l=i.getMonth()-e.getMonth();return(l<0||l===0&&i.getDate()<e.getDate())&&a--,a<14?(j.value="No cumple con el requisito de edad mínima (14 años), por lo tanto, no puede ejercer el derecho al voto.",!1):(j.value="",!0)},Ue=async()=>{if(b.value=!1,o.nombre&&o.tipo_documento&&o.nacimiento){if(!je())return;ee.value="",b.value=!0}b.value?g.value=1:(o.nombre||(o.errors.nombre="Este campo es requerido."),(!o.identificacion||ee.value!="")&&(o.errors.identificacion=ee.value||"Este campo es requerido."),o.tipo_documento||(o.errors.tipo_documento="Este campo es requerido."),o.fecha_expedicion||(o.errors.fecha_expedicion="Este campo es requerido."),o.lugar_expedicion||(o.errors.lugar_expedicion="Este campo es requerido."),o.nacimiento||(o.errors.nacimiento="Este campo es requerido."))},qe=i=>{switch(b.value=!1,i){case 1:Ue();break;case 2:ce();break}b.value&&(g.value=i)},ce=()=>{b.value=!1,o.genero&&o.etnia&&o.condicion&&o.comuna&&o.barrio&&o.direccion&&o.checked&&o.declaracion&&(b.value=!0,g.value=2),b.value||(o.genero||(o.errors.genero="Este campo es requerido."),o.etnia||(o.errors.etnia="Este campo es requerido."),o.condicion||(o.errors.condicion="Este campo es requerido."),o.comuna||(o.errors.comuna="Este campo es requerido."),o.barrio||(o.errors.barrio="Este campo es requerido."),o.direccion||(o.errors.direccion="Este campo es requerido."),o.checked||(o.errors.checked="Este campo es requerido."),o.declaracion||(o.errors.declaracion="Este campo es requerido."))},Be=()=>{b.value=!1,console.log("Validando datos del paso 3",U.value),(o.cedula_front||U)&&(console.log("Datos del paso 3 son válidos"),b.value=!0),b.value?De():o.cedula_front||(o.errors.cedula_front="Este campo es requerido.")},N=async()=>{const i=await executeRecaptcha("register");o.recaptcha_token=i,o.post(route("create-user"),{onSuccess:()=>{m({title:"Registro realizado",text:"Registro de usuario realizado exitosamente. Para poder votar, se realizará internamente la validación de su información, el estado del trámite será notificado a través del correo electrónico registrado. Recuerde que su usuario es su número de identificación y la contraseña es la que ingresó al momento del registro.",icon:"success"}).then(e=>{window.location.href=route("welcome")}),sessionStorage.removeItem("fallo_camara"),sessionStorage.removeItem("fallo_registro"),sessionStorage.removeItem("registro_duplicado"),o.reset(),oe()},onError:e=>{oe(),m({title:"Error",text:"Ocurrió un error al registrar el usuario.",icon:"error"}).then(a=>{g.value=0}),console.error(e)}})},de=async i=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:i}}});V.value.srcObject=e,ie.value=!0}catch(e){console.error("Error al iniciar cámara:",e),y.value="Error al iniciar la cámara."}};q(z,async i=>{i&&await de(i)});const oe=()=>{var e;const i=(e=V.value)==null?void 0:e.srcObject;i&&i.getTracks().forEach(a=>a.stop()),V.value.srcObject=null};q(w,i=>{i==!1&&oe()});const Fe=i=>(console.log(i),pe.find(e=>e.value==i));async function Me(){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices){m.fire({icon:"warning",title:"Navegador no compatible",text:"Tu navegador no permite acceder a los dispositivos multimedia."});return}try{(await navigator.mediaDevices.enumerateDevices()).filter(a=>a.kind==="videoinput").length===0?m.fire({icon:"warning",title:"Cámara no detectada",text:"Es necesario que el dispositivo tenga una cámara para continuar con el proceso."}):console.log("Cámara detectada, puede continuar.")}catch(i){console.error("Error al verificar dispositivos:",i),m.fire({icon:"error",title:"Error al verificar la cámara",text:"Ocurrió un problema al intentar detectar la cámara."})}}return $e(()=>{var i;if(c.info.hash_votantes&&((i=c.info.hash_votantes[0])!=null&&i.subtipo)&&(o.comuna=Fe(c.info.hash_votantes[0].subtipo)),o.fecha_expedicion=le(c.info.fecha_expedicion),c.info.nacimiento){const e=new Date(c.info.nacimiento);Y.value=e.getDate(),G.value=e.getMonth()+1,H.value=e.getFullYear(),o.nacimiento=le(c.info.nacimiento)}Me()}),(i,e)=>(d(),u(T,null,[r(s(ze),{title:"Registrar datos"}),r(Te,{breadCrumbLinks:we},{header:$(()=>e[29]||(e[29]=[L(" Registrar datos ")])),default:$(()=>[t("div",Je,[e[42]||(e[42]=t("div",{class:"p-6 border-b border-gray-200"},[t("h1",null,"Registrar registro")],-1)),t("div",Ke,[r(s(ge),{class:"hidden sm:block",model:_e.value,activeStep:g.value,"onUpdate:activeStep":e[0]||(e[0]=a=>g.value=a)},null,8,["model","activeStep"]),r(s(ge),{class:"sm:hidden block",model:ke.value,activeStep:g.value,"onUpdate:activeStep":e[1]||(e[1]=a=>g.value=a)},null,8,["model","activeStep"])]),t("form",Qe,[g.value==0?(d(),u("div",eo,[t("div",oo,[r(f,{for:"nombre",value:"Nombre Completo"}),r(x,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:s(o).nombre,"onUpdate:modelValue":e[2]||(e[2]=a=>s(o).nombre=a),required:""},null,8,["modelValue"]),r(p,{class:"mt-2",message:s(o).errors.nombre},null,8,["message"])]),t("div",ao,[r(f,{for:"identificacion",value:"Identificación"}),r(x,{id:"identificacion",type:"text",class:"mt-1 block w-full",modelValue:s(o).identificacion,"onUpdate:modelValue":e[3]||(e[3]=a=>s(o).identificacion=a),required:""},null,8,["modelValue"]),r(p,{class:"mt-2",message:s(o).errors.identificacion},null,8,["message"])]),t("div",to,[r(f,{for:"tipo_documento",value:"Tipo de Documento"}),k(t("select",{id:"tipo_documento","onUpdate:modelValue":e[4]||(e[4]=a=>s(o).tipo_documento=a),class:"mt-1 block w-full border-gray-300 rounded-lg"},[e[30]||(e[30]=t("option",{value:"",disabled:""},"Seleccione tipo de documento",-1)),(d(!0),u(T,null,Z(s(Ae),a=>(d(),u("option",{key:a.id,value:a.nombre},F(a.nombre),9,so))),128))],512),[[J,s(o).tipo_documento]]),r(p,{class:"mt-2",message:s(o).errors.tipo_documento},null,8,["message"])]),t("div",io,[r(f,{for:"nacimiento",value:"Fecha de Nacimiento"}),r(x,{id:"nacimiento",type:"date",class:"mt-1 block w-full",modelValue:s(o).nacimiento,"onUpdate:modelValue":e[5]||(e[5]=a=>s(o).nacimiento=a),required:""},null,8,["modelValue"]),r(p,{class:"mt-2",message:s(o).errors.nacimiento},null,8,["message"]),j.value?(d(),u("p",ro,F(j.value),1)):B("",!0)]),t("div",lo,[r(f,{class:"col-span-3",for:"nacimiento",value:"Fecha de Nacimiento"}),t("div",no,[r(f,{for:"nacimientoDia",value:"Día"}),r(x,{id:"nacimientoDia",type:"number",class:"block",modelValue:Y.value,"onUpdate:modelValue":e[6]||(e[6]=a=>Y.value=a)},null,8,["modelValue"])]),t("div",co,[r(f,{for:"nacimientoMes",value:"Mes"}),r(x,{id:"nacimientoMes",type:"number",class:"block",modelValue:G.value,"onUpdate:modelValue":e[7]||(e[7]=a=>G.value=a)},null,8,["modelValue"])]),t("div",uo,[r(f,{for:"nacimientoAnnio",value:"Año"}),r(x,{id:"nacimientoAnnio",type:"number",class:"block",modelValue:H.value,"onUpdate:modelValue":e[8]||(e[8]=a=>H.value=a)},null,8,["modelValue"])]),r(p,{class:"mt-2",message:s(o).errors.nacimiento},null,8,["message"]),j.value?(d(),u("p",mo,F(j.value),1)):B("",!0)]),t("div",fo,[t("button",{type:"button",class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white p-2 rounded-md shadow-xl",onClick:e[9]||(e[9]=a=>qe(1))}," Siguiente ")])])):B("",!0),g.value==1?(d(),u("div",vo,[t("div",po,[r(f,{for:"genero",value:"Identidad de Género"}),t("div",go,[t("div",bo,[k(t("input",{type:"radio",id:"masculino",value:"Masculino","onUpdate:modelValue":e[10]||(e[10]=a=>s(o).genero=a)},null,512),[[te,s(o).genero]]),e[31]||(e[31]=t("label",{class:"ps-2 text-sm sm:text-base",for:"masculino"},"Masculino",-1))]),t("div",xo,[k(t("input",{type:"radio",id:"two",value:"Femenino","onUpdate:modelValue":e[11]||(e[11]=a=>s(o).genero=a)},null,512),[[te,s(o).genero]]),e[32]||(e[32]=t("label",{class:"ps-2 text-sm sm:text-base",for:"two"},"Femenino",-1))]),A.value?(d(),u("div",ho,[r(f,{class:"sm:text-sm text-xs",for:"genero",value:"¿Cual?"}),r(x,{id:"genero",type:"text",class:"mt-1 block w-full p-0 sm:p-1",modelValue:s(o).genero,"onUpdate:modelValue":e[12]||(e[12]=a=>s(o).genero=a),autocomplete:"genero"},null,8,["modelValue"]),r(p,{class:"mt-1",message:s(o).errors.genero},null,8,["message"])])):(d(),u("div",yo,[k(t("input",{type:"radio",id:"tres",value:"true","onUpdate:modelValue":e[13]||(e[13]=a=>A.value=a)},null,512),[[te,A.value]]),e[33]||(e[33]=t("label",{class:"ps-2 text-sm sm:text-base",for:"tres"},"Otro",-1))]))])]),t("div",wo,[r(f,{for:"etnia",value:"Grupo poblacional"}),k(t("select",{id:"etnia","onUpdate:modelValue":e[14]||(e[14]=a=>s(o).etnia=a),class:"mt-1 block w-full border-gray-300 rounded-lg"},[e[34]||(e[34]=t("option",{value:"",disabled:""}," Seleccione grupo poblacional perteneciente ",-1)),(d(!0),u(T,null,Z(s(Pe),a=>(d(),u("option",{key:a.id,value:a.nombre},F(a.nombre),9,_o))),128))],512),[[J,s(o).etnia]]),r(p,{class:"mt-2",message:s(o).errors.etnia},null,8,["message"])]),t("div",ko,[r(f,{for:"condicion",value:"Condición poblacional"}),k(t("select",{id:"condicion","onUpdate:modelValue":e[15]||(e[15]=a=>s(o).condicion=a),class:"mt-1 block w-full border-gray-300 rounded-lg"},[e[35]||(e[35]=t("option",{value:"",disabled:""}," Seleccione condición poblacional ",-1)),(d(!0),u(T,null,Z(s(Ye),a=>(d(),u("option",{key:a.id,value:a.nombre},F(a.nombre),9,Vo))),128))],512),[[J,s(o).condicion]]),r(p,{class:"mt-2",message:s(o).errors.condicion},null,8,["message"])]),t("div",Co,[r(f,{for:"comuna",value:"Comuna/Corregimiento"}),r(s(he),{id:"comuna",modelValue:K.value,"onUpdate:modelValue":e[16]||(e[16]=a=>K.value=a),options:s(pe),filter:"",optionLabel:"label",placeholder:"Seleccione comuna/corregimiento del proyecto",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),r(p,{class:"mt-2",message:s(o).errors.comuna},null,8,["message"])]),t("div",Eo,[r(f,{for:"barrio",value:"Barrio/Vereda"}),r(s(he),{id:"barrio",modelValue:s(o).barrio,"onUpdate:modelValue":e[17]||(e[17]=a=>s(o).barrio=a),options:Q.value,filter:"",placeholder:"Seleccione barrio/vereda de dirección",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),re.value?(d(),u("div",Do,[r(f,{for:"barrio_otro",value:"Cual?"}),r(x,{id:"barrio_otro",type:"text",class:"mt-1 block w-full",modelValue:s(o).barrio,"onUpdate:modelValue":e[18]||(e[18]=a=>s(o).barrio=a)},null,8,["modelValue"])])):B("",!0),r(p,{class:"mt-2",message:s(o).errors.barrio},null,8,["message"])]),t("div",So,[r(f,{for:"direccion",value:"Dirección"}),r(x,{id:"direccion",type:"text",class:"mt-1 block w-full",modelValue:s(o).direccion,"onUpdate:modelValue":e[19]||(e[19]=a=>s(o).direccion=a),required:""},null,8,["modelValue"]),r(p,{class:"mt-2",message:s(o).errors.direccion},null,8,["message"])]),t("div",jo,[k(t("input",{type:"checkbox",id:"consentimiento1",name:"consentimiento1",required:"","onUpdate:modelValue":e[20]||(e[20]=a=>s(o).checked=a)},null,512),[[fe,s(o).checked]]),e[36]||(e[36]=t("label",{for:"consentimiento1",class:"ps-4 pe-12 sm:text-base text-sm text-gray-500"},[L("Conozco y Acepto la Política de Privacidad de Datos "),t("a",{href:"https://www.pereira.gov.co/publicaciones/38/politicas-de-privacidad-y-condiciones-de-uso/",target:"_blank",class:"underline !text-azul cursor-pointer"},"politica")],-1)),r(p,{class:"mt-1",message:s(o).errors.checked},null,8,["message"])]),t("div",Uo,[k(t("input",{type:"checkbox",id:"consentimiento2",name:"consentimiento2",required:"","onUpdate:modelValue":e[21]||(e[21]=a=>s(o).declaracion=a)},null,512),[[fe,s(o).declaracion]]),e[37]||(e[37]=t("label",{for:"consentimiento2",class:"ps-4 pe-12 sm:text-base text-sm text-gray-500"},"Declaro bajo la gravedad de juramento que toda la información suministrada en este formulario es verídica, completa y corresponde a la realidad. Entiendo que proporcionar información falsa puede acarrear sanciones legales conforme a la normativa vigente.",-1)),r(p,{class:"mt-1",message:s(o).errors.declaracion},null,8,["message"])]),t("div",qo,[t("div",Bo,[t("button",{type:"button",onClick:e[22]||(e[22]=a=>ne(0)),class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white px-4 rounded-md shadow-xl"}," Atrás ")]),t("div",Fo,[r(be,{type:"button",class:ve(["h-full",{"opacity-25":s(o).processing}]),onClick:ce,disabled:s(o).processing},{default:$(()=>e[38]||(e[38]=[L(" Siguiente ")])),_:1},8,["class","disabled"])])])])):B("",!0),g.value==2?(d(),u("div",Mo,[t("div",Io,[e[40]||(e[40]=t("div",{class:"col-span-2 text-sm sm:text-base text-gray-800 pt-6"},[t("h3",{class:"text-lg font-semibold"}," Cargue documento de identificación parte frontal "),t("p",null," Para cargar el documento frontal, asegúrese de que la imagen sea clara y legible. El documento debe estar bien iluminado y sin reflejos. ")],-1)),t("div",Ro,[t("div",$o,[e[39]||(e[39]=t("h4",{class:"text-2xl underline"},"Ejemplo parte frontal",-1)),t("img",{src:s(He),alt:"Documento Frontal ejemplo",class:"w-full h-full object-contain mt-2"},null,8,zo)])]),t("div",No,[t("div",Oo,[r(x,{id:"cedula_front",type:"file",class:"mt-1 !border-0",accept:"image/jpeg,image/jpg,image/png,image/gif,image/svg+xml,image/webp",onInput:e[23]||(e[23]=a=>Ce("cedula_front",a)),maxFileSize:2e6}),r(p,{class:"mt-2",message:s(o).errors.cedula_front},null,8,["message"]),t("div",To,[U.value?(d(),u("img",{key:0,src:Ve(U.value,1),alt:s(o).cedula_front,class:"w-4/6 h-full object-contain"},null,8,Lo)):(d(),Ne(s(Ze),{key:1,class:"w-2/6 text-gray-300 flex justify-center items-center"}))]),U.value?(d(),u("div",Ao,[t("button",{onClick:e[24]||(e[24]=a=>Ee(1)),type:"button",class:"bg-red-500 text-white px-4 py-2 rounded"}," Eliminar Imagen ")])):B("",!0)])])]),t("div",Po,[r(x,{id:"campo_obligatorio",type:"text",class:"mt-1 !border-0 hidden",modelValue:s(o).campoObligatorio,"onUpdate:modelValue":e[25]||(e[25]=a=>s(o).campoObligatorio=a)},null,8,["modelValue"])]),t("div",Yo,[t("div",Go,[t("button",{type:"button",onClick:e[26]||(e[26]=a=>ne(1)),class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white px-4 rounded-md shadow-xl"}," Atrás ")]),t("div",Ho,[r(be,{type:"button",onClick:Be,class:ve({"opacity-25":s(o).processing}),disabled:s(o).processing},{default:$(()=>e[41]||(e[41]=[L(" Siguiente ")])),_:1},8,["class","disabled"])])])])):B("",!0)])])]),_:1}),r(xe,{show:h.value,closeable:!1},{default:$(()=>[e[43]||(e[43]=t("h2",{class:"py-4 text-2xl font-semibold text-gray-800 flex tex-center justify-center bg-azul text-white"}," Cargando datos... ",-1)),t("div",Wo,[r(s(Ge),{"aria-label":"Loading"})])]),_:1},8,["show"]),r(xe,{show:w.value,closeable:!0},{default:$(()=>[e[45]||(e[45]=t("h2",{class:"py-4 text-2xl font-semibold text-gray-800 flex flex-wrap tex-center justify-center bg-azul text-white"}," Validación Biométrica ",-1)),e[46]||(e[46]=t("div",{class:"mt-4 px-4"},[t("p",{class:"text-sm sm:text-base text-gray-800"}," Por favor, asegúrese de que su rostro esté bien iluminado y visible en la cámara (sin gorras, tapabocas, gafas). ")],-1)),t("div",Xo,[e[44]||(e[44]=t("label",{for:"camera"},"Seleccionar cámara:",-1)),k(t("select",{id:"camera","onUpdate:modelValue":e[27]||(e[27]=a=>z.value=a),class:"rounded-lg w-auto ms-4"},[(d(!0),u(T,null,Z(P.value,a=>(d(),u("option",{key:a.deviceId,value:a.deviceId},F(a.label||"Cámara desconocida"),9,Zo))),128))],512),[[J,z.value]]),t("video",{ref_key:"video",ref:V,autoplay:"",muted:"",width:"400",height:"340",class:"rounded-xl shadow-lg flex mx-auto mt-6"},null,512),t("button",{type:"button",disabled:C.value,class:"bg-secondary hover:bg-primary z-1000 text-base sm:text-base text-white p-2 rounded-md shadow-xl flex mx-auto mt-4 disabled:bg-gray-500",onClick:e[28]||(e[28]=a=>Se())}," Validar ",8,Jo),L(" "+F(y.value),1)])]),_:1},8,["show"])],64))}};export{wa as default};
