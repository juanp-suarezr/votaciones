import{x as L,r as f,T as R,c as x,o as b,b as o,u as a,Z,d as l,e as t,f as _,i as D,v as j,g as A,h as G,j as m,F as B,k as I,t as v,n as N,p as H,N as J}from"./app-DRDJ0fvn.js";import{_ as Q}from"./AuthenticatedLayout-Bno_8cbi.js";import{_ as W}from"./Pagination-DeLs1LBY.js";import{_ as X}from"./PrimaryButton-DejJUf7g.js";import{_ as P}from"./Modal-BR6dZkSS.js";import{_ as C}from"./SecondaryButton-SMzTz7ky.js";import{_ as U}from"./DangerButton-CVDUw84F.js";import{_ as E}from"./InputError-BkC4GRKc.js";import{_ as V}from"./InputLabel-D6bcT5e-.js";import{_ as q}from"./TextInput-C9xxIRay.js";import{s as Y}from"./index-C-be1O4N.js";import"./index-Cyxs0I2m.js";import"./index-Bm3N-oOO.js";import"./index-BRMkFFer.js";import"./SecondaryButtonReturn-BgAuTStD.js";import"./XCircleIcon--IWhoGgl.js";import"./TrashIcon-DSyK6F8z.js";import"./index-aLgh6PpH.js";import"./index-D8yvB32r.js";const ee={class:"inline-block min-w-full overflow-hidden grid md:grid-cols-3 gap-4"},te={class:"..."},se={class:"relative"},re={class:"text-right p-4 gap-2 flex flex-wrap"},oe={class:"w-auto mb-4"},ae={class:"w-full overflow-x-scroll md:overflow-x-auto rounded-lg shadow"},le={class:"w-full whitespace-no-wrap overflow-x-auto"},ie={key:0},de={class:"border-b border-gray-200 bg-white sm:px-5 sm:py-5 p-2 sm:text-sm text-xs"},ne={class:"text-gray-900 whitespace-no-wrap"},me={class:"border-b border-gray-200 bg-white sm:px-5 sm:py-5 p-2 sm:text-sm text-xs"},pe={class:"text-gray-900 whitespace-no-wrap"},ue={class:"border-b border-gray-200 bg-white sm:px-5 sm:py-5 p-2 sm:text-sm text-xs"},ce={class:"w-auto border-b border-gray-200 bg-white sm:px-5 sm:py-5 p-2 sm:text-sm text-xs flex flex-wrap gap-4"},xe={key:1},be={class:"flex flex-col items-center border-t bg-white px-5 py-5 xs:flex-row xs:justify-between"},ge={class:"p-6"},fe={class:"text-xl font-semibold"},ye={class:"mt-6"},we={key:0,class:"mt-4"},ve={class:"flex items-center justify-end mt-6"},ke={class:"p-6"},he={class:"mt-6"},_e={class:"mt-6 flex justify-end"},Le={__name:"Index",props:{parametros:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({})}},setup(y){const g=y,p=L("$swal"),k=f(!1),h=f(!1),n=f(0),s=R({password:"",detalle:"",codParametro:g.filters.codParametro,estado:"1",file:null}),F=[{url:"/parametros",text:"listado de parámetros generales"},{url:"",text:"listado de parámetros detalle"}],T=d=>{s.file=d.target.files[0],s.post(route("parametrosDetalle.cargaMasiva"))},i=()=>{k.value=!1,h.value=!1,s.reset()},$=d=>{let e=g.parametros.data.find(r=>r.id==d);s.detalle=e?e.detalle:"",s.estado=e?e.estado:"",h.value=!0,n.value=d},z=d=>{d=="new"?s.post(route("parametrosDetalle.store"),{preserveScroll:!0,replace:!0,onSuccess:()=>{i(),p({title:"Registro Creado",text:"El parametro detalle se ha registrado exitosamente",icon:"success"})},onError:()=>{i(),p({title:"Error",text:"Ocurrió un error al registrar el parámetro.",icon:"error"})},onFinish:()=>s.reset()}):(console.log(s.estado),console.log(n.value),s.patch(route("parametrosDetalle.update",n.value),{preserveScroll:!0,replace:!0,onSuccess:()=>{i(),p({title:"Registro Actualizado",text:"El parámetro se ha actualizado exitosamente",icon:"success"})},onError:()=>{i(),p({title:"Error",text:"Ocurrió un error al registrar el parámetro.",icon:"error"})},onFinish:()=>s.reset()}))},M=d=>{k.value=!0,n.value=d},S=()=>{s.delete(route("parametrosDetalle.destroy",n.value),{preserveScroll:!0,onSuccess:()=>{i(),p({title:"Registro Eliminado",text:"El parámetro detalle se ha eliminado exitosamente",icon:"success"})},onError:()=>{i(),p({title:"Error",text:"Ocurrió un error al eliminar el parámetro.",icon:"error"})},onFinish:()=>s.reset()})};let u=f(g.filters.search),c=f(g.filters.estado??"");const w=()=>{J.get("/parametrosDetalle",{search:u.value,estado:c.value,codParametro:g.filters.codParametro},{preserveState:!0,preserveScroll:!0,replace:!0})},O=()=>{u.value="",c.value="",w()};return(d,e)=>(b(),x(B,null,[o(a(Z),{title:"Parámetros detalle"}),o(Q,{breadCrumbLinks:F},{header:l(()=>e[7]||(e[7]=[m(" Parámetros detalle ")])),default:l(()=>[t("div",ee,[t("div",null,[_(t("select",{id:"estado",name:"estado","onUpdate:modelValue":e[0]||(e[0]=r=>D(c)?c.value=r:c=r),onChange:w,class:"block w-full px-4 py-3 text-base text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"},e[8]||(e[8]=[t("option",{selected:"",value:""},"Filtrar por estado",-1),t("option",{value:"1"},"Activo",-1),t("option",{value:"0"},"Bloqueado",-1)]),544),[[j,a(c)]])]),t("div",te,[e[10]||(e[10]=t("label",{for:"default-search",class:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white"},"Search",-1)),t("div",se,[e[9]||(e[9]=t("div",{class:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none"},[t("svg",{class:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20"},[t("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})])],-1)),_(t("input",{type:"search",onKeydown:A(w,["enter"]),"onUpdate:modelValue":e[1]||(e[1]=r=>D(u)?u.value=r:u=r),id:"default-search",class:"block w-full p-4 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-0 focus:border-transparent",placeholder:"Buscar por nombre",required:""},null,544),[[G,a(u)]]),t("button",{type:"submit",onClick:w,class:"text-white absolute end-2.5 bottom-2.5 bg-sky-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-sky-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"}," Buscar ")])]),t("div",re,[o(C,{onClick:O},{default:l(()=>e[11]||(e[11]=[m(" Limpiar ")])),_:1}),o(X,{onClick:e[2]||(e[2]=r=>$("new"))},{default:l(()=>e[12]||(e[12]=[m(" Agregar ")])),_:1})])]),t("div",oe,[e[13]||(e[13]=t("label",{for:"carga-masiva",class:"text-base font-semibold mb-1"},"Carga masiva",-1)),t("input",{id:"carga-masiva",type:"file",class:"block w-auto py-2 text-base text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none",onChange:T,accept:".xlsx"},null,32)]),t("div",ae,[t("table",le,[e[17]||(e[17]=t("thead",null,[t("tr",{class:"border-b bg-gray-50 text-left text-xs font-semibold uppercase tracking-wide text-gray-500"},[t("th",{class:"border-b-2 border-gray-200 bg-gray-100 sm:px-5 sm:py-3 p-2 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Nombre "),t("th",{class:"border-b-2 border-gray-200 bg-gray-100 sm:px-5 sm:py-3 p-2 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Código padre "),t("th",{class:"border-b-2 border-gray-200 bg-gray-100 sm:px-5 sm:py-3 p-2 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Estado "),t("th",{class:"border-b-2 border-gray-200 bg-gray-100 sm:px-5 sm:py-3 p-2 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Acciones ")])],-1)),y.parametros.data.length>0?(b(),x("tbody",ie,[(b(!0),x(B,null,I(y.parametros.data,r=>(b(),x("tr",{key:r.id,class:"text-gray-700"},[t("td",de,[t("p",ne,v(r.detalle),1)]),t("td",me,[t("p",pe,v(r.codParametro),1)]),t("td",ue,[t("p",{class:N(["text-gray-900 whitespace-no-wrap inline-flex px-2 rounded-md bg-red-200",{"!bg-green-400":r.estado===1}])},v(r.estado?"Activo":"Bloqueado"),3)]),t("td",ce,[o(C,{type:"button",onClick:K=>$(r.id),class:"mb-2"},{default:l(()=>e[14]||(e[14]=[m(" Editar ")])),_:2},1032,["onClick"]),o(U,{class:"p-1 mb-2",onClick:K=>M(r.id)},{default:l(()=>e[15]||(e[15]=[m("Eliminar")])),_:2},1032,["onClick"])])]))),128))])):(b(),x("tbody",xe,e[16]||(e[16]=[t("tr",null,[t("td",{class:"border-b border-gray-200 bg-white sm:px-5 sm:py-5 p-2 sm:text-sm text-xs text-center",colspan:"5"},[t("p",{class:"whitespace-no-wrap bg-red-400 text-white text-base font-bold inline-flex px-2 rounded-md shadow-md"}," No hay registros de parámetros detalle ")])],-1)])))]),t("div",be,[o(W,{links:y.parametros.links},null,8,["links"])])]),o(P,{show:h.value,onClose:i},{default:l(()=>[t("div",ge,[t("h2",fe,v(n.value=="new"?"Añadir Tipo de Usuario":"Editar Tipo de Usuario"),1),t("div",ye,[o(V,{class:"sm:text-sm text-xs",for:"nombre",value:"Nombre del parámetro detalle"}),o(q,{id:"nombre",type:"text",class:"mt-1 block w-full p-0 sm:p-2",modelValue:a(s).detalle,"onUpdate:modelValue":e[3]||(e[3]=r=>a(s).detalle=r),required:"",autocomplete:"nombre"},null,8,["modelValue"]),o(E,{class:"mt-1",message:a(s).errors.detalle},null,8,["message"])]),n.value!="new"?(b(),x("div",we,[o(V,{class:"sm:text-sm text-xs",for:"estado",value:"Estado del parámetro detalle"}),_(t("select",{id:"estado",name:"estado","onUpdate:modelValue":e[4]||(e[4]=r=>a(s).estado=r),class:"mt-1 block w-full p-0 sm:p-2"},e[18]||(e[18]=[t("option",{value:"1"},"Activo",-1),t("option",{value:"0"},"Bloqueado",-1)]),512),[[j,a(s).estado]]),o(E,{class:"mt-1",message:a(s).errors.estado},null,8,["message"])])):H("",!0),t("div",ve,[o(a(Y),{class:"bg-blue-800 text-white px-4 py-2 rounded-md hover:bg-blue-600 cursor",type:"button",onClick:e[5]||(e[5]=r=>z(n.value))},{default:l(()=>e[19]||(e[19]=[m("Guardar")])),_:1})])])]),_:1},8,["show"]),o(P,{show:k.value,onClose:i},{default:l(()=>[t("div",ke,[e[22]||(e[22]=t("h2",{class:"text-lg font-medium text-gray-900"}," ¿Estás seguro de que quieres eliminar el parámetro? ",-1)),e[23]||(e[23]=t("p",{class:"mt-1 text-sm text-gray-600"}," Una vez que se elimine el parámetro especifico, esté deja de existir. Pero no se borra los registros relacionados con el usuario votante o candidato o proyecto. ",-1)),t("div",he,[o(V,{for:"password",value:"Password",class:"sr-only"}),o(q,{id:"password",modelValue:a(s).password,"onUpdate:modelValue":e[6]||(e[6]=r=>a(s).password=r),type:"password",class:"mt-1 block w-3/4",placeholder:"Contraseña",onKeyup:A(S,["enter"])},null,8,["modelValue"]),o(E,{message:a(s).errors.password,class:"mt-2"},null,8,["message"])]),t("div",_e,[o(C,{onClick:i},{default:l(()=>e[20]||(e[20]=[m(" Cancelar ")])),_:1}),o(U,{class:N(["ms-3",{"opacity-25":a(s).processing}]),disabled:a(s).processing,onClick:S},{default:l(()=>e[21]||(e[21]=[m(" Eliminar parámetro detallado ")])),_:1},8,["class","disabled"])])])]),_:1},8,["show"])]),_:1})],64))}};export{Le as default};
