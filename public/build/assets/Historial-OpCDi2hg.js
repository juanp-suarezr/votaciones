import{r as v,a as C,b as I,d as a,u as o,Z as U,e as s,f as l,N as g,j as i,t as r,n as B,F as E,S as L}from"./app-xvjH6lYq.js";import{_ as O}from"./AuthenticatedLayout-8VD7wXU0.js";import{_ as V}from"./TextInput-CKi96dH9.js";import{_ as z}from"./PrimaryButton-4oB_kgHY.js";import{_ as x}from"./SecondaryButton-DHposoYq.js";import{_ as D}from"./Pagination-Bc_XJjih.js";import{s as F,a as d}from"./index-Dm3RyjMZ.js";import{s as k}from"./index-ULgohnqE.js";import{r as R}from"./es-5uoGg44_.js";import{_ as N}from"./SecondaryLink-DoHWK9ok.js";import{c as A}from"./comunas-CgAZlVl9.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as q}from"./PencilIcon-DEl3ks4m.js";import{r as G}from"./TrashIcon-MnAt5NiH.js";import"./index-Ow4IwyY6.js";import"./index-2yNMmxWy.js";import"./index-Gacs-VzP.js";import"./index-BYgB0Pzg.js";import"./index-cCATaMKS.js";import"./index-DgVOFFc7.js";import"./index-C5ZMuG5p.js";import"./index-DjZDsbKD.js";import"./index-CmLqR4zY.js";const T={class:"p-4"},Z={class:"bg-white shadow-md rounded-lg p-4 mb-4"},J={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},K={class:"mt-4 flex justify-end"},M={class:"bg-white shadow-md rounded-lg p-4"},Q={class:"flex justify-between items-center"},W={class:"flex gap-2"},X={__name:"Historial",props:{votantes:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({})}},setup(_){const b=_;console.log(b.votantes);let n=v(b.filters.identificacion||""),m=v(b.filters.nombre||""),u=v(b.filters.subtipo||""),f=v(b.filters.estado||"");const S=[{label:"Activo",value:"Activo"},{label:"Rechazado",value:"Rechazado"}],h=()=>{L.get("/historial_registros",{identificacion:n.value,nombre:m.value,subtipo:u.value,estado:f.value},{preserveState:!0,replace:!0})},$=()=>{n.value="",m.value="",u.value="",f.value="",h()},j=c=>{var t;return console.log(c),(t=A.find(e=>e.value==c))==null?void 0:t.label};return(c,t)=>(I(),C(E,null,[a(o(U),{title:"Usuarios registrados o validados"}),a(O,null,{header:s(()=>t[4]||(t[4]=[l("div",{class:"flex justify-between items-center"},[l("h1",{class:"text-2xl font-bold"},"Gestión de registros validados")],-1)])),default:s(()=>[l("div",T,[l("div",Z,[l("div",J,[a(V,{id:"identificacion",modelValue:o(n),"onUpdate:modelValue":t[0]||(t[0]=e=>g(n)?n.value=e:n=e),placeholder:"Identificación",class:"w-full"},null,8,["modelValue"]),a(V,{id:"nombre",modelValue:o(m),"onUpdate:modelValue":t[1]||(t[1]=e=>g(m)?m.value=e:m=e),placeholder:"Nombre o ID",class:"w-full"},null,8,["modelValue"]),a(o(k),{id:"comuna",modelValue:o(u),"onUpdate:modelValue":t[2]||(t[2]=e=>g(u)?u.value=e:u=e),options:o(A),filter:"",optionLabel:"label",placeholder:"Seleccione comuna",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),a(o(k),{id:"estado",modelValue:o(f),"onUpdate:modelValue":t[3]||(t[3]=e=>g(f)?f.value=e:f=e),options:S,filter:"",optionLabel:"label",placeholder:"Seleccione estado",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue"])]),l("div",K,[a(z,{onClick:h},{default:s(()=>t[5]||(t[5]=[i("Buscar")])),_:1}),a(x,{onClick:$},{default:s(()=>t[6]||(t[6]=[i("Limpiar Filtros")])),_:1})])]),l("div",M,[a(o(F),{value:_.votantes.data,"responsive-layout":"scroll",class:"p-datatable-sm"},{header:s(()=>[l("div",Q,[t[7]||(t[7]=l("h2",{class:"text-lg font-bold"},"Lista de votantes para validar",-1)),a(D,{links:_.votantes.links},null,8,["links"])])]),default:s(()=>[a(o(d),{header:"ID"},{body:s(e=>[i(r(e.data.id||"N/A"),1)]),_:1}),a(o(d),{header:"Propietario"},{body:s(e=>{var p,w,y;return[l("p",null,[t[8]||(t[8]=l("b",null,"Nombre:",-1)),i(" "+r(((p=e.data.votante)==null?void 0:p.nombre)||"Sin información")+" ",1),t[9]||(t[9]=l("br",null,null,-1)),l("b",null,r((w=e.data.votante)==null?void 0:w.tipo_documento)+":",1),i(" "+r(((y=e.data.votante)==null?void 0:y.identificacion)||"N/A")+" ",1),t[10]||(t[10]=l("br",null,null,-1))])]}),_:1}),a(o(d),{header:"Sector"},{body:s(e=>{var p;return[i(r(j(e.data.subtipo)||"N/A")+" ",1),t[11]||(t[11]=l("br",null,null,-1)),i(" "+r(((p=e.data.votante)==null?void 0:p.barrio)||"N/A"),1)]}),_:1}),a(o(d),{header:"Evento"},{body:s(e=>[i(r(e.data.evento.nombre||"N/A"),1)]),_:1}),a(o(d),{header:"Estado"},{body:s(e=>[l("span",{class:B(["p-2 rounded-md",[e.data.estado==="Activo"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"]])},r(e.data.estado),3)]),_:1}),a(o(d),{header:"# Intentos"},{body:s(e=>[i(r(e.data.intentos),1)]),_:1}),a(o(d),{header:"Acciones"},{body:s(e=>[l("div",W,[a(N,{href:c.route("gestion_registros.show",e.data.id,{query:{from:"historial"}}),class:"flex items-center"},{default:s(()=>[a(o(R),{class:"h-5 w-5"})]),_:2},1032,["href"]),a(N,{href:c.route("gestion_registros.edit",e.data.id),class:"flex items-center"},{default:s(()=>[a(o(q),{class:"h-5 w-5"})]),_:2},1032,["href"]),a(x,{onClick:p=>c.$emit("delete",e.data.id),class:"flex items-center"},{default:s(()=>[a(o(G),{class:"h-5 w-5"})]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["value"])])])]),_:1})],64))}},ye=H(X,[["__scopeId","data-v-cdc50bec"]]);export{ye as default};
