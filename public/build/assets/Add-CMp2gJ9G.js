import{r as v,T as N,a as m,b as u,d as o,u as a,Z as R,e as f,f as t,j as b,x as S,g as U,v as A,n as x,l as h,F as L}from"./app-DAhbyamU.js";import{_ as T}from"./AuthenticatedLayout-YH14k7JQ.js";import{_ as c}from"./InputError-gX5CUp-C.js";import{_ as g}from"./InputLabel-CSrztOtg.js";import{_ as j}from"./PrimaryButton-CAN_zjMk.js";import{_}from"./TextInput-CRhTYVH-.js";import{_ as B}from"./SecondaryLink-B_9Xxgb9.js";import"./index-DVwqVDxq.js";import"./index-DHeH8QKb.js";import"./index-D0jyr8Dc.js";import"./SecondaryButtonReturn-JpluEbrQ.js";import"./XCircleIcon-BFu2w50f.js";const q={class:"px-4 mx-auto bg-white border shadow-sm rounded-xl mt-8"},P={class:"bg-gray-100 border-b rounded-t-xl py-3 px-4 md:py-4 md:px-5 flex justify-between items-center"},X={class:"p-4 md:p-5"},Y={class:"mb-2"},z={class:"mb-2"},E={class:"mb-2"},G={class:"flex gap-4 mb-2"},J={key:0},W={key:0,class:"mt-2"},Z=["src"],H={key:1},I={key:0,class:"mt-2"},K=["src"],O={class:"mt-4 flex flex-col items-end"},ce={__name:"Add",setup(Q){const i=v(null),d=v("imagen"),n=v(null);let p=!1;const k=[{url:route("delegados.index"),text:"Gestion de delegados"},{url:"",text:"AÃ±adir Delegado"}],s=N({nombre:"",cargo:"",tipo:"secretario",firma:null}),C=r=>{const e=r.target.files[0];if(s.firma=e,e){const l=new FileReader;l.onload=M=>{i.value=M.target.result},l.readAsDataURL(e)}else i.value=null},V=r=>{p=!0;const e=n.value.getContext("2d");e.beginPath(),e.moveTo(r.offsetX,r.offsetY)},D=r=>{if(!p)return;const e=n.value.getContext("2d");e.lineTo(r.offsetX,r.offsetY),e.strokeStyle="#222",e.lineWidth=2,e.stroke()},w=()=>{p=!1},y=()=>{n.value.getContext("2d").clearRect(0,0,n.value.width,n.value.height),i.value=null,s.firma=null},F=()=>{n.value.toBlob(r=>{s.firma=new File([r],"firma.webp",{type:"image/webp"});const e=new FileReader;e.onload=l=>{i.value=l.target.result},e.readAsDataURL(s.firma)},"image/webp")},$=()=>{s.post(route("delegados.store"),{forceFormData:!0,onSuccess:()=>{s.reset(),i.value=null,y()}})};return(r,e)=>(u(),m(L,null,[o(a(R),{title:"Agregar delegado"}),o(T,{breadCrumbLinks:k},{header:f(()=>e[5]||(e[5]=[b(" Nuevo delegado ")])),default:f(()=>[t("div",q,[t("div",P,[e[7]||(e[7]=t("h3",{class:"text-gray-500"},"Nuevo delegado",-1)),o(B,{href:r.route("delegados.index")},{default:f(()=>e[6]||(e[6]=[b(" Regresar ")])),_:1},8,["href"])]),t("div",X,[t("form",{onSubmit:S($,["prevent"]),enctype:"multipart/form-data",class:"sm:grid sm:grid-cols-2 gap-4"},[t("div",Y,[o(g,{for:"nombre",value:"Nombre(*)"}),o(_,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:a(s).nombre,"onUpdate:modelValue":e[0]||(e[0]=l=>a(s).nombre=l),required:"",autofocus:"",autocomplete:"off"},null,8,["modelValue"]),o(c,{class:"mt-2",message:a(s).errors.nombre},null,8,["message"])]),t("div",z,[o(g,{for:"cargo",value:"Cargo"}),o(_,{id:"cargo",type:"text",class:"mt-1 block w-full",modelValue:a(s).cargo,"onUpdate:modelValue":e[1]||(e[1]=l=>a(s).cargo=l),required:"",autocomplete:"off"},null,8,["modelValue"]),o(c,{class:"mt-2",message:a(s).errors.cargo},null,8,["message"])]),t("div",E,[o(g,{for:"tipo",value:"Tipo"}),U(t("select",{id:"tipo","onUpdate:modelValue":e[2]||(e[2]=l=>a(s).tipo=l),class:"block mt-1 w-full rounded-md form-select focus:border-sky-600"},e[8]||(e[8]=[t("option",{value:"",disabled:"",selected:""},"Seleccione un tipo",-1),t("option",{value:"secretario"},"Secretario",-1),t("option",{value:"jurado"},"Jurado",-1)]),512),[[A,a(s).tipo]]),o(c,{class:"mt-2",message:a(s).errors.tipo},null,8,["message"])]),t("div",null,[o(g,{for:"firma",value:"Firma"}),t("div",G,[t("button",{type:"button",class:x(["px-2 py-1 rounded",d.value==="imagen"?"bg-blue-600 text-white":"bg-gray-200"]),onClick:e[3]||(e[3]=l=>d.value="imagen")}," Cargar imagen ",2),t("button",{type:"button",class:x(["px-2 py-1 rounded",d.value==="canvas"?"bg-blue-600 text-white":"bg-gray-200"]),onClick:e[4]||(e[4]=l=>d.value="canvas")}," Dibujar firma ",2)]),d.value==="imagen"?(u(),m("div",J,[o(_,{id:"firma",type:"file",class:"mt-1 block w-full",accept:"image/*",onChange:C}),o(c,{class:"mt-2",message:a(s).errors.firma},null,8,["message"]),i.value?(u(),m("div",W,[t("img",{src:i.value,alt:"Vista previa de la firma",class:"h-24 border rounded"},null,8,Z)])):h("",!0)])):(u(),m("div",H,[t("canvas",{ref_key:"canvas",ref:n,width:"200",height:"100",class:"border border-gray-400 rounded-md bg-white cursor-crosshair",onMousedown:V,onMousemove:D,onMouseup:w,onMouseleave:w},null,544),t("div",{class:"flex gap-2 mt-1"},[t("button",{type:"button",onClick:y,class:"text-xl text-blue-600 underline"}," Limpiar "),t("button",{type:"button",onClick:F,class:"text-xl text-green-600 underline"}," Usar firma ")]),o(c,{class:"mt-2",message:a(s).errors.firma},null,8,["message"]),i.value?(u(),m("div",I,[t("img",{src:i.value,alt:"Vista previa de la firma",class:"h-24 border rounded"},null,8,K)])):h("",!0)]))]),t("div",O,[o(j,{class:x({"opacity-25":a(s).processing}),disabled:a(s).processing},{default:f(()=>e[9]||(e[9]=[b(" Registrar Delegado ")])),_:1},8,["class","disabled"])])],32)])])]),_:1})],64))}};export{ce as default};
