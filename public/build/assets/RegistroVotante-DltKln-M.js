import{x as qe,T as Be,r as n,w as Y,s as Fe,c as d,o as c,b as r,u as s,Z as Ie,d as F,e as t,p as $,f as w,F as N,k as H,t as I,v as W,E as ee,C as ce,j as O,n as de,l as Me,z as Re}from"./app-DxCEAdnz.js";import{_ as ze}from"./AuthenticatedLayout-Ck9JbPkB.js";import{c as ue}from"./comunas-DceGOULS.js";import{b as Te,s as me,t as $e,e as Ne,c as Oe}from"./etnia-C90rnodB.js";import{_ as p}from"./InputError-D0hqDiY8.js";import{_ as b}from"./InputLabel-D-VtKsHA.js";import{_ as fe}from"./PrimaryButton-DH_319bC.js";import{_ as pe}from"./Modal-8QQISRWe.js";import{_ as S}from"./TextInput-Cc9K3dMD.js";import{s as ve}from"./index-CeW89UTI.js";import{s as Le}from"./index-DfseydcD.js";import{f as Pe}from"./cedulaFrontEjemplo-eqgE4YJW.js";import{d as Ae,T as Ge,n as oe}from"./FaceMatcher-DQZ88WER.js";import{r as Ye}from"./PhotoIcon-BgCHs6U_.js";import"./index-ChSyFEQp.js";import"./index-BT40tWmB.js";import"./index-C8K92cU6.js";import"./SecondaryButtonReturn-DnjO5ka9.js";import"./XCircleIcon-DWPksGPi.js";import"./index-CoV7jK_j.js";import"./index-ytkhBzoI.js";import"./index-BVtEweUF.js";import"./index-CD3WU4Gk.js";const He={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},We={class:"mt-4 justify-center"},Xe={class:"m-auto py-4 px-4"},Ze={key:0,class:"sm:grid sm:grid-cols-2 gap-6 h-full"},Je={class:"mb-2"},Ke={class:"mb-2"},Qe={class:"mb-2"},eo=["value"],oo={class:"mb-2"},ao={key:0,class:"text-red-500"},to={class:"col-span-2 flex justify-end"},so={key:1,class:"sm:grid sm:grid-cols-2 gap-6"},io={class:"mb-2"},ro={class:"mt-2 block sm:flex"},lo={class:""},no={class:"sm:ms-6"},co={key:0,class:"sm:ms-6"},uo={key:1,class:"sm:ms-6"},mo={class:"mb-2"},fo=["value"],po={class:"mb-2"},vo=["value"],go={class:"mb-2"},bo={class:"mb-2"},xo={class:"mb-2"},yo={class:"my-4 col-span-2 mb-2"},ho={class:"mb-4 col-span-2 mb-2"},wo={class:"col-span-2 flex justify-between gap-2"},_o={class:"flex pt-4 justify-end"},ko={class:"flex pt-4 justify-end h-full"},Co={key:2,class:"gap-6"},Vo={class:"sm:grid sm:grid-cols-2 gap-2 h-full sm:px-16 px-4"},Eo={class:"w-full h-full mt-4"},Do={class:"w-full"},jo=["src"],So={class:"mb-2 h-full flex justify-center items-center mt-4"},Uo={class:"border-2 border-gray-300 rounded-md p-2 h-full"},qo={class:"flex justify-center"},Bo=["src","alt"],Fo={key:0,class:"flex justify-center mt-2"},Io={class:"w-full"},Mo={class:"col-span-2 flex justify-between gap-2 mt-4"},Ro={class:"flex pt-4 justify-end"},zo={class:"flex pt-4 justify-end"},To={class:"flex justify-center my-12"},$o={class:"my-12 px-4"},No=["value"],Oo=["disabled"],ua={__name:"RegistroVotante",props:{info:{type:Object}},setup(ge){const u=qe("$swal"),be=[{url:"",text:"Corregir datos"}],m=ge;console.log("info data:",m.info);const o=Be({id_votante:m.info.id||"",nombre:m.info.nombre||"",identificacion:m.info.identificacion||"",tipo_documento:m.info.tipo_documento||"",nacimiento:m.info.nacimiento||"",cedula_front:null,genero:m.info.genero||"",etnia:m.info.etnia||"",condicion:m.info.condicion||"",direccion:m.info.direccion||"",comuna:m.info.hash_votantes[0].subtipo||"",barrio:m.info.barrio||"",embedding:null,photo:null,checked:!1,declaracion:!1,campoObligatorio:"",recaptcha_token:""}),X=n(""),Z=n([]),x=n(!1);n(!0);const xe=n([{label:"Información Personal"},{label:"Datos Demográficos"},{label:"Registro datos"}]),ye=n([{label:"paso 1"},{label:"paso 2"},{label:"paso 3"}]),v=n(0),J=n(""),M=n(""),g=n(!1),h=n(!1),L=n(!1),D=n(null),P=n([]),R=n(""),_=n(null),y=n(""),ae=n(!1),k=n(!1),U=n(0),he=(i,e)=>o.cedula_front===null?`/storage/uploads/documentos/${i}`:i;Y(L,i=>{i&&(o.genero="")}),Y(X,i=>{i&&(o.comuna=i,Z.value=Te.find(e=>e.id===parseInt(i.value)).barrios,console.log(Z.value))});const we=(i,e)=>{const a=e.target.files[0];if(!a)return;((j,T)=>{const A=new FileReader;A.onload=G=>{const C=new Image;C.onload=()=>{const f=document.createElement("canvas"),q=f.getContext("2d"),B=1024,Q=1024;let V=C.width,E=C.height;(V>B||E>Q)&&(V>E?(E=Math.round(E*B/V),V=B):(V=Math.round(V*Q/E),E=Q)),f.width=V,f.height=E,q.drawImage(C,0,0,V,E),f.toBlob(le=>{if(le.size>2e6){Swal.fire({icon:"error",title:"Error",text:"Incluso comprimida, la imagen supera los 2MB."});return}const ne=new File([le],j.name,{type:"image/jpeg",lastModified:Date.now()});T(ne,URL.createObjectURL(ne))},"image/jpeg",.8)},C.src=G.target.result},A.readAsDataURL(j)})(a,(j,T)=>{o[i]=j,D.value=T})},_e=i=>{o.cedula_front=null,D.value=null},te=i=>{if(!i)return"";const e=new Date(i),a=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),j=String(e.getDate()).padStart(2,"0");return`${a}-${l}-${j}`},se=i=>{v.value=i,g.value=!0},ke=async()=>{x.value=!0;try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(l=>l.stop()),await oe.tinyFaceDetector.loadFromUri("/models/tiny_face_detector"),await oe.faceRecognitionNet.loadFromUri("/models/face_recognition"),await oe.faceLandmark68Net.loadFromUri("/models/face_landmark_68");const e=await navigator.mediaDevices.enumerateDevices();P.value=e.filter(l=>l.kind==="videoinput");const a=P.value.find(l=>l.label.toLowerCase().includes("user"))||P.value[0];console.log(a),R.value=(a==null?void 0:a.deviceId)||"",x.value=!1,h.value=!0,await re(R.value)}catch(i){x.value=!1,U.value==3,u.fire({icon:"error",title:"Error al acceder a la cámara",text:"No se pudo acceder a la cámara. Por favor, asegúrese de que su dispositivo tenga una cámara y que haya otorgado los permisos necesarios."}),console.error("Error al iniciar:",i),y.value="No se pudo acceder a la cámara."}},Ce=async()=>{k.value=!0,x.value=!0,y.value="";const i=a=>parseInt(sessionStorage.getItem(a)||"0"),e=(a,l)=>sessionStorage.setItem(a,l.toString());if(!ae.value){i("fallo_camara")+1,y.value="La cámara no está lista.",k.value=!1,x.value=!1;return}try{const a=await Ae(_.value,new Ge).withFaceLandmarks().withFaceDescriptor();console.log("entro -- validador"),u.fire({title:"Validación en progreso",text:"Mire a la cámara hasta que finalice la validación.",icon:"info",timer:2e3,showConfirmButton:!1,didClose:()=>{}});const l=document.createElement("canvas");l.width=_.value.videoWidth,l.height=_.value.videoHeight,l.getContext("2d").drawImage(_.value,0,0,l.width,l.height);const T=await new Promise(f=>l.toBlob(f,"image/jpeg")),A=new File([T],"photo.jpg",{type:"image/jpeg"});if(o.photo=A,!a){x.value=!1,k.value=!1,y.value="No se detectó un rostro.",U.value+=1,U.value==3&&u.fire({title:"Error en validación",text:"Error, no se detectó un rostro, vuelve a intentar o avanzar con la imagen poco visible y posiblemente sin registro biométrico (alta probabilidad de rechazo)",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(f=>{f.isConfirmed?(o.embedding="",o.validaciones="no_rostro",h.value=!1,z()):f.dismiss===u.DismissReason.cancel&&(console.log("Usuario decide volver a intentar"),y.value="",U.value=0)});return}const G=a.descriptor;o.embedding=G;const C=new FormData;C.append("embedding",G),k.value=!1,h.value=!1,Re.post(route("face-validate"),C,{headers:{"Content-Type":"multipart/form-data"}}).then(f=>{y.value=f.data.message,console.log(f),k.value=!1,x.value=!1,f.data.match?u.fire({title:"Error en validación",text:"Usted ya tiene un registro biométrico. Si está seguro que no se ha registrado, puede volver a intentarlo o continuar (probabilidad de rechazo).",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(q=>{q.isConfirmed?(o.validaciones="registro_duplicado",h.value=!1,z()):q.dismiss===u.DismissReason.cancel&&console.log("Usuario decide volver a intentar")}):u({title:"Validación exitosa",text:"Validación biométrica exitosa",icon:"success",didClose:()=>{h.value=!1,z()}})}).catch(f=>{k.value=!1,x.value=!1,console.log(f);const q=i("fallo_registro")+1;e("fallo_registro",q),u.fire({title:"Error en validación",text:"Error en la validación, vuelve a intentar o avanzar sin registro biometrico (posibilidad de rechazo)",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(B=>{B.isConfirmed?(o.embedding="",o.validaciones="fallo_registro_biometrico",h.value=!1,z()):B.dismiss===u.DismissReason.cancel&&console.log("Usuario decide volver a intentar")})})}catch(a){console.error(a),k.value=!1,x.value=!1,U.value==3&&u.fire({title:"Error en validación",text:"Error al procesar el rostro, vuelve a intentar o avanzar sin registro biometrico (posibilidad de rechazo)",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(l=>{l.isConfirmed?(o.embedding="",o.validaciones="fallo_registro",h.value=!1,z()):l.dismiss===u.DismissReason.cancel&&(console.log("Usuario decide volver a intentar"),y.value="",U.value=0)}),y.value="Error al procesar el rostro."}},Ve=()=>{if(!o.nacimiento)return M.value="Debes ingresar la fecha de nacimiento.",!1;const i=new Date,e=new Date(o.nacimiento);let a=i.getFullYear()-e.getFullYear();const l=i.getMonth()-e.getMonth();return(l<0||l===0&&i.getDate()<e.getDate())&&a--,a<14?(M.value="No cumple con el requisito de edad mínima (14 años), por lo tanto, no puede ejercer el derecho al voto.",!1):(M.value="",!0)},Ee=async()=>{if(g.value=!1,o.nombre&&o.tipo_documento&&o.nacimiento){if(!Ve())return;J.value="",g.value=!0}g.value?v.value=1:(o.nombre||(o.errors.nombre="Este campo es requerido."),(!o.identificacion||J.value!="")&&(o.errors.identificacion=J.value||"Este campo es requerido."),o.tipo_documento||(o.errors.tipo_documento="Este campo es requerido."),o.fecha_expedicion||(o.errors.fecha_expedicion="Este campo es requerido."),o.lugar_expedicion||(o.errors.lugar_expedicion="Este campo es requerido."),o.nacimiento||(o.errors.nacimiento="Este campo es requerido."))},De=i=>{switch(g.value=!1,i){case 1:Ee();break;case 2:ie();break}g.value&&(v.value=i)},ie=()=>{g.value=!1,o.genero&&o.etnia&&o.condicion&&o.comuna&&o.barrio&&o.direccion&&o.checked&&o.declaracion&&(g.value=!0,v.value=2),g.value||(o.genero||(o.errors.genero="Este campo es requerido."),o.etnia||(o.errors.etnia="Este campo es requerido."),o.condicion||(o.errors.condicion="Este campo es requerido."),o.comuna||(o.errors.comuna="Este campo es requerido."),o.barrio||(o.errors.barrio="Este campo es requerido."),o.direccion||(o.errors.direccion="Este campo es requerido."),o.checked||(o.errors.checked="Este campo es requerido."),o.declaracion||(o.errors.declaracion="Este campo es requerido."))},je=()=>{g.value=!1,console.log("Validando datos del paso 3",D.value),(o.cedula_front||D)&&(console.log("Datos del paso 3 son válidos"),g.value=!0),g.value?ke():o.cedula_front||(o.errors.cedula_front="Este campo es requerido.")},z=async()=>{const i=await executeRecaptcha("register");o.recaptcha_token=i,o.post(route("create-user"),{onSuccess:()=>{u({title:"Registro realizado",text:"Registro de usuario realizado exitosamente. Para poder votar, se realizará internamente la validación de su información, el estado del trámite será notificado a través del correo electrónico registrado. Recuerde que su usuario es su número de identificación y la contraseña es la que ingresó al momento del registro.",icon:"success"}).then(e=>{window.location.href=route("welcome")}),sessionStorage.removeItem("fallo_camara"),sessionStorage.removeItem("fallo_registro"),sessionStorage.removeItem("registro_duplicado"),o.reset(),K()},onError:e=>{K(),u({title:"Error",text:"Ocurrió un error al registrar el usuario.",icon:"error"}).then(a=>{v.value=0}),console.error(e)}})},re=async i=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:i}}});_.value.srcObject=e,ae.value=!0}catch(e){console.error("Error al iniciar cámara:",e),y.value="Error al iniciar la cámara."}};Y(R,async i=>{i&&await re(i)});const K=()=>{var e;const i=(e=_.value)==null?void 0:e.srcObject;i&&i.getTracks().forEach(a=>a.stop()),_.value.srcObject=null};Y(h,i=>{i==!1&&K()});const Se=i=>(console.log(i),ue.find(e=>e.value==i));async function Ue(){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices){u.fire({icon:"warning",title:"Navegador no compatible",text:"Tu navegador no permite acceder a los dispositivos multimedia."});return}try{(await navigator.mediaDevices.enumerateDevices()).filter(a=>a.kind==="videoinput").length===0?u.fire({icon:"warning",title:"Cámara no detectada",text:"Es necesario que el dispositivo tenga una cámara para continuar con el proceso."}):console.log("Cámara detectada, puede continuar.")}catch(i){console.error("Error al verificar dispositivos:",i),u.fire({icon:"error",title:"Error al verificar la cámara",text:"Ocurrió un problema al intentar detectar la cámara."})}}return Fe(()=>{m.info.hash_votantes[0].subtipo&&(o.comuna=Se(m.info.hash_votantes[0].subtipo)),o.fecha_expedicion=te(m.info.fecha_expedicion),o.nacimiento=te(m.info.nacimiento),Ue()}),(i,e)=>(c(),d(N,null,[r(s(Ie),{title:"Registrar datos"}),r(ze,{breadCrumbLinks:be},{header:F(()=>e[25]||(e[25]=[O(" Registrar datos ")])),default:F(()=>[t("div",He,[e[38]||(e[38]=t("div",{class:"p-6 border-b border-gray-200"},[t("h1",null,"Registrar registro")],-1)),t("div",We,[r(s(me),{class:"hidden sm:block",model:xe.value,activeStep:v.value,"onUpdate:activeStep":e[0]||(e[0]=a=>v.value=a)},null,8,["model","activeStep"]),r(s(me),{class:"sm:hidden block",model:ye.value,activeStep:v.value,"onUpdate:activeStep":e[1]||(e[1]=a=>v.value=a)},null,8,["model","activeStep"])]),t("form",Xe,[v.value==0?(c(),d("div",Ze,[t("div",Je,[r(b,{for:"nombre",value:"Nombre Completo"}),r(S,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:s(o).nombre,"onUpdate:modelValue":e[2]||(e[2]=a=>s(o).nombre=a),required:""},null,8,["modelValue"]),r(p,{class:"mt-2",message:s(o).errors.nombre},null,8,["message"])]),t("div",Ke,[r(b,{for:"identificacion",value:"Identificación"}),r(S,{id:"identificacion",type:"text",class:"mt-1 block w-full",modelValue:s(o).identificacion,"onUpdate:modelValue":e[3]||(e[3]=a=>s(o).identificacion=a),required:""},null,8,["modelValue"]),r(p,{class:"mt-2",message:s(o).errors.identificacion},null,8,["message"])]),t("div",Qe,[r(b,{for:"tipo_documento",value:"Tipo de Documento"}),w(t("select",{id:"tipo_documento","onUpdate:modelValue":e[4]||(e[4]=a=>s(o).tipo_documento=a),class:"mt-1 block w-full border-gray-300 rounded-lg"},[e[26]||(e[26]=t("option",{value:"",disabled:""},"Seleccione tipo de documento",-1)),(c(!0),d(N,null,H(s($e),a=>(c(),d("option",{key:a.id,value:a.nombre},I(a.nombre),9,eo))),128))],512),[[W,s(o).tipo_documento]]),r(p,{class:"mt-2",message:s(o).errors.tipo_documento},null,8,["message"])]),t("div",oo,[r(b,{for:"nacimiento",value:"Fecha de Nacimiento"}),r(S,{id:"nacimiento",type:"date",class:"mt-1 block w-full",modelValue:s(o).nacimiento,"onUpdate:modelValue":e[5]||(e[5]=a=>s(o).nacimiento=a),required:""},null,8,["modelValue"]),r(p,{class:"mt-2",message:s(o).errors.nacimiento},null,8,["message"]),M.value?(c(),d("p",ao,I(M.value),1)):$("",!0)]),t("div",to,[t("button",{type:"button",class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white p-2 rounded-md shadow-xl",onClick:e[6]||(e[6]=a=>De(1))}," Siguiente ")])])):$("",!0),v.value==1?(c(),d("div",so,[t("div",io,[r(b,{for:"genero",value:"Identidad de Género"}),t("div",ro,[t("div",lo,[w(t("input",{type:"radio",id:"masculino",value:"Masculino","onUpdate:modelValue":e[7]||(e[7]=a=>s(o).genero=a)},null,512),[[ee,s(o).genero]]),e[27]||(e[27]=t("label",{class:"ps-2 text-sm sm:text-base",for:"masculino"},"Masculino",-1))]),t("div",no,[w(t("input",{type:"radio",id:"two",value:"Femenino","onUpdate:modelValue":e[8]||(e[8]=a=>s(o).genero=a)},null,512),[[ee,s(o).genero]]),e[28]||(e[28]=t("label",{class:"ps-2 text-sm sm:text-base",for:"two"},"Femenino",-1))]),L.value?(c(),d("div",co,[r(b,{class:"sm:text-sm text-xs",for:"genero",value:"¿Cual?"}),r(S,{id:"genero",type:"text",class:"mt-1 block w-full p-0 sm:p-1",modelValue:s(o).genero,"onUpdate:modelValue":e[9]||(e[9]=a=>s(o).genero=a),autocomplete:"genero"},null,8,["modelValue"]),r(p,{class:"mt-1",message:s(o).errors.genero},null,8,["message"])])):(c(),d("div",uo,[w(t("input",{type:"radio",id:"tres",value:"true","onUpdate:modelValue":e[10]||(e[10]=a=>L.value=a)},null,512),[[ee,L.value]]),e[29]||(e[29]=t("label",{class:"ps-2 text-sm sm:text-base",for:"tres"},"Otro",-1))]))])]),t("div",mo,[r(b,{for:"etnia",value:"Grupo poblacional"}),w(t("select",{id:"etnia","onUpdate:modelValue":e[11]||(e[11]=a=>s(o).etnia=a),class:"mt-1 block w-full border-gray-300 rounded-lg"},[e[30]||(e[30]=t("option",{value:"",disabled:""}," Seleccione grupo poblacional perteneciente ",-1)),(c(!0),d(N,null,H(s(Ne),a=>(c(),d("option",{key:a.id,value:a.nombre},I(a.nombre),9,fo))),128))],512),[[W,s(o).etnia]]),r(p,{class:"mt-2",message:s(o).errors.etnia},null,8,["message"])]),t("div",po,[r(b,{for:"condicion",value:"Condición poblacional"}),w(t("select",{id:"condicion","onUpdate:modelValue":e[12]||(e[12]=a=>s(o).condicion=a),class:"mt-1 block w-full border-gray-300 rounded-lg"},[e[31]||(e[31]=t("option",{value:"",disabled:""}," Seleccione condición poblacional ",-1)),(c(!0),d(N,null,H(s(Oe),a=>(c(),d("option",{key:a.id,value:a.nombre},I(a.nombre),9,vo))),128))],512),[[W,s(o).condicion]]),r(p,{class:"mt-2",message:s(o).errors.condicion},null,8,["message"])]),t("div",go,[r(b,{for:"comuna",value:"Comuna/Corregimiento"}),r(s(ve),{id:"comuna",modelValue:X.value,"onUpdate:modelValue":e[13]||(e[13]=a=>X.value=a),options:s(ue),filter:"",optionLabel:"label",placeholder:"Seleccione comuna/corregimiento del proyecto",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),r(p,{class:"mt-2",message:s(o).errors.comuna},null,8,["message"])]),t("div",bo,[r(b,{for:"barrio",value:"Barrio/Vereda"}),r(s(ve),{id:"barrio",modelValue:s(o).barrio,"onUpdate:modelValue":e[14]||(e[14]=a=>s(o).barrio=a),options:Z.value,filter:"",placeholder:"Seleccione barrio/vereda de dirección",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),r(p,{class:"mt-2",message:s(o).errors.barrio},null,8,["message"])]),t("div",xo,[r(b,{for:"direccion",value:"Dirección"}),r(S,{id:"direccion",type:"text",class:"mt-1 block w-full",modelValue:s(o).direccion,"onUpdate:modelValue":e[15]||(e[15]=a=>s(o).direccion=a),required:""},null,8,["modelValue"]),r(p,{class:"mt-2",message:s(o).errors.direccion},null,8,["message"])]),t("div",yo,[w(t("input",{type:"checkbox",id:"consentimiento1",name:"consentimiento1",required:"","onUpdate:modelValue":e[16]||(e[16]=a=>s(o).checked=a)},null,512),[[ce,s(o).checked]]),e[32]||(e[32]=t("label",{for:"consentimiento1",class:"ps-4 pe-12 sm:text-base text-sm text-gray-500"},[O("Conozco y Acepto la Política de Privacidad de Datos "),t("a",{href:"https://www.pereira.gov.co/publicaciones/38/politicas-de-privacidad-y-condiciones-de-uso/",target:"_blank",class:"underline !text-azul cursor-pointer"},"politica")],-1)),r(p,{class:"mt-1",message:s(o).errors.checked},null,8,["message"])]),t("div",ho,[w(t("input",{type:"checkbox",id:"consentimiento2",name:"consentimiento2",required:"","onUpdate:modelValue":e[17]||(e[17]=a=>s(o).declaracion=a)},null,512),[[ce,s(o).declaracion]]),e[33]||(e[33]=t("label",{for:"consentimiento2",class:"ps-4 pe-12 sm:text-base text-sm text-gray-500"},"Declaro bajo la gravedad de juramento que toda la información suministrada en este formulario es verídica, completa y corresponde a la realidad. Entiendo que proporcionar información falsa puede acarrear sanciones legales conforme a la normativa vigente.",-1)),r(p,{class:"mt-1",message:s(o).errors.declaracion},null,8,["message"])]),t("div",wo,[t("div",_o,[t("button",{type:"button",onClick:e[18]||(e[18]=a=>se(0)),class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white px-4 rounded-md shadow-xl"}," Atrás ")]),t("div",ko,[r(fe,{type:"button",class:de(["h-full",{"opacity-25":s(o).processing}]),onClick:ie,disabled:s(o).processing},{default:F(()=>e[34]||(e[34]=[O(" Siguiente ")])),_:1},8,["class","disabled"])])])])):$("",!0),v.value==2?(c(),d("div",Co,[t("div",Vo,[e[36]||(e[36]=t("div",{class:"col-span-2 text-sm sm:text-base text-gray-800 pt-6"},[t("h3",{class:"text-lg font-semibold"}," Cargue documento de identificación parte frontal "),t("p",null," Para cargar el documento frontal, asegúrese de que la imagen sea clara y legible. El documento debe estar bien iluminado y sin reflejos. ")],-1)),t("div",Eo,[t("div",Do,[e[35]||(e[35]=t("h4",{class:"text-2xl underline"},"Ejemplo parte frontal",-1)),t("img",{src:s(Pe),alt:"Documento Frontal ejemplo",class:"w-full h-full object-contain mt-2"},null,8,jo)])]),t("div",So,[t("div",Uo,[r(S,{id:"cedula_front",type:"file",class:"mt-1 !border-0",accept:"image/jpeg,image/jpg,image/png,image/gif,image/svg+xml,image/webp",onInput:e[19]||(e[19]=a=>we("cedula_front",a)),maxFileSize:2e6}),r(p,{class:"mt-2",message:s(o).errors.cedula_front},null,8,["message"]),t("div",qo,[D.value?(c(),d("img",{key:0,src:he(D.value,1),alt:s(o).cedula_front,class:"w-4/6 h-full object-contain"},null,8,Bo)):(c(),Me(s(Ye),{key:1,class:"w-2/6 text-gray-300 flex justify-center items-center"}))]),D.value?(c(),d("div",Fo,[t("button",{onClick:e[20]||(e[20]=a=>_e(1)),type:"button",class:"bg-red-500 text-white px-4 py-2 rounded"}," Eliminar Imagen ")])):$("",!0)])])]),t("div",Io,[r(S,{id:"campo_obligatorio",type:"text",class:"mt-1 !border-0 hidden",modelValue:s(o).campoObligatorio,"onUpdate:modelValue":e[21]||(e[21]=a=>s(o).campoObligatorio=a)},null,8,["modelValue"])]),t("div",Mo,[t("div",Ro,[t("button",{type:"button",onClick:e[22]||(e[22]=a=>se(1)),class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white px-4 rounded-md shadow-xl"}," Atrás ")]),t("div",zo,[r(fe,{type:"button",onClick:je,class:de({"opacity-25":s(o).processing}),disabled:s(o).processing},{default:F(()=>e[37]||(e[37]=[O(" Siguiente ")])),_:1},8,["class","disabled"])])])])):$("",!0)])])]),_:1}),r(pe,{show:x.value,closeable:!1},{default:F(()=>[e[39]||(e[39]=t("h2",{class:"py-4 text-2xl font-semibold text-gray-800 flex tex-center justify-center bg-azul text-white"}," Cargando datos... ",-1)),t("div",To,[r(s(Le),{"aria-label":"Loading"})])]),_:1},8,["show"]),r(pe,{show:h.value,closeable:!0},{default:F(()=>[e[41]||(e[41]=t("h2",{class:"py-4 text-2xl font-semibold text-gray-800 flex flex-wrap tex-center justify-center bg-azul text-white"}," Validación Biométrica ",-1)),e[42]||(e[42]=t("div",{class:"mt-4 px-4"},[t("p",{class:"text-sm sm:text-base text-gray-800"}," Por favor, asegúrese de que su rostro esté bien iluminado y visible en la cámara (sin gorras, tapabocas, gafas). ")],-1)),t("div",$o,[e[40]||(e[40]=t("label",{for:"camera"},"Seleccionar cámara:",-1)),w(t("select",{id:"camera","onUpdate:modelValue":e[23]||(e[23]=a=>R.value=a),class:"rounded-lg w-auto ms-4"},[(c(!0),d(N,null,H(P.value,a=>(c(),d("option",{key:a.deviceId,value:a.deviceId},I(a.label||"Cámara desconocida"),9,No))),128))],512),[[W,R.value]]),t("video",{ref_key:"video",ref:_,autoplay:"",muted:"",width:"400",height:"340",class:"rounded-xl shadow-lg flex mx-auto mt-6"},null,512),t("button",{type:"button",disabled:k.value,class:"bg-secondary hover:bg-primary z-1000 text-base sm:text-base text-white p-2 rounded-md shadow-xl flex mx-auto mt-4 disabled:bg-gray-500",onClick:e[24]||(e[24]=a=>Ce())}," Validar ",8,Oo),O(" "+I(y.value),1)])]),_:1},8,["show"])],64))}};export{ua as default};
