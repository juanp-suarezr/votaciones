import{x as Oe,T as Ae,y as Pe,r as d,w as A,a as c,b as r,d as l,e as w,f as t,u as s,Z as Ge,m as h,g as V,F as P,h as Z,t as T,v as J,z as re,q as _e,j as k,n as S,i as ke,p as Ce,k as ne}from"./app-kLK7cTUr.js";import{s as He,P as We}from"./index-BkYOmXR_.js";import{_ as u}from"./InputError-DN-wUhQp.js";import{_ as m}from"./InputLabel-DIzyoBIM.js";import{_ as G}from"./PrimaryButton-Khx9Gnag.js";import{_ as Xe}from"./SecondaryButton-Cvtoz74S.js";import{_ as K}from"./Modal-t2I7SYjV.js";import{_ as g}from"./TextInput--rMaKWJ2.js";import{s as Ve,t as Ye,e as Ze,c as Je}from"./etnia-DIHgwtcg.js";import{s as Q}from"./index-Berjjmjv.js";import{s as Ke}from"./index-rF11ey5J.js";import{c as Qe,b as eo,d as oo,f as ao,a as to}from"./cedulaBackEjemplo-ubT-agmT.js";import{c as so}from"./comunas-ar-P-SJd.js";import{d as lo,T as io,n as de}from"./FaceMatcher-DQZ88WER.js";import{r as je}from"./PhotoIcon-B8peq8mc.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DBYi9MA0.js";import"./index-XRpu1uux.js";import"./index-Dx3ZqNoG.js";import"./index-Be1fzYNM.js";import"./index-B6mwHf_L.js";import"./index-BC8khFcS.js";import"./index-6OGqSiJD.js";import"./index-Csh1pQXc.js";const ro={class:"w-full sm:max-w-6xl h-full mx-auto bg-white shadow-lg rounded-lg px-4 sm:px-6 py-12 z-10"},no={class:"mt-4 justify-center"},co={class:"m-auto py-4"},uo={key:0,class:"sm:grid sm:grid-cols-2 gap-6 h-full"},mo={class:"mb-2"},po={class:"mb-2"},fo={class:"mb-2"},vo=["value"],go={class:"mb-2"},bo={key:0,class:"cols-span-2 w-full mb-2"},xo={class:"mb-2 mt-1"},yo={key:0,class:""},wo={class:"mb-2"},ho={key:0,class:"text-red-500"},_o={class:"col-span-2 flex justify-end"},ko={key:1,class:"sm:grid sm:grid-cols-2 gap-6"},Co={class:"mb-2"},Vo={class:"mt-2 block sm:flex"},jo={class:""},Eo={class:"sm:ms-6"},Do={key:0,class:"sm:ms-6"},So={key:1,class:"sm:ms-6"},qo={class:"mb-2"},Uo=["value"],Fo={class:"mb-2"},Ro=["value"],To={class:"w-full mb-2"},Io={class:"w-full flex flex-wrap gap-2 mt-1"},Bo={class:"mb-2"},zo={class:"mb-2"},Mo={class:"mb-2"},$o={class:"mb-2"},Lo={class:"mb-2"},No={class:"my-4 col-span-2 mb-2"},Oo={class:"mb-4 col-span-2 mb-2"},Ao={class:"col-span-2 flex justify-between gap-2"},Po={class:"flex pt-4 justify-end"},Go={class:"flex pt-4 justify-end h-full"},Ho={key:2,class:"gap-6"},Wo={class:"sm:grid sm:grid-cols-2 gap-2 h-full sm:px-16 px-4"},Xo={class:"w-full h-full mt-4"},Yo={class:"w-full"},Zo=["src"],Jo={class:"mb-2 h-full flex justify-center items-center mt-4"},Ko={class:"border-2 border-gray-300 rounded-md p-2 h-full"},Qo={class:"flex justify-center"},ea=["src","alt"],oa={key:0,class:"flex justify-center mt-2"},aa={class:"sm:grid sm:grid-cols-2 gap-2 h-full sm:px-16 px-4"},ta={class:"w-full h-full mt-4"},sa={class:"w-full"},la=["src"],ia={class:"mb-2 h-full flex justify-center items-center mt-4"},ra={class:"border-2 border-gray-300 rounded-md p-2 h-full"},na={class:"flex justify-center"},da=["src","alt"],ca={key:0,class:"flex justify-center mt-2"},ua={class:"w-full gap-2 h-full sm:px-16 px-4 mt-4"},ma={class:"flex gap-4 mb-2"},pa={key:0},fa={key:0,class:"mt-2"},va=["src"],ga={key:1},ba={key:0,class:"mt-2"},xa=["src"],ya={class:"w-full"},wa={class:"col-span-2 flex justify-between gap-2 mt-4"},ha={class:"flex pt-4 justify-end"},_a={class:"flex pt-4 justify-end"},ka={key:3,class:"gap-6"},Ca={class:"w-full mt-6"},Va={class:"col-span-2 flex justify-between gap-2 mt-4"},ja={class:"flex pt-4 justify-end"},Ea={class:"flex pt-4 justify-end"},Da={class:"flex justify-center my-12"},Sa={class:"flex justify-center gap-4 text-center h-full my-12"},qa={class:"my-12 px-4"},Ua=["value"],Fa=["disabled"],Ra={class:"flex justify-center gap-4 text-center h-full my-6"},lt={__name:"Register",setup(Ta){const b=Oe("$swal"),o=Ae({nombre:"",identificacion:"",tipo_documento:"",fecha_expedicion:"",lugar_expedicion:"",nacimiento:"",cedula_front:null,cedula_back:null,genero:"",etnia:"",condicion:"",direccion:"",celular:"",comuna:"",barrio:"",email:"",password:"",embedding:"",photo:"",validaciones:"",checked:!1,declaracion:!1,firma:"",recaptcha_token:"",campoObligatorio:"",codigo:""}),{executeRecaptcha:Ee}=Pe(),I=d(""),ce=d([]),ee=d(""),oe=d([]),q=d(null),B=d("imagen"),j=d(null);let ae=!1;const x=d(!1),ue=d(!0),De=d([{label:"Información Personal"},{label:"Datos Demográficos"},{label:"Registro datos"},{label:"Verificación"}]),Se=d([{label:"paso 1"},{label:"paso 2"},{label:"paso 3"},{label:"paso 4"}]),p=d(1),F=d(""),z=d(""),f=d(!1),C=d(!1),H=d(!1),U=d(!1),M=d(null),$=d(null),W=d([]),L=d(""),y=d(null),_=d(""),me=d(!1),E=d(!1),R=d(0);A(H,i=>{i&&(o.genero="")}),A(I,i=>{i&&(ce.value=Qe.find(e=>e.id===i.id).ciudades)}),A(ee,i=>{i&&(o.comuna=i,oe.value=eo.find(e=>e.id===parseInt(i.value)).barrios,console.log(oe.value))});const te=(i,e)=>{if(o[i]=e.target.files[0],i==="cedula_front"){const a=new FileReader;a.onload=n=>{M.value=n.target.result},a.readAsDataURL(o[i])}else if(i==="cedula_back"){const a=new FileReader;a.onload=n=>{$.value=n.target.result},a.readAsDataURL(o[i])}else if(i=="firma"){const a=new FileReader;a.onload=n=>{q.value=n.target.result},a.readAsDataURL(file)}},pe=i=>{i===1?(o.cedula_front=null,M.value=null):i===2&&(o.cedula_back=null,$.value=null)},fe=i=>{ae=!0;const e=j.value.getContext("2d"),a=ge(i);e.beginPath(),e.moveTo(a.x,a.y)},ve=i=>{if(!ae)return;const e=j.value.getContext("2d"),a=ge(i);e.lineTo(a.x,a.y),e.strokeStyle="#222",e.lineWidth=2,e.stroke()},se=()=>{ae=!1},qe=()=>{j.value.getContext("2d").clearRect(0,0,j.value.width,j.value.height),q.value=null,o.firma=null},Ue=()=>{j.value.toBlob(i=>{o.firma=new File([i],"firma.webp",{type:"image/webp"});const e=new FileReader;e.onload=a=>{q.value=a.target.result},e.readAsDataURL(o.firma)},"image/webp")},ge=i=>{const e=j.value.getBoundingClientRect();return i.touches&&i.touches.length>0?{x:i.touches[0].clientX-e.left,y:i.touches[0].clientY-e.top}:{x:i.offsetX,y:i.offsetY}},le=i=>{p.value=i,f.value=!0},Fe=async()=>{x.value=!0;try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(n=>n.stop()),await de.tinyFaceDetector.loadFromUri("/models/tiny_face_detector"),await de.faceRecognitionNet.loadFromUri("/models/face_recognition"),await de.faceLandmark68Net.loadFromUri("/models/face_landmark_68");const e=await navigator.mediaDevices.enumerateDevices();W.value=e.filter(n=>n.kind==="videoinput");const a=W.value.find(n=>n.label.toLowerCase().includes("user"))||W.value[0];console.log(a),L.value=(a==null?void 0:a.deviceId)||"",x.value=!1,C.value=!0,await ye(L.value)}catch(i){x.value=!1,R.value==3,console.error("Error al iniciar:",i),_.value="No se pudo acceder a la cámara."}},Re=async()=>{_.value="",E.value=!0;const i=a=>parseInt(sessionStorage.getItem(a)||"0"),e=(a,n)=>sessionStorage.setItem(a,n.toString());if(!me.value){i("fallo_camara")+1,_.value="La cámara no está lista.",E.value=!1;return}try{const a=await lo(y.value,new io).withFaceLandmarks().withFaceDescriptor();if(console.log("entro -- validador"),!a){E.value=!1,_.value="No se detectó un rostro.",R.value+=1;const v=document.createElement("canvas");v.width=y.value.videoWidth,v.height=y.value.videoHeight,v.getContext("2d").drawImage(y.value,0,0,v.width,v.height);const X=await new Promise(Y=>v.toBlob(Y,"image/jpeg")),Ne=new File([X],"photo.jpg",{type:"image/jpeg"});o.photo=Ne,R.value==3&&b.fire({title:"Error en validación",text:"Error, no se detectó un rostro, vuelve a intentar o avanzar con la imagen poco visible y posiblemente sin registro biométrico (alta probabilidad de rechazo)",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(Y=>{Y.isConfirmed?(o.embedding="",o.validaciones="no_rostro",C.value=!1,U.value=!0):Y.dismiss===Swal.DismissReason.cancel&&(console.log("Usuario decide volver a intentar"),_.value="",R.value=0)});return}const n=a.descriptor;o.embedding=n,console.log("emb",n);const D=document.createElement("canvas");D.width=y.value.videoWidth,D.height=y.value.videoHeight,D.getContext("2d").drawImage(y.value,0,0,D.width,D.height);const N=await new Promise(v=>D.toBlob(v,"image/jpeg")),Le=new File([N],"photo.jpg",{type:"image/jpeg"});o.photo=Le;const he=new FormData;he.append("embedding",n),E.value=!1,C.value=!1,x.value=!0,ne.post(route("face-validate"),he,{headers:{"Content-Type":"multipart/form-data"}}).then(v=>{_.value=v.data.message,console.log(v),E.value=!1,x.value=!1,v.data.match?b.fire({title:"Error en validación",text:"Usted ya tiene un registro biométrico. Si está seguro que no se ha registrado, puede volver a intentarlo o continuar (probabilidad de rechazo).",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(O=>{O.isConfirmed?(o.validaciones="registro_duplicado",C.value=!1,U.value=!0):O.dismiss===b.DismissReason.cancel&&console.log("Usuario decide volver a intentar")}):b({title:"Validación exitosa",text:"Validación biométrica exitosa",icon:"success",didClose:()=>{C.value=!1,U.value=!0}})}).catch(v=>{E.value=!1,x.value=!1,console.log(v);const O=i("fallo_registro")+1;e("fallo_registro",O),b.fire({title:"Error en validación",text:"Error en la validación, vuelve a intentar o avanzar sin registro biometrico (posibilidad de rechazo)",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(X=>{X.isConfirmed?(o.embedding="",o.validaciones="fallo_registro_biometrico",C.value=!1,U.value=!0):X.dismiss===b.DismissReason.cancel&&console.log("Usuario decide volver a intentar")})})}catch(a){console.error(a),E.value=!1,x.value=!1,R.value==3&&b.fire({title:"Error en validación",text:"Error al procesar el rostro, vuelve a intentar o avanzar sin registro biometrico (posibilidad de rechazo)",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(n=>{n.isConfirmed?(o.embedding="",o.validaciones="fallo_registro",C.value=!1,U.value=!0):n.dismiss===b.DismissReason.cancel&&(console.log("Usuario decide volver a intentar"),_.value="",R.value=0)}),_.value="Error al procesar el rostro."}},Te=()=>{if(!o.nacimiento)return z.value="Debes ingresar la fecha de nacimiento.",!1;const i=new Date,e=o.nacimiento,[a,n,D]=e.split("-").map(Number);let ie=i.getFullYear()-a;const N=i.getMonth()-(n-1);return console.log(i.getMonth()),console.log(N),console.log(i.getDate()),(N<0||N===0&&i.getDate()<D)&&ie--,ie<14?(z.value="No cumple con el requisito de edad mínima (14 años), por lo tanto, no puede ejercer el derecho al voto.",!1):(z.value="",!0)},Ie=async()=>{if(f.value=!1,o.nombre&&o.identificacion&&o.tipo_documento&&o.fecha_expedicion&&(o.lugar_expedicion||o.tipo_documento!="Cédula Ciudadanía")&&o.nacimiento){if(!Te())return;F.value="";try{const i=await Be(o.identificacion);console.log("Identificación existe:",i),i?(F.value="La identificación ya está registrada.",f.value=!1):(F.value="",f.value=!0)}catch{F.value="Error al validar la identificación. Intenta de nuevo.",f.value=!1}}f.value?p.value=1:(o.nombre||(o.errors.nombre="Este campo es requerido."),(!o.identificacion||F.value!="")&&(o.errors.identificacion=F.value||"Este campo es requerido."),o.tipo_documento||(o.errors.tipo_documento="Este campo es requerido."),o.fecha_expedicion||(o.errors.fecha_expedicion="Este campo es requerido."),o.lugar_expedicion||(o.errors.lugar_expedicion="Este campo es requerido."),o.nacimiento||(o.errors.nacimiento="Este campo es requerido."))},Be=async i=>(await ne.post("/validar-identificacion",{identificacion:i})).data.existe,ze=i=>{switch(f.value=!1,i){case 1:Ie();break;case 2:be();break}f.value&&(p.value=i)},be=()=>{f.value=!1,o.genero&&o.etnia&&o.condicion&&o.celular&&o.comuna&&o.barrio&&o.direccion&&o.email&&o.password&&o.checked&&o.declaracion&&(console.log(o.barrio),f.value=!0,p.value=2),f.value||(o.genero||(o.errors.genero="Este campo es requerido."),o.etnia||(o.errors.etnia="Este campo es requerido."),o.condicion||(o.errors.condicion="Este campo es requerido."),o.celular||(o.errors.celular="Este campo es requerido."),o.comuna||(o.errors.comuna="Este campo es requerido."),o.barrio||(o.errors.barrio="Este campo es requerido."),o.direccion||(o.errors.direccion="Este campo es requerido."),o.email||(o.errors.email="Este campo es requerido."),o.password||(o.errors.password="Este campo es requerido."),o.checked||(o.errors.checked="Este campo es requerido."),o.declaracion||(o.errors.declaracion="Este campo es requerido."))},Me=()=>{f.value=!1,o.cedula_front&&o.cedula_back&&o.firma&&(f.value=!0),f.value?Fe():(o.cedula_front||(o.errors.cedula_front="Este campo es requerido."),o.cedula_back||(o.errors.cedula_back="Este campo es requerido."),o.firma||(o.errors.firma="Este campo es requerido"))},xe=async i=>{U.value=!1,x.value=!0,console.log(o.embedding);try{const e=new FormData;switch(i){case 0:e.append("via","correo");break;case 1:e.append("via","sms");break}const a=await Ee("register");o.recaptcha_token=a,e.append("nombre",o.nombre),e.append("identificacion",o.identificacion),e.append("tipo_documento",o.tipo_documento),e.append("fecha_expedicion",o.fecha_expedicion),e.append("lugar_expedicion",o.lugar_expedicion),e.append("nacimiento",o.nacimiento),e.append("etnia",o.etnia),e.append("condicion",o.condicion),e.append("direccion",o.direccion),e.append("genero",o.genero),e.append("comuna",o.comuna),e.append("barrio",o.barrio),e.append("email",o.email),e.append("celular",o.celular),e.append("password",o.password),e.append("recaptcha_token",a),e.append("campoObligatorio",o.campoObligatorio);const n=await ne.post(route("validate-user"),e);x.value=!1,console.log(n),n.data.isSpam&&(o.validaciones="posible robot o spam"),b({title:"Código enviado",text:"Revisa tu correo o SMS para el código de verificación.",icon:"success"}),p.value=3}catch(e){console.error(e);let a="Hubo un problema al validar tu información. Por favor, inténtalo nuevamente.";if(e.response&&e.response.data&&e.response.data.errors){const n=e.response.data.errors;a=Object.values(n).flat().join(`
`)}b.fire({title:"Error",text:a,icon:"error"})}finally{x.value=!1}},$e=()=>{o.post(route("create-user"),{onSuccess:()=>{b({title:"Registro realizado",text:"Registro de usuario realizado exitosamente. Para poder votar, se realizará internamente la validación de su información, el estado del tramite sera notificado a su correo.",icon:"success"}).then(i=>{window.location.href=route("welcome")}),sessionStorage.removeItem("fallo_camara"),sessionStorage.removeItem("fallo_registro"),sessionStorage.removeItem("registro_duplicado"),o.reset(),we()},onError:i=>{b({title:"Error",text:"Ocurrió un error al registrar el usuario.",icon:"error"}).then(e=>{p.value=0}),console.error(i)}})},ye=async i=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:i}}});y.value.srcObject=e,me.value=!0}catch(e){console.error("Error al iniciar cámara:",e),_.value="Error al iniciar la cámara."}};A(L,async i=>{i&&await ye(i)});const we=()=>{var e;const i=(e=y.value)==null?void 0:e.srcObject;i&&i.getTracks().forEach(a=>a.stop()),y.value.srcObject=null};return A(C,i=>{i==!1&&we()}),(i,e)=>(r(),c(P,null,[l(We,null,{default:w(()=>[l(s(Ge),{title:"Registro de Usuario"}),t("div",ro,[e[59]||(e[59]=t("h1",{class:"text-2xl font-bold text-center text-gray-800"}," Registro votante ",-1)),t("div",no,[l(s(Ve),{class:"hidden sm:block",model:De.value,activeStep:p.value,"onUpdate:activeStep":e[0]||(e[0]=a=>p.value=a)},null,8,["model","activeStep"]),l(s(Ve),{class:"sm:hidden block",model:Se.value,activeStep:p.value,"onUpdate:activeStep":e[1]||(e[1]=a=>p.value=a)},null,8,["model","activeStep"])]),t("form",co,[p.value==0?(r(),c("div",uo,[t("div",mo,[l(m,{for:"nombre",value:"Nombre Completo"}),l(g,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:s(o).nombre,"onUpdate:modelValue":e[2]||(e[2]=a=>s(o).nombre=a),required:""},null,8,["modelValue"]),l(u,{class:"mt-2",message:s(o).errors.nombre},null,8,["message"])]),t("div",po,[l(m,{for:"identificacion",value:"Identificación"}),l(g,{id:"identificacion",type:"text",class:"mt-1 block w-full",modelValue:s(o).identificacion,"onUpdate:modelValue":e[3]||(e[3]=a=>s(o).identificacion=a),required:""},null,8,["modelValue"]),l(u,{class:"mt-2",message:s(o).errors.identificacion},null,8,["message"])]),t("div",fo,[l(m,{for:"tipo_documento",value:"Tipo de Documento"}),V(t("select",{id:"tipo_documento","onUpdate:modelValue":e[4]||(e[4]=a=>s(o).tipo_documento=a),class:"mt-1 block w-full border-gray-300 rounded-lg"},[e[41]||(e[41]=t("option",{value:"",disabled:""},"Seleccione tipo de documento",-1)),(r(!0),c(P,null,Z(s(Ye),a=>(r(),c("option",{key:a.id,value:a.nombre},T(a.nombre),9,vo))),128))],512),[[J,s(o).tipo_documento]]),l(u,{class:"mt-2",message:s(o).errors.tipo_documento},null,8,["message"])]),t("div",go,[l(m,{for:"fecha_expedicion",value:"Fecha de Expedición"}),l(g,{id:"fecha_expedicion",type:"date",class:"mt-1 block w-full",modelValue:s(o).fecha_expedicion,"onUpdate:modelValue":e[5]||(e[5]=a=>s(o).fecha_expedicion=a),required:""},null,8,["modelValue"]),l(u,{class:"mt-2",message:s(o).errors.fecha_expedicion},null,8,["message"])]),s(o).tipo_documento!=="Cédula Extranjería"?(r(),c("div",bo,[l(m,{for:"lugar_expedicion",value:"Lugar de Expedición"}),t("div",xo,[l(s(Q),{id:"departamento",modelValue:I.value,"onUpdate:modelValue":e[6]||(e[6]=a=>I.value=a),options:s(oo),filter:"",optionLabel:"departamento",placeholder:"Seleccione departamento",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),s(o).tipo_documento!=="Pasaporte"?(r(),c("div",yo,[l(s(Q),{disabled:I.value===null||I.value==="",id:"lugar_expedicion",modelValue:s(o).lugar_expedicion,"onUpdate:modelValue":e[7]||(e[7]=a=>s(o).lugar_expedicion=a),options:ce.value,filter:"",optionLabel:"",placeholder:"Seleccione lugar de expedición",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["disabled","modelValue","options"])])):h("",!0),l(u,{class:"mt-2",message:s(o).errors.lugar_expedicion},null,8,["message"])])):h("",!0),t("div",wo,[l(m,{for:"nacimiento",value:"Fecha de Nacimiento"}),l(g,{id:"nacimiento",type:"date",class:"mt-1 block w-full",modelValue:s(o).nacimiento,"onUpdate:modelValue":e[8]||(e[8]=a=>s(o).nacimiento=a),required:""},null,8,["modelValue"]),l(u,{class:"mt-2",message:s(o).errors.nacimiento},null,8,["message"]),z.value?(r(),c("p",ho,T(z.value),1)):h("",!0)]),t("div",_o,[t("button",{type:"button",class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white p-2 rounded-md shadow-xl",onClick:e[9]||(e[9]=a=>ze(1))}," Siguiente ")])])):h("",!0),p.value==1?(r(),c("div",ko,[t("div",Co,[l(m,{for:"genero",value:"Género"}),t("div",Vo,[t("div",jo,[V(t("input",{type:"radio",id:"masculino",value:"Masculino","onUpdate:modelValue":e[10]||(e[10]=a=>s(o).genero=a)},null,512),[[re,s(o).genero]]),e[42]||(e[42]=t("label",{class:"ps-2 text-sm sm:text-base",for:"masculino"},"Masculino",-1))]),t("div",Eo,[V(t("input",{type:"radio",id:"two",value:"Femenino","onUpdate:modelValue":e[11]||(e[11]=a=>s(o).genero=a)},null,512),[[re,s(o).genero]]),e[43]||(e[43]=t("label",{class:"ps-2 text-sm sm:text-base",for:"two"},"Femenino",-1))]),H.value?(r(),c("div",Do,[l(m,{class:"sm:text-sm text-xs",for:"genero",value:"¿Cual?"}),l(g,{id:"genero",type:"text",class:"mt-1 block w-full p-0 sm:p-1",modelValue:s(o).genero,"onUpdate:modelValue":e[12]||(e[12]=a=>s(o).genero=a),autocomplete:"genero"},null,8,["modelValue"]),l(u,{class:"mt-1",message:s(o).errors.genero},null,8,["message"])])):(r(),c("div",So,[V(t("input",{type:"radio",id:"tres",value:"true","onUpdate:modelValue":e[13]||(e[13]=a=>H.value=a)},null,512),[[re,H.value]]),e[44]||(e[44]=t("label",{class:"ps-2 text-sm sm:text-base",for:"tres"},"Otro",-1))]))])]),t("div",qo,[l(m,{for:"etnia",value:"Grupo poblacional"}),V(t("select",{id:"etnia","onUpdate:modelValue":e[14]||(e[14]=a=>s(o).etnia=a),class:"mt-1 block w-full border-gray-300 rounded-lg"},[e[45]||(e[45]=t("option",{value:"",disabled:""}," Seleccione grupo poblacional perteneciente ",-1)),(r(!0),c(P,null,Z(s(Ze),a=>(r(),c("option",{key:a.id,value:a.nombre},T(a.nombre),9,Uo))),128))],512),[[J,s(o).etnia]]),l(u,{class:"mt-2",message:s(o).errors.etnia},null,8,["message"])]),t("div",Fo,[l(m,{for:"condicion",value:"Condición poblacional"}),V(t("select",{id:"condicion","onUpdate:modelValue":e[15]||(e[15]=a=>s(o).condicion=a),class:"mt-1 block w-full border-gray-300 rounded-lg"},[e[46]||(e[46]=t("option",{value:"",disabled:""}," Seleccione condición poblacional ",-1)),(r(!0),c(P,null,Z(s(Je),a=>(r(),c("option",{key:a.id,value:a.nombre},T(a.nombre),9,Ro))),128))],512),[[J,s(o).condicion]]),l(u,{class:"mt-2",message:s(o).errors.condicion},null,8,["message"])]),t("div",To,[t("div",null,[l(m,{for:"celular",value:"Celular"}),t("div",Io,[e[47]||(e[47]=t("div",{class:"flex items-center w-auto[20%] block p-2 border border-gray-400 bg-gray-100 rounded-md"},[t("p",null,"+57")],-1)),l(g,{id:"celular",type:"number",class:"w-[80%] flex",modelValue:s(o).celular,"onUpdate:modelValue":e[16]||(e[16]=a=>s(o).celular=a),required:""},null,8,["modelValue"])]),l(u,{class:"mt-2",message:s(o).errors.celular},null,8,["message"])])]),t("div",Bo,[l(m,{for:"comuna",value:"Comuna/Corregimiento"}),l(s(Q),{id:"comuna",modelValue:ee.value,"onUpdate:modelValue":e[17]||(e[17]=a=>ee.value=a),options:s(so),filter:"",optionLabel:"label",placeholder:"Seleccione comuna de dirección",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),l(u,{class:"mt-2",message:s(o).errors.comuna},null,8,["message"])]),t("div",zo,[l(m,{for:"barrio",value:"Barrio/Vereda"}),l(s(Q),{id:"barrio",modelValue:s(o).barrio,"onUpdate:modelValue":e[18]||(e[18]=a=>s(o).barrio=a),options:oe.value,filter:"",placeholder:"Seleccione barrio/vereda de dirección",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),l(u,{class:"mt-2",message:s(o).errors.barrio},null,8,["message"])]),t("div",Mo,[l(m,{for:"direccion",value:"Dirección"}),l(g,{id:"direccion",type:"text",class:"mt-1 block w-full",modelValue:s(o).direccion,"onUpdate:modelValue":e[19]||(e[19]=a=>s(o).direccion=a),required:""},null,8,["modelValue"]),l(u,{class:"mt-2",message:s(o).errors.direccion},null,8,["message"])]),t("div",$o,[l(m,{for:"email",value:"Correo Electrónico"}),l(g,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:s(o).email,"onUpdate:modelValue":e[20]||(e[20]=a=>s(o).email=a),required:""},null,8,["modelValue"]),l(u,{class:"mt-2",message:s(o).errors.email},null,8,["message"])]),e[51]||(e[51]=t("div",{class:"mb-2"},[t("div",{class:"bg-azul rounded-md p-2 w-full h-full"},[t("p",{class:"text-white text-base"}," Asegúrese de que la contraseña sea facil de recordar para usted, ya que la necesitará para acceder a su cuenta en el momento de la votación. ")])],-1)),t("div",Lo,[l(m,{for:"password",value:"Contraseña (mínimo: 8 caracteres)"}),l(s(He),{id:"password",modelValue:s(o).password,"onUpdate:modelValue":e[21]||(e[21]=a=>s(o).password=a),required:"",toggleMask:""},null,8,["modelValue"]),l(u,{class:"mt-2",message:s(o).errors.password},null,8,["message"])]),t("div",No,[V(t("input",{type:"checkbox",id:"consentimiento1",name:"consentimiento1",required:"","onUpdate:modelValue":e[22]||(e[22]=a=>s(o).checked=a)},null,512),[[_e,s(o).checked]]),e[48]||(e[48]=t("label",{for:"consentimiento1",class:"ps-4 pe-12 sm:text-base text-sm text-gray-500"},[k("Conozco y Acepto la Política de Privacidad de Datos "),t("a",{href:"https://www.pereira.gov.co/publicaciones/38/politicas-de-privacidad-y-condiciones-de-uso/",target:"_blank",class:"underline !text-azul cursor-pointer"},"politica")],-1)),l(u,{class:"mt-1",message:s(o).errors.checked},null,8,["message"])]),t("div",Oo,[V(t("input",{type:"checkbox",id:"consentimiento2",name:"consentimiento2",required:"","onUpdate:modelValue":e[23]||(e[23]=a=>s(o).declaracion=a)},null,512),[[_e,s(o).declaracion]]),e[49]||(e[49]=t("label",{for:"consentimiento2",class:"ps-4 pe-12 sm:text-base text-sm text-gray-500"},[k("Manifiesto que acepto la "),t("a",{href:"https://www.pereira.gov.co/loader.php?lServicio=Tools2&lTipo=descargas&lFuncion=visorpdf&file=https%3A%2F%2Fwww.pereira.gov.co%2Floader.php%3FlServicio%3DTools2%26lTipo%3Ddescargas%26lFuncion%3DexposeDocument%26idFile%3D211273%26tmp%3De1c59e50ed23a13cda9087f627ac4f4d%26urlDeleteFunction%3Dhttps%253A%252F%252Fwww.pereira.gov.co%252Floader.php%253FlServicio%253DTools2%2526lTipo%253Ddescargas%2526lFuncion%253DdeleteTemporalFile%2526tmp%253De1c59e50ed23a13cda9087f627ac4f4d&pdf=1&tmp=e1c59e50ed23a13cda9087f627ac4f4d&fileItem=211273",target:"_blank",class:"underline !text-azul cursor-pointer"},"Declaración"),k(" juramentada")],-1)),l(u,{class:"mt-1",message:s(o).errors.declaracion},null,8,["message"])]),t("div",Ao,[t("div",Po,[t("button",{type:"button",onClick:e[24]||(e[24]=a=>le(0)),class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white px-4 rounded-md shadow-xl"}," Atrás ")]),t("div",Go,[l(G,{type:"button",class:S(["h-full",{"opacity-25":s(o).processing}]),onClick:be,disabled:s(o).processing},{default:w(()=>e[50]||(e[50]=[k(" Siguiente ")])),_:1},8,["class","disabled"])])])])):h("",!0),p.value==2?(r(),c("div",Ho,[t("div",Wo,[e[53]||(e[53]=t("div",{class:"col-span-2 text-sm sm:text-base text-gray-800 pt-6"},[t("h3",{class:"text-lg font-semibold"}," Cargue documento de identificación parte frontal "),t("p",null," Para cargar el documento frontal, asegúrese de que la imagen sea clara y legible. El documento debe estar bien iluminado y sin reflejos. ")],-1)),t("div",Xo,[t("div",Yo,[e[52]||(e[52]=t("h4",null,"Ejemplo parte frontal",-1)),t("img",{src:s(ao),alt:"Documento Frontal ejemplo",class:"w-full h-full object-contain mt-2"},null,8,Zo)])]),t("div",Jo,[t("div",Ko,[l(g,{id:"cedula_front",type:"file",class:"mt-1 !border-0",accept:"image/*",onInput:e[25]||(e[25]=a=>te("cedula_front",a)),maxFileSize:2e6}),l(u,{class:"mt-2",message:s(o).errors.cedula_front},null,8,["message"]),t("div",Qo,[M.value?(r(),c("img",{key:0,src:M.value,alt:s(o).cedula_front,class:"w-4/6 h-full object-contain"},null,8,ea)):(r(),ke(s(je),{key:1,class:"w-2/6 text-gray-300 flex justify-center items-center"}))]),M.value?(r(),c("div",oa,[t("button",{onClick:e[26]||(e[26]=a=>pe(1)),type:"button",class:"bg-red-500 text-white px-4 py-2 rounded"}," Eliminar Imagen ")])):h("",!0)])])]),t("div",aa,[e[55]||(e[55]=t("div",{class:"col-span-2 text-sm sm:text-base text-gray-800 pt-6"},[t("h3",{class:"text-lg font-semibold"}," Cargue documento de identificación parte trasera "),t("p",null," Para cargar el documento en su parte trasera, asegúrese de que la imagen sea clara y legible. El documento debe estar bien iluminado y sin reflejos. ")],-1)),t("div",ta,[t("div",sa,[e[54]||(e[54]=t("h4",null,"Ejemplo parte trasera",-1)),t("img",{src:s(to),alt:"Documento parte trasera ejemplo",class:"w-full h-full object-contain mt-2"},null,8,la)])]),t("div",ia,[t("div",ra,[l(g,{id:"cedula_back",type:"file",class:"mt-1 !border-0",accept:"image/*",onInput:e[27]||(e[27]=a=>te("cedula_back",a)),maxFileSize:2e6}),l(u,{class:"mt-2",message:s(o).errors.cedula_back},null,8,["message"]),t("div",na,[$.value?(r(),c("img",{key:0,src:$.value,alt:s(o).cedula_back,class:"w-4/6 h-full object-contain"},null,8,da)):(r(),ke(s(je),{key:1,class:"w-2/6 text-gray-300 flex justify-center items-center"}))]),$.value?(r(),c("div",ca,[t("button",{onClick:e[28]||(e[28]=a=>pe(2)),type:"button",class:"bg-red-500 text-white px-4 py-2 rounded"}," Eliminar Imagen ")])):h("",!0)])])]),t("div",ua,[l(m,{for:"firma",value:"Firma"}),t("div",ma,[t("button",{type:"button",class:S(["px-2 py-1 rounded",B.value==="imagen"?"bg-blue-600 text-white":"bg-gray-200"]),onClick:e[29]||(e[29]=a=>B.value="imagen")}," Cargar imagen ",2),t("button",{type:"button",class:S(["px-2 py-1 rounded",B.value==="canvas"?"bg-blue-600 text-white":"bg-gray-200"]),onClick:e[30]||(e[30]=a=>B.value="canvas")}," Dibujar firma ",2)]),B.value==="imagen"?(r(),c("div",pa,[l(g,{id:"firma",type:"file",class:"mt-1 block w-full",accept:"image/*",onChange:e[31]||(e[31]=a=>te("firma",a)),maxFileSize:2e6}),l(u,{class:"mt-2",message:s(o).errors.firma},null,8,["message"]),q.value?(r(),c("div",fa,[t("img",{src:q.value,alt:"Vista previa de la firma",class:"h-24 border rounded"},null,8,va)])):h("",!0)])):(r(),c("div",ga,[t("canvas",{ref_key:"canvas",ref:j,height:"150",class:"border border-gray-400 rounded-md bg-white cursor-crosshair sm:w-[300px] w-[250px]",onMousedown:fe,onMousemove:ve,onMouseup:se,onMouseleave:se,onTouchstart:Ce(fe,["prevent"]),onTouchmove:Ce(ve,["prevent"]),onTouchend:se},null,544),t("div",{class:"flex gap-2 mt-1"},[t("button",{type:"button",onClick:qe,class:"text-xl sm:text-2xl text-blue-600 underline"}," Limpiar "),t("button",{type:"button",onClick:Ue,class:"text-xl sm:text-2xl text-green-600 underline"}," Usar firma ")]),l(u,{class:"mt-2",message:s(o).errors.firma},null,8,["message"]),q.value?(r(),c("div",ba,[t("img",{src:q.value,alt:"Vista previa de la firma",class:"h-24 border rounded"},null,8,xa)])):h("",!0)]))]),t("div",ya,[l(g,{id:"campo_obligatorio",type:"text",class:"mt-1 !border-0 hidden",modelValue:s(o).campoObligatorio,"onUpdate:modelValue":e[32]||(e[32]=a=>s(o).campoObligatorio=a)},null,8,["modelValue"])]),t("div",wa,[t("div",ha,[t("button",{type:"button",onClick:e[33]||(e[33]=a=>le(1)),class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white px-4 rounded-md shadow-xl"}," Atrás ")]),t("div",_a,[l(G,{type:"button",onClick:Me,class:S({"opacity-25":s(o).processing}),disabled:s(o).processing},{default:w(()=>e[56]||(e[56]=[k(" Siguiente ")])),_:1},8,["class","disabled"])])])])):h("",!0),p.value==3?(r(),c("div",ka,[e[58]||(e[58]=t("div",{class:"text-sm sm:text-base text-gray-800 pt-6 sm:px-16 px-4"}," Ingrese el código de verificación que le fue enviado a su correo o celular. Si no recibió el código, por favor revise su bandeja de entrada o carpeta de spam. o vuelva a atrás y valide nuevamente. ",-1)),t("div",Ca,[l(m,{for:"codigo",value:"Código de Verificación"}),l(g,{id:"codigo",type:"text",class:"mt-1 block w-full",modelValue:s(o).codigo,"onUpdate:modelValue":e[34]||(e[34]=a=>s(o).codigo=a),required:""},null,8,["modelValue"]),l(u,{class:"mt-2",message:s(o).errors.codigo},null,8,["message"])]),t("div",Va,[t("div",ja,[t("button",{type:"button",onClick:e[35]||(e[35]=a=>le(0)),class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white px-4 rounded-md shadow-xl"}," Atrás ")]),t("div",Ea,[l(G,{type:"button",onClick:$e,class:S({"opacity-25":s(o).processing}),disabled:s(o).processing},{default:w(()=>e[57]||(e[57]=[k(" Registrarse ")])),_:1},8,["class","disabled"])])])])):h("",!0)])])]),_:1}),l(K,{show:x.value,closeable:!1},{default:w(()=>[e[60]||(e[60]=t("h2",{class:"py-4 text-2xl font-semibold text-gray-800 flex tex-center justify-center bg-azul text-white"}," Cargando datos... ",-1)),t("div",Da,[l(s(Ke),{"aria-label":"Loading"})])]),_:1},8,["show"]),l(K,{show:U.value,closeable:!1},{default:w(()=>[e[63]||(e[63]=t("h2",{class:"py-4 text-2xl font-semibold text-gray-800 flex tex-center justify-center bg-azul text-white"}," Validar por código de verificación ",-1)),t("div",Sa,[l(G,{type:"button",class:S(["h-full",{"opacity-25":s(o).processing}]),onClick:e[36]||(e[36]=a=>xe(0)),disabled:s(o).processing},{default:w(()=>e[61]||(e[61]=[k(" Validar con correo ")])),_:1},8,["class","disabled"]),l(Xe,{onClick:e[37]||(e[37]=a=>xe(1)),class:S({"opacity-25":s(o).processing}),disabled:s(o).processing},{default:w(()=>e[62]||(e[62]=[k(" Validar con sms ")])),_:1},8,["class","disabled"])])]),_:1},8,["show"]),l(K,{show:C.value,closeable:!0},{default:w(()=>[e[65]||(e[65]=t("h2",{class:"py-4 text-2xl font-semibold text-gray-800 flex flex-wrap tex-center justify-center bg-azul text-white"}," Validación Biométrica ",-1)),e[66]||(e[66]=t("div",{class:"mt-4 px-4"},[t("p",{class:"text-sm sm:text-base text-gray-800"}," Por favor, asegúrese de que su rostro esté bien iluminado y visible en la cámara (sin gorras, tapabocas, gafas). ")],-1)),t("div",qa,[e[64]||(e[64]=t("label",{for:"camera"},"Seleccionar cámara:",-1)),V(t("select",{id:"camera","onUpdate:modelValue":e[38]||(e[38]=a=>L.value=a),class:"rounded-lg w-auto ms-4"},[(r(!0),c(P,null,Z(W.value,a=>(r(),c("option",{key:a.deviceId,value:a.deviceId},T(a.label||"Cámara desconocida"),9,Ua))),128))],512),[[J,L.value]]),t("video",{ref_key:"video",ref:y,autoplay:"",muted:"",width:"400",height:"340",class:"rounded-xl shadow-lg flex mx-auto mt-6"},null,512),t("button",{type:"button",disabled:E.value,class:"bg-secondary hover:bg-primary text-sm sm:text-base text-white p-2 rounded-md shadow-xl flex mx-auto mt-4 disabled:bg-gray-500",onClick:e[39]||(e[39]=a=>Re())}," Validar ",8,Fa),k(" "+T(_.value),1)])]),_:1},8,["show"]),l(K,{show:ue.value,closeable:!0},{default:w(()=>[e[68]||(e[68]=t("h2",{class:"p-4 sm:text-4xl text-2x font-bold text-gray-800 text-justify flex tex-center justify-center bg-azul text-white"}," Aviso Importante para el proceso de registro ",-1)),e[69]||(e[69]=t("div",{class:"text-justify sm:text-2xl text-xl p-6 mt-6"},[t("p",null," El dispositivo que utilice para registrarse debe contar con cámara, ya que es un requisito indispensable para la validación de identidad. "),t("br"),t("p",null," Asegúrese de ingresar correctamente toda la información solicitada, ya que cualquier error podría resultar en el rechazo. ¡Recuerde! solo tiene tres oportunidades para registrarse. "),t("br"),t("p",null," Al momento de seleccionar su comuna o corregimiento, hágalo con precisión. Recuerde que el derecho al voto solo podrá ejercerse una única vez y no habrá posibilidad de repetir el proceso. ")],-1)),t("div",Ra,[l(G,{type:"button",class:S(["h-full text-xl sm:text-2xl",{"opacity-25":s(o).processing}]),onClick:e[40]||(e[40]=a=>ue.value=!1),disabled:s(o).processing},{default:w(()=>e[67]||(e[67]=[k(" Continuar ")])),_:1},8,["class","disabled"])])]),_:1},8,["show"])],64))}};export{lt as default};
