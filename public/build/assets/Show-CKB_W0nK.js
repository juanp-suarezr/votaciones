import{x as Q,T as W,r as h,q as T,c as a,o as d,b,u as v,Z as _,d as p,e as o,p as U,j as r,t as n,f as tt,v as ot,F as q,k as et}from"./app-idO8rmG9.js";import{_ as nt}from"./AuthenticatedLayout-CHeVNrVV.js";import{_ as st}from"./SecondaryButton-DPfkAO-l.js";import{_ as it}from"./PrimaryButton-Dsi1RdKZ.js";import{c as rt}from"./comunas-DceGOULS.js";import{b as lt}from"./barrios-CntC0Qm4.js";import{N as at}from"./vue-easy-lightbox.esm.min-DcrrImGE.js";import{_ as dt}from"./Modal-Boqs8sZl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BreadCrumb-BrMf3ja_.js";import"./SecondaryButtonReturn-CDq0qDPu.js";import"./XCircleIcon-D7qfKJLw.js";import"./index-ChMPPBT1.js";import"./index-Cjw6RQOq.js";import"./index-WlmsCYGD.js";const ut={class:"p-4 overflow-x-hidden w-full"},ct={class:"bg-white shadow-md rounded-lg p-6 mb-6"},vt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},mt={key:0},gt={class:"bg-white shadow-md rounded-lg p-6 flex flex-wrap gap-8 items-start"},bt={class:"sm:flex-shrink-0 flex flex-col items-center"},ft=["src"],pt={key:1,class:"text-gray-400 italic"},xt={class:"sm:flex-shrink-0 flex flex-col items-center"},wt=["src"],ht={key:1,class:"text-gray-400 italic"},yt={class:"bg-white shadow-md rounded-lg p-6 mt-6 flex flex-col md:flex-row gap-8 items-start"},kt={class:"w-auto"},Nt={class:""},Ct={key:0,class:""},Dt={class:"flex flex-col gap-2 w-full md:w-1/3"},$t={class:"flex flex-col md:flex-row gap-4 mt-8 justify-center items-center h-full"},St={class:"flex justify-between items-center bg-azul text-white px-4 py-4"},jt={class:"px-6 py-4"},At=["src"],Rt={class:"text-gray-800 font-medium"},Et={class:"text-gray-800 font-medium"},zt={class:"text-gray-800 font-medium"},Ft={class:"text-gray-800 font-medium"},It={class:"text-gray-800 font-medium"},Lt={class:"flex justify-end items-center gap-2 mt-6"},Vt=["disabled"],Bt=["disabled"],C=5,_t={__name:"Show",props:{votante:{type:Object,required:!0},duplicados:{type:Object}},setup(e){const x=Q("$swal"),w=e;console.log(w);const u=W({id:w.votante.id,motivo:""}),D=h(""),y=h(!1),k=h(!1),g=h(1),$=T(()=>Math.ceil(w.duplicados.length/C)),G=T(()=>{const s=(g.value-1)*C;return w.duplicados.slice(s,s+C)}),S=s=>{D.value=s,y.value=!0},O=()=>{y.value=!1},H=s=>{const t=new Date(s),l=t.getFullYear(),m=String(t.getMonth()+1).padStart(2,"0"),c=String(t.getDate()).padStart(2,"0");return`${l}-${m}-${c}`},X=[{url:route("gestion_registros.index"),text:"Gestion de registros"},{url:"",text:"Detalle registro"}],N=s=>`/storage/uploads/fotos/${s}`,j=s=>`/storage/uploads/documentos/${s}`,Y=s=>{var t;return console.log(s),(t=rt.find(l=>l.value==s))==null?void 0:t.label},Z=(s,t)=>{const l=lt.find(c=>c.id===t);console.log(l),console.log(s);const m=l.barrios.some(c=>c.toLowerCase().trim()===s.toLowerCase().trim());return console.log(m),!m},J=()=>{u.post(route("aprobarRegistro"),{onSuccess:function(){x({title:"Registro Aprobado",text:"El registro ha sido aprobado exitosamente",icon:"success"}).then(()=>{window.location.href=route("gestion_registros.index")})},onError:function(){x({title:"Error al aprobar registro",text:"Error al intentar aprobar este registro, por favor vuelve a intentar",icon:"error"})}})},K=()=>{u.post(route("rechazarRegistro"),{onSuccess:function(){x({title:"Registro Rechazado",text:"El registro ha sido rechazado exitosamente",icon:"success"}).then(()=>{window.location.href=route("gestion_registros.index")})},onError:function(){x({title:"Error al rechazar registro",text:"Error al intentar rechazar este registro, por favor vuelve a intentar",icon:"error"})}})};return(s,t)=>(d(),a(q,null,[b(v(_),{title:"Validación del votante"}),b(nt,{breadCrumbLinks:X},{header:p(()=>t[7]||(t[7]=[o("div",{class:"flex justify-between items-center"},[o("h1",{class:"text-2xl font-bold"},"Detalle del Registro")],-1)])),default:p(()=>{var l,m,c,A,R,E,z,F,I,L,V,B,P,M;return[o("div",ut,[o("div",ct,[t[21]||(t[21]=o("h2",{class:"text-lg font-bold mb-4 text-blue-900"},"Datos del votante",-1)),o("div",vt,[o("div",null,[t[8]||(t[8]=o("b",null,"Nombre:",-1)),r(" "+n(((l=e.votante.votante)==null?void 0:l.nombre)||"Sin información"),1)]),o("div",null,[t[9]||(t[9]=o("b",null,"Tipo de documento:",-1)),r(" "+n(((m=e.votante.votante)==null?void 0:m.tipo_documento)||"N/A"),1)]),o("div",null,[t[10]||(t[10]=o("b",null,"Número de documento:",-1)),r(" "+n(((c=e.votante.votante)==null?void 0:c.identificacion)||"N/A"),1)]),o("div",null,[t[11]||(t[11]=o("b",null,"Fecha de nacimiento:",-1)),r(" "+n(((A=e.votante.votante)==null?void 0:A.nacimiento)||"N/A"),1)]),o("div",null,[t[12]||(t[12]=o("b",null,"Genero:",-1)),r(" "+n(((R=e.votante.votante)==null?void 0:R.genero)||"N/A"),1)]),o("div",null,[t[13]||(t[13]=o("b",null,"Comuna/Corregimiento:",-1)),r(" "+n(Y(e.votante.subtipo)||"N/A"),1)]),o("div",null,[t[14]||(t[14]=o("b",null,"Barrio:",-1)),r(" "+n(((E=e.votante.votante)==null?void 0:E.barrio)||"N/A")+" ",1),t[15]||(t[15]=o("br",null,null,-1)),o("i",null,n(Z((z=e.votante.votante)==null?void 0:z.barrio,e.votante.subtipo)?"Barrio ingresado por el usuario":""),1)]),o("div",null,[t[16]||(t[16]=o("b",null,"Dirección:",-1)),r(" "+n(((F=e.votante.votante)==null?void 0:F.direccion)||"N/A"),1)]),o("div",null,[t[17]||(t[17]=o("b",null,"Contacto:",-1)),t[18]||(t[18]=o("br",null,null,-1)),r(" Email: "+n(((I=e.votante.votante)==null?void 0:I.email)||"N/A")+" ",1),t[19]||(t[19]=o("br",null,null,-1)),r(" Celular: "+n(((L=e.votante.votante)==null?void 0:L.celular)||"N/A"),1)]),e.votante.intentos>0?(d(),a("div",mt,[t[20]||(t[20]=o("b",null,"Motivo rechazo:",-1)),r(" "+n(e.votante.motivo||"N/A"),1)])):U("",!0)])]),o("div",gt,[o("div",bt,[t[22]||(t[22]=o("h2",null,"Fotografía",-1)),(V=e.votante.votante)!=null&&V.user.biometrico?(d(),a("img",{key:0,src:N((B=e.votante.votante)==null?void 0:B.user.biometrico.photo),alt:"Foto del votante",onClick:t[0]||(t[0]=i=>{var f;return S(N((f=e.votante.votante)==null?void 0:f.user.biometrico.photo))}),class:"sm:w-64 sm:h-64 w-full cursor-pointer sm:object-cover object-contain rounded-lg border shadow"},null,8,ft)):(d(),a("span",pt,"Sin foto"))]),o("div",xt,[t[23]||(t[23]=o("h2",null,"Frontal",-1)),(P=e.votante.votante)!=null&&P.user.biometrico?(d(),a("img",{key:0,src:j((M=e.votante.votante)==null?void 0:M.user.biometrico.cedula_front),alt:"Foto del votante",onClick:t[1]||(t[1]=i=>{var f;return S(j((f=e.votante.votante)==null?void 0:f.user.biometrico.cedula_front))}),class:"w-full sm:h-64 cursor-pointer sm:object-cover object-contain rounded-lg border shadow"},null,8,wt)):(d(),a("span",ht,"Sin foto"))])]),o("div",yt,[o("div",kt,[o("div",Nt,[t[24]||(t[24]=o("b",null,"Validación:",-1)),r(" "+n(e.votante.validaciones),1)]),e.duplicados.length>0?(d(),a("div",Ct,[o("button",{onClick:t[2]||(t[2]=i=>k.value=!0),class:"bg-secondary text-white hover:scale-105 hover:bg-primary p-2 cursor-pointer rounded-md mt-2"}," Ver duplicados ")])):U("",!0)]),o("div",Dt,[t[26]||(t[26]=o("b",null,"Motivo de rechazo:",-1)),tt(o("select",{"onUpdate:modelValue":t[3]||(t[3]=i=>v(u).motivo=i),class:"border rounded p-2"},t[25]||(t[25]=[o("option",{value:"",disabled:""},"Seleccione un motivo",-1),o("option",{value:"aprobado"},"No hay motivos (aprobado)",-1),o("option",{value:"Documentos incorrectos"}," Documento incorrecto ",-1),o("option",{value:"Identidad no validada"},"Identidad no validada",-1),o("option",{value:"Parte frontal del documento poco visible"}," Parte frontal del documento poco visible ",-1),o("option",{value:"Registro duplicado"},"Registro duplicado",-1),o("option",{value:"Información errónea, en comparación con la documentación"}," Información errónea, en comparación con la documentación ",-1),o("option",{value:"Dirección diferente a la comuna/corregimiento"}," Dirección diferente a la comuna/corregimiento ",-1)]),512),[[ot,v(u).motivo]])])]),o("div",$t,[b(it,{onClick:J,class:"flex h-full items-center",disabled:v(u).processing||v(u).motivo!==""&&v(u).motivo!=="aprobado"},{default:p(()=>t[27]||(t[27]=[r(" Aprobar ")])),_:1},8,["disabled"]),b(st,{onClick:K,class:"!bg-red-500 text-white",disabled:v(u).processing},{default:p(()=>t[28]||(t[28]=[r(" Rechazar ")])),_:1},8,["disabled"])]),b(v(at),{visible:y.value,imgs:[D.value],onHide:O},null,8,["visible","imgs"])]),b(dt,{show:k.value,closeable:!0},{default:p(()=>[o("div",St,[t[29]||(t[29]=o("h2",{class:"text-2xl font-semibold text-center"}," Registros duplicados o similares ",-1)),o("button",{onClick:t[4]||(t[4]=i=>k.value=!1),class:"text-white text-xl hover:text-gray-300"}," X ")]),o("div",jt,[(d(!0),a(q,null,et(G.value,i=>(d(),a("div",{key:i.id,class:"flex gap-4 items-center mb-4 border-b pb-2"},[o("img",{src:N(i.photo),alt:"Foto",class:"w-36 h-full object-cover rounded"},null,8,At),o("div",null,[o("p",Rt," ID: "+n(i.user.votantes.hash_votantes[0].id),1),o("p",Et," Nombre: "+n(i.user.votantes.nombre),1),o("p",zt," Identificación: "+n(i.user.votantes.identificacion),1),o("p",Ft," Creación: "+n(H(i.user.votantes.hash_votantes[0].created_at)),1),o("p",It,"Estado: "+n(i.estado),1)])]))),128)),o("div",Lt,[o("button",{class:"px-3 py-1 bg-gray-200 text-sm rounded hover:bg-gray-300",disabled:g.value===1,onClick:t[5]||(t[5]=i=>g.value--)}," Anterior ",8,Vt),o("span",null,"Página "+n(g.value)+" de "+n($.value),1),o("button",{class:"px-3 py-1 bg-gray-200 text-sm rounded hover:bg-gray-300",disabled:g.value===$.value,onClick:t[6]||(t[6]=i=>g.value++)}," Siguiente ",8,Bt)])])]),_:1},8,["show"])]}),_:1})],64))}};export{_t as default};
