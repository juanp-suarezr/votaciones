import{x as z,T as L,r as m,a as B,c as d,o as i,b as u,e,u as a,Z as O,d as v,j as p,t as r,f as C,v as D,F as f,k as j,l as F,p as P,n as y,N as V}from"./app-CqUgl56U.js";import{_ as R}from"./Pagination-nTUPe0SI.js";import{_ as E}from"./Modal-B6dtxch2.js";import{s as M}from"./index-CDy8rjOx.js";import{_ as U}from"./SecondaryButton-Dg8UI6LL.js";import{_ as A}from"./SecondaryButtonReturn-B2OqBAV4.js";import{r as I}from"./EyeIcon-CAdSghUn.js";import"./index-dQgb0L8K.js";import"./index-Ckf5TcUj.js";import"./index-CLqL-W9e.js";import"./index-BbSTxpg5.js";import"./index-3tTgpISA.js";import"./index-DpAwFc8k.js";const K={class:"relative min-h-screen bg-center bg-option2 selection:bg-red-500 selection:text-white flex flex-col justify-center"},Z={class:"w-full flex justify-between sm:px-16 px-4"},q={class:"w-full flex justify-center my-auto sm:px-16 px-4"},G={class:"w-full border border-gray-200 bg-white shadow-md rounded-lg p-4"},H={class:"mt-2 text-base"},J={class:"flex gap-2 mt-2"},Q={class:"flex gap-2 mt-2"},W={class:"mt-4 w-full flex flex-wrap gap-4"},X=["value"],Y={class:"flex gap-4 p-4"},ee={key:0,class:"flex flex-col overflow-x-auto mt-6"},te={class:"inline-block rounded-lg shadow"},oe={class:"inline-block min-w-full py-2"},se={class:"overflow-x-auto"},ae={class:"min-w-full whitespace-no-wrap"},re={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},le={class:"text-gray-900 whitespace-no-wrap"},ie={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},ne={class:"text-gray-900 whitespace-no-wrap"},de={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},ce={class:"text-gray-900 whitespace-no-wrap"},ue={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},pe={class:"text-gray-900 whitespace-no-wrap"},be={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},xe={class:"text-gray-900 whitespace-no-wrap"},ge={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},me={class:"flex gap-2"},ve=["onClick"],fe={key:1,class:"flex flex-col overflow-x-auto justify-center items-center"},ye={class:"flex flex-col items-center border-t bg-white px-5 py-5 xs:flex-row xs:justify-between"},_e={class:"p-4 sm:text-4xl text-2x text-center font-bold text-gray-800 text-center flex tex-center justify-center bg-azul text-white"},he={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:text-2xl text-xl my-6 p-4"},we={class:"px-4 mb-12"},ke=["disabled"],Ce={class:"px-4 mb-8"},je=["disabled"],Ve={class:"px-4 mb-8"},Se=["disabled"],Ue={__name:"PresupuestoParticipativo",props:{evento:{type:Object,default:()=>[]},resultados:{type:Object,default:()=>[]},eventos_hijos:{type:Object,default:()=>[]}},setup(l){z("$swal");const c=l;console.log(c);const s=L({id_evento:c.evento.id,subtipo:"",comuna:""}),b=m(""),x=m(c.evento.id),S=c.resultados.data,$=m(!1),_=()=>{var n;V.get("/resultado-comunas",{id_evento:(n=c.evento.evento_hijo[0])==null?void 0:n.id_evento_padre,subtipo:b.value.value,id_evento_hijo:x.value},{preserveState:!0,replace:!0})},T=()=>{var n;b.value="",x.value=16,V.get("/resultado-comunas",{id_evento:(n=c.evento.evento_hijo[0])==null?void 0:n.id_evento_padre,subtipo:b.value},{preserveState:!0,replace:!0})},g=(n,t)=>{s.subtipo=t.value,s.comuna=t.label,n==1?s.get(route("resultado-proyectos"),{preserveState:!0}):s.get(route("resultado-generales"),{preserveState:!0})};return(n,t)=>{var h,w;const N=B("tooltip");return i(),d(f,null,[u(a(O),{title:"Votaciones por comunas"}),e("div",K,[e("div",Z,[t[6]||(t[6]=e("div",{class:"flex gap-4 items-center"},[e("a",{class:"sm:flex justify-start mt-2 pe-4 border-r border-black",href:"/welcome"},[e("img",{src:"/assets/img/logo.png",alt:"Logo",class:"h-24 w-auto"})]),e("img",{src:"/assets/img/voto_electronico.png",alt:"Logo",class:"h-32 w-auto"})],-1)),u(A,{class:"h-full flex inline-flex mt-8 !text-base"},{default:v(()=>t[5]||(t[5]=[p(" Regresar ")])),_:1})]),e("div",q,[e("div",G,[t[13]||(t[13]=e("h2",{class:"font-bold mt-2 text-2xl"},"Resultados de Votación",-1)),e("p",H,r(l.evento.nombre)+" - Resultados por Comuna/Corregimiento ",1),e("p",J,[t[7]||(t[7]=e("b",null,"Total registrados habilitados para votar en la modalidad de voto electrónico-virtual: ",-1)),p(" "+r((w=(h=l.evento.evento_hijo[0])==null?void 0:h.evento_padre)==null?void 0:w.votantes_activos_count),1)]),e("p",Q,[t[8]||(t[8]=e("b",null,"Total registrados habilitados para votar en la modalidad voto fisíco o tradicional: ",-1)),p(" "+r(l.evento.acta_escrutinio.reduce((o,k)=>o+k.total_ciudadanos,0)),1)]),e("div",W,[u(a(M),{id:"comuna",modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=o=>b.value=o),options:a(S),filter:"",optionLabel:"label",placeholder:"Seleccione la comuna/corregimiento",checkmark:"",highlightOnSelect:!1,onChange:_,class:"block h-full w-auto px-4 py-1 text-base text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue","options"]),C(e("select",{id:"evento_padre","onUpdate:modelValue":t[1]||(t[1]=o=>x.value=o),onChange:_,class:"block h-full w-auto px-4 py-1 text-base text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"},[t[9]||(t[9]=e("option",{value:""},"-- Seleccione un evento --",-1)),(i(!0),d(f,null,j(l.eventos_hijos,o=>(i(),d("option",{key:o.id,value:o.id},r(o.nombre),9,X))),128))],544),[[D,x.value]]),e("div",Y,[u(U,{class:"p-2 h-full",onClick:T},{default:v(()=>t[10]||(t[10]=[p(" Limpiar ")])),_:1})])]),l.resultados.data.length>0?(i(),d("div",ee,[e("div",te,[e("div",oe,[e("div",se,[e("table",ae,[t[11]||(t[11]=e("thead",null,[e("tr",{class:"border-b bg-gray-50 text-left text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Comuna "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Votos Virtuales "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Votos Presenciales TIC "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Votos Físicos "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Total "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Acciones ")])],-1)),e("tbody",null,[(i(!0),d(f,null,j(l.resultados.data,o=>(i(),d("tr",{key:o.id,class:"text-gray-700"},[e("td",re,[e("p",le,r(o.label),1)]),e("td",ie,[e("p",ne,r(o.votos_virtuales),1)]),e("td",de,[e("p",ce,r(o.votos_presenciales_Tic),1)]),e("td",ue,[e("p",pe,r(o.votos_fisicos),1)]),e("td",be,[e("b",xe,r(o.votos_virtuales+o.votos_fisicos+o.votos_presenciales_Tic),1)]),e("td",ge,[e("div",me,[C((i(),d("button",{class:"border border-gray-400 rounded-full hover:!bg-gray-200 p-1",onClick:k=>g(1,o)},[u(a(I),{class:"h-6 w-6 text-gray-800"})],8,ve)),[[N,"Ver detalles",void 0,{bottom:!0}]])])])]))),128))])])])])])])):(i(),d("div",fe,t[12]||(t[12]=[e("em",null," No hay comunas con votaciones realizadas ",-1)]))),e("div",ye,[l.resultados.data.length>0?(i(),F(R,{key:0,links:l.resultados.links},null,8,["links"])):P("",!0)])])])]),u(E,{show:$.value,closeable:!0},{default:v(()=>[e("h2",_e,[t[14]||(t[14]=p(" Votación ")),t[15]||(t[15]=e("br",null,null,-1)),p(" Comuna/Corregimiento: "+r(a(s).comuna),1)]),e("div",he,[e("div",we,[t[16]||(t[16]=e("p",{class:"mx-auto text-center"},"Ver votación por proyecto",-1)),e("button",{type:"button",class:y(["flex mx-auto mt-4 text-xl sm:text-2xl bg-primary hover:bg-secondary text-white rounded-lg shadow-md p-2",{"opacity-25":a(s).processing}]),onClick:t[2]||(t[2]=o=>g(1)),disabled:a(s).processing}," Continuar ",10,ke)]),e("div",Ce,[t[17]||(t[17]=e("p",{class:"mx-auto text-center"},"Ver votación datos generales",-1)),e("button",{type:"button",class:y(["flex mx-auto mt-4 text-xl sm:text-2xl bg-azul hover:bg-azul/80 text-white rounded-lg shadow-md p-2",{"opacity-25":a(s).processing}]),onClick:t[3]||(t[3]=o=>g(2)),disabled:a(s).processing}," Continuar ",10,je)]),e("div",Ve,[t[18]||(t[18]=e("p",{class:"mx-auto text-center"},"Ver vista previa de votación",-1)),e("button",{type:"button",class:y(["flex mx-auto mt-4 text-xl sm:text-2xl bg-green-500 hover:bg-green-600 text-white rounded-lg shadow-md p-2",{"opacity-25":a(s).processing}]),onClick:t[4]||(t[4]=o=>g(3)),disabled:a(s).processing}," Continuar ",10,Se)])])]),_:1},8,["show"])],64)}}};export{Ue as default};
