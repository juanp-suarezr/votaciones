import{r as c,q as X,w as z,s as q,c as u,o as i,b as f,u as g,Z as G,d as j,e as s,f as T,F as m,k as A,t as v,v as Z,n as H,l as D,j as V}from"./app-D9bCLCeK.js";import{_ as J}from"./AuthenticatedLayout-CJ7NxsZS.js";import{s as Q}from"./index-DZekHfSE.js";import{s as L}from"./index-i3AZ7VyR.js";import{C as W,A as Y,B as tt,a as et,L as st,p as ot,b as at,c as lt,s as R}from"./chartjs-plugin-datalabels.esm-T3-YqEZu.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BreadCrumb-zTN4LviP.js";import"./SecondaryButtonReturn-BYz8D7dY.js";import"./PrimaryButton-DOa31o8Z.js";import"./XCircleIcon-SFE3Y0bR.js";import"./index-DLeCqKTO.js";import"./index-CGemZVSH.js";import"./index-C5y4UjTB.js";import"./index-B1TX9bi5.js";import"./index-DweD0uJL.js";const nt={class:""},rt={key:0,class:"flex flex-col justify-center"},it={class:"sm:flex justify-center items-center"},dt=["value"],ct={class:"flex inline-flex justify-center gap-4 sm:gap-6 mb-4 mt-6 text-lg sm:mb-auto"},ut=["onClick"],pt={class:"sm:grid grid-cols-2 md:gap-6 sm:gap-4 mt-6"},vt={class:"flex h-full m-auto flex-col justify-center mb-4 px-4"},gt={class:"flex h-full m-auto flex-col justify-center mb-4 px-4"},bt={class:"h-full mt-4 w-full col-span-2"},ft={class:"flex flex-col overflow-x-auto"},xt={class:"inline-block rounded-lg shadow"},mt={class:"inline-block min-w-full py-2"},yt={class:"overflow-x-auto"},ht={class:"w-full whitespace-no-wrap"},_t={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},wt={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},kt={class:"text-gray-900 whitespace-no-wrap"},Ct={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},jt={class:"text-gray-900 whitespace-no-wrap"},At={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},Bt={class:"text-gray-900 whitespace-no-wrap"},St={class:"flex items-center border-b bg-gray-50 px-5 py-2 xs:flex-row justify-between text-gray-500 text-xs font-semibold"},Et=["disabled"],Nt=["disabled"],Ot={key:1,class:"flex justify-center"},Tt={__name:"Index",props:{eventos:Object,candidatos:Object,votantes:Object},setup(b){W.register(Y,tt,et,st,ot,at,lt);const n=b,$=[{url:"/",text:"Análisis"}];console.log(n);const y=c(),h=c(),_=c(),w=c(),r=c(n.eventos.length?n.eventos[0].id:""),d=c(n.eventos.length?n.eventos.find(o=>o.id==r.value).tipos.split("|")[0]:"NA"),x=c(n.candidatos.filter(o=>{let t=o.id_evento==r.value,e=o.tipo==d.value;return t&&e})),B=o=>{d.value=o,y.value=E(),h.value=N(),_.value=O(),w.value=P(),x.value=n.candidatos.filter(t=>{let e=t.id_evento==r.value,l=t.tipo==d.value;return e&&l}),console.log(x.value)},S=c(8),p=c(0),k=X(()=>Math.ceil(x.value.length/S.value)),I=()=>{p.value>0&&p.value--},M=()=>{p.value<k.value-1&&p.value++};z(S,()=>{p.value=0});const F=o=>`/storage/uploads/usuarios/${o}`,K=function(o){let t=o.split(" "),e="",l=0;for(var a=0;a<t.length&&l<2;a++)t[a].length>0&&t[a]!==""&&(e+=t[a][0],l++);return e};z(r,o=>{d.value=n.eventos.length?n.eventos.find(t=>t.id==o).tipos.split("|")[0]:"NA",B(d.value)}),q(()=>{y.value=E(),h.value=N(),_.value=O(),w.value=P()});const E=()=>{getComputedStyle(document.body);let o=n.eventos.find(a=>a.id==r.value),t=n.candidatos.filter(a=>{let C=a.id_evento==r.value,U=a.tipo==d.value;return C&&U}),e=[],l=[];return t.forEach(a=>{e.push(a.votante.nombre),l.push(o.votos.filter(C=>C.id_candidato==a.id_votante).length)}),{labels:e.join(", ").split(",").map(a=>a.trim()),datasets:[{label:"Votos",data:l.join(", ").split(",").map(a=>a.trim()),backgroundColor:"#E20613"}]}},N=()=>{const o="#000";return{indexAxis:"x",maintainAspectRatio:!0,aspectRatio:1,plugins:{legend:{labels:{color:o}},datalabels:{color:"white",formatter:e=>e,font:{weight:"bold",size:12}}},scales:{x:{ticks:{color:o,font:{weight:500}},grid:{display:!1,drawBorder:!0}},y:{ticks:{color:o},grid:{color:"#b0b6c0",drawBorder:!0}}}}},O=()=>{getComputedStyle(document.body);let o=n.eventos.find(a=>a.id==r.value),t=[],e=n.votantes.filter(a=>a.tipo==d.value&&a.id_evento==o.id).length,l=o.votos.filter(a=>a.tipo==d.value).length;return t.push(e-l,l),console.log(o),{labels:["Abstinencia","votos realizados"],datasets:[{label:"Cantidad",data:t,backgroundColor:["#004884","#585857"],hoverBackgroundColor:["#3b82f6","#b0b6c0"]}]}},P=()=>({maintainAspectRatio:!0,aspectRatio:1,plugins:{legend:{labels:{cutout:"60%",color:"#000"}},datalabels:{color:"white",formatter:t=>t,font:{weight:"bold",size:12}}}});return(o,t)=>(i(),u(m,null,[f(g(G),{title:"Análisis"}),f(J,{breadCrumbLinks:$},{header:j(()=>t[2]||(t[2]=[V(" Análisis resultados ")])),default:j(()=>[s("div",nt,[b.eventos.length?(i(),u("div",rt,[s("div",it,[T(s("select",{id:"evento_selected",name:"evento_selected","onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),onChange:t[1]||(t[1]=(...e)=>o.handleEnterKey&&o.handleEnterKey(...e)),class:"block w-full p-2 text-base text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"},[t[3]||(t[3]=s("option",{selected:"",value:"",disabled:""}," Elegir evento de votación ",-1)),(i(!0),u(m,null,A(b.eventos,e=>(i(),u("option",{class:"flex cursor mb-2 sm:mb-auto",key:e.id,value:e.id},v(e.nombre),9,dt))),128))],544),[[Z,r.value]])]),s("div",ct,[(i(!0),u(m,null,A(b.eventos.find(e=>e.id==r.value).tipos.split("|"),e=>(i(),u("button",{key:e,class:H(["flex cursor mb-2 sm:mb-auto",e==d.value?"underline text-blue-600":"text-gray-600"]),onClick:l=>B(e)},v(e)+" | ",11,ut))),128))]),s("div",pt,[s("div",vt,[t[4]||(t[4]=s("h2",{class:"text-gray-600 text-lg sm:text-xl font-bold text-center flex justify-center"}," Resultado Votaciones ",-1)),f(g(R),{type:"bar",data:y.value,options:h.value,class:"h-full w-full mt-4"},null,8,["data","options"])]),s("div",gt,[t[5]||(t[5]=s("h2",{class:"text-gray-600 text-lg sm:text-xl font-bold text-center flex justify-center"}," Nivel de votaciones ",-1)),f(g(R),{type:"doughnut",data:_.value,options:w.value,class:"h-full w-full mt-4"},null,8,["data","options"])]),s("div",bt,[s("div",ft,[s("div",xt,[s("div",mt,[s("div",yt,[s("table",ht,[t[6]||(t[6]=s("thead",null,[s("tr",{class:"border-b bg-gray-50 text-left text-xs font-semibold uppercase tracking-wide text-gray-500"},[s("th",{colspan:"2",class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Nombre "),s("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Identificación "),s("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," votos ")])],-1)),s("tbody",null,[(i(!0),u(m,null,A(x.value,e=>(i(),u("tr",{key:e.id,class:"text-gray-700"},[s("td",_t,[e.votante.imagen=="user.png"?(i(),D(g(L),{key:0,label:K(e.votante.nombre),class:"bg-indigo-200 text-indigo-800 text-xl",size:"xlarge",shape:"circle"},null,8,["label"])):(i(),D(g(L),{key:1,image:F(e.votante.imagen),class:"bg-indigo-200 text-indigo-800",size:"xlarge",shape:"circle"},null,8,["image"]))]),s("td",wt,[s("p",kt,v(e.votante.nombre),1)]),s("td",Ct,[s("p",jt,v(e.votante.identificacion),1)]),s("td",At,[s("p",Bt,v(b.eventos.find(l=>l.id==r.value).votos.filter(l=>l.id_candidato==e.id_votante).length),1)])]))),128))])]),s("div",St,[s("button",{class:"hover:scale-125 transition duration-500 cursor-pointer",onClick:I,disabled:p.value===0},t[7]||(t[7]=[s("i",{class:"fa-solid fa-arrow-left"},null,-1)]),8,Et),s("p",null,"Pagina "+v(p.value+1)+" de "+v(k.value),1),s("button",{class:"hover:scale-125 transition duration-500 cursor-pointer",onClick:M,disabled:p.value===k.value-1},t[8]||(t[8]=[s("i",{class:"fa-solid fa-arrow-right"},null,-1)]),8,Nt)])])])])])])])])):(i(),u("div",Ot,[f(g(Q),{severity:"info",sticky:o.sticky,class:"text-center w-fit",life:3e3},{default:j(()=>t[9]||(t[9]=[V("El análisis de los eventos de votación se mostrará en esta sección")])),_:1},8,["sticky"])]))])]),_:1})],64))}};export{Tt as default};
