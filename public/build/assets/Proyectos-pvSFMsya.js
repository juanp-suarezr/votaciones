import{_ as S}from"./AuthenticatedLayout-CPvTFm9A.js";import{M as T,T as D,r as m,c as i,o as r,a as u,u as N,Z as I,w as p,b as e,m as _,F as V,i as M,n as $,t as n,d as l,V as F}from"./app-HgTj9As7.js";import{_ as w}from"./PrimaryButton-BiNfB8mb.js";import{s as U}from"./index-DgUjEOL_.js";import{c as Z}from"./comunas-CgAZlVl9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-Cmy4PYR7.js";const q={class:"items-center flex flex-col justify-center mx-2"},G={class:"sm:flex w-full sm:grid md:grid-cols-2 grid-cols-2 gap-4 mt-6"},H={class:"mx-auto w-full flex justify-center items-center"},J={key:0,class:"w-full flex justify-center items-center h-[200pt] sm:h-[300pt] bg-indigo-200 text-indigo-800"},K={class:"m-auto sm:text-4xxl text-xxl object-cover"},Q={key:1,class:"w-full h-[200pt] sm:h-[300pt] bg-indigo-200 text-indigo-800"},R=["src"],W={class:"mt-4 mx-auto"},X={class:"sm:text-4xl text-2xl font-bold capitalize text-justify"},Y={class:"sm:text-2xl text-xl text-justify"},tt={class:"sm:text-2xl text-xl text-justify"},et=["onClick"],st={class:"sm:text-xl text-lg font-bold capitalize text-gray-600 text-justify"},ot={class:"mt-4 mx-auto"},lt={class:"mx-auto"},nt={class:"w-full h-[200pt] sm:h-[300pt] bg-indigo-200 text-indigo-800"},it=["src"],rt={class:"mt-8 mx-auto"},at={class:"flex justify-between mt-8"},dt={key:0,class:"fixed inset-0 bg-black px-4 sm:px-44 bg-opacity-50 flex items-center justify-center z-50"},ut={class:"bg-white p-6 rounded-lg w-full"},ct={class:"mb-4 text-base sm:text-2xl"},xt={class:"mb-4 text-base sm:text-2xl"},mt={key:1,class:"fixed inset-0 bg-black px-4 sm:px-44 bg-opacity-50 flex items-center justify-center z-50"},pt={class:"bg-white p-6 rounded-lg w-full"},bt={class:"flex flex-wrap gap-8 mt-4 text-base sm:text-4xl"},ft={class:"w-auto border-r pr-2 border-gray-600"},gt={class:"w-auto pr-2"},vt={class:"mt-6 text-base sm:text-4xl"},yt={class:"w-full flex flex-wrap justify-center gap-4 sm:gap-6 mt-6"},Vt={__name:"Proyectos",props:{proyectos:Object,votante:Object},setup(j){const k=T("$swal"),d=j;console.log(d);const c=D({isProyecto:!0,id_votante:d.votante[0].id,id_candidato:0,id_eventos:0,tipo:"",subtipo:0,estado:"Activo"}),O=[{url:"",text:"Votaciones"}],g=m(!1),v=m(!1),y=m({proyecto:{detalle:""}}),b=m(0),a=m([]),E=function(s){let t=s.split(" "),o="",f=0;for(var x=0;x<t.length&&f<2;x++)t[x].length>0&&t[x]!==""&&(o+=t[x][0],f++);return o},z=s=>`/storage/uploads/usuarios/${s}`,A=s=>`/storage/uploads/proyectos/${s}`,C=s=>{var t;return console.log(s),(t=Z.find(o=>o.value==s))==null?void 0:t.label},B=(s,t)=>s?s.length>t?s.substring(0,t)+"...":s:"",L=s=>{y.value=s,g.value=!0},h=s=>{a.value=s,console.log(s),c.id_candidato=s?s.id_proyecto:d.proyectos[0].id_proyecto,c.id_eventos=s?s.id_evento:d.proyectos[0].id_evento,c.tipo=s?s.proyecto.tipo:d.proyectos[0].proyecto.tipo,c.subtipo=s?s.proyecto.subtipo:d.proyectos[0].proyecto.subtipo,b.value=s?s.id:null},P=()=>{c.post(route("votos.store"),{onSuccess:()=>k({title:"Voto registrado exitosamente",text:"Su voto ha sido registrado",icon:"success"}).then(s=>{F.get("dashboard")}),onError:()=>k({title:"Error en el registro",text:"Su voto no fue asignado, vuelve a intentar nuevamente",icon:"error"})})};return(s,t)=>(r(),i(V,null,[u(N(I),{title:"Votaciones"}),u(S,{breadCrumbLinks:O},{header:p(()=>t[5]||(t[5]=[l(" Votaciones ")])),default:p(()=>[e("div",q,[e("div",G,[(r(!0),i(V,null,M(j.proyectos,o=>(r(),i("div",{key:o.id,class:$(["flex flex-col w-full h-full p-2 inline-block m-auto mb-4 rounded-lg shadow-xl bg-gray-200 hover:bg-gray-300 text-gray-800",b.value===o.id?"border-4 border-red-500":""])},[e("div",H,[o.proyecto.imagen=="NA"?(r(),i("div",J,[e("p",K,n(E(o.proyecto.detalle)),1)])):(r(),i("div",Q,[e("img",{src:A(o.proyecto.imagen),alt:"Imagen de proyecto",class:"w-full h-full object-cover"},null,8,R)]))]),u(N(U),{value:C(o.proyecto.subtipo),class:"!bg-primary text-[8px] sm:text-sm !text-white w-full flex p-2"},null,8,["value"]),e("div",W,[e("h2",X," Numero tarjeton -- "+n(o.proyecto.numero_tarjeton),1),e("p",Y,[t[6]||(t[6]=e("b",null,"Detalle:",-1)),t[7]||(t[7]=l()),t[8]||(t[8]=e("br",null,null,-1)),l(" "+n(o.proyecto.detalle),1)]),e("p",tt,[t[9]||(t[9]=e("b",null,"Descripción:",-1)),t[10]||(t[10]=l()),t[11]||(t[11]=e("br",null,null,-1)),l(" "+n(B(o.proyecto.descripcion,80))+" ",1),o.proyecto.descripcion.length>80?(r(),i("span",{key:0,class:"text-blue-600 cursor-pointer underline",onClick:f=>L(o)}," Ver más ",8,et)):_("",!0)]),e("p",st," Tipo: "+n(o.proyecto.tipo),1)]),e("div",ot,[u(w,{type:"button",onClick:f=>h(o),class:"sm:text-2xl text-xl"},{default:p(()=>t[12]||(t[12]=[l(" Seleccionar ")])),_:2},1032,["onClick"])])],2))),128)),e("div",{class:$(["flex flex-col w-full h-full p-2 inline-block m-auto mb-4 rounded-lg shadow-xl bg-gray-200 hover:bg-gray-300 text-gray-800",b.value===null?"border-4 border-red-500":""])},[e("div",lt,[e("div",nt,[e("img",{src:z("12345678_candidatos.jpg"),alt:"Imagen de voto en blanco",class:"w-full h-full object-cover"},null,8,it)])]),t[14]||(t[14]=e("div",{class:"mt-6 mx-auto"},[e("h2",{class:"sm:text-4xl text-2xl font-bold capitalize text-justify"},[l(" VOTO "),e("br"),l(" EN BLANCO ")])],-1)),e("div",rt,[u(w,{type:"button",onClick:t[0]||(t[0]=o=>h(null)),class:"sm:text-2xl text-xl"},{default:p(()=>t[13]||(t[13]=[l(" Seleccionar ")])),_:1})])],2)]),e("div",at,[u(w,{disabled:b.value==0,type:"button",onClick:t[1]||(t[1]=o=>v.value=!0),class:"sm:text-6xl text-2xl"},{default:p(()=>t[15]||(t[15]=[l(" Enviar votación ")])),_:1},8,["disabled"])])]),g.value?(r(),i("div",dt,[e("div",ut,[t[17]||(t[17]=e("h2",{class:"sm:text-4xl text-xl font-bold mb-4 text-center"}," Detalle del Proyecto ",-1)),e("p",ct,n(y.value.proyecto.detalle),1),e("p",xt,[t[16]||(t[16]=e("b",null,"descripción:",-1)),l(" "+n(y.value.proyecto.descripcion),1)]),e("button",{onClick:t[2]||(t[2]=o=>g.value=!1),class:"bg-indigo-600 text-white px-4 py-2 rounded"}," Cerrar ")])])):_("",!0),v.value?(r(),i("div",mt,[e("div",pt,[t[21]||(t[21]=e("h2",{class:"sm:text-8xl text-2xl font-bold mb-8 pb-4 sm:py-8 border-b border-gray-300 text-center"}," 🗳️ Confirmar voto ",-1)),t[22]||(t[22]=e("p",{class:"mb-4 text-base sm:text-4xl"},[e("span",{class:"text-lg sm:text-5xl font-bold"},"Está a punto de votar por el siguiente proyecto:")],-1)),e("div",bt,[e("div",ft,[t[18]||(t[18]=e("span",{class:"text-gray-600"},"Número de tarjetón:",-1)),l(" "+n(a.value?a.value.proyecto.numero_tarjeton:"NA"),1)]),e("div",gt,[t[19]||(t[19]=e("span",{class:"text-gray-600"},"Comuna:",-1)),l(" "+n(a.value?C(a.value.proyecto.subtipo):"VOTO BLANCO"),1)])]),e("div",vt,[t[20]||(t[20]=e("span",{class:"text-gray-600"},"Detalle:",-1)),l(" "+n(a.value?a.value.proyecto.detalle:"VOTO EN BLANCO"),1)]),e("div",yt,[e("button",{onClick:t[3]||(t[3]=o=>v.value=!1),class:"bg-red-600 text-white px-4 py-2 rounded sm:text-5xl"}," Cancelar "),e("button",{onClick:t[4]||(t[4]=o=>P()),class:"bg-indigo-600 text-white px-4 py-2 rounded sm:text-5xl"}," Confirmar ")])])])):_("",!0)]),_:1})],64))}};export{Vt as default};
