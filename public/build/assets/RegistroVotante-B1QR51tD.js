import{x as Oe,r,T as Ae,D as Le,w as B,s as Pe,c as d,o as c,b as l,u as s,Z as Ge,d as q,e as a,p as I,f as C,F as z,k as P,t as w,v as J,E as ie,C as ge,j as M,n as be,l as Ye,z as xe}from"./app-BjtUMsOn.js";import{_ as He}from"./AuthenticatedLayout-DFAXe_UU.js";import{c as he}from"./comunas-DceGOULS.js";import{b as We,s as ye,t as Ke,e as Xe,c as Ze}from"./etnia-DrZ1ViZj.js";import{_ as v}from"./InputError-D6I8w6XI.js";import{_ as m}from"./InputLabel-CCES7G_K.js";import{_ as we}from"./PrimaryButton-CrCADg4V.js";import{_ as le}from"./Modal-BzIBE6bH.js";import{_ as x}from"./TextInput-D4rUSeKX.js";import{s as _e}from"./index-B9u72tHt.js";import{s as Je}from"./index-CK_s9YU8.js";import{f as Qe}from"./cedulaFrontEjemplo-eqgE4YJW.js";import{d as eo,T as oo,n as re}from"./FaceMatcher-DQZ88WER.js";import{s as to}from"./index-Bq0AUUp0.js";import{r as ao}from"./PhotoIcon-Bs82rZUP.js";import"./index-BkeLLdOA.js";import"./index-RWjKRciq.js";import"./index-C9IDC7Bn.js";import"./SecondaryButtonReturn-D3Dj6eih.js";import"./XCircleIcon-DcqZ0xNr.js";import"./index-D7oa9clp.js";import"./index-CLrdP0tg.js";import"./index-CiXZV2_G.js";import"./index-mJiha-hS.js";const so={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},io={class:"mt-4 justify-center"},lo={class:"m-auto py-4 px-4"},ro={key:0,class:"sm:grid sm:grid-cols-2 gap-6 h-full"},no={class:"mb-2"},co={class:"mb-2"},uo={class:"mb-2"},mo=["value"],po={class:"mb-2 sm:block hidden"},fo={key:0,class:"text-red-500"},vo={class:"mb-2 sm:hidden grid grid-cols-3 gap-2"},go={class:"w-auto mt-1"},bo={class:"w-auto mt-1"},xo={class:"w-auto mt-1"},ho={key:0,class:"text-red-500"},yo={class:"col-span-2 flex justify-end"},wo={key:1,class:"sm:grid sm:grid-cols-2 gap-6"},_o={class:"mb-2"},ko={class:"mt-2 block sm:flex"},Vo={class:""},Co={class:"sm:ms-6"},Do={key:0,class:"sm:ms-6"},Eo={key:1,class:"sm:ms-6"},So={class:"mb-2"},Fo=["value"],jo={class:"mb-2"},Uo=["value"],$o={class:"mb-2"},Bo={class:"mb-2"},qo={key:0,class:"w-full mt-2"},Io={class:"mb-2"},Mo={class:"mb-2"},To={class:"mb-2"},zo={class:"my-4 col-span-2 mb-2"},Ro={class:"mb-4 col-span-2 mb-2"},No={class:"col-span-2 flex justify-between gap-2"},Oo={class:"flex pt-4 justify-end"},Ao={class:"flex pt-4 justify-end h-full"},Lo={key:2,class:"gap-6"},Po={class:"sm:grid sm:grid-cols-2 gap-2 h-full sm:px-16 px-4"},Go={class:"w-full h-full mt-4"},Yo={class:"w-full"},Ho=["src"],Wo={class:"mb-2 h-full flex justify-center items-center mt-4"},Ko={class:"border-2 border-gray-300 rounded-md p-2 h-full"},Xo={class:"flex justify-center"},Zo=["src","alt"],Jo={key:0,class:"flex justify-center mt-2"},Qo={class:"w-full"},et={class:"col-span-2 flex justify-between gap-2 mt-4"},ot={class:"flex pt-4 justify-end"},tt={class:"flex pt-4 justify-end"},at={class:"flex justify-center my-12"},st={class:"my-12 px-4"},it=["value"],lt=["disabled"],rt={class:"px-6 py-4"},nt=["src"],ct={class:"text-gray-800 font-medium"},dt={class:"text-gray-800 font-medium"},ut={class:"text-gray-800 font-medium"},Mt={__name:"RegistroVotante",props:{info:{type:Object}},setup(ke){const p=Oe("$swal"),Ve=[{url:"",text:"Corregir datos"}],u=ke;console.log("info data:",u.info);const R=r(!1),Ce=r([]),Q=r(!1),o=Ae({id_votante:u.info.id||"",nombre:u.info.nombre||"",identificacion:u.info.identificacion||"",tipo_documento:u.info.tipo_documento||"",nacimiento:u.info.nacimiento||"",cedula_front:null,genero:u.info.genero||"",etnia:u.info.etnia||"",condicion:u.info.condicion||"",direccion:u.info.direccion||"",comuna:u.info.hash_votantes?u.info.hash_votantes[0].subtipo:null,barrio:u.info.barrio||"",email:"",password:"",embedding:null,photo:null,checked:!1,declaracion:!1,campoObligatorio:"",recaptcha_token:"",validaciones:""}),{executeRecaptcha:De}=Le(),ee=r(""),oe=r([]),h=r(!1);r(!0);const Ee=r([{label:"Información Personal"},{label:"Datos Demográficos"},{label:"Registro datos"}]),Se=r([{label:"paso 1"},{label:"paso 2"},{label:"paso 3"}]),g=r(0),te=r(""),U=r(""),b=r(!1),_=r(!1),G=r(!1),$=r(null),Y=r([]),N=r(""),D=r(null),y=r(""),ne=r(!1),E=r(!1),T=r(0),ce=r(!1),H=r(""),W=r(""),K=r(""),Fe=(i,e)=>o.cedula_front===null?`/storage/uploads/documentos/${i}`:i;B([H,W,K],([i,e,t])=>{if(i&&e&&t){const n=String(i).padStart(2,"0"),k=String(e).padStart(2,"0");o.nacimiento=`${t}-${k}-${n}`}}),B(G,i=>{i&&(o.genero="")}),B(ee,i=>{i&&(o.comuna=i,oe.value=We.find(e=>e.id===parseInt(i.value)).barrios,console.log(oe.value))}),B(()=>o.barrio,i=>{console.log(i),i=="Otro"&&(o.barrio="",ce.value=!0)}),B(()=>o.data(),i=>{Object.keys(o.errors).forEach(e=>{i[e]&&(o.errors[e]=null)})},{deep:!0});const je=(i,e)=>{const t=e.target.files[0];if(!t)return;((k,A)=>{const X=new FileReader;X.onload=Z=>{const S=new Image;S.onload=()=>{const f=document.createElement("canvas"),L=f.getContext("2d"),V=1024,se=1024;let F=S.width,j=S.height;(F>V||j>se)&&(F>j?(j=Math.round(j*V/F),F=V):(F=Math.round(F*se/j),j=se)),f.width=F,f.height=j,L.drawImage(S,0,0,F,j),f.toBlob(fe=>{if(fe.size>2e6){Swal.fire({icon:"error",title:"Error",text:"Incluso comprimida, la imagen supera los 2MB."});return}const ve=new File([fe],k.name,{type:"image/jpeg",lastModified:Date.now()});A(ve,URL.createObjectURL(ve))},"image/jpeg",.8)},S.src=Z.target.result},X.readAsDataURL(k)})(t,(k,A)=>{o[i]=k,$.value=A})},Ue=i=>{o.cedula_front=null,$.value=null},de=i=>{if(!i)return"";const e=new Date(i),t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),k=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${k}`},ue=i=>{g.value=i,b.value=!0},$e=async()=>{h.value=!0;try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(n=>n.stop()),await re.tinyFaceDetector.loadFromUri("/models/tiny_face_detector"),await re.faceRecognitionNet.loadFromUri("/models/face_recognition"),await re.faceLandmark68Net.loadFromUri("/models/face_landmark_68");const e=await navigator.mediaDevices.enumerateDevices();Y.value=e.filter(n=>n.kind==="videoinput");const t=Y.value.find(n=>n.label.toLowerCase().includes("user"))||Y.value[0];console.log(t),N.value=(t==null?void 0:t.deviceId)||"",h.value=!1,_.value=!0,await pe(N.value)}catch(i){h.value=!1,T.value==3,p.fire({icon:"error",title:"Error al acceder a la cámara",text:"No se pudo acceder a la cámara. Por favor, asegúrese de que su dispositivo tenga una cámara y que haya otorgado los permisos necesarios."}),console.error("Error al iniciar:",i),y.value="No se pudo acceder a la cámara."}},Be=async()=>{E.value=!0,h.value=!0,y.value="";const i=t=>parseInt(sessionStorage.getItem(t)||"0"),e=(t,n)=>sessionStorage.setItem(t,n.toString());if(!ne.value){i("fallo_camara")+1,y.value="La cámara no está lista.",E.value=!1,h.value=!1;return}try{const t=await eo(D.value,new oo).withFaceLandmarks().withFaceDescriptor();console.log("entro -- validador"),p.fire({title:"Validación en progreso",text:"Mire a la cámara hasta que finalice la validación.",icon:"info",timer:2e3,showConfirmButton:!1,didClose:()=>{}});const n=document.createElement("canvas");n.width=D.value.videoWidth,n.height=D.value.videoHeight,n.getContext("2d").drawImage(D.value,0,0,n.width,n.height);const A=await new Promise(f=>n.toBlob(f,"image/jpeg")),X=new File([A],"photo.jpg",{type:"image/jpeg"});if(o.photo=X,!t){h.value=!1,E.value=!1,y.value="No se detectó un rostro.",T.value+=1,T.value==3&&p.fire({title:"Error en validación",text:"Error, no se detectó un rostro, vuelve a intentar o avanzar con la imagen poco visible y posiblemente sin registro biométrico (alta probabilidad de rechazo)",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(f=>{f.isConfirmed?(o.embedding="",o.validaciones="no_rostro",_.value=!1,O(!1)):f.dismiss===p.DismissReason.cancel&&(console.log("Usuario decide volver a intentar"),y.value="",T.value=0)});return}const Z=t.descriptor;o.embedding=Z;const S=new FormData;S.append("embedding",Z),E.value=!1,_.value=!1,xe.post(route("face-validate"),S,{headers:{"Content-Type":"multipart/form-data"}}).then(f=>{y.value=f.data.message;const L=f.data.id;console.log(f.data),console.log(f.data.id),E.value=!1,h.value=!1,f.data.match?p.fire({title:"Error en validación",text:"Usted ya tiene un registro biométrico. Si está seguro que no se ha registrado, puede volver a intentarlo o continuar (probabilidad de rechazo).",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(V=>{V.isConfirmed?(o.validaciones="registro_duplicado",_.value=!1,O(!0,L)):V.dismiss===p.DismissReason.cancel&&console.log("Usuario decide volver a intentar")}):p({title:"Validación exitosa",text:"Validación biométrica exitosa",icon:"success",didClose:()=>{_.value=!1,O(!1)}})}).catch(f=>{E.value=!1,h.value=!1,console.log(f);const L=i("fallo_registro")+1;e("fallo_registro",L),p.fire({title:"Error en validación",text:"Error en la validación, vuelve a intentar o avanzar sin registro biometrico (posibilidad de rechazo)",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(V=>{V.isConfirmed?(o.embedding="",o.validaciones="fallo_registro_biometrico",_.value=!1,O(!1)):V.dismiss===p.DismissReason.cancel&&console.log("Usuario decide volver a intentar")})})}catch(t){console.error(t),E.value=!1,h.value=!1,T.value==3&&p.fire({title:"Error en validación",text:"Error al procesar el rostro, vuelve a intentar o avanzar sin registro biometrico (posibilidad de rechazo)",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(n=>{n.isConfirmed?(o.embedding="",o.validaciones="fallo_registro",_.value=!1,O(!1)):n.dismiss===p.DismissReason.cancel&&(console.log("Usuario decide volver a intentar"),y.value="",T.value=0)}),y.value="Error al procesar el rostro."}},O=async(i,e=null)=>{if(console.log(e),i)try{const t=await xe.get(`/usuarios-duplicados/${e}`);Ce.value=t.data.usuario,R.value=!0}catch(t){console.error("Error al consultar usuario:",t),R.value=!1,usuario.value=null}else Q.value=!0;Q&&(R.value=!1,p.fire({title:"Confirmar registro",html:`
            <p class="!text-xl">VALIDACIÓN: <strong>${o.validaciones}</strong></p>
    <p class="!text-xl">Votante: <strong>${o.nombre}</strong></p>
    <p class="!text-xl">Identificación: <strong>${o.tipo_documento} - ${o.identificacion}</strong></p>
    <p class="!text-xl">Fecha nacimiento: <strong>${o.nacimiento}</strong></p>
    <p class="!text-xl">Genero: <strong>${o.genero}</strong></p>
    <p class="!text-xl">Etnia: <strong>${o.etnia}</strong></p>
    <p class="!text-xl">Condición: <strong>${o.condicion}</strong></p>
    <p class="!text-xl">Dirección: <strong>${o.direccion}</strong></p>
    <p class="!text-xl">Celular: <strong>${o.celular}</strong></p>
    <p class="!text-xl">Comuna: <strong>${o.comuna.label}</strong></p>
    <p class="!text-xl">Barrio: <strong>${o.barrio}</strong></p>
    <p class="!text-xl">Email: <strong>${o.email}</strong></p>
        <p class="!text-2xl">Es tu momento de votar</p>`,icon:"success",showCancelButton:!0,confirmButtonText:"Aceptar datos y votar!",cancelButtonText:"Cancelar",allowOutsideClick:!1,allowEscapeKey:!1,draggable:!0,customClass:{title:"!text-2xl",popup:"p-6",confirmButton:"!text-2xl",cancelButton:"!text-2xl"}}).then(t=>{t.isConfirmed&&ze()}))},qe=()=>{if(!o.nacimiento)return U.value="Debes ingresar la fecha de nacimiento.",!1;const i=new Date,e=new Date(o.nacimiento);let t=i.getFullYear()-e.getFullYear();const n=i.getMonth()-e.getMonth();return(n<0||n===0&&i.getDate()<e.getDate())&&t--,t<14?(U.value="No cumple con el requisito de edad mínima (14 años), por lo tanto, no puede ejercer el derecho al voto.",!1):(U.value="",!0)},Ie=async()=>{if(b.value=!1,o.nombre&&o.tipo_documento&&o.nacimiento){if(!qe())return;te.value="",b.value=!0}b.value?g.value=1:(o.nombre||(o.errors.nombre="Este campo es requerido."),(!o.identificacion||te.value!="")&&(o.errors.identificacion=te.value||"Este campo es requerido."),o.tipo_documento||(o.errors.tipo_documento="Este campo es requerido."),o.nacimiento||(o.errors.nacimiento="Este campo es requerido."))},Me=i=>{switch(b.value=!1,i){case 1:Ie();break;case 2:me();break}b.value&&(g.value=i)},me=()=>{b.value=!1,o.genero&&o.etnia&&o.condicion&&o.comuna&&o.barrio&&o.direccion&&o.checked&&o.declaracion&&(b.value=!0,g.value=2),b.value||(o.genero||(o.errors.genero="Este campo es requerido."),o.etnia||(o.errors.etnia="Este campo es requerido."),o.condicion||(o.errors.condicion="Este campo es requerido."),o.comuna||(o.errors.comuna="Este campo es requerido."),o.barrio||(o.errors.barrio="Este campo es requerido."),o.direccion||(o.errors.direccion="Este campo es requerido."),o.checked||(o.errors.checked="Este campo es requerido."),o.declaracion||(o.errors.declaracion="Este campo es requerido."))},Te=()=>{b.value=!1,console.log("Validando datos del paso 3",$.value),(o.cedula_front||$)&&(console.log("Datos del paso 3 son válidos"),b.value=!0),b.value?$e():o.cedula_front||(o.errors.cedula_front="Este campo es requerido.")},ze=async()=>{const i=await De("register");o.recaptcha_token=i,o.post(route("create-user"),{onSuccess:()=>{p({title:"Registro realizado",text:"Registro de usuario realizado exitosamente. Para poder votar, se realizará internamente la validación de su información, el estado del trámite será notificado a través del correo electrónico registrado. Recuerde que su usuario es su número de identificación y la contraseña es la que ingresó al momento del registro.",icon:"success"}).then(e=>{window.location.href=route("/dashboard")}),sessionStorage.removeItem("fallo_camara"),sessionStorage.removeItem("fallo_registro"),sessionStorage.removeItem("registro_duplicado"),o.reset(),ae()},onError:e=>{ae(),p({title:"Error",text:"Ocurrió un error al registrar el usuario.",icon:"error"}).then(t=>{g.value=0}),console.error(e)}})},pe=async i=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:i}}});D.value.srcObject=e,ne.value=!0}catch(e){console.error("Error al iniciar cámara:",e),y.value="Error al iniciar la cámara."}};B(N,async i=>{i&&await pe(i)});const ae=()=>{var e;const i=(e=D.value)==null?void 0:e.srcObject;i&&i.getTracks().forEach(t=>t.stop()),D.value.srcObject=null};B(_,i=>{i==!1&&ae()});const Re=i=>(console.log(i),he.find(e=>e.value==i));async function Ne(){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices){p.fire({icon:"warning",title:"Navegador no compatible",text:"Tu navegador no permite acceder a los dispositivos multimedia."});return}try{(await navigator.mediaDevices.enumerateDevices()).filter(t=>t.kind==="videoinput").length===0?p.fire({icon:"warning",title:"Cámara no detectada",text:"Es necesario que el dispositivo tenga una cámara para continuar con el proceso."}):console.log("Cámara detectada, puede continuar.")}catch(i){console.error("Error al verificar dispositivos:",i),p.fire({icon:"error",title:"Error al verificar la cámara",text:"Ocurrió un problema al intentar detectar la cámara."})}}return Pe(()=>{var i;if(u.info.hash_votantes&&((i=u.info.hash_votantes[0])!=null&&i.subtipo)&&(o.comuna=Re(u.info.hash_votantes[0].subtipo)),o.fecha_expedicion=de(u.info.fecha_expedicion),u.info.nacimiento){const e=new Date(u.info.nacimiento);H.value=e.getDate(),W.value=e.getMonth()+1,K.value=e.getFullYear(),o.nacimiento=de(u.info.nacimiento)}Ne()}),(i,e)=>(c(),d(z,null,[l(s(Ge),{title:"Registrar datos"}),l(He,{breadCrumbLinks:Ve},{header:q(()=>e[33]||(e[33]=[M(" Registrar datos ")])),default:q(()=>[a("div",so,[e[47]||(e[47]=a("div",{class:"p-6 border-b border-gray-200"},[a("h1",null,"Registrar registro")],-1)),a("div",io,[l(s(ye),{class:"hidden sm:block",model:Ee.value,activeStep:g.value,"onUpdate:activeStep":e[0]||(e[0]=t=>g.value=t)},null,8,["model","activeStep"]),l(s(ye),{class:"sm:hidden block",model:Se.value,activeStep:g.value,"onUpdate:activeStep":e[1]||(e[1]=t=>g.value=t)},null,8,["model","activeStep"])]),a("form",lo,[g.value==0?(c(),d("div",ro,[a("div",no,[l(m,{for:"nombre",value:"Nombre Completo"}),l(x,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:s(o).nombre,"onUpdate:modelValue":e[2]||(e[2]=t=>s(o).nombre=t),required:""},null,8,["modelValue"]),l(v,{class:"mt-2",message:s(o).errors.nombre},null,8,["message"])]),a("div",co,[l(m,{for:"identificacion",value:"Identificación"}),l(x,{id:"identificacion",type:"text",class:"mt-1 block w-full",modelValue:s(o).identificacion,"onUpdate:modelValue":e[3]||(e[3]=t=>s(o).identificacion=t),required:""},null,8,["modelValue"]),l(v,{class:"mt-2",message:s(o).errors.identificacion},null,8,["message"])]),a("div",uo,[l(m,{for:"tipo_documento",value:"Tipo de Documento"}),C(a("select",{id:"tipo_documento","onUpdate:modelValue":e[4]||(e[4]=t=>s(o).tipo_documento=t),class:"mt-1 block w-full border-gray-300 rounded-lg"},[e[34]||(e[34]=a("option",{value:"",disabled:""},"Seleccione tipo de documento",-1)),(c(!0),d(z,null,P(s(Ke),t=>(c(),d("option",{key:t.id,value:t.nombre},w(t.nombre),9,mo))),128))],512),[[J,s(o).tipo_documento]]),l(v,{class:"mt-2",message:s(o).errors.tipo_documento},null,8,["message"])]),a("div",po,[l(m,{for:"nacimiento",value:"Fecha de Nacimiento"}),l(x,{id:"nacimiento",type:"date",class:"mt-1 block w-full",modelValue:s(o).nacimiento,"onUpdate:modelValue":e[5]||(e[5]=t=>s(o).nacimiento=t),required:""},null,8,["modelValue"]),l(v,{class:"mt-2",message:s(o).errors.nacimiento},null,8,["message"]),U.value?(c(),d("p",fo,w(U.value),1)):I("",!0)]),a("div",vo,[l(m,{class:"col-span-3",for:"nacimiento",value:"Fecha de Nacimiento"}),a("div",go,[l(m,{for:"nacimientoDia",value:"Día"}),l(x,{id:"nacimientoDia",type:"number",class:"block",modelValue:H.value,"onUpdate:modelValue":e[6]||(e[6]=t=>H.value=t)},null,8,["modelValue"])]),a("div",bo,[l(m,{for:"nacimientoMes",value:"Mes"}),l(x,{id:"nacimientoMes",type:"number",class:"block",modelValue:W.value,"onUpdate:modelValue":e[7]||(e[7]=t=>W.value=t)},null,8,["modelValue"])]),a("div",xo,[l(m,{for:"nacimientoAnnio",value:"Año"}),l(x,{id:"nacimientoAnnio",type:"number",class:"block",modelValue:K.value,"onUpdate:modelValue":e[8]||(e[8]=t=>K.value=t)},null,8,["modelValue"])]),l(v,{class:"mt-2",message:s(o).errors.nacimiento},null,8,["message"]),U.value?(c(),d("p",ho,w(U.value),1)):I("",!0)]),a("div",yo,[a("button",{type:"button",class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white p-2 rounded-md shadow-xl",onClick:e[9]||(e[9]=t=>Me(1))}," Siguiente ")])])):I("",!0),g.value==1?(c(),d("div",wo,[a("div",_o,[l(m,{for:"genero",value:"Identidad de Género"}),a("div",ko,[a("div",Vo,[C(a("input",{type:"radio",id:"masculino",value:"Masculino","onUpdate:modelValue":e[10]||(e[10]=t=>s(o).genero=t)},null,512),[[ie,s(o).genero]]),e[35]||(e[35]=a("label",{class:"ps-2 text-sm sm:text-base",for:"masculino"},"Masculino",-1))]),a("div",Co,[C(a("input",{type:"radio",id:"two",value:"Femenino","onUpdate:modelValue":e[11]||(e[11]=t=>s(o).genero=t)},null,512),[[ie,s(o).genero]]),e[36]||(e[36]=a("label",{class:"ps-2 text-sm sm:text-base",for:"two"},"Femenino",-1))]),G.value?(c(),d("div",Do,[l(m,{class:"sm:text-sm text-xs",for:"genero",value:"¿Cual?"}),l(x,{id:"genero",type:"text",class:"mt-1 block w-full p-0 sm:p-1",modelValue:s(o).genero,"onUpdate:modelValue":e[12]||(e[12]=t=>s(o).genero=t),autocomplete:"genero"},null,8,["modelValue"]),l(v,{class:"mt-1",message:s(o).errors.genero},null,8,["message"])])):(c(),d("div",Eo,[C(a("input",{type:"radio",id:"tres",value:"true","onUpdate:modelValue":e[13]||(e[13]=t=>G.value=t)},null,512),[[ie,G.value]]),e[37]||(e[37]=a("label",{class:"ps-2 text-sm sm:text-base",for:"tres"},"Otro",-1))]))])]),a("div",So,[l(m,{for:"etnia",value:"Grupo poblacional"}),C(a("select",{id:"etnia","onUpdate:modelValue":e[14]||(e[14]=t=>s(o).etnia=t),class:"mt-1 block w-full border-gray-300 rounded-lg"},[e[38]||(e[38]=a("option",{value:"",disabled:""}," Seleccione grupo poblacional perteneciente ",-1)),(c(!0),d(z,null,P(s(Xe),t=>(c(),d("option",{key:t.id,value:t.nombre},w(t.nombre),9,Fo))),128))],512),[[J,s(o).etnia]]),l(v,{class:"mt-2",message:s(o).errors.etnia},null,8,["message"])]),a("div",jo,[l(m,{for:"condicion",value:"Condición poblacional"}),C(a("select",{id:"condicion","onUpdate:modelValue":e[15]||(e[15]=t=>s(o).condicion=t),class:"mt-1 block w-full border-gray-300 rounded-lg"},[e[39]||(e[39]=a("option",{value:"",disabled:""}," Seleccione condición poblacional ",-1)),(c(!0),d(z,null,P(s(Ze),t=>(c(),d("option",{key:t.id,value:t.nombre},w(t.nombre),9,Uo))),128))],512),[[J,s(o).condicion]]),l(v,{class:"mt-2",message:s(o).errors.condicion},null,8,["message"])]),a("div",$o,[l(m,{for:"comuna",value:"Comuna/Corregimiento"}),l(s(_e),{id:"comuna",modelValue:ee.value,"onUpdate:modelValue":e[16]||(e[16]=t=>ee.value=t),options:s(he),filter:"",optionLabel:"label",placeholder:"Seleccione comuna/corregimiento del proyecto",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),l(v,{class:"mt-2",message:s(o).errors.comuna},null,8,["message"])]),a("div",Bo,[l(m,{for:"barrio",value:"Barrio/Vereda"}),l(s(_e),{id:"barrio",modelValue:s(o).barrio,"onUpdate:modelValue":e[17]||(e[17]=t=>s(o).barrio=t),options:oe.value,filter:"",placeholder:"Seleccione barrio/vereda de dirección",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),ce.value?(c(),d("div",qo,[l(m,{for:"barrio_otro",value:"Cual?"}),l(x,{id:"barrio_otro",type:"text",class:"mt-1 block w-full",modelValue:s(o).barrio,"onUpdate:modelValue":e[18]||(e[18]=t=>s(o).barrio=t)},null,8,["modelValue"])])):I("",!0),l(v,{class:"mt-2",message:s(o).errors.barrio},null,8,["message"])]),a("div",Io,[l(m,{for:"direccion",value:"Dirección"}),l(x,{id:"direccion",type:"text",class:"mt-1 block w-full",modelValue:s(o).direccion,"onUpdate:modelValue":e[19]||(e[19]=t=>s(o).direccion=t),required:""},null,8,["modelValue"]),l(v,{class:"mt-2",message:s(o).errors.direccion},null,8,["message"])]),a("div",Mo,[l(m,{for:"email",value:"Correo Electrónico"}),l(x,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:s(o).email,"onUpdate:modelValue":e[20]||(e[20]=t=>s(o).email=t)},null,8,["modelValue"]),l(v,{class:"mt-2",message:s(o).errors.email},null,8,["message"])]),e[43]||(e[43]=a("div",{class:"mb-2"},[a("div",{class:"bg-azul rounded-md p-2 w-full h-full"},[a("p",{class:"text-white text-base"}," Digite una contraseña fácil de recordar para luego acceder a votar. ")])],-1)),a("div",To,[l(m,{for:"password",value:"Contraseña (mínimo: 8 caracteres)"}),l(s(to),{id:"password",modelValue:s(o).password,"onUpdate:modelValue":e[21]||(e[21]=t=>s(o).password=t),required:"",toggleMask:"",autocomplete:"current-password"},null,8,["modelValue"]),l(v,{class:"mt-2",message:s(o).errors.password},null,8,["message"])]),a("div",zo,[C(a("input",{type:"checkbox",id:"consentimiento1",name:"consentimiento1",required:"","onUpdate:modelValue":e[22]||(e[22]=t=>s(o).checked=t)},null,512),[[ge,s(o).checked]]),e[40]||(e[40]=a("label",{for:"consentimiento1",class:"ps-4 pe-12 sm:text-base text-sm text-gray-500"},[M("Conozco y Acepto la Política de Privacidad de Datos "),a("a",{href:"https://www.pereira.gov.co/publicaciones/38/politicas-de-privacidad-y-condiciones-de-uso/",target:"_blank",class:"underline !text-azul cursor-pointer"},"politica")],-1)),l(v,{class:"mt-1",message:s(o).errors.checked},null,8,["message"])]),a("div",Ro,[C(a("input",{type:"checkbox",id:"consentimiento2",name:"consentimiento2",required:"","onUpdate:modelValue":e[23]||(e[23]=t=>s(o).declaracion=t)},null,512),[[ge,s(o).declaracion]]),e[41]||(e[41]=a("label",{for:"consentimiento2",class:"ps-4 pe-12 sm:text-base text-sm text-gray-500"},[M("Manifiesto que acepto, bajo juramento, la "),a("a",{href:"https://www.pereira.gov.co/loader.php?lServicio=Tools2&lTipo=descargas&lFuncion=visorpdf&file=https%3A%2F%2Fwww.pereira.gov.co%2Floader.php%3FlServicio%3DTools2%26lTipo%3Ddescargas%26lFuncion%3DexposeDocument%26idFile%3D211273%26tmp%3De1c59e50ed23a13cda9087f627ac4f4d%26urlDeleteFunction%3Dhttps%253A%252F%252Fwww.pereira.gov.co%252Floader.php%253FlServicio%253DTools2%2526lTipo%253Ddescargas%2526lFuncion%253DdeleteTemporalFile%2526tmp%253De1c59e50ed23a13cda9087f627ac4f4d&pdf=1&tmp=e1c59e50ed23a13cda9087f627ac4f4d&fileItem=211273",target:"_blank",class:"underline !text-azul cursor-pointer"},"Declaración"),M(" sobre la veracidad de la información registrada")],-1)),l(v,{class:"mt-1",message:s(o).errors.declaracion},null,8,["message"])]),a("div",No,[a("div",Oo,[a("button",{type:"button",onClick:e[24]||(e[24]=t=>ue(0)),class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white px-4 rounded-md shadow-xl"}," Atrás ")]),a("div",Ao,[l(we,{type:"button",class:be(["h-full",{"opacity-25":s(o).processing}]),onClick:me,disabled:s(o).processing},{default:q(()=>e[42]||(e[42]=[M(" Siguiente ")])),_:1},8,["class","disabled"])])])])):I("",!0),g.value==2?(c(),d("div",Lo,[a("div",Po,[e[45]||(e[45]=a("div",{class:"col-span-2 text-sm sm:text-base text-gray-800 pt-6"},[a("h3",{class:"text-lg font-semibold"}," Cargue documento de identificación parte frontal "),a("p",null," Para cargar el documento frontal, asegúrese de que la imagen sea clara y legible. El documento debe estar bien iluminado y sin reflejos. ")],-1)),a("div",Go,[a("div",Yo,[e[44]||(e[44]=a("h4",{class:"text-2xl underline"},"Ejemplo parte frontal",-1)),a("img",{src:s(Qe),alt:"Documento Frontal ejemplo",class:"w-full h-full object-contain mt-2"},null,8,Ho)])]),a("div",Wo,[a("div",Ko,[l(x,{id:"cedula_front",type:"file",class:"mt-1 !border-0",accept:"image/jpeg,image/jpg,image/png,image/gif,image/svg+xml,image/webp",onInput:e[25]||(e[25]=t=>je("cedula_front",t)),maxFileSize:2e6}),l(v,{class:"mt-2",message:s(o).errors.cedula_front},null,8,["message"]),a("div",Xo,[$.value?(c(),d("img",{key:0,src:Fe($.value,1),alt:s(o).cedula_front,class:"w-4/6 h-full object-contain"},null,8,Zo)):(c(),Ye(s(ao),{key:1,class:"w-2/6 text-gray-300 flex justify-center items-center"}))]),$.value?(c(),d("div",Jo,[a("button",{onClick:e[26]||(e[26]=t=>Ue(1)),type:"button",class:"bg-red-500 text-white px-4 py-2 rounded"}," Eliminar Imagen ")])):I("",!0)])])]),a("div",Qo,[l(x,{id:"campo_obligatorio",type:"text",class:"mt-1 !border-0 hidden",modelValue:s(o).campoObligatorio,"onUpdate:modelValue":e[27]||(e[27]=t=>s(o).campoObligatorio=t)},null,8,["modelValue"])]),a("div",et,[a("div",ot,[a("button",{type:"button",onClick:e[28]||(e[28]=t=>ue(1)),class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white px-4 rounded-md shadow-xl"}," Atrás ")]),a("div",tt,[l(we,{type:"button",onClick:Te,class:be({"opacity-25":s(o).processing}),disabled:s(o).processing},{default:q(()=>e[46]||(e[46]=[M(" Siguiente ")])),_:1},8,["class","disabled"])])])])):I("",!0)])])]),_:1}),l(le,{show:h.value,closeable:!1},{default:q(()=>[e[48]||(e[48]=a("h2",{class:"py-4 text-2xl font-semibold text-gray-800 flex tex-center justify-center bg-azul text-white"}," Cargando datos... ",-1)),a("div",at,[l(s(Je),{"aria-label":"Loading"})])]),_:1},8,["show"]),l(le,{show:_.value,closeable:!0},{default:q(()=>[e[50]||(e[50]=a("h2",{class:"py-4 text-2xl font-semibold text-gray-800 flex flex-wrap tex-center justify-center bg-azul text-white"}," Validación Biométrica ",-1)),e[51]||(e[51]=a("div",{class:"mt-4 px-4"},[a("p",{class:"text-sm sm:text-base text-gray-800"}," Por favor, asegúrese de que su rostro esté bien iluminado y visible en la cámara (sin gorras, tapabocas, gafas). ")],-1)),a("div",st,[e[49]||(e[49]=a("label",{for:"camera"},"Seleccionar cámara:",-1)),C(a("select",{id:"camera","onUpdate:modelValue":e[29]||(e[29]=t=>N.value=t),class:"rounded-lg w-auto ms-4"},[(c(!0),d(z,null,P(Y.value,t=>(c(),d("option",{key:t.deviceId,value:t.deviceId},w(t.label||"Cámara desconocida"),9,it))),128))],512),[[J,N.value]]),a("video",{ref_key:"video",ref:D,autoplay:"",muted:"",width:"400",height:"340",class:"rounded-xl shadow-lg flex mx-auto mt-6"},null,512),a("button",{type:"button",disabled:E.value,class:"bg-secondary hover:bg-primary z-1000 text-base sm:text-base text-white p-2 rounded-md shadow-xl flex mx-auto mt-4 disabled:bg-gray-500",onClick:e[30]||(e[30]=t=>Be())}," Validar ",8,lt),M(" "+w(y.value),1)])]),_:1},8,["show"]),l(le,{show:R.value,closeable:!0},{default:q(()=>[e[52]||(e[52]=a("div",{class:"flex justify-between items-center bg-azul text-white px-4 py-4"},[a("h2",{class:"text-2xl font-semibold text-center"}," Registros duplicados o similares ")],-1)),a("div",rt,[(c(!0),d(z,null,P(i.usuarios,t=>(c(),d("div",{key:t.id,class:"flex gap-4 items-center mb-4 border-b pb-2"},[a("img",{src:i.getUrlPhoto(t.biometrico.photo),alt:"Foto",class:"w-36 h-full object-cover rounded"},null,8,nt),a("div",null,[a("p",ct," Nombre: "+w(t.nombre),1),a("p",dt," Identificación: "+w(t.identificacion),1),a("p",ut,"Estado: "+w(t.biometrico.estado),1)])]))),128)),a("button",{type:"button",class:"bg-secondary hover:bg-primary z-1000 text-base sm:text-base text-white p-2 rounded-md shadow-xl flex mx-auto mt-4 disabled:bg-gray-500",onClick:e[31]||(e[31]=t=>R.value=!1)}," Cancelar registro "),a("button",{type:"button",class:"bg-blue-600 hover:bg-blue-400 z-1000 text-base sm:text-base text-white p-2 rounded-md shadow-xl flex mx-auto mt-4 disabled:bg-gray-500",onClick:e[32]||(e[32]=t=>Q.value=!0)}," aprobar registro ")])]),_:1},8,["show"])],64))}};export{Mt as default};
