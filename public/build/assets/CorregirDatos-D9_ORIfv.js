import{x as Ze,T as Je,r as n,c as Ke,w as P,o as Qe,a as u,b as d,d as i,u as l,Z as et,e as x,f as a,m as _,g as j,F as A,h as H,t as B,v as Z,z as re,q as je,j as U,n as I,i as Ee,p as Se,k as De}from"./app-CEGMyR85.js";import{_ as tt}from"./AuthenticatedLayout-DNXnQ1Q3.js";import{c as Ue}from"./comunas-ar-P-SJd.js";import{b as ot,s as qe,t as at,e as st,c as lt}from"./etnia-vIT_PexQ.js";import{c as ne,d as Fe,f as it,b as rt}from"./cedulaBackEjemplo-DlBYF2rd.js";import{_ as m}from"./InputError-DoysFfRV.js";import{_ as p}from"./InputLabel-CNVgms6d.js";import{_ as J}from"./PrimaryButton-Cr1EDT2i.js";import{_ as nt}from"./SecondaryButton-BFNE8ThP.js";import{_ as K}from"./Modal-BcSlm9jk.js";import{_ as w}from"./TextInput-C8vdEJ-D.js";import{s as Q}from"./index-CYxQAqZ8.js";import{s as dt}from"./index-C_ZPa8ll.js";import{n as de,d as ct,T as ut}from"./FaceMatcher-DQZ88WER.js";import{r as Be}from"./PhotoIcon-DbVV4ff0.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-l0jx3Akw.js";import"./index-BXZ8Qqew.js";import"./index-CoYyp2iH.js";import"./index-Be1fzYNM.js";import"./index-7FYCMTRT.js";import"./index-BHzlD0CJ.js";import"./index-CPfMlV4-.js";import"./index-v67ADEvL.js";const mt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},vt={class:"mt-4 justify-center"},ft={class:"m-auto py-4 px-4"},pt={key:0,class:"sm:grid sm:grid-cols-2 gap-6 h-full"},gt={class:"mb-2"},bt={class:"mb-2"},xt={class:"mb-2"},yt=["value"],ht={class:"mb-2"},_t={key:0,class:"cols-span-2 w-full mb-2"},wt={class:"mb-2 mt-1"},kt={key:0,class:""},Ct={class:"mb-2"},Vt={key:0,class:"text-red-500"},jt={class:"col-span-2 flex justify-end"},Et={key:1,class:"sm:grid sm:grid-cols-2 gap-6"},St={class:"mb-2"},Dt={class:"mt-2 block sm:flex"},Ut={class:""},qt={class:"sm:ms-6"},Ft={key:0,class:"sm:ms-6"},Bt={key:1,class:"sm:ms-6"},It={class:"mb-2"},$t=["value"],zt={class:"mb-2"},Mt=["value"],Rt={class:"mb-2"},Tt={class:"mb-2"},Lt={class:"mb-2"},Nt={class:"my-4 col-span-2 mb-2"},Ot={class:"mb-4 col-span-2 mb-2"},Pt={class:"col-span-2 flex justify-between gap-2"},At={class:"flex pt-4 justify-end"},Yt={class:"flex pt-4 justify-end h-full"},Gt={key:2,class:"gap-6"},Xt={class:"sm:grid sm:grid-cols-2 gap-2 h-full sm:px-16 px-4"},Wt={class:"w-full h-full mt-4"},Ht={class:"w-full"},Zt=["src"],Jt={class:"mb-2 h-full flex justify-center items-center mt-4"},Kt={class:"border-2 border-gray-300 rounded-md p-2 h-full"},Qt={class:"flex justify-center"},eo=["src","alt"],to={key:0,class:"flex justify-center mt-2"},oo={class:"sm:grid sm:grid-cols-2 gap-2 h-full sm:px-16 px-4"},ao={class:"w-full h-full mt-4"},so={class:"w-full"},lo=["src"],io={class:"mb-2 h-full flex justify-center items-center mt-4"},ro={class:"border-2 border-gray-300 rounded-md p-2 h-full"},no={class:"flex justify-center"},co=["src","alt"],uo={key:0,class:"flex justify-center mt-2"},mo={class:"w-full gap-2 h-full sm:px-16 px-4 mt-4"},vo={class:"flex gap-4 mb-2"},fo={key:0},po={key:0,class:"mt-2"},go=["src"],bo={key:1},xo={key:0,class:"mt-2"},yo=["src"],ho={class:"w-full"},_o={class:"col-span-2 flex justify-between gap-2 mt-4"},wo={class:"flex pt-4 justify-end"},ko={class:"flex pt-4 justify-end"},Co={class:"flex justify-center my-12"},Vo={class:"flex justify-center gap-4 text-center h-full my-12"},jo={class:"my-12 px-4"},Eo=["value"],So=["disabled"],Do={class:"text-justify sm:text-2xl text-xl p-6 mt-6"},Uo={class:"flex justify-center gap-4 text-center h-full my-6"},oa={__name:"CorregirDatos",props:{votante:{type:Object,required:!0}},setup(ce){const y=Ze("$swal"),Ie=[{url:"",text:"Corregir datos"}],r=ce;console.log("Votante data:",r.votante);const t=Je({id_votante:r.votante.id||"",nombre:r.votante.nombre||"",identificacion:r.votante.identificacion||"",tipo_documento:r.votante.tipo_documento||"",fecha_expedicion:r.votante.fecha_expedicion||"",lugar_expedicion:r.votante.lugar_expedicion||"",nacimiento:r.votante.nacimiento||"",cedula_front:null,cedula_back:null,genero:r.votante.genero||"",etnia:r.votante.etnia||"",condicion:r.votante.condicion||"",direccion:r.votante.direccion||"",comuna:r.votante.hash_votantes[0].subtipo||"",barrio:r.votante.barrio||"",embedding:r.votante.user.biometrico.embedding||"",photo:null,validaciones:r.votante.hash_votantes[0].validaciones||"",checked:!0,declaracion:!0,firma:null,campoObligatorio:""}),$=n(""),ee=n([]),te=n(""),oe=n([]),k=n(null),T=n("imagen"),E=n(null);let ae=!1;const C=n(!1),se=n(!0),$e=n([{label:"Información Personal"},{label:"Datos Demográficos"},{label:"Registro datos"},{label:"Verificación"}]),ze=n([{label:"paso 1"},{label:"paso 2"},{label:"paso 3"},{label:"paso 4"}]),g=n(0),z=n(""),L=n(""),v=n(!1),V=n(!1),Y=n(!1),M=n(!1),q=n(null),F=n(null),G=n([]),N=n(""),b=n(null),h=n(""),ue=n(!1),S=n(!1),R=n(0),me=(s,e)=>t.cedula_front===null?`/storage/uploads/documentos/${s}`:s,Me=s=>t.firma===null?`/storage/uploads/firmas/${s}`:s,ve=Ke(()=>ne.find(e=>e.ciudades.includes(t.lugar_expedicion))||"No encontrado");$.value=Fe.find(s=>s.id===ve.value.id),ee.value=ne.find(s=>s.id===ve.value.id).ciudades,P(Y,s=>{s&&(t.genero="")}),P($,s=>{console.log(t.lugar_expedicion),s&&(ee.value=ne.find(e=>e.id===s.id).ciudades)}),P(te,s=>{s&&(t.comuna=s,oe.value=ot.find(e=>e.id===parseInt(s.value)).barrios,console.log(oe.value))});const le=(s,e)=>{if(t[s]=e.target.files[0],s==="cedula_front"){const o=new FileReader;o.onload=c=>{q.value=c.target.result},o.readAsDataURL(t[s])}else if(s==="cedula_back"){const o=new FileReader;o.onload=c=>{F.value=c.target.result},o.readAsDataURL(t[s])}else if(s=="firma"){const o=new FileReader;o.onload=c=>{k.value=c.target.result},o.readAsDataURL(file)}},fe=s=>{s===1?(t.cedula_front=null,q.value=null):s===2&&(t.cedula_back=null,F.value=null)},pe=s=>{if(!s)return"";const e=new Date(s),o=e.getFullYear(),c=String(e.getMonth()+1).padStart(2,"0"),D=String(e.getDate()).padStart(2,"0");return`${o}-${c}-${D}`},ge=s=>{ae=!0;const e=E.value.getContext("2d"),o=xe(s);e.beginPath(),e.moveTo(o.x,o.y)},be=s=>{if(!ae)return;const e=E.value.getContext("2d"),o=xe(s);e.lineTo(o.x,o.y),e.strokeStyle="#222",e.lineWidth=2,e.stroke()},ie=()=>{ae=!1},Re=()=>{E.value.getContext("2d").clearRect(0,0,E.value.width,E.value.height),k.value=null,t.firma=null},Te=()=>{E.value.toBlob(s=>{t.firma=new File([s],"firma.webp",{type:"image/webp"});const e=new FileReader;e.onload=o=>{k.value=o.target.result},e.readAsDataURL(t.firma)},"image/webp")},xe=s=>{const e=E.value.getBoundingClientRect();return s.touches&&s.touches.length>0?{x:s.touches[0].clientX-e.left,y:s.touches[0].clientY-e.top}:{x:s.offsetX,y:s.offsetY}},ye=s=>{g.value=s,v.value=!0},he=async()=>{C.value=!0;try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(c=>c.stop()),await de.tinyFaceDetector.loadFromUri("/models/tiny_face_detector"),await de.faceRecognitionNet.loadFromUri("/models/face_recognition"),await de.faceLandmark68Net.loadFromUri("/models/face_landmark_68");const e=await navigator.mediaDevices.enumerateDevices();G.value=e.filter(c=>c.kind==="videoinput");const o=G.value.find(c=>c.label.toLowerCase().includes("user"))||G.value[0];console.log(o),N.value=(o==null?void 0:o.deviceId)||"",C.value=!1,V.value=!0,await ke(N.value)}catch(s){C.value=!1,R.value==3,console.error("Error al iniciar:",s),h.value="No se pudo acceder a la cámara."}},Le=async()=>{h.value="",S.value=!0;const s=o=>parseInt(sessionStorage.getItem(o)||"0"),e=(o,c)=>sessionStorage.setItem(o,c.toString());if(!ue.value){s("fallo_camara")+1,h.value="La cámara no está lista.",S.value=!1;return}try{const o=await ct(b.value,new ut).withFaceLandmarks().withFaceDescriptor();if(console.log("entro -- validador"),!o){S.value=!1,h.value="No se detectó un rostro.",R.value+=1;const f=document.createElement("canvas");f.width=b.value.videoWidth,f.height=b.value.videoHeight,f.getContext("2d").drawImage(b.value,0,0,f.width,f.height);const X=await new Promise(W=>f.toBlob(W,"image/jpeg")),He=new File([X],"photo.jpg",{type:"image/jpeg"});t.photo=He,R.value==3&&y.fire({title:"Error en validación",text:"Error, no se detectó un rostro, vuelve a intentar o avanzar con la imagen poco visible y posiblemente sin registro biométrico (alta probabilidad de rechazo)",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(W=>{W.isConfirmed?(t.embedding="",t.validaciones="no_rostro",V.value=!1,M.value=!0):W.dismiss===Swal.DismissReason.cancel&&(console.log("Usuario decide volver a intentar"),h.value="",R.value=0)});return}const c=o.descriptor;t.embedding=c,console.log("emb",c);const D=document.createElement("canvas");D.width=b.value.videoWidth,D.height=b.value.videoHeight,D.getContext("2d").drawImage(b.value,0,0,D.width,D.height);const Xe=await new Promise(f=>D.toBlob(f,"image/jpeg")),We=new File([Xe],"photo.jpg",{type:"image/jpeg"});t.photo=We;const Ve=new FormData;Ve.append("embedding",c),S.value=!1,V.value=!1,C.value=!0,De.post(route("face-validate"),Ve,{headers:{"Content-Type":"multipart/form-data"}}).then(f=>{h.value=f.data.message,console.log(f),S.value=!1,C.value=!1,f.data.match?y.fire({title:"Error en validación",text:"Usted ya tiene un registro biométrico. Si está seguro que no se ha registrado, puede volver a intentarlo o continuar (probabilidad de rechazo).",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(O=>{O.isConfirmed?(t.validaciones="registro_duplicado",V.value=!1,M.value=!0):O.dismiss===y.DismissReason.cancel&&console.log("Usuario decide volver a intentar")}):y({title:"Validación exitosa",text:"Validación biométrica exitosa",icon:"success",didClose:()=>{V.value=!1,C.value=!0,we()}})}).catch(f=>{S.value=!1,C.value=!1,console.log(f);const O=s("fallo_registro")+1;e("fallo_registro",O),y.fire({title:"Error en validación",text:"Error en la validación, vuelve a intentar o avanzar sin registro biometrico (posibilidad de rechazo)",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(X=>{X.isConfirmed?(t.embedding="",t.validaciones="fallo_registro_biometrico",V.value=!1,M.value=!0):X.dismiss===y.DismissReason.cancel&&console.log("Usuario decide volver a intentar")})})}catch(o){console.error(o),S.value=!1,C.value=!1,R.value==3&&y.fire({title:"Error en validación",text:"Error al procesar el rostro, vuelve a intentar o avanzar sin registro biometrico (posibilidad de rechazo)",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(c=>{c.isConfirmed?(t.embedding="",t.validaciones="fallo_registro",V.value=!1,M.value=!0):c.dismiss===y.DismissReason.cancel&&(console.log("Usuario decide volver a intentar"),h.value="",R.value=0)}),h.value="Error al procesar el rostro."}},Ne=()=>{if(!t.nacimiento)return L.value="Debes ingresar la fecha de nacimiento.",!1;const s=new Date,e=new Date(t.nacimiento);let o=s.getFullYear()-e.getFullYear();const c=s.getMonth()-e.getMonth();return(c<0||c===0&&s.getDate()<e.getDate())&&o--,o<14?(L.value="No cumple con el requisito de edad mínima (14 años), por lo tanto, no puede ejercer el derecho al voto.",!1):(L.value="",!0)},Oe=async()=>{if(v.value=!1,t.nombre&&t.identificacion&&t.tipo_documento&&t.fecha_expedicion&&(t.lugar_expedicion||t.tipo_documento!="Cédula Ciudadanía")&&t.nacimiento){if(!Ne())return;z.value="";try{const s=await Pe(t.identificacion);console.log("Identificación existe:",s),s?(z.value="El número de cédula ingresado ya se encuentra registrado en el sistema. /n Por favor, continúe con el proceso de votación ingresando a la plataforma con su número de documento y la contraseña que registró previamente.",v.value=!1):(z.value="",v.value=!0)}catch{z.value="Error al validar la identificación. Intenta de nuevo.",v.value=!1}}v.value?g.value=1:(t.nombre||(t.errors.nombre="Este campo es requerido."),(!t.identificacion||z.value!="")&&(t.errors.identificacion=z.value||"Este campo es requerido."),t.tipo_documento||(t.errors.tipo_documento="Este campo es requerido."),t.fecha_expedicion||(t.errors.fecha_expedicion="Este campo es requerido."),t.lugar_expedicion||(t.errors.lugar_expedicion="Este campo es requerido."),t.nacimiento||(t.errors.nacimiento="Este campo es requerido."))},Pe=async s=>(await De.post("/validar-identificacion",{identificacion:s})).data.existe,Ae=s=>{switch(v.value=!1,s){case 1:Oe();break;case 2:_e();break}v.value&&(g.value=s)},_e=()=>{v.value=!1,t.genero&&t.etnia&&t.condicion&&t.comuna&&t.barrio&&t.direccion&&t.checked&&t.declaracion&&(v.value=!0,g.value=2),v.value||(t.genero||(t.errors.genero="Este campo es requerido."),t.etnia||(t.errors.etnia="Este campo es requerido."),t.condicion||(t.errors.condicion="Este campo es requerido."),t.comuna||(t.errors.comuna="Este campo es requerido."),t.barrio||(t.errors.barrio="Este campo es requerido."),t.direccion||(t.errors.direccion="Este campo es requerido."),t.checked||(t.errors.checked="Este campo es requerido."),t.declaracion||(t.errors.declaracion="Este campo es requerido."))},Ye=()=>{v.value=!1,(t.cedula_front||q)&&(t.cedula_back||F)&&(t.firma||k)&&(v.value=!0),v.value?t.embedding&&r.votante.hash_votantes[0].validaciones!="no_rostro"?M.value=!0:he():(t.cedula_front||(t.errors.cedula_front="Este campo es requerido."),t.cedula_back||(t.errors.cedula_back="Este campo es requerido."),t.firma||(t.errors.firma="Este campo es requerido"))},we=()=>{t.post(route("corregirDatos"),{onSuccess:()=>{y({title:"Registro actualizado",text:"Registro de usuario actualizado exitosamente. Se realizará la validación de su información, el estado sera notificado a su correo.",icon:"success"}).then(s=>{window.location.href=route("dashboard")}),sessionStorage.removeItem("fallo_camara"),sessionStorage.removeItem("fallo_registro"),sessionStorage.removeItem("registro_duplicado"),t.reset(),Ce()},onError:s=>{y({title:"Error",text:"Ocurrió un error al registrar el usuario.",icon:"error"}).then(e=>{g.value=0}),console.error(s)}})},ke=async s=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:s}}});b.value.srcObject=e,ue.value=!0}catch(e){console.error("Error al iniciar cámara:",e),h.value="Error al iniciar la cámara."}};P(N,async s=>{s&&await ke(s)});const Ce=()=>{var e;const s=(e=b.value)==null?void 0:e.srcObject;s&&s.getTracks().forEach(o=>o.stop()),b.value.srcObject=null};P(V,s=>{s==!1&&Ce()});const Ge=s=>(console.log(s),Ue.find(e=>e.value==s));return Qe(()=>{r.votante.user.biometrico.cedula_front&&(q.value=r.votante.user.biometrico.cedula_front),r.votante.user.biometrico.cedula_back&&(F.value=r.votante.user.biometrico.cedula_back),r.votante.user.biometrico.firma&&(k.value=r.votante.user.biometrico.firma),r.votante.hash_votantes[0].subtipo&&(t.comuna=Ge(r.votante.hash_votantes[0].subtipo)),t.fecha_expedicion=pe(r.votante.fecha_expedicion),t.nacimiento=pe(r.votante.nacimiento),se.value=!0}),(s,e)=>(d(),u(A,null,[i(l(et),{title:"Corregir datos"}),i(tt,{breadCrumbLinks:Ie},{header:x(()=>e[35]||(e[35]=[U(" Corregir datos ")])),default:x(()=>[a("div",mt,[e[50]||(e[50]=a("div",{class:"p-6 border-b border-gray-200"},[a("h1",null,"Corrección registro")],-1)),a("div",vt,[i(l(qe),{class:"hidden sm:block",model:$e.value,activeStep:g.value,"onUpdate:activeStep":e[0]||(e[0]=o=>g.value=o)},null,8,["model","activeStep"]),i(l(qe),{class:"sm:hidden block",model:ze.value,activeStep:g.value,"onUpdate:activeStep":e[1]||(e[1]=o=>g.value=o)},null,8,["model","activeStep"])]),a("form",ft,[g.value==0?(d(),u("div",pt,[a("div",gt,[i(p,{for:"nombre",value:"Nombre Completo"}),i(w,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:l(t).nombre,"onUpdate:modelValue":e[2]||(e[2]=o=>l(t).nombre=o),required:""},null,8,["modelValue"]),i(m,{class:"mt-2",message:l(t).errors.nombre},null,8,["message"])]),a("div",bt,[i(p,{for:"identificacion",value:"Identificación"}),i(w,{id:"identificacion",type:"text",class:"mt-1 block w-full",modelValue:l(t).identificacion,"onUpdate:modelValue":e[3]||(e[3]=o=>l(t).identificacion=o),required:""},null,8,["modelValue"]),i(m,{class:"mt-2",message:l(t).errors.identificacion},null,8,["message"])]),a("div",xt,[i(p,{for:"tipo_documento",value:"Tipo de Documento"}),j(a("select",{id:"tipo_documento","onUpdate:modelValue":e[4]||(e[4]=o=>l(t).tipo_documento=o),class:"mt-1 block w-full border-gray-300 rounded-lg"},[e[36]||(e[36]=a("option",{value:"",disabled:""},"Seleccione tipo de documento",-1)),(d(!0),u(A,null,H(l(at),o=>(d(),u("option",{key:o.id,value:o.nombre},B(o.nombre),9,yt))),128))],512),[[Z,l(t).tipo_documento]]),i(m,{class:"mt-2",message:l(t).errors.tipo_documento},null,8,["message"])]),a("div",ht,[i(p,{for:"fecha_expedicion",value:"Fecha de Expedición"}),i(w,{id:"fecha_expedicion",type:"date",class:"mt-1 block w-full",modelValue:l(t).fecha_expedicion,"onUpdate:modelValue":e[5]||(e[5]=o=>l(t).fecha_expedicion=o),required:""},null,8,["modelValue"]),i(m,{class:"mt-2",message:l(t).errors.fecha_expedicion},null,8,["message"])]),l(t).tipo_documento!=="Cédula Extranjería"?(d(),u("div",_t,[i(p,{for:"lugar_expedicion",value:"Lugar de Expedición"}),a("div",wt,[i(l(Q),{id:"departamento",modelValue:$.value,"onUpdate:modelValue":e[6]||(e[6]=o=>$.value=o),options:l(Fe),filter:"",optionLabel:"departamento",placeholder:"Seleccione departamento",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),l(t).tipo_documento!=="Pasaporte"?(d(),u("div",kt,[i(l(Q),{disabled:$.value===null||$.value==="",id:"lugar_expedicion",modelValue:l(t).lugar_expedicion,"onUpdate:modelValue":e[7]||(e[7]=o=>l(t).lugar_expedicion=o),options:ee.value,filter:"",optionLabel:"",placeholder:"Seleccione lugar de expedición",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["disabled","modelValue","options"])])):_("",!0),i(m,{class:"mt-2",message:l(t).errors.lugar_expedicion},null,8,["message"])])):_("",!0),a("div",Ct,[i(p,{for:"nacimiento",value:"Fecha de Nacimiento"}),i(w,{id:"nacimiento",type:"date",class:"mt-1 block w-full",modelValue:l(t).nacimiento,"onUpdate:modelValue":e[8]||(e[8]=o=>l(t).nacimiento=o),required:""},null,8,["modelValue"]),i(m,{class:"mt-2",message:l(t).errors.nacimiento},null,8,["message"]),L.value?(d(),u("p",Vt,B(L.value),1)):_("",!0)]),a("div",jt,[a("button",{type:"button",class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white p-2 rounded-md shadow-xl",onClick:e[9]||(e[9]=o=>Ae(1))}," Siguiente ")])])):_("",!0),g.value==1?(d(),u("div",Et,[a("div",St,[i(p,{for:"genero",value:"Género"}),a("div",Dt,[a("div",Ut,[j(a("input",{type:"radio",id:"masculino",value:"Masculino","onUpdate:modelValue":e[10]||(e[10]=o=>l(t).genero=o)},null,512),[[re,l(t).genero]]),e[37]||(e[37]=a("label",{class:"ps-2 text-sm sm:text-base",for:"masculino"},"Masculino",-1))]),a("div",qt,[j(a("input",{type:"radio",id:"two",value:"Femenino","onUpdate:modelValue":e[11]||(e[11]=o=>l(t).genero=o)},null,512),[[re,l(t).genero]]),e[38]||(e[38]=a("label",{class:"ps-2 text-sm sm:text-base",for:"two"},"Femenino",-1))]),Y.value?(d(),u("div",Ft,[i(p,{class:"sm:text-sm text-xs",for:"genero",value:"¿Cual?"}),i(w,{id:"genero",type:"text",class:"mt-1 block w-full p-0 sm:p-1",modelValue:l(t).genero,"onUpdate:modelValue":e[12]||(e[12]=o=>l(t).genero=o),autocomplete:"genero"},null,8,["modelValue"]),i(m,{class:"mt-1",message:l(t).errors.genero},null,8,["message"])])):(d(),u("div",Bt,[j(a("input",{type:"radio",id:"tres",value:"true","onUpdate:modelValue":e[13]||(e[13]=o=>Y.value=o)},null,512),[[re,Y.value]]),e[39]||(e[39]=a("label",{class:"ps-2 text-sm sm:text-base",for:"tres"},"Otro",-1))]))])]),a("div",It,[i(p,{for:"etnia",value:"Grupo poblacional"}),j(a("select",{id:"etnia","onUpdate:modelValue":e[14]||(e[14]=o=>l(t).etnia=o),class:"mt-1 block w-full border-gray-300 rounded-lg"},[e[40]||(e[40]=a("option",{value:"",disabled:""}," Seleccione grupo poblacional perteneciente ",-1)),(d(!0),u(A,null,H(l(st),o=>(d(),u("option",{key:o.id,value:o.nombre},B(o.nombre),9,$t))),128))],512),[[Z,l(t).etnia]]),i(m,{class:"mt-2",message:l(t).errors.etnia},null,8,["message"])]),a("div",zt,[i(p,{for:"condicion",value:"Condición poblacional"}),j(a("select",{id:"condicion","onUpdate:modelValue":e[15]||(e[15]=o=>l(t).condicion=o),class:"mt-1 block w-full border-gray-300 rounded-lg"},[e[41]||(e[41]=a("option",{value:"",disabled:""}," Seleccione condición poblacional ",-1)),(d(!0),u(A,null,H(l(lt),o=>(d(),u("option",{key:o.id,value:o.nombre},B(o.nombre),9,Mt))),128))],512),[[Z,l(t).condicion]]),i(m,{class:"mt-2",message:l(t).errors.condicion},null,8,["message"])]),a("div",Rt,[i(p,{for:"comuna",value:"Comuna/Corregimiento"}),i(l(Q),{id:"comuna",modelValue:te.value,"onUpdate:modelValue":e[16]||(e[16]=o=>te.value=o),options:l(Ue),filter:"",optionLabel:"label",placeholder:"Seleccione comuna del proyecto",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),i(m,{class:"mt-2",message:l(t).errors.comuna},null,8,["message"])]),a("div",Tt,[i(p,{for:"barrio",value:"Barrio/Vereda"}),i(l(Q),{id:"barrio",modelValue:l(t).barrio,"onUpdate:modelValue":e[17]||(e[17]=o=>l(t).barrio=o),options:oe.value,filter:"",placeholder:"Seleccione barrio/vereda de dirección",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),i(m,{class:"mt-2",message:l(t).errors.barrio},null,8,["message"])]),a("div",Lt,[i(p,{for:"direccion",value:"Dirección"}),i(w,{id:"direccion",type:"text",class:"mt-1 block w-full",modelValue:l(t).direccion,"onUpdate:modelValue":e[18]||(e[18]=o=>l(t).direccion=o),required:""},null,8,["modelValue"]),i(m,{class:"mt-2",message:l(t).errors.direccion},null,8,["message"])]),a("div",Nt,[j(a("input",{type:"checkbox",id:"consentimiento1",name:"consentimiento1",required:"","onUpdate:modelValue":e[19]||(e[19]=o=>l(t).checked=o)},null,512),[[je,l(t).checked]]),e[42]||(e[42]=a("label",{for:"consentimiento1",class:"ps-4 pe-12 sm:text-base text-sm text-gray-500"},[U("Conozco y Acepto la Política de Privacidad de Datos "),a("a",{href:"https://www.pereira.gov.co/publicaciones/38/politicas-de-privacidad-y-condiciones-de-uso/",target:"_blank",class:"underline !text-azul cursor-pointer"},"politica")],-1)),i(m,{class:"mt-1",message:l(t).errors.checked},null,8,["message"])]),a("div",Ot,[j(a("input",{type:"checkbox",id:"consentimiento2",name:"consentimiento2",required:"","onUpdate:modelValue":e[20]||(e[20]=o=>l(t).declaracion=o)},null,512),[[je,l(t).declaracion]]),e[43]||(e[43]=a("label",{for:"consentimiento2",class:"ps-4 pe-12 sm:text-base text-sm text-gray-500"},"Declaro bajo la gravedad de juramento que toda la información suministrada en este formulario es verídica, completa y corresponde a la realidad. Entiendo que proporcionar información falsa puede acarrear sanciones legales conforme a la normativa vigente.",-1)),i(m,{class:"mt-1",message:l(t).errors.declaracion},null,8,["message"])]),a("div",Pt,[a("div",At,[a("button",{type:"button",onClick:e[21]||(e[21]=o=>ye(0)),class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white px-4 rounded-md shadow-xl"}," Atrás ")]),a("div",Yt,[i(J,{type:"button",class:I(["h-full",{"opacity-25":l(t).processing}]),onClick:_e,disabled:l(t).processing},{default:x(()=>e[44]||(e[44]=[U(" Siguiente ")])),_:1},8,["class","disabled"])])])])):_("",!0),g.value==2?(d(),u("div",Gt,[a("div",Xt,[e[46]||(e[46]=a("div",{class:"col-span-2 text-sm sm:text-base text-gray-800 pt-6"},[a("h3",{class:"text-lg font-semibold"}," Cargue documento de identificación parte frontal "),a("p",null," Para cargar el documento frontal, asegúrese de que la imagen sea clara y legible. El documento debe estar bien iluminado y sin reflejos. ")],-1)),a("div",Wt,[a("div",Ht,[e[45]||(e[45]=a("h4",null,"Ejemplo parte frontal",-1)),a("img",{src:l(it),alt:"Documento Frontal ejemplo",class:"w-full h-full object-contain mt-2"},null,8,Zt)])]),a("div",Jt,[a("div",Kt,[i(w,{id:"cedula_front",type:"file",class:"mt-1 !border-0",accept:"image/*",onInput:e[22]||(e[22]=o=>le("cedula_front",o)),maxFileSize:2e6}),i(m,{class:"mt-2",message:l(t).errors.cedula_front},null,8,["message"]),a("div",Qt,[q.value?(d(),u("img",{key:0,src:me(q.value,1),alt:l(t).cedula_front,class:"w-4/6 h-full object-contain"},null,8,eo)):(d(),Ee(l(Be),{key:1,class:"w-2/6 text-gray-300 flex justify-center items-center"}))]),q.value?(d(),u("div",to,[a("button",{onClick:e[23]||(e[23]=o=>fe(1)),type:"button",class:"bg-red-500 text-white px-4 py-2 rounded"}," Eliminar Imagen ")])):_("",!0)])])]),a("div",oo,[e[48]||(e[48]=a("div",{class:"col-span-2 text-sm sm:text-base text-gray-800 pt-6"},[a("h3",{class:"text-lg font-semibold"}," Cargue documento de identificación parte trasera "),a("p",null," Para cargar el documento en su parte trasera, asegúrese de que la imagen sea clara y legible. El documento debe estar bien iluminado y sin reflejos. ")],-1)),a("div",ao,[a("div",so,[e[47]||(e[47]=a("h4",null,"Ejemplo parte trasera",-1)),a("img",{src:l(rt),alt:"Documento parte trasera ejemplo",class:"w-full h-full object-contain mt-2"},null,8,lo)])]),a("div",io,[a("div",ro,[i(w,{id:"cedula_back",type:"file",class:"mt-1 !border-0",accept:"image/*",onInput:e[24]||(e[24]=o=>le("cedula_back",o)),maxFileSize:2e6}),i(m,{class:"mt-2",message:l(t).errors.cedula_back},null,8,["message"]),a("div",no,[F.value?(d(),u("img",{key:0,src:me(F.value,1),alt:l(t).cedula_back,class:"w-4/6 h-full object-contain"},null,8,co)):(d(),Ee(l(Be),{key:1,class:"w-2/6 text-gray-300 flex justify-center items-center"}))]),F.value?(d(),u("div",uo,[a("button",{onClick:e[25]||(e[25]=o=>fe(2)),type:"button",class:"bg-red-500 text-white px-4 py-2 rounded"}," Eliminar Imagen ")])):_("",!0)])])]),a("div",mo,[i(p,{for:"firma",value:"Firma"}),a("div",vo,[a("button",{type:"button",class:I(["px-2 py-1 rounded",T.value==="imagen"?"bg-blue-600 text-white":"bg-gray-200"]),onClick:e[26]||(e[26]=o=>T.value="imagen")}," Cargar imagen ",2),a("button",{type:"button",class:I(["px-2 py-1 rounded",T.value==="canvas"?"bg-blue-600 text-white":"bg-gray-200"]),onClick:e[27]||(e[27]=o=>T.value="canvas")}," Dibujar firma ",2)]),T.value==="imagen"?(d(),u("div",fo,[i(w,{id:"firma",type:"file",class:"mt-1 block w-full",accept:"image/*",onChange:e[28]||(e[28]=o=>le("firma",o)),maxFileSize:2e6}),i(m,{class:"mt-2",message:l(t).errors.firma},null,8,["message"]),k.value?(d(),u("div",po,[a("img",{src:Me(k.value),alt:"Vista previa de la firma",class:"h-24 border rounded"},null,8,go)])):_("",!0)])):(d(),u("div",bo,[a("canvas",{ref_key:"canvas",ref:E,height:"150",class:"border border-gray-400 rounded-md bg-white cursor-crosshair sm:w-[300px] w-[250px]",onMousedown:ge,onMousemove:be,onMouseup:ie,onMouseleave:ie,onTouchstart:Se(ge,["prevent"]),onTouchmove:Se(be,["prevent"]),onTouchend:ie},null,544),a("div",{class:"flex gap-2 mt-1"},[a("button",{type:"button",onClick:Re,class:"text-xl sm:text-2xl text-blue-600 underline"}," Limpiar canvas "),a("button",{type:"button",onClick:Te,class:"text-xl sm:text-2xl text-green-600 underline"}," Guardar firma ")]),i(m,{class:"mt-2",message:l(t).errors.firma},null,8,["message"]),k.value?(d(),u("div",xo,[a("img",{src:k.value,alt:"Vista previa de la firma",class:"h-24 border rounded"},null,8,yo)])):_("",!0)]))]),a("div",ho,[i(w,{id:"campo_obligatorio",type:"text",class:"mt-1 !border-0 hidden",modelValue:l(t).campoObligatorio,"onUpdate:modelValue":e[29]||(e[29]=o=>l(t).campoObligatorio=o)},null,8,["modelValue"])]),a("div",_o,[a("div",wo,[a("button",{type:"button",onClick:e[30]||(e[30]=o=>ye(1)),class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white px-4 rounded-md shadow-xl"}," Atrás ")]),a("div",ko,[i(J,{type:"button",onClick:Ye,class:I({"opacity-25":l(t).processing}),disabled:l(t).processing},{default:x(()=>e[49]||(e[49]=[U(" Siguiente ")])),_:1},8,["class","disabled"])])])])):_("",!0)])])]),_:1}),i(K,{show:C.value,closeable:!1},{default:x(()=>[e[51]||(e[51]=a("h2",{class:"py-4 text-2xl font-semibold text-gray-800 flex tex-center justify-center bg-azul text-white"}," Cargando datos... ",-1)),a("div",Co,[i(l(dt),{"aria-label":"Loading"})])]),_:1},8,["show"]),i(K,{show:M.value,closeable:!1},{default:x(()=>[e[54]||(e[54]=a("h2",{class:"py-4 text-2xl font-semibold text-gray-800 flex tex-center justify-center bg-azul text-white"}," Desea volver a realizar el registro biométrico ",-1)),a("div",Vo,[i(J,{type:"button",class:I(["h-full",{"opacity-25":l(t).processing}]),onClick:e[31]||(e[31]=o=>he()),disabled:l(t).processing},{default:x(()=>e[52]||(e[52]=[U(" Volver a realizar el registro biométrico ")])),_:1},8,["class","disabled"]),i(nt,{onClick:we,class:I({"opacity-25":l(t).processing}),disabled:l(t).processing},{default:x(()=>e[53]||(e[53]=[U(" Continuar y guardar los datos ")])),_:1},8,["class","disabled"])])]),_:1},8,["show"]),i(K,{show:V.value,closeable:!0},{default:x(()=>[e[56]||(e[56]=a("h2",{class:"py-4 text-2xl font-semibold text-gray-800 flex flex-wrap tex-center justify-center bg-azul text-white"}," Validación Biométrica ",-1)),e[57]||(e[57]=a("div",{class:"mt-4 px-4"},[a("p",{class:"text-sm sm:text-base text-gray-800"}," Por favor, asegúrese de que su rostro esté bien iluminado y visible en la cámara (sin gorras, tapabocas, gafas). Si no se detecta un rostro, puede intentar nuevamente o continuar sin registro biométrico. ")],-1)),a("div",jo,[e[55]||(e[55]=a("label",{for:"camera"},"Seleccionar cámara:",-1)),j(a("select",{id:"camera","onUpdate:modelValue":e[32]||(e[32]=o=>N.value=o),class:"rounded-lg w-auto ms-4"},[(d(!0),u(A,null,H(G.value,o=>(d(),u("option",{key:o.deviceId,value:o.deviceId},B(o.label||"Cámara desconocida"),9,Eo))),128))],512),[[Z,N.value]]),a("video",{ref_key:"video",ref:b,autoplay:"",muted:"",width:"400",height:"340",class:"rounded-xl shadow-lg flex mx-auto mt-6"},null,512),a("button",{type:"button",disabled:S.value,class:"bg-secondary hover:bg-primary text-sm sm:text-base text-white p-2 rounded-md shadow-xl flex mx-auto mt-4 disabled:bg-gray-500",onClick:e[33]||(e[33]=o=>Le())}," Validar ",8,So),U(" "+B(h.value),1)])]),_:1},8,["show"]),i(K,{show:se.value,closeable:!0},{default:x(()=>[e[59]||(e[59]=a("h2",{class:"py-4 sm:text-4xl text-2x font-bold text-gray-800 flex tex-center justify-center bg-azul text-white"}," Aviso importante ",-1)),a("div",Do,[a("p",null," Por favor llenar todos los datos correctamente, para no ser rechazado, ¡recuerda! solo tiene "+B(3-ce.votante.hash_votantes[0].intentos)+" oportunidades para registrarse ",1)]),a("div",Uo,[i(J,{type:"button",class:I(["h-full text-xl sm:text-2xl",{"opacity-25":l(t).processing}]),onClick:e[34]||(e[34]=o=>se.value=!1),disabled:l(t).processing},{default:x(()=>e[58]||(e[58]=[U(" Continuar ")])),_:1},8,["class","disabled"])])]),_:1},8,["show"])],64))}};export{oa as default};
