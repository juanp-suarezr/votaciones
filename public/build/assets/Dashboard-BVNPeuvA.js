import{W as Q,X as Z,B as J,$ as U,c as h,o as c,y as V,b as d,m as w,t as y,r as C,g as tt,T as et,a as D,u as _,Z as st,w as P,F as A,i as H,j as F,d as M,n as q,h as ot,v as nt}from"./app-CBipStox.js";import{_ as at}from"./AuthenticatedLayout-xIcnQuIX.js";import{_ as I}from"./PrimaryLink-DCK10o4G.js";import{_ as it}from"./PrimaryButton-BbNenOha.js";import{s as rt,a as lt}from"./index-DJ3M-YIl.js";import{s as ut}from"./index-1prt9YX5.js";import{s as dt}from"./index-COt3780-.js";import{c as ct}from"./comunas-CgAZlVl9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DoRovTuv.js";import"./index-BmvzMqG9.js";import"./index-BlcEogBi.js";var G={exports:{}};(function(t,o){(function(p,f){t.exports=f(Q)})(Z,m=>(()=>{var p={113:(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=(a,u)=>{const x=a.__vccOpts||a;for(const[B,Y]of u)x[B]=Y;return x}},594:e=>{e.exports=m}},f={};function l(e){var s=f[e];if(s!==void 0)return s.exports;var a=f[e]={exports:{}};return p[e](a,a.exports,l),a.exports}l.d=(e,s)=>{for(var a in s)l.o(s,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:s[a]})},l.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),l.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var T={};l.r(T),l.d(T,{ToastComponent:()=>$,ToastPlugin:()=>i,ToastPositions:()=>v,default:()=>n,useToast:()=>r});var g=l(594);const E=["innerHTML"];function k(e,s,a,u,x,B){return(0,g.openBlock)(),(0,g.createBlock)(g.Transition,{"enter-active-class":e.transition.enter,"leave-active-class":e.transition.leave},{default:(0,g.withCtx)(()=>[(0,g.withDirectives)((0,g.createElementVNode)("div",{ref:"root",role:"alert",class:(0,g.normalizeClass)(["v-toast__item",[`v-toast__item--${e.type}`,`v-toast__item--${e.position}`]]),onMouseover:s[0]||(s[0]=Y=>e.toggleTimer(!0)),onMouseleave:s[1]||(s[1]=Y=>e.toggleTimer(!1)),onClick:s[2]||(s[2]=function(){return e.whenClicked&&e.whenClicked(...arguments)})},[s[3]||(s[3]=(0,g.createElementVNode)("div",{class:"v-toast__icon"},null,-1)),(0,g.createElementVNode)("p",{class:"v-toast__text",innerHTML:e.message},null,8,E)],34),[[g.vShow,e.isActive]])]),_:1},8,["enter-active-class","leave-active-class"])}function b(e){var s;typeof e.remove<"u"?e.remove():(s=e.parentNode)==null||s.removeChild(e)}function j(e,s,a){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const x=(0,g.h)(e,s,u),B=document.createElement("div");return B.classList.add("v-toast--pending"),a.appendChild(B),(0,g.render)(x,B),x.component}class N{constructor(s,a){this.startedAt=Date.now(),this.callback=s,this.delay=a,this.timer=setTimeout(s,a)}pause(){this.stop(),this.delay-=Date.now()-this.startedAt}resume(){this.stop(),this.startedAt=Date.now(),this.timer=setTimeout(this.callback,this.delay)}stop(){clearTimeout(this.timer)}}const v=Object.freeze({TOP_RIGHT:"top-right",TOP:"top",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left"});function S(e){return{all:e=e||new Map,on:function(s,a){var u=e.get(s);u?u.push(a):e.set(s,[a])},off:function(s,a){var u=e.get(s);u&&(a?u.splice(u.indexOf(a)>>>0,1):e.set(s,[]))},emit:function(s,a){var u=e.get(s);u&&u.slice().map(function(x){x(a)}),(u=e.get("*"))&&u.slice().map(function(x){x(s,a)})}}}const R=S(),X=(0,g.defineComponent)({name:"Toast",props:{message:{type:String,required:!0},type:{type:String,default:"success"},position:{type:String,default:v.BOTTOM_RIGHT,validator(e){return Object.values(v).includes(e)}},duration:{type:Number,default:3e3},dismissible:{type:Boolean,default:!0},onDismiss:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},queue:Boolean,pauseOnHover:{type:Boolean,default:!0}},data(){return{isActive:!1,parentTop:null,parentBottom:null,isHovered:!1}},beforeMount(){this.setupContainer()},mounted(){this.showNotice(),R.on("toast-clear",this.dismiss)},methods:{setupContainer(){if(this.parentTop=document.querySelector(".v-toast.v-toast--top"),this.parentBottom=document.querySelector(".v-toast.v-toast--bottom"),this.parentTop&&this.parentBottom)return;this.parentTop||(this.parentTop=document.createElement("div"),this.parentTop.className="v-toast v-toast--top"),this.parentBottom||(this.parentBottom=document.createElement("div"),this.parentBottom.className="v-toast v-toast--bottom");const e=document.body;e.appendChild(this.parentTop),e.appendChild(this.parentBottom)},shouldQueue(){return this.queue?this.parentTop.childElementCount>0||this.parentBottom.childElementCount>0:!1},dismiss(){this.timer&&this.timer.stop(),clearTimeout(this.queueTimer),this.isActive=!1,setTimeout(()=>{this.onDismiss.apply(null,arguments);const e=this.$refs.root;(0,g.render)(null,e),b(e)},150)},showNotice(){if(this.shouldQueue()){this.queueTimer=setTimeout(this.showNotice,250);return}const e=this.$refs.root.parentElement;this.correctParent.insertAdjacentElement("afterbegin",this.$refs.root),b(e),this.isActive=!0,this.duration&&(this.timer=new N(this.dismiss,this.duration))},whenClicked(){this.dismissible&&(this.onClick.apply(null,arguments),this.dismiss())},toggleTimer(e){!this.pauseOnHover||!this.timer||(e?this.timer.pause():this.timer.resume())}},computed:{correctParent(){switch(this.position){case v.TOP:case v.TOP_RIGHT:case v.TOP_LEFT:return this.parentTop;case v.BOTTOM:case v.BOTTOM_RIGHT:case v.BOTTOM_LEFT:return this.parentBottom}},transition(){switch(this.position){case v.TOP:case v.TOP_RIGHT:case v.TOP_LEFT:return{enter:"v-toast--fade-in-down",leave:"v-toast--fade-out"};case v.BOTTOM:case v.BOTTOM_RIGHT:case v.BOTTOM_LEFT:return{enter:"v-toast--fade-in-up",leave:"v-toast--fade-out"}}}},beforeUnmount(){R.off("toast-clear",this.dismiss)}});var O=l(113);const $=(0,O.default)(X,[["render",k]]),r=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{open(s){let a=null;typeof s=="string"&&(a=s);const x=Object.assign({},{message:a},e,s);return{dismiss:j($,x,document.body).ctx.dismiss}},clear(){R.emit("toast-clear")},success(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:s,type:"success"},a))},error(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:s,type:"error"},a))},info(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:s,type:"info"},a))},warning(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:s,type:"warning"},a))},default(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:s,type:"default"},a))}}},i={install:function(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r(s);e.config.globalProperties.$toast=a,e.provide("$toast",a)}},n=i;return T})())})(G);var mt=G.exports,pt=({dt:t})=>`
.p-knob-range {
    fill: none;
    transition: stroke 0.1s ease-in;
}

.p-knob-value {
    animation-name: p-knob-dash-frame;
    animation-fill-mode: forwards;
    fill: none;
}

.p-knob-text {
    font-size: 1.3rem;
    text-align: center;
}

.p-knob svg {
    border-radius: 50%;
    outline-color: transparent;
    transition: background ${t("knob.transition.duration")}, color ${t("knob.transition.duration")}, outline-color ${t("knob.transition.duration")}, box-shadow ${t("knob.transition.duration")};
}

.p-knob svg:focus-visible {
    box-shadow: ${t("knob.focus.ring.shadow")};
    outline: ${t("knob.focus.ring.width")} ${t("knob.focus.ring.style")} ${t("knob.focus.ring.color")};
    outline-offset: ${t("knob.focus.ring.offset")};
}

@keyframes p-knob-dash-frame {
    100% {
        stroke-dashoffset: 0;
    }
}
`,ht={root:function(o){var m=o.instance,p=o.props;return["p-knob p-component",{"p-disabled":p.disabled,"p-invalid":m.$invalid}]},range:"p-knob-range",value:"p-knob-value",text:"p-knob-text"},ft=J.extend({name:"knob",style:pt,classes:ht}),vt={name:"BaseKnob",extends:ut,props:{size:{type:Number,default:100},readonly:{type:Boolean,default:!1},step:{type:Number,default:1},min:{type:Number,default:0},max:{type:Number,default:100},valueColor:{type:String,default:function(){return U("knob.value.background").variable}},rangeColor:{type:String,default:function(){return U("knob.range.background").variable}},textColor:{type:String,default:function(){return U("knob.text.color").variable}},strokeWidth:{type:Number,default:14},showValue:{type:Boolean,default:!0},valueTemplate:{type:[String,Function],default:"{value}"},tabindex:{type:Number,default:0},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:ft,provide:function(){return{$pcKnob:this,$parentInstance:this}}},L=3.14159265358979,W={name:"Knob",extends:vt,inheritAttrs:!1,emits:["change"],data:function(){return{radius:40,midX:50,midY:50,minRadians:4*L/3,maxRadians:-3.14159265358979/3}},methods:{updateValueByOffset:function(o,m){var p=o-this.size/2,f=this.size/2-m,l=Math.atan2(f,p),T=-3.14159265358979/2-L/6;this.updateModel(l,T)},updateModel:function(o,m){var p;if(o>this.maxRadians)p=this.mapRange(o,this.minRadians,this.maxRadians,this.min,this.max);else if(o<m)p=this.mapRange(o+2*L,this.minRadians,this.maxRadians,this.min,this.max);else return;var f=Math.round((p-this.min)/this.step)*this.step+this.min;this.writeValue(f),this.$emit("change",f)},updateModelValue:function(o){o>this.max?this.writeValue(this.max):o<this.min?this.writeValue(this.min):this.writeValue(o)},mapRange:function(o,m,p,f,l){return(o-m)*(l-f)/(p-m)+f},onClick:function(o){!this.disabled&&!this.readonly&&this.updateValueByOffset(o.offsetX,o.offsetY)},onBlur:function(o){var m,p;(m=(p=this.formField).onBlur)===null||m===void 0||m.call(p,o)},onMouseDown:function(o){!this.disabled&&!this.readonly&&(window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp),o.preventDefault())},onMouseUp:function(o){!this.disabled&&!this.readonly&&(window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),o.preventDefault())},onTouchStart:function(o){!this.disabled&&!this.readonly&&(window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd),o.preventDefault())},onTouchEnd:function(o){!this.disabled&&!this.readonly&&(window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),o.preventDefault())},onMouseMove:function(o){!this.disabled&&!this.readonly&&(this.updateValueByOffset(o.offsetX,o.offsetY),o.preventDefault())},onTouchMove:function(o){if(!this.disabled&&!this.readonly&&o.touches.length==1){var m=this.$el.getBoundingClientRect(),p=o.targetTouches.item(0),f=p.clientX-m.left,l=p.clientY-m.top;this.updateValueByOffset(f,l)}},onKeyDown:function(o){if(!this.disabled&&!this.readonly)switch(o.code){case"ArrowRight":case"ArrowUp":{o.preventDefault(),this.updateModelValue(this.d_value+this.step);break}case"ArrowLeft":case"ArrowDown":{o.preventDefault(),this.updateModelValue(this.d_value-this.step);break}case"Home":{o.preventDefault(),this.writeValue(this.min);break}case"End":{o.preventDefault(),this.writeValue(this.max);break}case"PageUp":{o.preventDefault(),this.updateModelValue(this.d_value+10);break}case"PageDown":{o.preventDefault(),this.updateModelValue(this.d_value-10);break}}}},computed:{rangePath:function(){return"M ".concat(this.minX," ").concat(this.minY," A ").concat(this.radius," ").concat(this.radius," 0 1 1 ").concat(this.maxX," ").concat(this.maxY)},valuePath:function(){return"M ".concat(this.zeroX," ").concat(this.zeroY," A ").concat(this.radius," ").concat(this.radius," 0 ").concat(this.largeArc," ").concat(this.sweep," ").concat(this.valueX," ").concat(this.valueY)},zeroRadians:function(){return this.min>0&&this.max>0?this.mapRange(this.min,this.min,this.max,this.minRadians,this.maxRadians):this.mapRange(0,this.min,this.max,this.minRadians,this.maxRadians)},valueRadians:function(){return this.mapRange(this.d_value,this.min,this.max,this.minRadians,this.maxRadians)},minX:function(){return this.midX+Math.cos(this.minRadians)*this.radius},minY:function(){return this.midY-Math.sin(this.minRadians)*this.radius},maxX:function(){return this.midX+Math.cos(this.maxRadians)*this.radius},maxY:function(){return this.midY-Math.sin(this.maxRadians)*this.radius},zeroX:function(){return this.midX+Math.cos(this.zeroRadians)*this.radius},zeroY:function(){return this.midY-Math.sin(this.zeroRadians)*this.radius},valueX:function(){return this.midX+Math.cos(this.valueRadians)*this.radius},valueY:function(){return this.midY-Math.sin(this.valueRadians)*this.radius},largeArc:function(){return Math.abs(this.zeroRadians-this.valueRadians)<L?0:1},sweep:function(){return this.valueRadians>this.zeroRadians?0:1},valueToDisplay:function(){return typeof this.valueTemplate=="string"?this.valueTemplate.replace(/{value}/g,this.d_value):this.valueTemplate(this.d_value)}}},gt=["width","height","tabindex","aria-valuemin","aria-valuemax","aria-valuenow","aria-labelledby","aria-label"],bt=["d","stroke-width","stroke"],yt=["d","stroke-width","stroke"],xt=["fill"];function wt(t,o,m,p,f,l){return c(),h("div",V({class:t.cx("root")},t.ptmi("root")),[(c(),h("svg",V({viewBox:"0 0 100 100",role:"slider",width:t.size,height:t.size,tabindex:t.readonly||t.disabled?-1:t.tabindex,"aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":t.d_value,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,onClick:o[0]||(o[0]=function(){return l.onClick&&l.onClick.apply(l,arguments)}),onBlur:o[1]||(o[1]=function(){return l.onBlur&&l.onBlur.apply(l,arguments)}),onKeydown:o[2]||(o[2]=function(){return l.onKeyDown&&l.onKeyDown.apply(l,arguments)}),onMousedown:o[3]||(o[3]=function(){return l.onMouseDown&&l.onMouseDown.apply(l,arguments)}),onMouseup:o[4]||(o[4]=function(){return l.onMouseUp&&l.onMouseUp.apply(l,arguments)}),onTouchstart:o[5]||(o[5]=function(){return l.onTouchStart&&l.onTouchStart.apply(l,arguments)}),onTouchend:o[6]||(o[6]=function(){return l.onTouchEnd&&l.onTouchEnd.apply(l,arguments)})},t.ptm("svg")),[d("path",V({d:l.rangePath,"stroke-width":t.strokeWidth,stroke:t.rangeColor,class:t.cx("range")},t.ptm("range")),null,16,bt),d("path",V({d:l.valuePath,"stroke-width":t.strokeWidth,stroke:t.valueColor,class:t.cx("value")},t.ptm("value")),null,16,yt),t.showValue?(c(),h("text",V({key:0,x:50,y:57,"text-anchor":"middle",fill:t.textColor,class:t.cx("text")},t.ptm("text")),y(l.valueToDisplay),17,xt)):w("",!0)],16,gt))],16)}W.render=wt;const Tt={key:0,class:""},kt={class:"md:grid md:grid-cols-2 gap-4 mt-4 mb-4"},_t={key:0,class:"border-2 border-gray-400 px-1 py-2 border-dashed flex flex-wrap"},Mt={class:"m-auto sm:text-4xl text-xl"},Ot={class:"sm:text-xl text-sm text-gray-600"},Bt={key:0,class:"sm:text-2xl text-base text-gray-800 italic"},Ct={key:1,class:"border-2 border-gray-400 px-1 py-2 border-dashed flex flex-wrap"},Rt=["href"],Dt=["src"],Pt={class:"m-auto sm:text-4xl text-xl"},Vt={class:"sm:text-xl text-sm text-gray-600"},Et={key:0,class:"sm:text-2xl text-base text-gray-800 italic"},jt={key:1,class:"sm:text-2xl text-base text-gray-800 mt-4"},$t={class:"md:grid md:grid-cols-2 gap-4 mt-4"},At={class:"border-2 border-gray-400 px-1 py-2 border-dashed"},Lt={class:"m-auto sm:text-4xl text-xl pe-2"},Nt={class:"sm:text-xl text-sm text-gray-600"},St={key:0,class:"sm:text-2xl text-base text-gray-800 italic"},zt={key:1,class:""},Xt={key:0,class:"flex flex-col justify-center"},Yt={class:"sm:flex justify-center items-center"},Ut=["value"],Ht={class:"sm:grid grid-cols-2 gap-4 mt-4"},Ft={class:"w-full flex flex-col justify-center rounded-xl p-2 shadow-xl flex m-auto h-full bg-gray-500 mb-4"},Kt={class:"text-gray-200 text-lg sm:text-xl font-bold text-center flex justify-center"},qt={class:"w-full flex flex-col justify-center rounded-xl p-2 shadow-xl flex m-auto h-full bg-gray-500"},It={key:1,class:"flex justify-center"},re={__name:"Dashboard",props:{eventos:Object,votos:Object,candidatos:Object,proyectos:Object,eventos_admin:Object,votantes:Object},setup(t){const o=t;console.log(o);const m=C([]),p=C([]);tt(()=>{m.value=o.eventos.filter(r=>r.estado!="Cerrado"&&r.votantes.length>0&&r.evento_padre==null),p.value=o.eventos.filter(r=>r.estado=="Cerrado"&&r.votantes.length>0),l.value=z(),T.value=R()});const f=mt.useToast(),l=C(),T=C(),E=new URLSearchParams(window.location.search).get("error"),k=C(o.eventos_admin.length?o.eventos_admin[0].id:""),b=C(o.eventos_admin.length?o.eventos_admin.find(r=>r.id==k.value):[]),j=C(b.value.tipos!="NA"?b.value.tipos.replace(/\s*\|\s*/g,", ").split(", "):"NA"),N=()=>{let r=[];return j.value.forEach(i=>{r.push(b.value.votos.filter(n=>n.tipo==i).length)}),r.join(", ").split(",").map(i=>i.trim())},v=r=>`assets/img/banners/${r}.webp`,S=r=>{var i;return console.log(r),(i=ct.find(n=>n.value==r))==null?void 0:i.label},z=()=>({labels:X(b.value.tipos!="NA"?b.value.tipos.replace(/\s*\|\s*/g,", "):"NA"),datasets:[{label:"Votos",data:N(),backgroundColor:["rgba(59, 130, 246, 1)"]}]}),R=()=>{const r="#fff";return{indexAxis:"y",maintainAspectRatio:!1,aspectRatio:2,plugins:{legend:{labels:{color:r}}},scales:{x:{ticks:{color:r,font:{weight:500}},grid:{display:!1,drawBorder:!0}},y:{ticks:{color:r},grid:{color:"#000",drawBorder:!0}}}}};function X(r){return r.split(",").map(i=>i.trim())}const O=et({votos:b.value.votos!=null?o.eventos_admin.find(r=>r.id==k.value).votos.length:0,votantes:o.votantes.filter(r=>r.id_evento==k.value).length});E&&(console.log(E),f.open({message:"Usted ya ha realizado el voto, No puede volver a votar",type:"error",position:"top-right",duration:8e3,pauseOnHover:!0}));const K=()=>{b.value=o.eventos_admin.length?o.eventos_admin.find(r=>r.id==k.value):[],O.votos=b.value.votos!=null?b.value.votos.length:0,j.value=b.value.tipos!="NA"?b.value.tipos.replace(/\s*\|\s*/g,", ").split(", "):"NA",O.votantes=o.votantes.filter(r=>r.id_evento==k.value).length,l.value=z(),T.value=R()},$=r=>{window.open(route("certificados.descargar",r),"_blank")};return(r,i)=>(c(),h(A,null,[D(_(st),{title:"Dashboard"}),D(at,null,{header:P(()=>i[2]||(i[2]=[M(" Dashboard ")])),default:P(()=>[r.$page.props.user.roles.includes("Usuarios")?(c(),h("div",Tt,[i[13]||(i[13]=d("h2",{class:"text-gray-600 text-2xl inline-flex"},"Votaciones pendientes",-1)),d("div",kt,[(c(!0),h(A,null,H(m.value,n=>(c(),h("div",{class:"items-center px-4 m-auto w-full",key:n.id},[n.votantes[0].estado=="Activo"&&!n.tipos.includes("withBanner")?(c(),h("div",_t,[d("p",Mt,[M(y(n.nombre)+" ",1),i[3]||(i[3]=d("br",null,null,-1)),d("span",Ot,y(n.fecha_inicio)+" - "+y(n.fecha_fin),1),i[4]||(i[4]=d("br",null,null,-1)),t.votos.find(e=>e.id_eventos==n.id)?(c(),h("span",Bt," Usted ha votado por "+y(n.tipos.includes("Proyecto")?(()=>{var a;const e=t.votos.find(u=>u.id_eventos==n.id),s=t.proyectos.find(u=>u.id_proyecto==e.id_proyecto);return((a=s==null?void 0:s.proyecto)==null?void 0:a.detalle)??"(Voto en blanco)"})():(()=>{var a;const e=t.votos.find(u=>u.id_eventos==n.id),s=t.candidatos.find(u=>u.id_votante==e.id_candidato);return((a=s==null?void 0:s.votante)==null?void 0:a.nombre)??"(Voto no encontrado)"})()),1)):w("",!0),i[5]||(i[5]=d("br",null,null,-1))]),n.estado=="Activo"&&!t.votos.find(e=>e.id_eventos==n.id)?(c(),F(I,{key:0,class:q(["sm:text-2xl text-xl m-auto mt-2",{"opacity-25":r.isLoading}]),disabled:r.isLoading,href:r.route("votos.index",{evento:n.id,tipo_evento:n.tipos,tipo_user:n.votantes.length!=0?n.votantes[0].tipo:"",subtipo_user:n.votantes.length!=0?n.votantes[0].subtipo:""})},{default:P(()=>i[6]||(i[6]=[M(" Votar ")])),_:2},1032,["class","disabled","href"])):w("",!0)])):w("",!0),n.votantes[0].estado=="Activo"&&n.tipos.includes("withBanner")?(c(),h("div",Ct,[n.votantes[0].subtipo?(c(),F(_(dt),{key:0,value:"Comuna/Corregimiento: "+S(n.votantes.length!=0?n.votantes[0].subtipo:""),class:"!bg-primary text-[8px] sm:text-sm !text-white w-full flex p-2 z-10"},null,8,["value"])):w("",!0),d("a",{class:"w-full h-full bg-indigo-200 text-indigo-800 cursor-pointer",href:r.route("votos.index",{evento:n.id,tipo_evento:n.tipos,tipo_user:n.votantes.length!=0?n.votantes[0].tipo:"",subtipo_user:n.votantes.length!=0?n.votantes[0].subtipo:""})},[d("img",{src:v("banner_"+n.id),alt:"Imagen de evento",class:"w-full h-full object-cover"},null,8,Dt)],8,Rt),d("p",Pt,[d("span",Vt,y(n.fecha_inicio)+" - "+y(n.fecha_fin),1),i[7]||(i[7]=d("br",null,null,-1)),t.votos.find(e=>e.id_eventos==n.id)?(c(),h("span",Et," Usted ha votado por "+y(n.tipos.includes("Proyecto")?(()=>{var a;const e=t.votos.find(u=>u.id_eventos==n.id),s=t.proyectos.find(u=>u.id_proyecto==e.id_proyecto);return((a=s==null?void 0:s.proyecto)==null?void 0:a.detalle)??"(Voto en blanco)"})():(()=>{var a;const e=t.votos.find(u=>u.id_eventos==n.id),s=t.candidatos.find(u=>u.id_votante==e.id_candidato);return((a=s==null?void 0:s.votante)==null?void 0:a.nombre)??"(Voto no encontrado)"})()),1)):w("",!0),i[8]||(i[8]=d("br",null,null,-1))]),t.votos.find(e=>e.id_eventos==n.id)?(c(),h("div",jt,[D(it,{onClick:e=>$(n.id)},{default:P(()=>i[9]||(i[9]=[M(" Descargar certificado ")])),_:2},1032,["onClick"])])):w("",!0),n.estado=="Activo"&&!t.votos.find(e=>e.id_eventos==n.id)?(c(),F(I,{key:2,class:q(["sm:text-2xl text-xl m-auto mt-2",{"opacity-25":r.isLoading}]),disabled:r.isLoading,href:r.route("votos.index",{evento:n.id,tipo_evento:n.tipos,tipo_user:n.votantes.length!=0?n.votantes[0].tipo:"",subtipo_user:n.votantes.length!=0?n.votantes[0].subtipo:""})},{default:P(()=>i[10]||(i[10]=[M(" Votar ")])),_:2},1032,["class","disabled","href"])):w("",!0)])):w("",!0)]))),128))]),i[14]||(i[14]=d("h2",{class:"text-gray-600 sm:text-2xl inline-flex"},"Votaciones cerradas",-1)),d("div",$t,[(c(!0),h(A,null,H(p.value,n=>(c(),h("div",{class:"items-center px-4 m-auto w-full",key:n.id},[d("div",At,[d("p",Lt,[M(y(n.nombre)+" ",1),i[11]||(i[11]=d("br",null,null,-1)),d("span",Nt,y(n.fecha_inicio)+" - "+y(n.fecha_fin),1),i[12]||(i[12]=d("br",null,null,-1)),t.votos.find(e=>e.id_eventos==n.id)?(c(),h("span",St," Usted ha votado por "+y(n.tipos.includes("Proyecto")?(()=>{var a;const e=t.votos.find(u=>u.id_eventos==n.id),s=t.proyectos.find(u=>u.id_proyecto==e.id_proyecto);return((a=s==null?void 0:s.proyecto)==null?void 0:a.detalle)??"(Voto en blanco)"})():(()=>{var a;const e=t.votos.find(u=>u.id_eventos==n.id),s=t.candidatos.find(u=>u.id_votante==e.id_candidato);return((a=s==null?void 0:s.votante)==null?void 0:a.nombre)??"(Voto no encontrado)"})()),1)):w("",!0)])])]))),128))])])):w("",!0),r.$page.props.user.roles.includes("Administrador")||r.$page.props.user.roles.includes("Supervisor")||r.$page.props.user.roles.includes("Visor")?(c(),h("div",zt,[t.eventos_admin.length?(c(),h("div",Xt,[d("div",Yt,[ot(d("select",{id:"evento_selected",name:"evento_selected","onUpdate:modelValue":i[0]||(i[0]=n=>k.value=n),onChange:K,class:"block w-full p-2 text-base text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"},[i[15]||(i[15]=d("option",{selected:"",value:"",disabled:""}," Elegir evento de votación ",-1)),(c(!0),h(A,null,H(t.eventos_admin,n=>(c(),h("option",{class:"flex cursor mb-2 sm:mb-auto",key:n.id,value:n.id},y(n.nombre),9,Ut))),128))],544),[[nt,k.value]])]),d("div",Ht,[d("div",Ft,[d("h2",Kt,[i[16]||(i[16]=M(" Nivel de votaciones ")),i[17]||(i[17]=d("br",null,null,-1)),M(" Total Votantes habilitados - "+y(_(O).votantes),1)]),D(_(W),{class:"flex justify-center mt-4",modelValue:_(O).votos,"onUpdate:modelValue":i[1]||(i[1]=n=>_(O).votos=n),size:200,readonly:"",max:_(O).votantes},null,8,["modelValue","max"])]),d("div",qt,[i[18]||(i[18]=d("h2",{class:"text-gray-200 text-lg sm:text-xl font-bold text-center flex justify-center"}," Total votos según tipo ",-1)),D(_(rt),{type:"bar",data:l.value,options:T.value,class:"h-full m-2"},null,8,["data","options"])])])])):(c(),h("div",It,[D(_(lt),{severity:"info",sticky:r.sticky,class:"text-center w-fit",life:3e3},{default:P(()=>i[19]||(i[19]=[M("Los eventos de votación activos serán mostrados en esta sección")])),_:1},8,["sticky"])]))])):w("",!0)]),_:1})],64))}};export{re as default};
