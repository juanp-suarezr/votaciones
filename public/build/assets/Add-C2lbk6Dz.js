import{M as w,r as y,T as S,c as r,o as c,a,u as t,Z as C,w as l,b as s,d as u,p as V,h as k,F as f,i as N,t as $,v as E,n as L}from"./app-Bf3msOSc.js";import{_ as j}from"./AuthenticatedLayout-DfRbJ4UA.js";import{_ as g}from"./InputError-BPFXfjSl.js";import{_ as b}from"./InputLabel-CvOpkKmT.js";import{_ as O}from"./PrimaryButton-vaD-V7Mr.js";import{s as A}from"./index-CruYFNrQ.js";import{_ as B}from"./SecondaryLink-C367CVk-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DtOgKsc9.js";import"./index-6W5tv_1n.js";import"./index-DQEgcUCl.js";import"./index-CCkTpUwA.js";import"./index-Dejj7dvq.js";import"./index-BJtcnCIu.js";import"./index-BLcan4qp.js";const M={class:"flex flex-col bg-white border shadow-sm rounded-xl w-full"},R={class:"bg-gray-100 border-b rounded-t-xl py-3 px-4 md:py-4 md:px-5 grid grid-cols-2 gap-4"},z={class:"text-right"},D={class:"p-4 md:p-5"},F={class:"col-span-2 flex gap-4"},T={class:"card flex justify-content-center"},U=["value"],G={class:"col-span-2"},Z={class:"mt-4 flex flex-col items-end"},ne={__name:"Add",props:{eventos:{type:Object,default:()=>({})},tipos:{type:Object,default:()=>({})}},setup(m){const p=w("$swal"),v=m;console.log(v);const i=y([]),o=S({eventos:"",candidatos:[]}),_=[{url:"/candidatos",text:"Listado de candidatos"},{url:"",text:"Nuevo candidato"}],x=()=>{if(o.eventos){o.candidatos=[],i.value=[],console.log(o.eventos);const d=v.eventos.find(e=>e.id===o.eventos);console.log(d),d.votantes.forEach(e=>{i.value.push({id:e.id_votante,nombre:e.votante.nombre})}),console.log(i.value)}else i.value=[]},h=()=>{console.log(o),o.patch(route("candidatos.update",o.eventos),{onSuccess:function(){p({title:"Registros Guardado",text:"los candidatos han sido asignados al evento",icon:"success"}).then(d=>{window.location.reload()})},onError:function(){p({title:"Registros fallados",text:"los candidatos no han sido asignados al evento",icon:"error"})}})};return(d,e)=>(c(),r(f,null,[a(t(C),{title:"Agregar candidato"}),a(j,{breadCrumbLinks:_},{header:l(()=>e[2]||(e[2]=[u(" Nuevo Candidato ")])),default:l(()=>[s("div",M,[s("div",R,[e[4]||(e[4]=s("h3",{class:"mt-1 text-gray-500"}," Nuevo Candidato ",-1)),s("div",z,[a(B,{href:d.route("candidatos.index")},{default:l(()=>e[3]||(e[3]=[u(" Regresar ")])),_:1},8,["href"])])]),s("div",D,[s("form",{onSubmit:V(h,["prevent"]),class:"grid sm:grid-cols-2 gap-4"},[s("div",F,[a(b,{for:"eventos",value:"Eventos"}),s("div",T,[k(s("select",{id:"eventos",name:"eventoSelect","onUpdate:modelValue":e[0]||(e[0]=n=>t(o).eventos=n),onChange:x,class:"block w-full p-2 text-base text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"},[e[5]||(e[5]=s("option",{selected:"",value:"",disabled:""},"Elegir evento de votaciÃ³n",-1)),(c(!0),r(f,null,N(m.eventos,n=>(c(),r("option",{class:"flex cursor mb-2 sm:mb-auto",key:n.id,value:n.id},$(n.nombre),9,U))),128))],544),[[E,t(o).eventos]])]),a(g,{class:"mt-2",message:t(o).errors.tipos},null,8,["message"])]),s("div",G,[a(b,{for:"candidatos",value:"Seleccionar Candidatos"}),a(t(A),{modelValue:t(o).candidatos,"onUpdate:modelValue":e[1]||(e[1]=n=>t(o).candidatos=n),options:i.value,filter:"",virtualScrollerOptions:{itemSize:44},optionLabel:"nombre",optionValue:"id",placeholder:"Seleccione candidatos",class:"w-full",disabled:!t(o).eventos},null,8,["modelValue","options","disabled"]),a(g,{class:"mt-2",message:t(o).errors.candidatos},null,8,["message"])]),s("div",null,[s("div",Z,[a(O,{class:L({"opacity-25":t(o).processing}),disabled:t(o).processing},{default:l(()=>e[6]||(e[6]=[u(" Asignar Candidato(s) ")])),_:1},8,["class","disabled"])])])],32)])])]),_:1})],64))}};export{ne as default};
