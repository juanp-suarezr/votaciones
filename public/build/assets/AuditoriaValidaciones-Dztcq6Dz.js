import{_ as F}from"./AuthenticatedLayout-DbuffPLl.js";import{r as m,c as x,o as f,b as s,u as l,Z as N,d as b,e,i as _,j as y,F as v,k as B,t as n,n as O,N as h}from"./app-BQ65KfR3.js";import{_ as U}from"./SecondaryButton-DcORu6NT.js";import{_ as z}from"./Pagination-B-A70syX.js";import{s as R}from"./index-BnUF9zU5.js";import{s as w}from"./index-DlKJtUxv.js";import{_ as E}from"./SecondaryLink-Bjy2f7Sa.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BreadCrumb-wfK7zAci.js";import"./SecondaryButtonReturn-BrdSiKkG.js";import"./index-D1uG_drD.js";import"./index-BRNhUGfd.js";import"./index--J77SL6X.js";import"./PrimaryButton-BMNcvLkq.js";import"./XCircleIcon-16N1kWmy.js";import"./index-CVhmC6Di.js";import"./index-VfFFoHxl.js";import"./index-DB99PE7H.js";import"./index-CXf9FP7e.js";const I={class:"inline-block min-w-full overflow-hidden mb-3 grid md:grid-cols-3 gap-4"},M={class:"flex gap 4 p-4 items-center"},H={class:"mr-4",style:{"min-width":"220px"}},K={class:"flex gap 4 p-4 justify-end"},T={class:"flex flex-col overflow-x-auto"},Y={class:"inline-block rounded-lg shadow"},Z={class:"inline-block min-w-full py-2"},q={class:"overflow-x-auto"},G={class:"min-w-full whitespace-no-wrap"},J={class:"border-b border-gray-200 bg-white p-1 text-sm"},P={class:"border-b border-gray-200 bg-white py-5 text-sm"},Q={class:"text-gray-900 whitespace-no-wrap"},W={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},X={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},ee={class:"text-gray-900 whitespace-no-wrap"},te={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},ae={class:"text-gray-900 whitespace-no-wrap"},re={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},oe={class:"text-gray-900 whitespace-no-wrap"},se={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},ie={class:"text-gray-900 whitespace-no-wrap"},le={class:"flex flex-col items-center border-t bg-white px-5 py-5 xs:flex-row xs:justify-between"},$e={__name:"AuditoriaValidaciones",props:{auditoria_registro:{type:Object,default:()=>({})},eventos:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({})},comunas:{type:Array,default:()=>[]}},setup(c){const u=c,k=[{url:"",text:"auditoria/historial validaciones"}];let p=m(u.filters.id_user??""),r=m(u.eventos.find(o=>o.id==15)),d=m(u.filters.comuna??null);const S=()=>{h.get("/auditoria-validaciones",{id_evento:r.value?r.value.id??r.value:null,id_user:p.value?p.value.id??p.value:null,comuna:d.value},{preserveState:!0,replace:!0})},V=o=>{const t=new Date(o),a=t.getFullYear(),g=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),j=String(t.getHours()).padStart(2,"0"),L=String(t.getMinutes()).padStart(2,"0"),D=String(t.getSeconds()).padStart(2,"0");return`${a}-${g}-${i} ${j}:${L}:${D}`},A=()=>{h.get("/auditoria-validaciones",{id_evento:r.value.id,id_user:p.value.id},{preserveState:!0,replace:!0})},$=()=>{p.value=null,r.value=u.eventos.find(o=>o.id==15),d.value=null,h.get("/auditoria-validaciones",{id_evento:r.value?r.value.id??r.value:null},{preserveState:!0,replace:!0})},C=function(o){let t=o.split(" "),a="",g=0;for(var i=0;i<t.length&&g<2;i++)t[i].length>0&&t[i]!==""&&(a+=t[i][0],g++);return a};return(o,t)=>(f(),x(v,null,[s(l(N),{title:"Auditoria validaciones"}),s(F,{breadCrumbLinks:k},{header:b(()=>t[2]||(t[2]=[y(" Auditoria validaciones ")])),default:b(()=>[e("div",I,[e("div",null,[s(l(w),{id:"eventos",modelValue:l(r),"onUpdate:modelValue":t[0]||(t[0]=a=>_(r)?r.value=a:r=a),options:c.eventos,filter:"",optionLabel:"nombre",placeholder:"Seleccione el evento",checkmark:"",highlightOnSelect:!1,onChange:A,class:"block w-full px-4 py-1 text-base text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue","options"])]),e("div",M,[e("div",H,[s(l(w),{id:"comunas",modelValue:l(d),"onUpdate:modelValue":t[1]||(t[1]=a=>_(d)?d.value=a:d=a),options:c.comunas,optionLabel:"label",filter:"",filterBy:"label",placeholder:"Seleccione comuna",showClear:"",class:"block w-full",onChange:S},null,8,["modelValue","options"])]),s(U,{class:"me-4 py-2 h-full",onClick:$},{default:b(()=>t[3]||(t[3]=[y(" Limpiar ")])),_:1})]),e("div",K,[s(E,{class:"me-4 py-2 h-full !bg-green-400 text-green-800",href:o.route("auditoriaVal.excel",{id_evento:l(r)})},{default:b(()=>t[4]||(t[4]=[y(" Descargar Reporte ")])),_:1},8,["href"])])]),e("div",T,[e("div",Y,[e("div",Z,[e("div",q,[e("table",G,[t[5]||(t[5]=e("thead",null,[e("tr",{class:"border-b bg-gray-50 text-left text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("th",{colspan:"2",class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Usuario validador "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Accion "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," votante validado "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Ip Address "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," User Agent "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Fecha de validaciÃ³n ")])],-1)),e("tbody",null,[(f(!0),x(v,null,B(c.auditoria_registro.data,a=>(f(),x("tr",{key:a.id,class:"text-gray-700"},[e("td",J,[s(l(R),{label:C(a.usuario.name),class:"bg-indigo-200 text-indigo-800 text-xl",size:"large",shape:"circle"},null,8,["label"])]),e("td",P,[e("p",Q,n(a.usuario.name),1)]),e("td",W,[e("p",{class:O(["text-gray-900 whitespace-no-wrap",{"text-green-600":a.accion==="Activo","text-red-600":a.accion=="Rechazado"}])},n(a.accion=="Activo"?"Aprobado":a.accion),3)]),e("td",X,[e("p",ee,n(a.hash_votante.votante.nombre)+" - "+n(a.hash_votante.votante.identificacion),1)]),e("td",te,[e("p",ae,n(a.ip_address),1)]),e("td",re,[e("p",oe,n(a.user_agent),1)]),e("td",se,[e("p",ie,n(V(a.created_at)),1)])]))),128))])])])])])]),e("div",le,[s(z,{links:c.auditoria_registro.links},null,8,["links"])])]),_:1})],64))}};export{$e as default};
