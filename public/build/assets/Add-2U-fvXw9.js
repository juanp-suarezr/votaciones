import{x as $,r as V,T as N,f as j,o as r,c as i,a,u as t,w as v,F as b,Z as q,b as p,d as s,l as k,h as x,v as y,i as _,n as R,t as h}from"./app-h2eVGlAo.js";import{_ as E}from"./AuthenticatedLayout-0Lx5B2OY.js";import{_ as d}from"./InputError-1JT9Jcwt.js";import{_ as m}from"./InputLabel-tSsswJHg.js";import{_ as S}from"./PrimaryButton-bmC-xnXP.js";import{_ as f}from"./TextInput-M_sSCjHe.js";import{s as I}from"./multiselect.esm--Bg49J3D.js";import{_ as O}from"./SecondaryLink-Db-lTHUA.js";import{s as M}from"./selectbutton.esm-n6V0-7j8.js";import"./index.esm-ggPAMPNt.js";import"./ripple.esm-tSX4VvqJ.js";import"./basecomponent.esm-U5Bu4RZK.js";import"./portal.esm-xrAVjLXa.js";const B={class:"md:grid grid-cols-2 gap-4"},D={class:"flex flex-col bg-white border shadow-sm rounded-xl"},F={class:"bg-gray-100 border-b rounded-t-xl py-3 px-4 md:py-4 md:px-5 grid grid-cols-2 gap-4"},T=s("h3",{class:"mt-1 text-gray-500"}," Nuevo Usuario ",-1),L={class:"text-right"},G={class:"p-4 md:p-5"},P=s("option",{disabled:"",value:"",class:"text-xs text-gray-400"},"Seleccione tipo votante",-1),H=["value"],Z={key:1,class:"text-xs text-gray-600"},J=["href"],K=s("option",{disabled:"",value:"",class:"text-xs text-gray-400"},"Seleccione evento a asignar ",-1),Q=["value"],W={key:1,class:"text-xs text-gray-600"},X=["href"],Y={class:"card flex justify-content-center"},ee={class:"col-span-2 w-full"},se={class:"card flex z-10 gap-4 mt-4"},oe={class:"card flex justify-content-center"},te={class:"col-span-2 w-full"},ae={class:"mt-4 flex flex-col items-center"},le={class:"w-full bg-white border shadow-sm rounded-xl"},re=s("div",{class:"bg-gray-100 border-b rounded-t-xl py-3 px-4 md:py-4 md:px-5 flex"},[s("h3",{class:"text-gray-500 m-auto"}," CARGUE MASIVO ")],-1),ie={class:"w-full h-full flex px-4"},ne={class:"mt-6 w-full"},de=s("p",{class:""},[s("b",null,"Nota:"),p(" Para subir masivamente la lista de votantes, debe descargar la plantilla, dando clic en el siguiente botón. ")],-1),ue=["href"],ce=s("i",{class:"fa-solid fa-file-arrow-down m-auto me-2"},null,-1),me=s("p",{class:"mt-4"}," Luego de descargar la plantilla y cargar los datos, subir el mismo archivo excel en el apartado de abajo. ",-1),pe={class:"mt-2"},ge=s("option",{disabled:"",value:"",class:"text-xs text-gray-400"},"Seleccione tipo votante ",-1),fe=["value"],ve={key:1,class:"text-xs text-gray-600"},be=["href"],xe={class:"mt-2"},ye=s("option",{disabled:"",value:"",class:"text-xs text-gray-400"},"Seleccione evento a asignar ",-1),_e=["value"],he={key:1,class:"text-xs text-gray-600"},we=["href"],Ve={class:"mt-12 flex flex-col items-end"},Oe={__name:"Add",props:{roles:{type:Object,default:()=>({})},tipos:{type:Object,default:()=>({})},eventos:{type:Object,default:()=>({})},numRegistrosInsertados:{type:Object,default:()=>({})},numRegistrosActualizados:{type:Object,default:()=>({})}},setup(u){const g=$("$swal"),c=u,w=V("Usuario"),U=V(["Candidato","Usuario"]),e=N({name:"",email:"",identificacion:"",tipo:"",password:"",password_confirmation:"",terms:!1,roles_user:"",eventos:0,candidato:0,votantes:""});j(w,n=>{n=="Candidato"?e.candidato=1:e.candidato=0});const A=()=>{e.post(route("users.store"),{onSuccess:function(){e.reset("password","password_confirmation"),g({title:"Registro Guardado",text:"El usuario se ha almacenado exitosamente",icon:"success"})}})},z=n=>{const l=n.target.files[0];if(!l){e.errors.votantes="Por favor, selecciona un archivo.";return}if(l.size>2*1024*1024){e.errors.votantes="El archivo no debe ser mayor a 2 MB.";return}e.errors.votantes=null,e.votantes=l,console.log(e.votantes)},C=()=>{e.post(route("cargueVotantes"),{forceFormData:!0,onSuccess:()=>{c.numRegistrosInsertados!==void 0&&c.numRegistrosActualizados!==void 0?g({title:"Registros Cargados",text:`Se han importado ${c.numRegistrosInsertados} nuevos registros correctamente y ${c.numRegistrosActualizados} actualizados`,icon:"success"}):c.numRegistrosInsertados!==void 0&&c.numRegistrosActualizados==null?g({title:"Registros Cargados",text:`Se han importado ${c.numRegistrosInsertados} nuevos registros correctamente y 0 actualizados`,icon:"success"}):c.numRegistrosInsertados==null&&c.numRegistrosActualizados!==void 0?g({title:"Registros Cargados",text:`Se han importado 0 nuevos registros correctamente y ${c.numRegistrosActualizados} actualizados`,icon:"success"}):g({title:"Registros Cargados",text:"Se han importado los registros de forma masiva",icon:"success"})},onError:n=>{g({title:"Error",text:"Hubo un problema al procesar la solicitud.",icon:"error"})}})};return(n,l)=>(r(),i(b,null,[a(t(q),{title:"Agregar usuario"}),a(E,null,{header:v(()=>[p(" Nuevo usuario ")]),default:v(()=>[s("div",B,[s("div",D,[s("div",F,[T,s("div",L,[a(O,{href:n.route("users.index")},{default:v(()=>[p(" Regresar ")]),_:1},8,["href"])])]),s("div",G,[s("form",{onSubmit:k(A,["prevent"]),class:"grid sm:grid-cols-2 gap-4"},[s("div",null,[a(m,{for:"name",value:"Nombre"}),a(f,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:t(e).name,"onUpdate:modelValue":l[0]||(l[0]=o=>t(e).name=o),required:"",autofocus:"",autocomplete:"name"},null,8,["modelValue"]),a(d,{class:"mt-2",message:t(e).errors.name},null,8,["message"])]),s("div",null,[a(m,{for:"identificacion",value:"Identificación"}),a(f,{id:"identificacion",type:"number",class:"mt-1 block w-full",modelValue:t(e).identificacion,"onUpdate:modelValue":l[1]||(l[1]=o=>t(e).identificacion=o),required:"",autofocus:"",autocomplete:"identificacion"},null,8,["modelValue"]),a(d,{class:"mt-2",message:t(e).errors.identificacion},null,8,["message"])]),s("div",null,[a(m,{for:"tipo",value:"Tipo votante"}),u.tipos.length?x((r(),i("select",{key:0,"onUpdate:modelValue":l[2]||(l[2]=o=>t(e).tipo=o),class:"block w-full px-4 py-2 mt-1 text-base text-gray-900 border border-gray-600 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"},[P,(r(!0),i(b,null,_(u.tipos,o=>(r(),i("option",{value:o.nombre,key:o.id},h(o.nombre),9,H))),128))],512)),[[y,t(e).tipo]]):(r(),i("p",Z,[p("No hay tipos de usuarios registrados, registrar uno nuevo "),s("a",{href:n.route("tipos.index")},"Aquí",8,J)])),a(d,{class:"mt-2",message:t(e).errors.tipo},null,8,["message"])]),s("div",null,[a(m,{for:"evento",value:"Evento votante"}),u.eventos.length?x((r(),i("select",{key:0,"onUpdate:modelValue":l[3]||(l[3]=o=>t(e).eventos=o),class:"block w-full px-4 py-2 mt-1 text-base text-gray-900 border border-gray-600 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"},[K,(r(!0),i(b,null,_(u.eventos,o=>(r(),i("option",{value:o.id,key:o.id},h(o.nombre),9,Q))),128))],512)),[[y,t(e).eventos]]):(r(),i("p",W,[p("No hay eventos registrados, registrar uno nuevo "),s("a",{href:n.route("eventos.index")},"Aquí",8,X)])),a(d,{class:"mt-2",message:t(e).errors.eventos},null,8,["message"])]),s("div",null,[a(m,{for:"email",value:"Usuario"}),a(f,{id:"email",type:"text",class:"mt-1 block w-full",modelValue:t(e).email,"onUpdate:modelValue":l[4]||(l[4]=o=>t(e).email=o),required:"",autocomplete:"username"},null,8,["modelValue"]),a(d,{class:"mt-2",message:t(e).errors.email},null,8,["message"])]),s("div",null,[a(m,{for:"password",value:"Contraseña"}),a(f,{id:"password",type:"password",class:"mt-1 block w-full",modelValue:t(e).password,"onUpdate:modelValue":l[5]||(l[5]=o=>t(e).password=o),required:"",autocomplete:"new-password"},null,8,["modelValue"]),a(d,{class:"mt-2",message:t(e).errors.password},null,8,["message"])]),s("div",null,[a(m,{for:"password_confirmation",value:"Confirmar contraseña"}),a(f,{id:"password_confirmation",type:"password",class:"mt-1 block w-full",modelValue:t(e).password_confirmation,"onUpdate:modelValue":l[6]||(l[6]=o=>t(e).password_confirmation=o),required:"",autocomplete:"new-password"},null,8,["modelValue"]),a(d,{class:"mt-2",message:t(e).errors.password_confirmation},null,8,["message"])]),s("div",null,[a(m,{for:"roles",value:"Roles"}),s("div",Y,[a(t(I),{id:"roles",modelValue:t(e).roles_user,"onUpdate:modelValue":l[7]||(l[7]=o=>t(e).roles_user=o),display:"chip",options:Object.values(u.roles),placeholder:"Seleccione rol",maxSelectedLabels:3,class:"w-full md:w-20rem"},null,8,["modelValue","options"])]),a(d,{class:"mt-2",message:t(e).errors.roles_user},null,8,["message"])]),s("div",ee,[s("div",se,[s("div",oe,[a(t(M),{modelValue:w.value,"onUpdate:modelValue":l[8]||(l[8]=o=>w.value=o),options:U.value,"aria-labelledby":"basic"},null,8,["modelValue","options"])])])]),s("div",te,[s("div",ae,[a(S,{class:R({"opacity-25":t(e).processing}),disabled:t(e).processing},{default:v(()=>[p(" Registrar Usuario ")]),_:1},8,["class","disabled"])])])],32)])]),s("div",le,[re,s("div",ie,[s("div",ne,[de,s("a",{href:n.route("plantillaRes.excel"),class:"flex inline-flex text-white bg-green-800 hover:bg-blue-800 font-medium rounded-lg text-sm px-4 py-2 mt-4"},[ce,p("Descargar plantilla ")],8,ue),me,s("form",{onSubmit:k(C,["prevent"])},[s("div",pe,[a(m,{for:"tipo",value:"Tipo votante"}),u.tipos.length?x((r(),i("select",{key:0,"onUpdate:modelValue":l[9]||(l[9]=o=>t(e).tipo=o),class:"block w-full px-4 py-1 mt-1 text-base text-gray-900 border border-gray-600 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"},[ge,(r(!0),i(b,null,_(u.tipos,o=>(r(),i("option",{value:o.nombre,key:o.id},h(o.nombre),9,fe))),128))],512)),[[y,t(e).tipo]]):(r(),i("p",ve,[p("No hay tipos de usuarios registrados, registrar uno nuevo "),s("a",{href:n.route("tipos.index")},"Aquí",8,be)])),a(d,{class:"mt-2",message:t(e).errors.tipo},null,8,["message"])]),s("div",xe,[a(m,{for:"evento",value:"Evento votante"}),u.eventos.length?x((r(),i("select",{key:0,"onUpdate:modelValue":l[10]||(l[10]=o=>t(e).eventos=o),class:"block w-full px-4 py-1 mt-1 text-base text-gray-900 border border-gray-600 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"},[ye,(r(!0),i(b,null,_(u.eventos,o=>(r(),i("option",{value:o.id,key:o.id},h(o.nombre),9,_e))),128))],512)),[[y,t(e).eventos]]):(r(),i("p",he,[p("No hay eventos registrados, registrar uno nuevo "),s("a",{href:n.route("eventos.index")},"Aquí",8,we)])),a(d,{class:"mt-2",message:t(e).errors.eventos},null,8,["message"])]),a(f,{id:"cargueMasivoVotantes",type:"file",class:"mt-4 block w-full",onChange:l[11]||(l[11]=o=>z(o))}),a(d,{class:"mt-2",message:t(e).errors.votantes},null,8,["message"]),s("div",null,[s("div",Ve,[a(S,{class:R({"opacity-25":t(e).processing}),disabled:t(e).processing},{default:v(()=>[p(" Enviar ")]),_:1},8,["class","disabled"])])])],32)])])])])]),_:1})],64))}};export{Oe as default};
