import{x as J,T as K,r as w,q as B,c as a,o as r,b as m,u,Z as Q,d as b,e,p as T,j as l,t as n,f as W,v as _,F as U,k as tt}from"./app-DiB1KkhT.js";import{_ as et}from"./AuthenticatedLayout-CY2baGlA.js";import{_ as ot}from"./SecondaryButton-DxK_OncT.js";import{_ as nt}from"./PrimaryButton-Djm7QLAO.js";import{c as st}from"./comunas-DceGOULS.js";import{N as it}from"./vue-easy-lightbox.esm.min-PocARYn1.js";import{_ as lt}from"./Modal-CbnahN_G.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BreadCrumb-8HzKL9Ag.js";import"./SecondaryButtonReturn-BYJIQqSR.js";import"./XCircleIcon-BBVoAfnY.js";import"./index-Dc9-0T9N.js";import"./index-C0JOciBC.js";import"./index-Drx4wkZ_.js";const at={class:"p-4 overflow-x-hidden w-full"},rt={class:"bg-white shadow-md rounded-lg p-6 mb-6"},dt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ut={key:0},ct={class:"bg-white shadow-md rounded-lg p-6 flex flex-wrap gap-8 items-start"},vt={class:"sm:flex-shrink-0 flex flex-col items-center"},mt=["src"],gt={key:1,class:"text-gray-400 italic"},bt={class:"sm:flex-shrink-0 flex flex-col items-center"},ft=["src"],pt={key:1,class:"text-gray-400 italic"},xt={class:"bg-white shadow-md rounded-lg p-6 mt-6 flex flex-col md:flex-row gap-8 items-start"},ht={class:"w-auto"},wt={class:""},yt={key:0,class:""},kt={class:"flex flex-col gap-2 w-full md:w-1/3"},Nt={class:"flex flex-col md:flex-row gap-4 mt-8 justify-center items-center h-full"},Ct={class:"flex justify-between items-center bg-azul text-white px-4 py-4"},Dt={class:"px-6 py-4"},$t=["src"],St={class:"text-gray-800 font-medium"},jt={class:"text-gray-800 font-medium"},At={class:"text-gray-800 font-medium"},Rt={class:"text-gray-800 font-medium"},Et={class:"text-gray-800 font-medium"},zt={class:"flex justify-end items-center gap-2 mt-6"},Ft=["disabled"],It=["disabled"],C=5,Jt={__name:"Show",props:{votante:{type:Object,required:!0},duplicados:{type:Object}},setup(o){const f=J("$swal"),p=o;console.log(p);const d=K({id:p.votante.id,motivo:""}),D=w(""),y=w(!1),k=w(!1),c=w(1),$=B(()=>Math.ceil(p.duplicados.length/C)),q=B(()=>{const i=(c.value-1)*C;return p.duplicados.slice(i,i+C)}),S=i=>{D.value=i,y.value=!0},G=()=>{y.value=!1},O=i=>{const t=new Date(i),v=t.getFullYear(),x=String(t.getMonth()+1).padStart(2,"0"),h=String(t.getDate()).padStart(2,"0");return`${v}-${x}-${h}`},H=[{url:route("gestion_registros.index"),text:"Gestion de registros"},{url:"",text:"Detalle registro"}],N=i=>`/storage/uploads/fotos/${i}`,j=i=>`/storage/uploads/documentos/${i}`,X=i=>{var t;return console.log(i),(t=st.find(v=>v.value==i))==null?void 0:t.label},Y=()=>{d.post(route("aprobarRegistro"),{onSuccess:function(){f({title:"Registro Aprobado",text:"El registro ha sido aprobado exitosamente",icon:"success"}).then(()=>{window.location.href=route("gestion_registros.index")})},onError:function(){f({title:"Error al aprobar registro",text:"Error al intentar aprobar este registro, por favor vuelve a intentar",icon:"error"})}})},Z=()=>{d.post(route("rechazarRegistro"),{onSuccess:function(){f({title:"Registro Rechazado",text:"El registro ha sido rechazado exitosamente",icon:"success"}).then(()=>{window.location.href=route("gestion_registros.index")})},onError:function(){f({title:"Error al rechazar registro",text:"Error al intentar rechazar este registro, por favor vuelve a intentar",icon:"error"})}})};return(i,t)=>(r(),a(U,null,[m(u(Q),{title:"Validación del votante"}),m(et,{breadCrumbLinks:H},{header:b(()=>t[7]||(t[7]=[e("div",{class:"flex justify-between items-center"},[e("h1",{class:"text-2xl font-bold"},"Detalle del Registro")],-1)])),default:b(()=>{var v,x,h,A,R,E,z,F,I,V,P,L,M;return[e("div",at,[e("div",rt,[t[20]||(t[20]=e("h2",{class:"text-lg font-bold mb-4 text-blue-900"},"Datos del votante",-1)),e("div",dt,[e("div",null,[t[8]||(t[8]=e("b",null,"Nombre:",-1)),l(" "+n(((v=o.votante.votante)==null?void 0:v.nombre)||"Sin información"),1)]),e("div",null,[t[9]||(t[9]=e("b",null,"Tipo de documento:",-1)),l(" "+n(((x=o.votante.votante)==null?void 0:x.tipo_documento)||"N/A"),1)]),e("div",null,[t[10]||(t[10]=e("b",null,"Número de documento:",-1)),l(" "+n(((h=o.votante.votante)==null?void 0:h.identificacion)||"N/A"),1)]),e("div",null,[t[11]||(t[11]=e("b",null,"Fecha de nacimiento:",-1)),l(" "+n(((A=o.votante.votante)==null?void 0:A.nacimiento)||"N/A"),1)]),e("div",null,[t[12]||(t[12]=e("b",null,"Genero:",-1)),l(" "+n(((R=o.votante.votante)==null?void 0:R.genero)||"N/A"),1)]),e("div",null,[t[13]||(t[13]=e("b",null,"Comuna/Corregimiento:",-1)),l(" "+n(X(o.votante.subtipo)||"N/A"),1)]),e("div",null,[t[14]||(t[14]=e("b",null,"Barrio:",-1)),l(" "+n(((E=o.votante.votante)==null?void 0:E.barrio)||"N/A"),1)]),e("div",null,[t[15]||(t[15]=e("b",null,"Dirección:",-1)),l(" "+n(((z=o.votante.votante)==null?void 0:z.direccion)||"N/A"),1)]),e("div",null,[t[16]||(t[16]=e("b",null,"Contacto:",-1)),t[17]||(t[17]=e("br",null,null,-1)),l(" Email: "+n(((F=o.votante.votante)==null?void 0:F.email)||"N/A")+" ",1),t[18]||(t[18]=e("br",null,null,-1)),l(" Celular: "+n(((I=o.votante.votante)==null?void 0:I.celular)||"N/A"),1)]),o.votante.intentos>0?(r(),a("div",ut,[t[19]||(t[19]=e("b",null,"Motivo rechazo:",-1)),l(" "+n(o.votante.motivo||"N/A"),1)])):T("",!0)])]),e("div",ct,[e("div",vt,[t[21]||(t[21]=e("h2",null,"Fotografía",-1)),(V=o.votante.votante)!=null&&V.user.biometrico?(r(),a("img",{key:0,src:N((P=o.votante.votante)==null?void 0:P.user.biometrico.photo),alt:"Foto del votante",onClick:t[0]||(t[0]=s=>{var g;return S(N((g=o.votante.votante)==null?void 0:g.user.biometrico.photo))}),class:"sm:w-64 sm:h-64 w-full cursor-pointer sm:object-cover object-contain rounded-lg border shadow"},null,8,mt)):(r(),a("span",gt,"Sin foto"))]),e("div",bt,[t[22]||(t[22]=e("h2",null,"Frontal",-1)),(L=o.votante.votante)!=null&&L.user.biometrico?(r(),a("img",{key:0,src:j((M=o.votante.votante)==null?void 0:M.user.biometrico.cedula_front),alt:"Foto del votante",onClick:t[1]||(t[1]=s=>{var g;return S(j((g=o.votante.votante)==null?void 0:g.user.biometrico.cedula_front))}),class:"w-full sm:h-64 cursor-pointer sm:object-cover object-contain rounded-lg border shadow"},null,8,ft)):(r(),a("span",pt,"Sin foto"))])]),e("div",xt,[e("div",ht,[e("div",wt,[t[23]||(t[23]=e("b",null,"Validación:",-1)),l(" "+n(o.votante.validaciones),1)]),o.duplicados.length>0?(r(),a("div",yt,[e("button",{onClick:t[2]||(t[2]=s=>k.value=!0),class:"bg-secondary text-white hover:scale-105 hover:bg-primary p-2 cursor-pointer rounded-md mt-2"}," Ver duplicados ")])):T("",!0)]),e("div",kt,[t[25]||(t[25]=e("b",null,"Motivo de rechazo:",-1)),W(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>u(d).motivo=s),class:"border rounded p-2"},t[24]||(t[24]=[e("option",{value:"",disabled:""},"Seleccione un motivo",-1),e("option",{value:"aprobado"},"No hay motivos (aprobado)",-1),e("option",{value:"Documentos incorrectos"}," Documento incorrecto ",-1),e("option",{value:"Identidad no validada"},"Identidad no validada",-1),e("option",{value:"Parte frontal del documento poco visible"}," Parte frontal del documento poco visible ",-1),e("option",{value:"Registro duplicado"},"Registro duplicado",-1),e("option",{value:"Información errónea, en comparación con la documentación"}," Información errónea, en comparación con la documentación ",-1),e("option",{value:"Dirección diferente a la comuna/corregimiento"}," Dirección diferente a la comuna/corregimiento ",-1)]),512),[[_,u(d).motivo]])])]),e("div",Nt,[m(nt,{onClick:Y,class:"flex h-full items-center",disabled:u(d).processing||u(d).motivo!==""&&u(d).motivo!=="aprobado"},{default:b(()=>t[26]||(t[26]=[l(" Aprobar ")])),_:1},8,["disabled"]),m(ot,{onClick:Z,class:"!bg-red-500 text-white",disabled:u(d).processing},{default:b(()=>t[27]||(t[27]=[l(" Rechazar ")])),_:1},8,["disabled"])]),m(u(it),{visible:y.value,imgs:[D.value],onHide:G},null,8,["visible","imgs"])]),m(lt,{show:k.value,closeable:!0},{default:b(()=>[e("div",Ct,[t[28]||(t[28]=e("h2",{class:"text-2xl font-semibold text-center"}," Registros duplicados o similares ",-1)),e("button",{onClick:t[4]||(t[4]=s=>k.value=!1),class:"text-white text-xl hover:text-gray-300"}," X ")]),e("div",Dt,[(r(!0),a(U,null,tt(q.value,s=>(r(),a("div",{key:s.id,class:"flex gap-4 items-center mb-4 border-b pb-2"},[e("img",{src:N(s.photo),alt:"Foto",class:"w-36 h-full object-cover rounded"},null,8,$t),e("div",null,[e("p",St," ID: "+n(s.user.votantes.hash_votantes[0].id),1),e("p",jt," Nombre: "+n(s.user.votantes.nombre),1),e("p",At," Identificación: "+n(s.user.votantes.identificacion),1),e("p",Rt," Creación: "+n(O(s.user.votantes.hash_votantes[0].created_at)),1),e("p",Et,"Estado: "+n(s.estado),1)])]))),128)),e("div",zt,[e("button",{class:"px-3 py-1 bg-gray-200 text-sm rounded hover:bg-gray-300",disabled:c.value===1,onClick:t[5]||(t[5]=s=>c.value--)}," Anterior ",8,Ft),e("span",null,"Página "+n(c.value)+" de "+n($.value),1),e("button",{class:"px-3 py-1 bg-gray-200 text-sm rounded hover:bg-gray-300",disabled:c.value===$.value,onClick:t[6]||(t[6]=s=>c.value++)}," Siguiente ",8,It)])])]),_:1},8,["show"])]}),_:1})],64))}};export{Jt as default};
