import{x as $,T as j,r as u,c as B,w as y,a as p,b as f,d as r,u as o,Z as L,e as b,f as t,t as n,p as N,n as h,j as g,m as E,g as P,v as S,F as q}from"./app-8Z0il1I3.js";import{_ as A}from"./AuthenticatedLayout-BHUw5IAU.js";import{_ as k}from"./TextInput-BvbAqO4C.js";import{_ as x}from"./InputError-D702h7H7.js";import{_ as M}from"./PrimaryButton-hpdjS4O4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"w-full grid md:grid-cols-3 gap-4"},T={class:"md:col-span-2 p-4 bg-white rounded-md shadow-md h-full"},U={class:"text-lg font-bold mb-4"},D={class:"mb-4"},F={key:0},R={class:"mb-4"},Z={class:"mb-4"},G={class:"mt-4 flex flex-col items-end"},H={class:"md:col-span-1 flex flex-col items-center h-full p-5 bg-white shadow-sm rounded-md"},I={class:"p-4 md:p-5 w-full border border-gray rounded-md shadow-sm"},J={class:"mb-6"},K={class:""},Q={class:"mb-8"},W={key:0},X={class:"bg-red-600 font-bold text-white p-2"},le={__name:"Edit",props:{parametro:{type:Object,default:()=>({})},codigos:{type:Object,default:()=>({})}},setup(v){const _=$("$swal"),a=v,s=j({detalle:a.parametro.detalle||"",cod:a.parametro.cod||"",estado:a.parametro.estado,id:a.parametro.id}),V=[{url:"/parametros",text:"Listado de parámetros"},{url:"",text:"Editar parámetro"}],m=u(!1),d=u(!1),c=u(""),w=B(()=>{const e=s.detalle.trim().length;return e>=100?m.value=!0:m.value=!1,e});y(w,()=>{s.detalle=s.detalle.trim()});const C=()=>{d.value=!1;const l=s.cod;if(l==a.parametro.cod){d.value=!1;return}const e=a.codigos.find(i=>i.cod===l);console.log("props.codigos",a.parametro.cod),e?(console.log("existingCode",e.cod),c.value="El código ya existe.",d.value=!0):(c.value="",d.value=!1)};y(()=>s.cod,l=>{l&&C()});const z=()=>{d.value||s.patch(route("parametros.update",a.parametro.id),{onSuccess:()=>_({title:"Registro Actualizado",text:"El parámetro se ha actualizado exitosamente",icon:"success"}).then(l=>{window.location.reload()}),onError:l=>{_({title:"Error",text:"Ocurrió un error al registrar el parámetro.",icon:"error"})}})};return(l,e)=>(f(),p(q,null,[r(o(L),{title:"Editar parámetro"}),r(A,{breadCrumbLinks:V},{header:b(()=>e[3]||(e[3]=[g(" Editar Parametro ")])),default:b(()=>[t("div",O,[t("div",T,[t("h2",U," Editar Parámetro "+n(v.parametro.id),1),t("form",{onSubmit:N(z,["prevent"]),class:"sm:grid sm:grid-cols-2 gap-4"},[t("div",D,[e[4]||(e[4]=t("label",{for:"detalle",class:"block text-sm font-medium text-gray-700 mb-2"},"nombre del parámetro",-1)),r(k,{id:"detalle",type:"text",class:"mt-1 block w-full",modelValue:o(s).detalle,"onUpdate:modelValue":e[0]||(e[0]=i=>o(s).detalle=i),required:"",autofocus:"",autocomplete:"nombre"},null,8,["modelValue"]),t("p",{class:h(["text-gray-500 text-sm mt-2",{"text-red-500":m.value}])},[g(n(w.value)+" caracteres ",1),m.value?(f(),p("span",F,"Límite de caracteres superado")):E("",!0)],2),r(x,{class:"mt-2",message:o(s).errors.detalle},null,8,["message"])]),t("div",R,[e[5]||(e[5]=t("label",{for:"cod",class:"block text-sm font-medium text-gray-700 mb-2"},"código del parámetro",-1)),r(k,{id:"cod",type:"text",class:"mt-1 block w-full",modelValue:o(s).cod,"onUpdate:modelValue":e[1]||(e[1]=i=>o(s).cod=i),required:"",autocomplete:"cod"},null,8,["modelValue"]),r(x,{class:"mt-2",message:o(s).errors.cod},null,8,["message"])]),t("div",Z,[e[7]||(e[7]=t("label",{for:"estado",class:"block text-sm font-medium text-gray-700 mb-2"},"Estado",-1)),P(t("select",{id:"estado","onUpdate:modelValue":e[2]||(e[2]=i=>o(s).estado=i),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2"},e[6]||(e[6]=[t("option",{value:"1"},"Activo",-1),t("option",{value:"0"},"Bloqueado",-1)]),512),[[S,o(s).estado]]),r(x,{class:"mt-2",message:o(s).errors.estado},null,8,["message"])]),t("div",G,[r(M,{class:h({"opacity-25":o(s).processing}),disabled:o(s).processing||m.value||d.value},{default:b(()=>e[8]||(e[8]=[g(" Actualizar Evento ")])),_:1},8,["class","disabled"])])],32)]),t("div",H,[t("div",I,[t("div",J,[e[9]||(e[9]=t("h3",{class:"pb-4"},[t("span",{class:"bg-azul text-white px-2 py-1 rounded-md shadow-md"}," Parámetro ")],-1)),t("p",K,n(o(s).detalle),1)]),t("div",Q,[e[10]||(e[10]=t("h3",{class:"mb-3"},[t("span",{class:"bg-azul text-white px-2 py-1 rounded-md shadow-md"}," Código ")],-1)),t("p",null,n(o(s).cod),1)]),d.value?(f(),p("div",W,[t("em",X,n(c.value),1)])):E("",!0)])])])]),_:1})],64))}};export{le as default};
