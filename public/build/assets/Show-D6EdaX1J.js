import{k as tt,T as et,r as w,c as q,a as r,b as l,d as g,u as c,Z as ot,e as f,f as t,l as H,j as a,t as n,n as nt,g as st,v as it,F as X,h as at}from"./app-i_nL4kQ8.js";import{_ as rt}from"./AuthenticatedLayout-Bs9dqXnS.js";import{_ as lt}from"./SecondaryButton-B3-L__7U.js";import{_ as dt}from"./PrimaryButton-DQYtULWX.js";import{c as ut}from"./comunas-DN-PCrTT.js";import{N as ct}from"./vue-easy-lightbox.esm.min-CTbNG9IP.js";import{_ as vt}from"./Modal-DRRCyd4o.js";import"./index-CDc5L5pR.js";import"./index-BZCaNVLd.js";import"./index-JTdY4afz.js";import"./SecondaryButtonReturn-DIOcsYRO.js";import"./XCircleIcon-B231X9C9.js";const mt={class:"p-4"},gt={class:"bg-white shadow-md rounded-lg p-6 mb-6"},ft={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},bt={key:0},pt={class:"bg-white shadow-md rounded-lg p-6 flex flex-wrap gap-8 items-start"},xt={class:"flex-shrink-0 flex flex-col items-center"},ht=["src"],wt={key:1,class:"text-gray-400 italic"},yt={class:"flex-shrink-0 flex flex-col items-center"},kt=["src"],$t={key:1,class:"text-gray-400 italic"},Nt={class:"flex-shrink-0 flex flex-col items-center"},Ct=["src"],Dt={key:1,class:"text-gray-400 italic"},Ft={class:"bg-white shadow-md rounded-lg p-6 mt-6 flex flex-col md:flex-row gap-8 items-start"},St={class:"w-auto"},jt={class:""},Rt={key:0,class:""},zt={class:"flex flex-col gap-2 w-full md:w-1/3"},At={class:"flex flex-col gap-2 w-full md:w-1/3"},Et={class:"flex flex-col md:flex-row gap-4 mt-8 justify-center items-center h-full"},It={class:"flex justify-between items-center bg-azul text-white px-4 py-4"},Vt={class:"px-6 py-4"},Pt=["src"],Lt={class:"text-gray-800 font-medium"},Bt={class:"text-gray-800 font-medium"},Mt={class:"text-gray-800 font-medium"},Ut={class:"text-gray-800 font-medium"},Tt={class:"text-gray-800 font-medium"},Gt={class:"flex justify-end items-center gap-2 mt-6"},Ot=["disabled"],qt=["disabled"],C=5,ne={__name:"Show",props:{votante:{type:Object,required:!0},duplicados:{type:Object}},setup(o){const b=tt("$swal"),p=o;console.log(p);const d=et({id:p.votante.id,motivo:""}),D=w(""),y=w(!1),k=w(!1),v=w(1),F=q(()=>Math.ceil(p.duplicados.length/C)),Y=q(()=>{const s=(v.value-1)*C;return p.duplicados.slice(s,s+C)}),$=s=>{D.value=s,y.value=!0},Z=()=>{y.value=!1},J=s=>{const e=new Date(s),m=e.getFullYear(),x=String(e.getMonth()+1).padStart(2,"0"),h=String(e.getDate()).padStart(2,"0");return`${m}-${x}-${h}`},K=[{url:route("gestion_registros.index"),text:"Gestion de registros"},{url:"",text:"Detalle registro"}],N=s=>`/storage/uploads/fotos/${s}`,S=s=>`/storage/uploads/documentos/${s}`,j=s=>`/storage/uploads/firmas/${s}`,Q=s=>{var e;return console.log(s),(e=ut.find(m=>m.value==s))==null?void 0:e.label},W=()=>{d.post(route("aprobarRegistro"),{onSuccess:function(){b({title:"Registro Aprobado",text:"El registro ha sido aprobado exitosamente",icon:"success"}).then(()=>{window.location.href=route("gestion_registros.index")})},onError:function(){b({title:"Error al aprobar registro",text:"Error al intentar aprobar este registro, por favor vuelve a intentar",icon:"error"})}})},_=()=>{d.post(route("rechazarRegistro"),{onSuccess:function(){b({title:"Registro Rechazado",text:"El registro ha sido rechazado exitosamente",icon:"success"}).then(()=>{window.location.href=route("gestion_registros.index")})},onError:function(){b({title:"Error al rechazar registro",text:"Error al intentar rechazar este registro, por favor vuelve a intentar",icon:"error"})}})};return(s,e)=>(l(),r(X,null,[g(c(ot),{title:"Validación del votante"}),g(rt,{breadCrumbLinks:K},{header:f(()=>e[8]||(e[8]=[t("div",{class:"flex justify-between items-center"},[t("h1",{class:"text-2xl font-bold"},"Detalle del Registro")],-1)])),default:f(()=>{var m,x,h,R,z,A,E,I,V,P,L,B,M,U,T,G,O;return[t("div",mt,[t("div",gt,[e[18]||(e[18]=t("h2",{class:"text-lg font-bold mb-4 text-blue-900"},"Datos del votante",-1)),t("div",ft,[t("div",null,[e[9]||(e[9]=t("b",null,"Nombre:",-1)),a(" "+n(((m=o.votante.votante)==null?void 0:m.nombre)||"Sin información"),1)]),t("div",null,[e[10]||(e[10]=t("b",null,"Tipo de documento:",-1)),a(" "+n(((x=o.votante.votante)==null?void 0:x.tipo_documento)||"N/A"),1)]),t("div",null,[e[11]||(e[11]=t("b",null,"Número de documento:",-1)),a(" "+n(((h=o.votante.votante)==null?void 0:h.identificacion)||"N/A"),1)]),t("div",null,[e[12]||(e[12]=t("b",null,"Fecha de nacimiento:",-1)),a(" "+n(((R=o.votante.votante)==null?void 0:R.nacimiento)||"N/A"),1)]),t("div",null,[e[13]||(e[13]=t("b",null,"Genero:",-1)),a(" "+n(((z=o.votante.votante)==null?void 0:z.genero)||"N/A"),1)]),t("div",null,[e[14]||(e[14]=t("b",null,"Comuna/Corregimiento:",-1)),a(" "+n(Q(o.votante.subtipo)||"N/A"),1)]),t("div",null,[e[15]||(e[15]=t("b",null,"Barrio:",-1)),a(" "+n(((A=o.votante.votante)==null?void 0:A.barrio)||"N/A"),1)]),t("div",null,[e[16]||(e[16]=t("b",null,"Dirección:",-1)),a(" "+n(((E=o.votante.votante)==null?void 0:E.direccion)||"N/A"),1)]),o.votante.intentos>0?(l(),r("div",bt,[e[17]||(e[17]=t("b",null,"motivo rechazo:",-1)),a(" "+n(o.votante.motivo||"N/A"),1)])):H("",!0)])]),t("div",pt,[t("div",xt,[e[19]||(e[19]=t("h2",null,"Fotografía",-1)),(I=o.votante.votante)!=null&&I.user.biometrico?(l(),r("img",{key:0,src:N((V=o.votante.votante)==null?void 0:V.user.biometrico.photo),alt:"Foto del votante",onClick:e[0]||(e[0]=i=>{var u;return $(N((u=o.votante.votante)==null?void 0:u.user.biometrico.photo))}),class:"w-64 h-64 cursor-pointer object-cover rounded-lg border shadow"},null,8,ht)):(l(),r("span",wt,"Sin foto"))]),t("div",yt,[e[20]||(e[20]=t("h2",null,"frontal",-1)),(P=o.votante.votante)!=null&&P.user.biometrico?(l(),r("img",{key:0,src:S((L=o.votante.votante)==null?void 0:L.user.biometrico.cedula_front),alt:"Foto del votante",onClick:e[1]||(e[1]=i=>{var u;return $(S((u=o.votante.votante)==null?void 0:u.user.biometrico.cedula_front))}),class:"w-full h-64 cursor-pointer object-cover rounded-lg border shadow"},null,8,kt)):(l(),r("span",$t,"Sin foto"))]),t("div",Nt,[e[21]||(e[21]=t("h2",null,"Firma",-1)),(B=o.votante.votante)!=null&&B.user.biometrico?(l(),r("img",{key:0,src:j((M=o.votante.votante)==null?void 0:M.user.biometrico.firma),alt:"Foto del votante",onClick:e[2]||(e[2]=i=>{var u;return $(j((u=o.votante.votante)==null?void 0:u.user.biometrico.firma))}),class:"w-full h-64 cursor-pointer object-cover rounded-lg border shadow"},null,8,Ct)):(l(),r("span",Dt,"Sin foto"))])]),t("div",Ft,[t("div",St,[t("div",jt,[e[22]||(e[22]=t("b",null,"Validación:",-1)),a(" "+n(o.votante.validaciones),1)]),o.duplicados.length>0?(l(),r("div",Rt,[t("button",{onClick:e[3]||(e[3]=i=>k.value=!0),class:"bg-secondary text-white hover:scale-105 hover:bg-primary p-2 cursor-pointer rounded-md mt-2"}," Ver duplicados ")])):H("",!0)]),t("div",zt,[e[23]||(e[23]=t("b",null," Edad estimada: ",-1)),t("p",{class:nt({"text-red font-bold":parseInt((T=(U=o.votante.votante)==null?void 0:U.user.biometrico)==null?void 0:T.edad_estimada)<14})},n((O=(G=o.votante.votante)==null?void 0:G.user.biometrico)==null?void 0:O.edad_estimada)+" años ",3)]),t("div",At,[e[25]||(e[25]=t("b",null,"Motivo de rechazo:",-1)),st(t("select",{"onUpdate:modelValue":e[4]||(e[4]=i=>c(d).motivo=i),class:"border rounded p-2"},e[24]||(e[24]=[t("option",{value:"",disabled:""},"Seleccione un motivo",-1),t("option",{value:"aprobado"},"No hay motivos (aprobado)",-1),t("option",{value:"Documentos incorrectos"}," Documentos incorrectos ",-1),t("option",{value:"Identidad no validada"},"Identidad no validada",-1),t("option",{value:"Parte frontal del documento poco visible"}," Parte frontal del documento poco visible ",-1),t("option",{value:"Firma poco visible"},"Firma poco visible",-1),t("option",{value:"Firma diferente a la presentada en el documento de identificación"}," Firma diferente a la presentada en el documento de identificación ",-1),t("option",{value:"Registro duplicado"},"Registro duplicado",-1),t("option",{value:"Información errónea, en comparación con la documentación"}," Información errónea, en comparación con la documentación ",-1),t("option",{value:"Dirección diferente a la comuna/corregimiento"}," Dirección diferente a la comuna/corregimiento ",-1)]),512),[[it,c(d).motivo]])])]),t("div",Et,[g(dt,{onClick:W,class:"flex h-full items-center",disabled:c(d).processing||c(d).motivo!==""&&c(d).motivo!=="aprobado"},{default:f(()=>e[26]||(e[26]=[a(" Aprobar ")])),_:1},8,["disabled"]),g(lt,{onClick:_,class:"!bg-red-500 text-white",disabled:c(d).processing},{default:f(()=>e[27]||(e[27]=[a(" Rechazar ")])),_:1},8,["disabled"])]),g(c(ct),{visible:y.value,imgs:[D.value],onHide:Z},null,8,["visible","imgs"])]),g(vt,{show:k.value,closeable:!0},{default:f(()=>[t("div",It,[e[28]||(e[28]=t("h2",{class:"text-2xl font-semibold text-center"}," Registros duplicados o similares ",-1)),t("button",{onClick:e[5]||(e[5]=i=>k.value=!1),class:"text-white text-xl hover:text-gray-300"}," X ")]),t("div",Vt,[(l(!0),r(X,null,at(Y.value,i=>(l(),r("div",{key:i.id,class:"flex gap-4 items-center mb-4 border-b pb-2"},[t("img",{src:N(i.photo),alt:"Foto",class:"w-36 h-full object-cover rounded"},null,8,Pt),t("div",null,[t("p",Lt," ID: "+n(i.user.votantes.hash_votantes[0].id),1),t("p",Bt," Nombre: "+n(i.user.votantes.nombre),1),t("p",Mt," Identificación: "+n(i.user.votantes.identificacion),1),t("p",Ut," Creación: "+n(J(i.user.votantes.hash_votantes[0].created_at)),1),t("p",Tt,"Estado: "+n(i.estado),1)])]))),128)),t("div",Gt,[t("button",{class:"px-3 py-1 bg-gray-200 text-sm rounded hover:bg-gray-300",disabled:v.value===1,onClick:e[6]||(e[6]=i=>v.value--)}," Anterior ",8,Ot),t("span",null,"Página "+n(v.value)+" de "+n(F.value),1),t("button",{class:"px-3 py-1 bg-gray-200 text-sm rounded hover:bg-gray-300",disabled:v.value===F.value,onClick:e[7]||(e[7]=i=>v.value++)}," Siguiente ",8,qt)])])]),_:1},8,["show"])]}),_:1})],64))}};export{ne as default};
