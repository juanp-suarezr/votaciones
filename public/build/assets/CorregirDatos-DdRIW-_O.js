import{x as ze,r as n,T as Me,w as $,s as Te,c as m,o as u,b as r,u as s,Z as $e,d as y,e as a,p as O,f as D,F as P,k as Z,t as I,v as J,G as ae,j as w,D as xe,n as A,l as Oe,z as he}from"./app-BeL4ZtGF.js";import{_ as Re}from"./AuthenticatedLayout-DkqAh0g2.js";import{s as ye,t as Ne,e as Le,c as Pe}from"./etnia-CTr2hPKf.js";import{b as Ae}from"./barrios-CntC0Qm4.js";import{_ as g}from"./InputError-BIsn0qE4.js";import{_ as x}from"./InputLabel-BLmBANIq.js";import{_ as K}from"./PrimaryButton-DXLJpU7g.js";import{_ as Ge}from"./SecondaryButton-V8m1zJof.js";import{_ as Q}from"./Modal-CfvmMg9O.js";import{_ as q}from"./TextInput-B7dmLwRz.js";import{s as we}from"./index-D5kCo_JL.js";import{s as He}from"./index-DfnNQQ6p.js";import{f as We}from"./cedulaFrontEjemplo-eqgE4YJW.js";import{n as se,d as Ye,T as Xe}from"./FaceMatcher-DQZ88WER.js";import{r as Ze}from"./PhotoIcon-DmS6skjR.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BreadCrumb-DjC3BFDT.js";import"./SecondaryButtonReturn-CI7h_EWG.js";import"./index-Dm4alEo0.js";import"./index-B92ewlIr.js";import"./index-DZGx4-j6.js";import"./XCircleIcon-BKaxTW25.js";import"./index-CDCBxyk1.js";import"./index-BUutqwgm.js";import"./index-B6Rg0sH7.js";import"./index-BT0GFiRM.js";const Je={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ke={class:"mt-4 justify-center"},Qe={class:"m-auto py-4 px-4"},eo={key:0,class:"sm:grid sm:grid-cols-2 gap-6 h-full"},oo={class:"mb-2"},to={class:"mb-2"},ao={class:"mb-2"},so=["value"],io={class:"mb-2"},ro={key:0,class:"text-red-500"},lo={class:"col-span-2 flex justify-end"},no={key:1,class:"sm:grid sm:grid-cols-2 gap-6"},co={class:"mb-2"},uo={class:"mt-2 block sm:flex"},mo={class:""},vo={class:"sm:ms-6"},po={key:0,class:"sm:ms-6"},fo={key:1,class:"sm:ms-6"},go={class:"mb-2"},bo=["value"],xo={class:"mb-2"},ho=["value"],yo={class:"mb-2 w-full col-span-2"},wo={class:"bg-azul rounded-md p-2 w-full h-full"},_o={class:"text-white text-base"},ko=["href"],Co={class:"mb-2"},Vo={class:"mb-2"},Do={key:0,class:"w-full mt-2"},jo={class:"mb-2"},So={class:"my-4 col-span-2 mb-2"},Eo={class:"mb-4 col-span-2 mb-2"},Fo={class:"col-span-2 flex justify-between gap-2"},Uo={class:"flex pt-4 justify-end"},qo={class:"flex pt-4 justify-end h-full"},Bo={key:2,class:"gap-6"},Io={class:"sm:grid sm:grid-cols-2 gap-2 h-full sm:px-16 px-4"},zo={class:"w-full h-full mt-4"},Mo={class:"w-full"},To=["src"],$o={class:"mb-2 h-full flex justify-center items-center mt-4"},Oo={class:"border-2 border-gray-300 rounded-md p-2 h-full"},Ro={class:"flex justify-center"},No=["src","alt"],Lo={key:0,class:"flex justify-center mt-2"},Po={class:"w-full"},Ao={class:"col-span-2 flex justify-between gap-2 mt-4"},Go={class:"flex pt-4 justify-end"},Ho={class:"flex pt-4 justify-end"},Wo={class:"flex justify-center my-12"},Yo={class:"flex justify-center gap-4 text-center h-full my-12"},Xo={class:"my-12 px-4"},Zo=["value"],Jo=["disabled"],Ko={class:"text-justify sm:text-2xl text-xl p-6 mt-6"},Qo={class:"flex justify-center gap-4 text-center h-full my-6"},Dt={__name:"CorregirDatos",props:{votante:{type:Object,required:!0},comunas:{type:Object,required:!0}},setup(ie){const _=ze("$swal"),_e=[{url:"",text:"Corregir datos"}],l=ie;console.log(l);const ke=n(l.comunas);console.log("Votante data:",l.votante);const o=Me({id_votante:l.votante.id||"",nombre:l.votante.nombre||"",identificacion:l.votante.identificacion||"",tipo_documento:l.votante.tipo_documento||"",nacimiento:l.votante.nacimiento||"",cedula_front:null,genero:l.votante.genero||"",etnia:l.votante.etnia||"",condicion:l.votante.condicion||"",direccion:l.votante.direccion||"",comuna:l.votante.hash_votantes[0].subtipo||"",barrio:l.votante.barrio||"",embedding:l.votante.user.biometrico.embedding||"",photo:null,validaciones:l.votante.hash_votantes[0].validaciones||"",checked:!0,declaracion:!0,campoObligatorio:""}),G=n(""),ee=n([]),C=n(!1),oe=n(!0),Ce=n([{label:"Información Personal"},{label:"Datos Demográficos"},{label:"Registro datos"}]),Ve=n([{label:"paso 1"},{label:"paso 2"},{label:"paso 3"}]),b=n(0),z=n(""),R=n(""),v=n(!1),V=n(!1),H=n(!1),M=n(!1),j=n(null),W=n([]),N=n(""),h=n(null),k=n(""),re=n(!1),S=n(!1),le=n(!1),T=n(0),De=(i,e)=>o.cedula_front===null?`/storage/uploads/documentos/${i}`:i;$(H,i=>{i&&(o.genero="")}),$(G,i=>{i&&(o.comuna=i,ee.value=Ae.find(e=>e.id===parseInt(i.id)).barrios,console.log(ee.value))}),$(()=>o.barrio,i=>{console.log(i),i=="Otro"&&(o.barrio="",le.value=!0)}),$(()=>o.data(),i=>{Object.keys(o.errors).forEach(e=>{i[e]&&(o.errors[e]=null)})},{deep:!0});const je=(i,e)=>{const t=e.target.files[0];if(!t)return;((p,Y)=>{const X=new FileReader;X.onload=te=>{const E=new Image;E.onload=()=>{const c=document.createElement("canvas"),B=c.getContext("2d"),F=1024,L=1024;let f=E.width,U=E.height;(f>F||U>L)&&(f>U?(U=Math.round(U*F/f),f=F):(f=Math.round(f*L/U),U=L)),c.width=f,c.height=U,B.drawImage(E,0,0,f,U),c.toBlob(ge=>{if(ge.size>2e6){Swal.fire({icon:"error",title:"Error",text:"Incluso comprimida, la imagen supera los 2MB."});return}const be=new File([ge],p.name,{type:"image/jpeg",lastModified:Date.now()});Y(be,URL.createObjectURL(be))},"image/jpeg",.8)},E.src=te.target.result},X.readAsDataURL(p)})(t,(p,Y)=>{o[i]=p,j.value=Y})},Se=i=>{o.cedula_front=null,j.value=null},ne=i=>{if(!i)return"";const e=new Date(i),t=e.getFullYear(),d=String(e.getMonth()+1).padStart(2,"0"),p=String(e.getDate()).padStart(2,"0");return`${t}-${d}-${p}`},de=i=>{b.value=i,v.value=!0},ce=async()=>{C.value=!0;try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(d=>d.stop()),await se.tinyFaceDetector.loadFromUri("/models/tiny_face_detector"),await se.faceRecognitionNet.loadFromUri("/models/face_recognition"),await se.faceLandmark68Net.loadFromUri("/models/face_landmark_68");const e=await navigator.mediaDevices.enumerateDevices();W.value=e.filter(d=>d.kind==="videoinput");const t=W.value.find(d=>d.label.toLowerCase().includes("user"))||W.value[0];console.log(t),N.value=(t==null?void 0:t.deviceId)||"",C.value=!1,V.value=!0,await ve(N.value)}catch(i){C.value=!1,T.value==3,console.error("Error al iniciar:",i),k.value="No se pudo acceder a la cámara."}},Ee=async()=>{k.value="",S.value=!0;const i=t=>parseInt(sessionStorage.getItem(t)||"0"),e=(t,d)=>sessionStorage.setItem(t,d.toString());if(!re.value){i("fallo_camara")+1,k.value="La cámara no está lista.",S.value=!1;return}try{const t=await Ye(h.value,new Xe).withFaceLandmarks().withFaceDescriptor();if(console.log("entro -- validador"),!t){S.value=!1,k.value="No se detectó un rostro.",T.value+=1;const c=document.createElement("canvas");c.width=h.value.videoWidth,c.height=h.value.videoHeight,c.getContext("2d").drawImage(h.value,0,0,c.width,c.height);const F=await new Promise(f=>c.toBlob(f,"image/jpeg")),L=new File([F],"photo.jpg",{type:"image/jpeg"});o.photo=L,T.value==3&&_.fire({title:"Error en validación",text:"Error, no se detectó un rostro, vuelve a intentar o avanzar con la imagen poco visible y posiblemente sin registro biométrico (alta probabilidad de rechazo)",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(f=>{f.isConfirmed?(o.embedding="",o.validaciones="no_rostro",V.value=!1,M.value=!0):f.dismiss===Swal.DismissReason.cancel&&(console.log("Usuario decide volver a intentar"),k.value="",T.value=0)});return}const d=t.descriptor;o.embedding=d,console.log("emb",d);const p=document.createElement("canvas");p.width=h.value.videoWidth,p.height=h.value.videoHeight,p.getContext("2d").drawImage(h.value,0,0,p.width,p.height);const X=await new Promise(c=>p.toBlob(c,"image/jpeg")),te=new File([X],"photo.jpg",{type:"image/jpeg"});o.photo=te;const E=new FormData;E.append("embedding",d),S.value=!1,V.value=!1,C.value=!0,he.post(route("face-validate-correccion"),E,{headers:{"Content-Type":"multipart/form-data"}}).then(c=>{k.value=c.data.message,console.log(c),S.value=!1,C.value=!1,c.data.match?_.fire({title:"Error en validación",text:"Usted ya tiene un registro biométrico. Si está seguro que no se ha registrado, puede volver a intentarlo o continuar (probabilidad de rechazo).",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(B=>{B.isConfirmed?(o.validaciones="registro_duplicado",V.value=!1,M.value=!0):B.dismiss===_.DismissReason.cancel&&console.log("Usuario decide volver a intentar")}):_({title:"Validación exitosa",text:"Validación biométrica exitosa",icon:"success",didClose:()=>{V.value=!1,C.value=!0,me()}})}).catch(c=>{S.value=!1,C.value=!1,console.log(c);const B=i("fallo_registro")+1;e("fallo_registro",B),_.fire({title:"Error en validación",text:"Error en la validación, vuelve a intentar o avanzar sin registro biometrico (posibilidad de rechazo)",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(F=>{F.isConfirmed?(o.embedding="",o.validaciones="fallo_registro_biometrico",V.value=!1,M.value=!0):F.dismiss===_.DismissReason.cancel&&console.log("Usuario decide volver a intentar")})})}catch(t){console.error(t),S.value=!1,C.value=!1,T.value==3&&_.fire({title:"Error en validación",text:"Error al procesar el rostro, vuelve a intentar o avanzar sin registro biometrico (posibilidad de rechazo)",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(d=>{d.isConfirmed?(o.embedding="",o.validaciones="fallo_registro",V.value=!1,M.value=!0):d.dismiss===_.DismissReason.cancel&&(console.log("Usuario decide volver a intentar"),k.value="",T.value=0)}),k.value="Error al procesar el rostro."}},Fe=()=>{if(!o.nacimiento)return R.value="Debes ingresar la fecha de nacimiento.",!1;const i=new Date,e=new Date(o.nacimiento);let t=i.getFullYear()-e.getFullYear();const d=i.getMonth()-e.getMonth();return(d<0||d===0&&i.getDate()<e.getDate())&&t--,t<14?(R.value="No cumple con el requisito de edad mínima (14 años), por lo tanto, no puede ejercer el derecho al voto.",!1):(R.value="",!0)},Ue=async()=>{if(v.value=!1,o.nombre&&o.identificacion&&o.tipo_documento&&o.nacimiento){if(!Fe())return;z.value="";try{const i=await qe(o.identificacion);console.log("Identificación existe:",i),i?(z.value="El número de cédula ingresado ya se encuentra registrado en el sistema. /n Por favor, continúe con el proceso de votación ingresando a la plataforma con su número de documento y la contraseña que registró previamente.",v.value=!1):(z.value="",v.value=!0)}catch{z.value="Error al validar la identificación. Intenta de nuevo.",v.value=!1}}v.value?b.value=1:(o.nombre||(o.errors.nombre="Este campo es requerido."),(!o.identificacion||z.value!="")&&(o.errors.identificacion=z.value||"Este campo es requerido."),o.tipo_documento||(o.errors.tipo_documento="Este campo es requerido."),o.fecha_expedicion||(o.errors.fecha_expedicion="Este campo es requerido."),o.lugar_expedicion||(o.errors.lugar_expedicion="Este campo es requerido."),o.nacimiento||(o.errors.nacimiento="Este campo es requerido."))},qe=async i=>(await he.post("/validar-identificacion",{identificacion:i})).data.existe,Be=i=>{switch(v.value=!1,i){case 1:Ue();break;case 2:ue();break}v.value&&(b.value=i)},ue=()=>{v.value=!1,o.genero&&o.etnia&&o.condicion&&o.comuna&&o.barrio&&o.direccion&&o.checked&&o.declaracion&&(v.value=!0,b.value=2),v.value||(o.genero||(o.errors.genero="Este campo es requerido."),o.etnia||(o.errors.etnia="Este campo es requerido."),o.condicion||(o.errors.condicion="Este campo es requerido."),o.comuna||(o.errors.comuna="Este campo es requerido."),o.barrio||(o.errors.barrio="Este campo es requerido."),o.direccion||(o.errors.direccion="Este campo es requerido."),o.checked||(o.errors.checked="Este campo es requerido."),o.declaracion||(o.errors.declaracion="Este campo es requerido."))},Ie=()=>{v.value=!1,console.log("Validando datos del paso 3",j.value),(o.cedula_front||j)&&(console.log("Datos del paso 3 son válidos"),v.value=!0),v.value?o.embedding&&l.votante.hash_votantes[0].validaciones!="no_rostro"?M.value=!0:ce():o.cedula_front||(o.errors.cedula_front="Este campo es requerido.")},me=()=>{o.post(route("corregirDatos"),{onSuccess:()=>{_({title:"Registro actualizado",text:"Registro de usuario actualizado exitosamente. Se realizará la validación de su información, el estado sera notificado a su correo.",icon:"success"}).then(i=>{window.location.href=route("dashboard")}),sessionStorage.removeItem("fallo_camara"),sessionStorage.removeItem("fallo_registro"),sessionStorage.removeItem("registro_duplicado"),o.reset(),pe()},onError:i=>{_({title:"Error",text:"Ocurrió un error al registrar el usuario.",icon:"error"}).then(e=>{b.value=0}),console.error(i)}})},ve=async i=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:i}}});h.value.srcObject=e,re.value=!0}catch(e){console.error("Error al iniciar cámara:",e),k.value="Error al iniciar la cámara."}};$(N,async i=>{i&&await ve(i)});const pe=()=>{var e;const i=(e=h.value)==null?void 0:e.srcObject;i&&i.getTracks().forEach(t=>t.stop()),h.value.srcObject=null};$(V,i=>{i==!1&&pe()});const fe=i=>(console.log(i),console.log(l.comunas),l.comunas.find(e=>e.id==i));return Te(()=>{l.votante.user.biometrico.cedula_front&&(j.value=l.votante.user.biometrico.cedula_front),l.votante.hash_votantes[0].subtipo&&(o.comuna=fe(l.votante.hash_votantes[0].subtipo),G.value=fe(l.votante.hash_votantes[0].subtipo)),o.fecha_expedicion=ne(l.votante.fecha_expedicion),o.nacimiento=ne(l.votante.nacimiento),oe.value=!0}),(i,e)=>(u(),m(P,null,[r(s($e),{title:"Corregir datos"}),r(Re,{breadCrumbLinks:_e},{header:y(()=>e[28]||(e[28]=[w(" Corregir datos ")])),default:y(()=>[a("div",Je,[e[43]||(e[43]=a("div",{class:"p-6 border-b border-gray-200"},[a("h1",null,"Corrección registro")],-1)),a("div",Ke,[r(s(ye),{class:"hidden sm:block",model:Ce.value,activeStep:b.value,"onUpdate:activeStep":e[0]||(e[0]=t=>b.value=t)},null,8,["model","activeStep"]),r(s(ye),{class:"sm:hidden block",model:Ve.value,activeStep:b.value,"onUpdate:activeStep":e[1]||(e[1]=t=>b.value=t)},null,8,["model","activeStep"])]),a("form",Qe,[b.value==0?(u(),m("div",eo,[a("div",oo,[r(x,{for:"nombre",value:"Nombre Completo(Nombres y apellidos)"}),r(q,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:s(o).nombre,"onUpdate:modelValue":e[2]||(e[2]=t=>s(o).nombre=t),required:""},null,8,["modelValue"]),r(g,{class:"mt-2",message:s(o).errors.nombre},null,8,["message"])]),a("div",to,[r(x,{for:"identificacion",value:"Número de identificación"}),r(q,{id:"identificacion",type:"number",class:"mt-1 block w-full",modelValue:s(o).identificacion,"onUpdate:modelValue":e[3]||(e[3]=t=>s(o).identificacion=t),required:""},null,8,["modelValue"]),r(g,{class:"mt-2",message:s(o).errors.identificacion},null,8,["message"])]),a("div",ao,[r(x,{for:"tipo_documento",value:"Tipo de Documento"}),D(a("select",{id:"tipo_documento","onUpdate:modelValue":e[4]||(e[4]=t=>s(o).tipo_documento=t),class:"mt-1 block w-full border-gray-300 rounded-lg"},[e[29]||(e[29]=a("option",{value:"",disabled:""},"Seleccione tipo de documento",-1)),(u(!0),m(P,null,Z(s(Ne),t=>(u(),m("option",{key:t.id,value:t.nombre},I(t.nombre),9,so))),128))],512),[[J,s(o).tipo_documento]]),r(g,{class:"mt-2",message:s(o).errors.tipo_documento},null,8,["message"])]),a("div",io,[r(x,{for:"nacimiento",value:"Fecha de Nacimiento"}),r(q,{id:"nacimiento",type:"date",class:"mt-1 block w-full",modelValue:s(o).nacimiento,"onUpdate:modelValue":e[5]||(e[5]=t=>s(o).nacimiento=t),required:""},null,8,["modelValue"]),r(g,{class:"mt-2",message:s(o).errors.nacimiento},null,8,["message"]),R.value?(u(),m("p",ro,I(R.value),1)):O("",!0)]),a("div",lo,[a("button",{type:"button",class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white p-2 rounded-md shadow-xl",onClick:e[6]||(e[6]=t=>Be(1))}," Siguiente ")])])):O("",!0),b.value==1?(u(),m("div",no,[a("div",co,[r(x,{for:"genero",value:"Identidad de Género"}),a("div",uo,[a("div",mo,[D(a("input",{type:"radio",id:"masculino",value:"Masculino","onUpdate:modelValue":e[7]||(e[7]=t=>s(o).genero=t)},null,512),[[ae,s(o).genero]]),e[30]||(e[30]=a("label",{class:"ps-2 text-sm sm:text-base",for:"masculino"},"Masculino",-1))]),a("div",vo,[D(a("input",{type:"radio",id:"two",value:"Femenino","onUpdate:modelValue":e[8]||(e[8]=t=>s(o).genero=t)},null,512),[[ae,s(o).genero]]),e[31]||(e[31]=a("label",{class:"ps-2 text-sm sm:text-base",for:"two"},"Femenino",-1))]),H.value?(u(),m("div",po,[r(x,{class:"sm:text-sm text-xs",for:"genero",value:"¿Cual?"}),r(q,{id:"genero",type:"text",class:"mt-1 block w-full p-0 sm:p-1",modelValue:s(o).genero,"onUpdate:modelValue":e[9]||(e[9]=t=>s(o).genero=t),autocomplete:"genero"},null,8,["modelValue"]),r(g,{class:"mt-1",message:s(o).errors.genero},null,8,["message"])])):(u(),m("div",fo,[D(a("input",{type:"radio",id:"tres",value:"true","onUpdate:modelValue":e[10]||(e[10]=t=>H.value=t)},null,512),[[ae,H.value]]),e[32]||(e[32]=a("label",{class:"ps-2 text-sm sm:text-base",for:"tres"},"Otro",-1))]))])]),a("div",go,[r(x,{for:"etnia",value:"Grupo poblacional"}),D(a("select",{id:"etnia","onUpdate:modelValue":e[11]||(e[11]=t=>s(o).etnia=t),class:"mt-1 block w-full border-gray-300 rounded-lg"},[e[33]||(e[33]=a("option",{value:"",disabled:""}," Seleccione grupo poblacional perteneciente ",-1)),(u(!0),m(P,null,Z(s(Le),t=>(u(),m("option",{key:t.id,value:t.nombre},I(t.nombre),9,bo))),128))],512),[[J,s(o).etnia]]),r(g,{class:"mt-2",message:s(o).errors.etnia},null,8,["message"])]),a("div",xo,[r(x,{for:"condicion",value:"Condición poblacional"}),D(a("select",{id:"condicion","onUpdate:modelValue":e[12]||(e[12]=t=>s(o).condicion=t),class:"mt-1 block w-full border-gray-300 rounded-lg"},[e[34]||(e[34]=a("option",{value:"",disabled:""}," Seleccione condición poblacional ",-1)),(u(!0),m(P,null,Z(s(Pe),t=>(u(),m("option",{key:t.id,value:t.nombre},I(t.nombre),9,ho))),128))],512),[[J,s(o).condicion]]),r(g,{class:"mt-2",message:s(o).errors.condicion},null,8,["message"])]),a("div",yo,[a("div",wo,[a("p",_o,[e[35]||(e[35]=w(" Si no esta seguro a que comuna/corregimiento o barrio/vereda pertenece, puede consultar en el siguiente ")),a("a",{href:i.route("ComunasBarrios"),target:"_blank",class:"underline !text-white font-bold cursor-pointer"},"enlace",8,ko),e[36]||(e[36]=w(". "))])])]),a("div",Co,[r(x,{for:"comuna",value:"Comuna/Corregimiento"}),r(s(we),{id:"comuna",modelValue:G.value,"onUpdate:modelValue":e[13]||(e[13]=t=>G.value=t),options:ke.value,filter:"",required:"",optionLabel:"detalle",placeholder:"Seleccione comuna/corregimiento del proyecto",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),r(g,{class:"mt-2",message:s(o).errors.comuna},null,8,["message"])]),a("div",Vo,[r(x,{for:"barrio",value:"Barrio/Vereda"}),r(s(we),{id:"barrio",modelValue:s(o).barrio,"onUpdate:modelValue":e[14]||(e[14]=t=>s(o).barrio=t),options:ee.value,required:"",filter:"",placeholder:"Seleccione barrio/vereda de dirección",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),le.value?(u(),m("div",Do,[r(x,{for:"barrio_otro",value:"Cual?"}),r(q,{id:"barrio_otro",type:"text",class:"mt-1 block w-full",modelValue:s(o).barrio,"onUpdate:modelValue":e[15]||(e[15]=t=>s(o).barrio=t)},null,8,["modelValue"])])):O("",!0),r(g,{class:"mt-2",message:s(o).errors.barrio},null,8,["message"])]),a("div",jo,[r(x,{for:"direccion",value:"Dirección"}),r(q,{id:"direccion",type:"text",class:"mt-1 block w-full",modelValue:s(o).direccion,"onUpdate:modelValue":e[16]||(e[16]=t=>s(o).direccion=t),required:""},null,8,["modelValue"]),r(g,{class:"mt-2",message:s(o).errors.direccion},null,8,["message"])]),a("div",So,[D(a("input",{type:"checkbox",id:"consentimiento1",name:"consentimiento1",required:"","onUpdate:modelValue":e[17]||(e[17]=t=>s(o).checked=t)},null,512),[[xe,s(o).checked]]),e[37]||(e[37]=a("label",{for:"consentimiento1",class:"ps-4 pe-12 sm:text-base text-sm text-gray-500"},[w("Conozco y Acepto la Política de Privacidad de Datos "),a("a",{href:"https://www.pereira.gov.co/publicaciones/38/politicas-de-privacidad-y-condiciones-de-uso/",target:"_blank",class:"underline !text-azul cursor-pointer"},"Política")],-1)),r(g,{class:"mt-1",message:s(o).errors.checked},null,8,["message"])]),a("div",Eo,[D(a("input",{type:"checkbox",id:"consentimiento2",name:"consentimiento2",required:"","onUpdate:modelValue":e[18]||(e[18]=t=>s(o).declaracion=t)},null,512),[[xe,s(o).declaracion]]),e[38]||(e[38]=a("label",{for:"consentimiento2",class:"ps-4 pe-12 sm:text-base text-sm text-gray-500"},[a("a",{href:"https://www.pereira.gov.co/loader.php?lServicio=Tools2&lTipo=descargas&lFuncion=visorpdf&file=https%3A%2F%2Fwww.pereira.gov.co%2Floader.php%3FlServicio%3DTools2%26lTipo%3Ddescargas%26lFuncion%3DexposeDocument%26idFile%3D211273%26tmp%3De1c59e50ed23a13cda9087f627ac4f4d%26urlDeleteFunction%3Dhttps%253A%252F%252Fwww.pereira.gov.co%252Floader.php%253FlServicio%253DTools2%2526lTipo%253Ddescargas%2526lFuncion%253DdeleteTemporalFile%2526tmp%253De1c59e50ed23a13cda9087f627ac4f4d&pdf=1&tmp=e1c59e50ed23a13cda9087f627ac4f4d&fileItem=229566",target:"_blank",class:"underline !text-azul cursor-pointer"},"Manifiesto"),w(" que la información registrada es veraz y corresponde a mis datos personales ")],-1)),r(g,{class:"mt-1",message:s(o).errors.declaracion},null,8,["message"])]),a("div",Fo,[a("div",Uo,[a("button",{type:"button",onClick:e[19]||(e[19]=t=>de(0)),class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white px-4 rounded-md shadow-xl"}," Atrás ")]),a("div",qo,[r(K,{type:"button",class:A(["h-full",{"opacity-25":s(o).processing}]),onClick:ue,disabled:s(o).processing},{default:y(()=>e[39]||(e[39]=[w(" Siguiente ")])),_:1},8,["class","disabled"])])])])):O("",!0),b.value==2?(u(),m("div",Bo,[a("div",Io,[e[41]||(e[41]=a("div",{class:"col-span-2 text-sm sm:text-base text-gray-800 pt-6"},[a("h3",{class:"text-lg font-semibold"}," Cargue documento de identificación parte frontal "),a("p",null," Para cargar el documento frontal, asegúrese de que la imagen sea clara y legible. El documento debe estar bien iluminado y sin reflejos. ")],-1)),a("div",zo,[a("div",Mo,[e[40]||(e[40]=a("h4",{class:"text-2xl underline"},"Ejemplo parte frontal",-1)),a("img",{src:s(We),alt:"Documento Frontal ejemplo",class:"w-full h-full object-contain mt-2"},null,8,To)])]),a("div",$o,[a("div",Oo,[r(q,{id:"cedula_front",type:"file",class:"mt-1 !border-0",accept:"image/jpeg,image/jpg,image/png,image/gif,image/svg+xml,image/webp",onInput:e[20]||(e[20]=t=>je("cedula_front",t)),maxFileSize:2e6}),r(g,{class:"mt-2",message:s(o).errors.cedula_front},null,8,["message"]),a("div",Ro,[j.value?(u(),m("img",{key:0,src:De(j.value,1),alt:s(o).cedula_front,class:"w-4/6 h-full object-contain"},null,8,No)):(u(),Oe(s(Ze),{key:1,class:"w-2/6 text-gray-300 flex justify-center items-center"}))]),j.value?(u(),m("div",Lo,[a("button",{onClick:e[21]||(e[21]=t=>Se(1)),type:"button",class:"bg-red-500 text-white px-4 py-2 rounded"}," Eliminar Imagen ")])):O("",!0)])])]),a("div",Po,[r(q,{id:"campo_obligatorio",type:"text",class:"mt-1 !border-0 hidden",modelValue:s(o).campoObligatorio,"onUpdate:modelValue":e[22]||(e[22]=t=>s(o).campoObligatorio=t)},null,8,["modelValue"])]),a("div",Ao,[a("div",Go,[a("button",{type:"button",onClick:e[23]||(e[23]=t=>de(1)),class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white px-4 rounded-md shadow-xl"}," Atrás ")]),a("div",Ho,[r(K,{type:"button",onClick:Ie,class:A({"opacity-25":s(o).processing}),disabled:s(o).processing},{default:y(()=>e[42]||(e[42]=[w(" Siguiente ")])),_:1},8,["class","disabled"])])])])):O("",!0)])])]),_:1}),r(Q,{show:C.value,closeable:!1},{default:y(()=>[e[44]||(e[44]=a("h2",{class:"py-4 text-2xl font-semibold text-gray-800 flex tex-center justify-center bg-azul text-white"}," Cargando datos... ",-1)),a("div",Wo,[r(s(He),{"aria-label":"Loading"})])]),_:1},8,["show"]),r(Q,{show:M.value,closeable:!1},{default:y(()=>[e[47]||(e[47]=a("h2",{class:"py-4 text-2xl font-semibold text-gray-800 flex tex-center justify-center bg-azul text-white"}," Desea volver a realizar el registro biométrico ",-1)),a("div",Yo,[r(K,{type:"button",class:A(["h-full",{"opacity-25":s(o).processing}]),onClick:e[24]||(e[24]=t=>ce()),disabled:s(o).processing},{default:y(()=>e[45]||(e[45]=[w(" Volver a realizar el registro biométrico ")])),_:1},8,["class","disabled"]),r(Ge,{onClick:me,class:A({"opacity-25":s(o).processing}),disabled:s(o).processing},{default:y(()=>e[46]||(e[46]=[w(" Continuar y guardar los datos ")])),_:1},8,["class","disabled"])])]),_:1},8,["show"]),r(Q,{show:V.value,closeable:!0},{default:y(()=>[e[49]||(e[49]=a("h2",{class:"py-4 text-2xl font-semibold text-gray-800 flex flex-wrap tex-center justify-center bg-azul text-white"}," Validación Biométrica ",-1)),e[50]||(e[50]=a("div",{class:"mt-4 px-4"},[a("p",{class:"text-sm sm:text-base text-gray-800"}," Por favor, asegúrese de que su rostro esté bien iluminado y visible en la cámara (sin gorras, tapabocas, gafas). Si no se detecta un rostro, puede intentar nuevamente o continuar sin registro biométrico. ")],-1)),a("div",Xo,[e[48]||(e[48]=a("label",{for:"camera"},"Seleccionar cámara:",-1)),D(a("select",{id:"camera","onUpdate:modelValue":e[25]||(e[25]=t=>N.value=t),class:"rounded-lg w-auto ms-4"},[(u(!0),m(P,null,Z(W.value,t=>(u(),m("option",{key:t.deviceId,value:t.deviceId},I(t.label||"Cámara desconocida"),9,Zo))),128))],512),[[J,N.value]]),a("video",{ref_key:"video",ref:h,autoplay:"",muted:"",width:"400",height:"340",class:"rounded-xl shadow-lg flex mx-auto mt-6"},null,512),a("button",{type:"button",disabled:S.value,class:"bg-secondary hover:bg-primary text-sm sm:text-base text-white p-2 rounded-md shadow-xl flex mx-auto mt-4 disabled:bg-gray-500",onClick:e[26]||(e[26]=t=>Ee())}," Validar ",8,Jo),w(" "+I(k.value),1)])]),_:1},8,["show"]),r(Q,{show:oe.value,closeable:!0},{default:y(()=>[e[52]||(e[52]=a("h2",{class:"py-4 sm:text-4xl text-2x font-bold text-gray-800 flex tex-center justify-center bg-azul text-white"}," Aviso importante ",-1)),a("div",Ko,[a("p",null," Por favor llenar todos los datos correctamente, para no ser rechazado, ¡recuerda! solo tiene "+I(3-ie.votante.hash_votantes[0].intentos)+" oportunidades para registrarse ",1)]),a("div",Qo,[r(K,{type:"button",class:A(["h-full text-xl sm:text-2xl",{"opacity-25":s(o).processing}]),onClick:e[27]||(e[27]=t=>oe.value=!1),disabled:s(o).processing},{default:y(()=>e[51]||(e[51]=[w(" Continuar ")])),_:1},8,["class","disabled"])])]),_:1},8,["show"])],64))}};export{Dt as default};
