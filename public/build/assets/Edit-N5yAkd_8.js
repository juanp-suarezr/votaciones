import{x as T,r as b,T as D,q as M,w as P,c as d,o as m,b as a,u as t,Z as q,d as v,e as s,t as f,j as _,B as z,n as S,p as x,f as h,v as y,F as k,k as O}from"./app-DR9iPxSo.js";import{_ as R}from"./AuthenticatedLayout-DisQAywE.js";import{_ as l}from"./InputError-DE8VDILa.js";import{_ as c}from"./InputLabel-CPXlsasS.js";import{_ as G}from"./PrimaryButton-Cr1B2Qq-.js";import{_ as $}from"./TextInput-CVnuOqxs.js";import{_ as H}from"./SecondaryButton-h39Qrhoy.js";import{s as I}from"./index-BnsgW0my.js";import{s as Y}from"./index-CnAdb5vw.js";import{s as j}from"./index-xSCrUoOS.js";import{_ as Z}from"./SecondaryLink-D6f-1kxG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BreadCrumb-Dv9_6f-a.js";import"./SecondaryButtonReturn-DuVLLg5T.js";import"./XCircleIcon-CEbyrost.js";import"./index-DwZCWWHf.js";import"./index-xn_FjYEA.js";import"./index-C4BGHM64.js";import"./index-DzOh4QmW.js";import"./index-2SsAvUyR.js";import"./index-BanF-xmH.js";import"./index-DsNKvx9a.js";import"./index-CuFc-dsF.js";import"./index-CLpMNFle.js";const J={class:"flex flex-col bg-white border shadow-sm rounded-xl w-full"},K={class:"bg-gray-100 border-b rounded-t-xl py-3 px-4 md:py-4 md:px-5 grid grid-cols-2 gap-4"},Q={class:"mt-1 text-gray-500"},W={class:"text-right"},X={class:"p-4 md:p-5"},ee={class:"mb-2"},te={class:"mb-2"},oe={class:"col-span-2 mb-2"},se={key:0},ae={class:"mb-2 flex flex-wrap gap-4"},ne={class:"card flex justify-content-center"},re={class:"mb-2 w-full flex flex-wrap gap-4"},ie={class:""},le={key:0,class:""},de={class:"card mt-1 flex gap-2 justify-content-center"},me=["value"],ce={class:"mb-2"},ue={class:"mb-2"},pe={class:"mb-2"},ve={class:"mt-4 flex flex-col items-end"},Pe={__name:"Edit",props:{evento:{type:Object,default:()=>({})},tipos:{type:Object,default:()=>({})},eventos:{type:Object,default:()=>({})}},setup(u){const E=T("$swal");b(null);const g=b(!1),r=u,e=D({nombre:r.evento.nombre||"",descripcion:r.evento.descripcion||"",fecha_inicio:r.evento.fecha_inicio||"",fecha_fin:r.evento.fecha_fin||"",dependencias:r.evento.dependencias||"",tipos:r.evento.tipos!="NA"?r.evento.tipos.split("|"):"",is_evento_padre:r.evento.evento_padre,evento_padre:r.evento.evento_hijo.length>0?r.evento.evento_hijo[0].id_evento_padre||null:r.evento.padre,estado:r.evento.estado||"",id:r.evento.id}),p=b(r.evento.evento_hijo.length>0?!!r.evento.evento_hijo[0].id_evento_padre:r.evento.padre);console.log(r.evento);const F=[{url:"/eventos",text:"Listado de eventos"},{url:"",text:"Editar evento"}],w=M(()=>{const o=e.descripcion.trim().length;return o>=300?g.value=!0:g.value=!1,o});P(w,()=>{e.descripcion=e.descripcion.trim()});const V=i=>{const o=i.getFullYear(),n=String(i.getMonth()+1).padStart(2,"0"),A=String(i.getDate()).padStart(2,"0"),B=String(i.getHours()).padStart(2,"0"),N=String(i.getMinutes()).padStart(2,"0"),L=String(i.getSeconds()).padStart(2,"0");return`${o}-${n}-${A} ${B}:${N}:${L}`},C=()=>{p.value=!p.value,p&&(e.evento_padre=null)},U=()=>{e.fecha_inicio=V(new Date(e.fecha_inicio)),e.fecha_fin=V(new Date(e.fecha_fin)),e.tipos=e.tipos==""?"NA":e.tipos.join("|"),e.patch(route("eventos.update",r.evento.id),{onSuccess:()=>E({title:"Registro Actualizado",text:"El evento se ha actualizado exitosamente",icon:"success"}).then(i=>{window.location.reload()})})};return(i,o)=>(m(),d(k,null,[a(t(q),{title:"Editar evento"}),a(R,{breadCrumbLinks:F},{header:v(()=>[_(" Editar Evento "+f(u.evento.id),1)]),default:v(()=>[s("div",J,[s("div",K,[s("h3",Q,f(u.evento.nombre),1),s("div",W,[a(Z,{href:i.route("eventos.index")},{default:v(()=>o[9]||(o[9]=[_(" Regresar ")])),_:1},8,["href"])])]),s("div",X,[s("form",{onSubmit:z(U,["prevent"]),class:"grid sm:grid-cols-2 gap-4"},[s("div",ee,[a(c,{for:"nombre",value:"Nombre del evento"}),a($,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:t(e).nombre,"onUpdate:modelValue":o[0]||(o[0]=n=>t(e).nombre=n),required:"",autofocus:"",autocomplete:"nombre"},null,8,["modelValue"]),a(l,{class:"mt-2",message:t(e).errors.nombre},null,8,["message"])]),s("div",te,[a(c,{for:"dependencias",value:"dependencias del evento"}),a($,{id:"dependencias",type:"text",class:"mt-1 block w-full",modelValue:t(e).dependencias,"onUpdate:modelValue":o[1]||(o[1]=n=>t(e).dependencias=n),required:"",autocomplete:"dependencias"},null,8,["modelValue"]),a(l,{class:"mt-2",message:t(e).errors.dependencias},null,8,["message"])]),s("div",oe,[o[10]||(o[10]=s("p",{class:"text-gray-600 text-sm"}," Información adicional sobre el evento (max 300 caracteres) ",-1)),a(t(Y),{modelValue:t(e).descripcion,"onUpdate:modelValue":o[2]||(o[2]=n=>t(e).descripcion=n),variant:"filled",autoResize:"",rows:"5",class:"mt-1 block w-full",required:"",autocomplete:"descripcion"},null,8,["modelValue"]),s("p",{class:S(["text-gray-500 text-sm mt-2",{"text-red-500":g.value}])},[_(f(w.value)+" caracteres ",1),g.value?(m(),d("span",se,"Limite de caracteres superado")):x("",!0)],2),a(l,{class:"mt-2",message:t(e).errors.descripcion},null,8,["message"])]),s("div",ae,[a(c,{for:"tipos",value:"Tipos"}),s("div",ne,[a(t(I),{id:"tipos",modelValue:t(e).tipos,"onUpdate:modelValue":o[3]||(o[3]=n=>t(e).tipos=n),display:"chip",options:Object.values(u.tipos),placeholder:"Seleccione los tipos",maxSelectedLabels:6,class:"w-full"},null,8,["modelValue","options"])]),a(l,{class:"mt-2",message:t(e).errors.tipos},null,8,["message"])]),s("div",re,[s("div",ie,[a(c,{for:"is_evento_padre",value:"¿Es un evento padre?"}),h(s("select",{id:"is_evento_padre","onUpdate:modelValue":o[4]||(o[4]=n=>t(e).is_evento_padre=n),class:"mt-1 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-auto p-2. px-4"},o[11]||(o[11]=[s("option",{value:1},"Si",-1),s("option",{value:0},"No",-1)]),512),[[y,t(e).is_evento_padre]]),a(l,{class:"mt-2",message:t(e).errors.is_evento_padre},null,8,["message"])]),t(e).is_evento_padre==0?(m(),d("div",le,[a(c,{for:"tipos",value:"Asignar evento padre"}),s("div",de,[t(e).evento_padre||p.value==!0?h((m(),d("select",{key:0,id:"evento_padre","onUpdate:modelValue":o[5]||(o[5]=n=>t(e).evento_padre=n),class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},[o[12]||(o[12]=s("option",{value:""},"-- Seleccione un evento padre --",-1)),(m(!0),d(k,null,O(u.eventos,n=>(m(),d("option",{key:n.id,value:n.id},f(n.nombre),9,me))),128))],512)),[[y,t(e).evento_padre]]):x("",!0),a(H,{type:"button",onClick:C,class:"w-full md:w-20rem"},{default:v(()=>[_(f(p.value||t(e).evento_padre!=null?"Cancelar":"Asignar evento padre"),1)]),_:1})]),a(l,{class:"mt-2",message:t(e).errors.tipos},null,8,["message"])])):x("",!0)]),s("div",ce,[a(t(j),{modelValue:t(e).fecha_inicio,"onUpdate:modelValue":o[6]||(o[6]=n=>t(e).fecha_inicio=n),showTime:"",hourFormat:"24",locale:"es",dateFormat:"dd/mm/yy",variant:"filled",showButtonBar:"",placeholder:"Fecha inicio",class:"my-4 flex justify-center"},null,8,["modelValue"]),a(l,{class:"mt-2",message:t(e).errors.fecha_inicio},null,8,["message"])]),s("div",ue,[a(t(j),{modelValue:t(e).fecha_fin,"onUpdate:modelValue":o[7]||(o[7]=n=>t(e).fecha_fin=n),showTime:"",hourFormat:"24",locale:"es",dateFormat:"dd/mm/yy",variant:"filled",showButtonBar:"",placeholder:"Fecha inicio",class:"my-4 flex justify-center"},null,8,["modelValue"]),a(l,{class:"mt-2",message:t(e).errors.fecha_fin},null,8,["message"])]),s("div",pe,[a(c,{for:"estado",value:"Estado"}),h(s("select",{id:"estado","onUpdate:modelValue":o[8]||(o[8]=n=>t(e).estado=n),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-auto p-2. px-4"},o[13]||(o[13]=[s("option",{value:"Activo"},"Activo",-1),s("option",{value:"Pendiente"},"Pendiente",-1),s("option",{value:"Cerrado"},"Cerrado",-1)]),512),[[y,t(e).estado]]),a(l,{class:"mt-2",message:t(e).errors.estado},null,8,["message"])]),s("div",null,[s("div",ve,[a(G,{class:S({"opacity-25":t(e).processing}),disabled:t(e).processing},{default:v(()=>o[14]||(o[14]=[_(" Guardar Evento ")])),_:1},8,["class","disabled"])])])],32)])])]),_:1})],64))}};export{Pe as default};
