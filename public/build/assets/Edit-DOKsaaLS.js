import{x as T,r as b,T as D,q as M,w as P,c as d,o as m,b as a,u as t,Z as q,d as v,e as s,t as f,j as _,B as z,n as S,p as x,f as y,v as h,F as k,k as O}from"./app-DybJYkra.js";import{_ as R}from"./AuthenticatedLayout-BWYfebZ-.js";import{_ as l}from"./InputError-D_fwLvzC.js";import{_ as c}from"./InputLabel-CCEQBSel.js";import{_ as G}from"./PrimaryButton-B299prBs.js";import{_ as $}from"./TextInput-CyOILKwA.js";import{_ as H}from"./SecondaryButton-Dd5XmBRy.js";import{s as I}from"./index-CJv_k9vX.js";import{s as Y}from"./index-D1J5sp3R.js";import{s as j}from"./index-D_u_kLUV.js";import{_ as Z}from"./SecondaryLink-DvQN9S8l.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BreadCrumb-1xRE_DmC.js";import"./SecondaryButtonReturn-BwSFuk4L.js";import"./XCircleIcon-B9MOXwAB.js";import"./index-DoFUF6-l.js";import"./index-BbnNYfPJ.js";import"./index-B48QGCx6.js";import"./index-CPnJ7lQ0.js";import"./index-cHWwVTgi.js";import"./index-FQfN-X1m.js";import"./index-CHWC9Zer.js";import"./index-EJaONkLC.js";import"./index-Cu0zn5RC.js";const J={class:"flex flex-col bg-white border shadow-sm rounded-xl w-full"},K={class:"bg-gray-100 border-b rounded-t-xl py-3 px-4 md:py-4 md:px-5 grid grid-cols-2 gap-4"},Q={class:"mt-1 text-gray-500"},W={class:"text-right"},X={class:"p-4 md:p-5"},ee={class:"mb-2"},te={class:"mb-2"},oe={class:"col-span-2 mb-2"},se={key:0},ae={class:"mb-2 flex flex-wrap gap-4"},re={class:"card flex justify-content-center"},ie={class:"mb-2 w-full flex flex-wrap gap-4"},ne={class:""},le={key:0,class:""},de={class:"card mt-1 flex gap-2 justify-content-center"},me=["value"],ce={class:"mb-2"},ue={class:"mb-2"},pe={class:"mb-2"},ve={class:"mt-4 flex flex-col items-end"},Pe={__name:"Edit",props:{evento:{type:Object,default:()=>({})},tipos:{type:Object,default:()=>({})},eventos:{type:Object,default:()=>({})}},setup(u){const E=T("$swal");b(null);const g=b(!1),i=u,e=D({nombre:i.evento.nombre||"",descripcion:i.evento.descripcion||"",fecha_inicio:i.evento.fecha_inicio||"",fecha_fin:i.evento.fecha_fin||"",dependencias:i.evento.dependencias||"",tipos:i.evento.tipos!="NA"?i.evento.tipos.split("|"):"",is_evento_padre:i.evento.evento_padre,evento_padre:i.evento.evento_hijo[0].id_evento_padre||null,estado:i.evento.estado||"",id:i.evento.id}),p=b(!!i.evento.evento_hijo[0].id_evento_padre);console.log(i.evento);const F=[{url:"/eventos",text:"Listado de eventos"},{url:"",text:"Editar evento"}],w=M(()=>{const o=e.descripcion.trim().length;return o>=300?g.value=!0:g.value=!1,o});P(w,()=>{e.descripcion=e.descripcion.trim()});const V=n=>{const o=n.getFullYear(),r=String(n.getMonth()+1).padStart(2,"0"),A=String(n.getDate()).padStart(2,"0"),B=String(n.getHours()).padStart(2,"0"),N=String(n.getMinutes()).padStart(2,"0"),L=String(n.getSeconds()).padStart(2,"0");return`${o}-${r}-${A} ${B}:${N}:${L}`},C=()=>{p.value=!p.value,p&&(e.evento_padre=null)},U=()=>{e.fecha_inicio=V(new Date(e.fecha_inicio)),e.fecha_fin=V(new Date(e.fecha_fin)),e.tipos=e.tipos==""?"NA":e.tipos.join("|"),e.patch(route("eventos.update",i.evento.id),{onSuccess:()=>E({title:"Registro Actualizado",text:"El evento se ha actualizado exitosamente",icon:"success"}).then(n=>{window.location.reload()})})};return(n,o)=>(m(),d(k,null,[a(t(q),{title:"Editar evento"}),a(R,{breadCrumbLinks:F},{header:v(()=>[_(" Editar Evento "+f(u.evento.id),1)]),default:v(()=>[s("div",J,[s("div",K,[s("h3",Q,f(u.evento.nombre),1),s("div",W,[a(Z,{href:n.route("eventos.index")},{default:v(()=>o[9]||(o[9]=[_(" Regresar ")])),_:1},8,["href"])])]),s("div",X,[s("form",{onSubmit:z(U,["prevent"]),class:"grid sm:grid-cols-2 gap-4"},[s("div",ee,[a(c,{for:"nombre",value:"Nombre del evento"}),a($,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:t(e).nombre,"onUpdate:modelValue":o[0]||(o[0]=r=>t(e).nombre=r),required:"",autofocus:"",autocomplete:"nombre"},null,8,["modelValue"]),a(l,{class:"mt-2",message:t(e).errors.nombre},null,8,["message"])]),s("div",te,[a(c,{for:"dependencias",value:"dependencias del evento"}),a($,{id:"dependencias",type:"text",class:"mt-1 block w-full",modelValue:t(e).dependencias,"onUpdate:modelValue":o[1]||(o[1]=r=>t(e).dependencias=r),required:"",autocomplete:"dependencias"},null,8,["modelValue"]),a(l,{class:"mt-2",message:t(e).errors.dependencias},null,8,["message"])]),s("div",oe,[o[10]||(o[10]=s("p",{class:"text-gray-600 text-sm"}," Información adicional sobre el evento (max 300 caracteres) ",-1)),a(t(Y),{modelValue:t(e).descripcion,"onUpdate:modelValue":o[2]||(o[2]=r=>t(e).descripcion=r),variant:"filled",autoResize:"",rows:"5",class:"mt-1 block w-full",required:"",autocomplete:"descripcion"},null,8,["modelValue"]),s("p",{class:S(["text-gray-500 text-sm mt-2",{"text-red-500":g.value}])},[_(f(w.value)+" caracteres ",1),g.value?(m(),d("span",se,"Limite de caracteres superado")):x("",!0)],2),a(l,{class:"mt-2",message:t(e).errors.descripcion},null,8,["message"])]),s("div",ae,[a(c,{for:"tipos",value:"Tipos"}),s("div",re,[a(t(I),{id:"tipos",modelValue:t(e).tipos,"onUpdate:modelValue":o[3]||(o[3]=r=>t(e).tipos=r),display:"chip",options:Object.values(u.tipos),placeholder:"Seleccione los tipos",maxSelectedLabels:6,class:"w-full"},null,8,["modelValue","options"])]),a(l,{class:"mt-2",message:t(e).errors.tipos},null,8,["message"])]),s("div",ie,[s("div",ne,[a(c,{for:"is_evento_padre",value:"¿Es un evento padre?"}),y(s("select",{id:"is_evento_padre","onUpdate:modelValue":o[4]||(o[4]=r=>t(e).is_evento_padre=r),class:"mt-1 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-auto p-2. px-4"},o[11]||(o[11]=[s("option",{value:1},"Si",-1),s("option",{value:0},"No",-1)]),512),[[h,t(e).is_evento_padre]]),a(l,{class:"mt-2",message:t(e).errors.is_evento_padre},null,8,["message"])]),t(e).is_evento_padre==0?(m(),d("div",le,[a(c,{for:"tipos",value:"Asignar evento padre"}),s("div",de,[t(e).evento_padre||p.value==!0?y((m(),d("select",{key:0,id:"evento_padre","onUpdate:modelValue":o[5]||(o[5]=r=>t(e).evento_padre=r),class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},[o[12]||(o[12]=s("option",{value:""},"-- Seleccione un evento padre --",-1)),(m(!0),d(k,null,O(u.eventos,r=>(m(),d("option",{key:r.id,value:r.id},f(r.nombre),9,me))),128))],512)),[[h,t(e).evento_padre]]):x("",!0),a(H,{type:"button",onClick:C,class:"w-full md:w-20rem"},{default:v(()=>[_(f(p.value||t(e).evento_padre!=null?"Cancelar":"Asignar evento padre"),1)]),_:1})]),a(l,{class:"mt-2",message:t(e).errors.tipos},null,8,["message"])])):x("",!0)]),s("div",ce,[a(t(j),{modelValue:t(e).fecha_inicio,"onUpdate:modelValue":o[6]||(o[6]=r=>t(e).fecha_inicio=r),showTime:"",hourFormat:"24",locale:"es",dateFormat:"dd/mm/yy",variant:"filled",showButtonBar:"",placeholder:"Fecha inicio",class:"my-4 flex justify-center"},null,8,["modelValue"]),a(l,{class:"mt-2",message:t(e).errors.fecha_inicio},null,8,["message"])]),s("div",ue,[a(t(j),{modelValue:t(e).fecha_fin,"onUpdate:modelValue":o[7]||(o[7]=r=>t(e).fecha_fin=r),showTime:"",hourFormat:"24",locale:"es",dateFormat:"dd/mm/yy",variant:"filled",showButtonBar:"",placeholder:"Fecha inicio",class:"my-4 flex justify-center"},null,8,["modelValue"]),a(l,{class:"mt-2",message:t(e).errors.fecha_fin},null,8,["message"])]),s("div",pe,[a(c,{for:"estado",value:"Estado"}),y(s("select",{id:"estado","onUpdate:modelValue":o[8]||(o[8]=r=>t(e).estado=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-auto p-2. px-4"},o[13]||(o[13]=[s("option",{value:"Activo"},"Activo",-1),s("option",{value:"Pendiente"},"Pendiente",-1),s("option",{value:"Cerrado"},"Cerrado",-1)]),512),[[h,t(e).estado]]),a(l,{class:"mt-2",message:t(e).errors.estado},null,8,["message"])]),s("div",null,[s("div",ve,[a(G,{class:S({"opacity-25":t(e).processing}),disabled:t(e).processing},{default:v(()=>o[14]||(o[14]=[_(" Guardar Evento ")])),_:1},8,["class","disabled"])])])],32)])])]),_:1})],64))}};export{Pe as default};
