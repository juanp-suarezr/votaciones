import{x as Oe,r,T as Ae,D as Le,w as q,s as Pe,c as u,o as d,b as l,u as s,Z as Ge,d as B,e as a,p as I,f as C,F as z,k as P,t as w,v as J,E as ie,C as be,j as M,n as xe,l as Ye,z as he}from"./app-S-bKU7Z-.js";import{_ as He}from"./AuthenticatedLayout-DDsu92Ew.js";import{s as ye,t as We,e as Ke,c as Xe}from"./etnia-XnID74J0.js";import{b as Ze}from"./barrios-CntC0Qm4.js";import{_ as v}from"./InputError-5VUyo1Vx.js";import{_ as m}from"./InputLabel-8emPaez5.js";import{_ as we}from"./PrimaryButton-BYnO5JBW.js";import{_ as le}from"./Modal-Bu3_rtqA.js";import{_ as g}from"./TextInput-Bf2zLTlk.js";import{s as _e}from"./index-FT44eAr8.js";import{s as Je}from"./index-p9LPKXa7.js";import{f as Qe}from"./cedulaFrontEjemplo-eqgE4YJW.js";import{d as eo,T as oo,n as re}from"./FaceMatcher-DQZ88WER.js";import{s as to}from"./index-QMT_1-gA.js";import{r as ao}from"./PhotoIcon-B1JtpppC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BreadCrumb-BEi_4g-_.js";import"./SecondaryButtonReturn-ChvodGSt.js";import"./XCircleIcon-BHtm88TU.js";import"./index-DtkN28pv.js";import"./index-CxI-W18E.js";import"./index-BOFJq62S.js";import"./index-Ck-6XAL1.js";import"./index-CIht5K9y.js";import"./index-BiWvAqCZ.js";import"./index-0obpc9wS.js";const so={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},io={class:"mt-4 justify-center"},lo={class:"m-auto py-4 px-4"},ro={key:0,class:"sm:grid sm:grid-cols-2 gap-6 h-full"},no={class:"mb-2"},co={class:"mb-2"},uo={class:"mb-2"},mo=["value"],po={class:"mb-2 sm:block hidden"},fo={key:0,class:"text-red-500"},vo={class:"mb-2 sm:hidden grid grid-cols-3 gap-2"},go={class:"w-auto mt-1"},bo={class:"w-auto mt-1"},xo={class:"w-auto mt-1"},ho={key:0,class:"text-red-500"},yo={class:"col-span-2 flex justify-end"},wo={key:1,class:"sm:grid sm:grid-cols-2 gap-6"},_o={class:"mb-2"},ko={class:"mt-2 block sm:flex"},Vo={class:""},Co={class:"sm:ms-6"},Do={key:0,class:"sm:ms-6"},Eo={key:1,class:"sm:ms-6"},So={class:"mb-2"},jo=["value"],Fo={class:"mb-2"},Uo=["value"],$o={class:"w-full mb-2"},qo={class:"w-full flex flex-wrap gap-2 mt-1"},Bo={class:"mb-2"},Io={class:"mb-2"},Mo={key:0,class:"w-full mt-2"},To={class:"mb-2"},zo={class:"mb-2"},Ro={class:"mb-2"},No={class:"my-4 col-span-2 mb-2"},Oo={class:"mb-4 col-span-2 mb-2"},Ao={class:"col-span-2 flex justify-between gap-2"},Lo={class:"flex pt-4 justify-end"},Po={class:"flex pt-4 justify-end h-full"},Go={key:2,class:"gap-6"},Yo={class:"sm:grid sm:grid-cols-2 gap-2 h-full sm:px-16 px-4"},Ho={class:"w-full h-full mt-4"},Wo={class:"w-full"},Ko=["src"],Xo={class:"mb-2 h-full flex justify-center items-center mt-4"},Zo={class:"border-2 border-gray-300 rounded-md p-2 h-full"},Jo={class:"flex justify-center"},Qo=["src","alt"],et={key:0,class:"flex justify-center mt-2"},ot={class:"w-full"},tt={class:"col-span-2 flex justify-between gap-2 mt-4"},at={class:"flex pt-4 justify-end"},st={class:"flex pt-4 justify-end"},it={class:"flex justify-center my-12"},lt={class:"my-12 px-4"},rt=["value"],nt=["disabled"],ct={class:"px-6 py-4"},dt=["src"],ut={class:"text-gray-800 font-medium"},mt={class:"text-gray-800 font-medium"},pt={class:"text-gray-800 font-medium"},Nt={__name:"RegistroVotante",props:{info:{type:Object},comunas:{type:Object}},setup(ke){const p=Oe("$swal"),Ve=[{url:"",text:"Corregir datos"}],c=ke,ne=r(c.comunas);console.log("info data:",c.info);const R=r(!1),Ce=r([]),Q=r(!1),o=Ae({id_votante:c.info.id||"",nombre:c.info.nombre||"",identificacion:c.info.identificacion||"",tipo_documento:c.info.tipo_documento||"",nacimiento:c.info.nacimiento||"",cedula_front:null,celular:c.info.celular||"",genero:c.info.genero||"",etnia:c.info.etnia||"",condicion:c.info.condicion||"",direccion:c.info.direccion||"",comuna:c.info.hash_votantes?c.info.hash_votantes[0].subtipo:null,barrio:c.info.barrio||"",email:"",password:"",embedding:null,photo:null,checked:!1,declaracion:!1,campoObligatorio:"",recaptcha_token:"",validaciones:""}),{executeRecaptcha:De}=Le(),ee=r(""),oe=r([]),h=r(!1);r(!0);const Ee=r([{label:"Información Personal"},{label:"Datos Demográficos"},{label:"Registro datos"}]),Se=r([{label:"paso 1"},{label:"paso 2"},{label:"paso 3"}]),b=r(0),te=r(""),U=r(""),x=r(!1),_=r(!1),G=r(!1),$=r(null),Y=r([]),N=r(""),D=r(null),y=r(""),ce=r(!1),E=r(!1),T=r(0),de=r(!1),H=r(""),W=r(""),K=r(""),je=(i,e)=>o.cedula_front===null?`/storage/uploads/documentos/${i}`:i;q([H,W,K],([i,e,t])=>{if(i&&e&&t){const n=String(i).padStart(2,"0"),k=String(e).padStart(2,"0");o.nacimiento=`${t}-${k}-${n}`}}),q(G,i=>{i&&(o.genero="")}),q(ee,i=>{i&&(o.comuna=i,oe.value=Ze.find(e=>e.id===parseInt(i.id)).barrios,console.log(oe.value))}),q(()=>o.barrio,i=>{console.log(i),i=="Otro"&&(o.barrio="",de.value=!0)}),q(()=>o.data(),i=>{Object.keys(o.errors).forEach(e=>{i[e]&&(o.errors[e]=null)})},{deep:!0});const Fe=(i,e)=>{const t=e.target.files[0];if(!t)return;((k,A)=>{const X=new FileReader;X.onload=Z=>{const S=new Image;S.onload=()=>{const f=document.createElement("canvas"),L=f.getContext("2d"),V=1024,se=1024;let j=S.width,F=S.height;(j>V||F>se)&&(j>F?(F=Math.round(F*V/j),j=V):(j=Math.round(j*se/F),F=se)),f.width=j,f.height=F,L.drawImage(S,0,0,j,F),f.toBlob(ve=>{if(ve.size>2e6){Swal.fire({icon:"error",title:"Error",text:"Incluso comprimida, la imagen supera los 2MB."});return}const ge=new File([ve],k.name,{type:"image/jpeg",lastModified:Date.now()});A(ge,URL.createObjectURL(ge))},"image/jpeg",.8)},S.src=Z.target.result},X.readAsDataURL(k)})(t,(k,A)=>{o[i]=k,$.value=A})},Ue=i=>{o.cedula_front=null,$.value=null},ue=i=>{if(!i)return"";const e=new Date(i),t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),k=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${k}`},me=i=>{b.value=i,x.value=!0},$e=async()=>{h.value=!0;try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(n=>n.stop()),await re.tinyFaceDetector.loadFromUri("/models/tiny_face_detector"),await re.faceRecognitionNet.loadFromUri("/models/face_recognition"),await re.faceLandmark68Net.loadFromUri("/models/face_landmark_68");const e=await navigator.mediaDevices.enumerateDevices();Y.value=e.filter(n=>n.kind==="videoinput");const t=Y.value.find(n=>n.label.toLowerCase().includes("user"))||Y.value[0];console.log(t),N.value=(t==null?void 0:t.deviceId)||"",h.value=!1,_.value=!0,await fe(N.value)}catch(i){h.value=!1,T.value==3,p.fire({icon:"error",title:"Error al acceder a la cámara",text:"No se pudo acceder a la cámara. Por favor, asegúrese de que su dispositivo tenga una cámara y que haya otorgado los permisos necesarios."}),console.error("Error al iniciar:",i),y.value="No se pudo acceder a la cámara."}},qe=async()=>{E.value=!0,h.value=!0,y.value="";const i=t=>parseInt(sessionStorage.getItem(t)||"0"),e=(t,n)=>sessionStorage.setItem(t,n.toString());if(!ce.value){i("fallo_camara")+1,y.value="La cámara no está lista.",E.value=!1,h.value=!1;return}try{const t=await eo(D.value,new oo).withFaceLandmarks().withFaceDescriptor();console.log("entro -- validador"),p.fire({title:"Validación en progreso",text:"Mire a la cámara hasta que finalice la validación.",icon:"info",timer:2e3,showConfirmButton:!1,didClose:()=>{}});const n=document.createElement("canvas");n.width=D.value.videoWidth,n.height=D.value.videoHeight,n.getContext("2d").drawImage(D.value,0,0,n.width,n.height);const A=await new Promise(f=>n.toBlob(f,"image/jpeg")),X=new File([A],"photo.jpg",{type:"image/jpeg"});if(o.photo=X,!t){h.value=!1,E.value=!1,y.value="No se detectó un rostro.",T.value+=1,T.value==3&&p.fire({title:"Error en validación",text:"Error, no se detectó un rostro, vuelve a intentar o avanzar con la imagen poco visible y posiblemente sin registro biométrico (alta probabilidad de rechazo)",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(f=>{f.isConfirmed?(o.embedding="",o.validaciones="no_rostro",_.value=!1,O(!1)):f.dismiss===p.DismissReason.cancel&&(console.log("Usuario decide volver a intentar"),y.value="",T.value=0)});return}const Z=t.descriptor;o.embedding=Z;const S=new FormData;S.append("embedding",Z),E.value=!1,_.value=!1,he.post(route("face-validate-gestor"),S,{headers:{"Content-Type":"multipart/form-data"}}).then(f=>{y.value=f.data.message;const L=f.data.id;console.log(f.data),console.log(f.data.id),E.value=!1,h.value=!1,f.data.match?p.fire({title:"Error en validación",text:"Usted ya tiene un registro biométrico. Si está seguro que no se ha registrado, puede volver a intentarlo o continuar (probabilidad de rechazo).",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(V=>{V.isConfirmed?(o.validaciones="registro_duplicado",_.value=!1,O(!0,L)):V.dismiss===p.DismissReason.cancel&&console.log("Usuario decide volver a intentar")}):p({title:"Validación exitosa",text:"Validación biométrica exitosa",icon:"success",didClose:()=>{_.value=!1,O(!1)}})}).catch(f=>{E.value=!1,h.value=!1,console.log(f);const L=i("fallo_registro")+1;e("fallo_registro",L),p.fire({title:"Error en validación",text:"Error en la validación, vuelve a intentar o avanzar sin registro biometrico (posibilidad de rechazo)",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(V=>{V.isConfirmed?(o.embedding="",o.validaciones="fallo_registro_biometrico",_.value=!1,O(!1)):V.dismiss===p.DismissReason.cancel&&console.log("Usuario decide volver a intentar")})})}catch(t){console.error(t),E.value=!1,h.value=!1,T.value==3&&p.fire({title:"Error en validación",text:"Error al procesar el rostro, vuelve a intentar o avanzar sin registro biometrico (posibilidad de rechazo)",icon:"error",showCancelButton:!0,cancelButtonText:"Volver a intentar",confirmButtonText:"Continuar"}).then(n=>{n.isConfirmed?(o.embedding="",o.validaciones="fallo_registro",_.value=!1,O(!1)):n.dismiss===p.DismissReason.cancel&&(console.log("Usuario decide volver a intentar"),y.value="",T.value=0)}),y.value="Error al procesar el rostro."}},O=async(i,e=null)=>{if(console.log(e),i)try{const t=await he.get(`/usuarios-duplicados/${e}`);Ce.value=t.data.usuario,R.value=!0}catch(t){console.error("Error al consultar usuario:",t),R.value=!1,usuario.value=null}else Q.value=!0;Q&&(R.value=!1,p.fire({title:"Confirmar registro",html:`
            <p class="!text-xl">VALIDACIÓN: <strong>${o.validaciones}</strong></p>
    <p class="!text-xl">Votante: <strong>${o.nombre}</strong></p>
    <p class="!text-xl">Identificación: <strong>${o.tipo_documento} - ${o.identificacion}</strong></p>
    <p class="!text-xl">Fecha nacimiento: <strong>${o.nacimiento}</strong></p>
    <p class="!text-xl">Genero: <strong>${o.genero}</strong></p>
    <p class="!text-xl">Etnia: <strong>${o.etnia}</strong></p>
    <p class="!text-xl">Condición: <strong>${o.condicion}</strong></p>
    <p class="!text-xl">Dirección: <strong>${o.direccion}</strong></p>
    <p class="!text-xl">Celular: <strong>${o.celular}</strong></p>
    <p class="!text-xl">Comuna: <strong>${o.comuna.label}</strong></p>
    <p class="!text-xl">Barrio: <strong>${o.barrio}</strong></p>
    <p class="!text-xl">Email: <strong>${o.email}</strong></p>
        <p class="!text-2xl">Es tu momento de votar</p>`,icon:"success",showCancelButton:!0,confirmButtonText:"Aceptar datos y votar!",cancelButtonText:"Cancelar",allowOutsideClick:!1,allowEscapeKey:!1,draggable:!0,customClass:{title:"!text-2xl",popup:"p-6",confirmButton:"!text-2xl",cancelButton:"!text-2xl"}}).then(t=>{t.isConfirmed&&ze()}))},Be=()=>{if(!o.nacimiento)return U.value="Debes ingresar la fecha de nacimiento.",!1;const i=new Date,e=new Date(o.nacimiento);let t=i.getFullYear()-e.getFullYear();const n=i.getMonth()-e.getMonth();return(n<0||n===0&&i.getDate()<e.getDate())&&t--,t<14?(U.value="No cumple con el requisito de edad mínima (14 años), por lo tanto, no puede ejercer el derecho al voto.",!1):(U.value="",!0)},Ie=async()=>{if(x.value=!1,o.nombre&&o.tipo_documento&&o.nacimiento){if(!Be())return;te.value="",x.value=!0}x.value?b.value=1:(o.nombre||(o.errors.nombre="Este campo es requerido."),(!o.identificacion||te.value!="")&&(o.errors.identificacion=te.value||"Este campo es requerido."),o.tipo_documento||(o.errors.tipo_documento="Este campo es requerido."),o.nacimiento||(o.errors.nacimiento="Este campo es requerido."))},Me=i=>{switch(x.value=!1,i){case 1:Ie();break;case 2:pe();break}x.value&&(b.value=i)},pe=()=>{x.value=!1,o.genero&&o.etnia&&o.condicion&&o.celular&&o.comuna&&o.barrio&&o.direccion&&o.checked&&o.declaracion&&(x.value=!0,b.value=2),x.value||(o.genero||(o.errors.genero="Este campo es requerido."),o.etnia||(o.errors.etnia="Este campo es requerido."),o.condicion||(o.errors.condicion="Este campo es requerido."),o.celular||(o.errors.celular="Este campo es requerido."),o.comuna||(o.errors.comuna="Este campo es requerido."),o.barrio||(o.errors.barrio="Este campo es requerido."),o.direccion||(o.errors.direccion="Este campo es requerido."),o.checked||(o.errors.checked="Este campo es requerido."),o.declaracion||(o.errors.declaracion="Este campo es requerido."))},Te=()=>{x.value=!1,console.log("Validando datos del paso 3",$.value),(o.cedula_front||$)&&(console.log("Datos del paso 3 son válidos"),x.value=!0),x.value?$e():o.cedula_front||(o.errors.cedula_front="Este campo es requerido.")},ze=async()=>{const i=await De("register");o.recaptcha_token=i,o.post(route("create-user"),{onSuccess:()=>{p({title:"Registro realizado",text:"Registro de usuario realizado exitosamente. Para poder votar, se realizará internamente la validación de su información, el estado del trámite será notificado a través del correo electrónico registrado. Recuerde que su usuario es su número de identificación y la contraseña es la que ingresó al momento del registro.",icon:"success"}).then(e=>{window.location.href=route("/dashboard")}),sessionStorage.removeItem("fallo_camara"),sessionStorage.removeItem("fallo_registro"),sessionStorage.removeItem("registro_duplicado"),o.reset(),ae()},onError:e=>{ae(),p({title:"Error",text:"Ocurrió un error al registrar el usuario.",icon:"error"}).then(t=>{b.value=0}),console.error(e)}})},fe=async i=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:i}}});D.value.srcObject=e,ce.value=!0}catch(e){console.error("Error al iniciar cámara:",e),y.value="Error al iniciar la cámara."}};q(N,async i=>{i&&await fe(i)});const ae=()=>{var e;const i=(e=D.value)==null?void 0:e.srcObject;i&&i.getTracks().forEach(t=>t.stop()),D.value.srcObject=null};q(_,i=>{i==!1&&ae()});const Re=i=>(console.log(i),ne.find(e=>e.id==i));async function Ne(){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices){p.fire({icon:"warning",title:"Navegador no compatible",text:"Tu navegador no permite acceder a los dispositivos multimedia."});return}try{(await navigator.mediaDevices.enumerateDevices()).filter(t=>t.kind==="videoinput").length===0?p.fire({icon:"warning",title:"Cámara no detectada",text:"Es necesario que el dispositivo tenga una cámara para continuar con el proceso."}):console.log("Cámara detectada, puede continuar.")}catch(i){console.error("Error al verificar dispositivos:",i),p.fire({icon:"error",title:"Error al verificar la cámara",text:"Ocurrió un problema al intentar detectar la cámara."})}}return Pe(()=>{var i;if(c.info.hash_votantes&&((i=c.info.hash_votantes[0])!=null&&i.subtipo)&&(o.comuna=Re(c.info.hash_votantes[0].subtipo)),o.fecha_expedicion=ue(c.info.fecha_expedicion),c.info.nacimiento){const e=new Date(c.info.nacimiento);H.value=e.getDate(),W.value=e.getMonth()+1,K.value=e.getFullYear(),o.nacimiento=ue(c.info.nacimiento)}Ne()}),(i,e)=>(d(),u(z,null,[l(s(Ge),{title:"Registrar datos"}),l(He,{breadCrumbLinks:Ve},{header:B(()=>e[34]||(e[34]=[M(" Registrar datos ")])),default:B(()=>[a("div",so,[e[49]||(e[49]=a("div",{class:"p-6 border-b border-gray-200"},[a("h1",null,"Registrar registro")],-1)),a("div",io,[l(s(ye),{class:"hidden sm:block",model:Ee.value,activeStep:b.value,"onUpdate:activeStep":e[0]||(e[0]=t=>b.value=t)},null,8,["model","activeStep"]),l(s(ye),{class:"sm:hidden block",model:Se.value,activeStep:b.value,"onUpdate:activeStep":e[1]||(e[1]=t=>b.value=t)},null,8,["model","activeStep"])]),a("form",lo,[b.value==0?(d(),u("div",ro,[a("div",no,[l(m,{for:"nombre",value:"Nombre Completo"}),l(g,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:s(o).nombre,"onUpdate:modelValue":e[2]||(e[2]=t=>s(o).nombre=t),required:""},null,8,["modelValue"]),l(v,{class:"mt-2",message:s(o).errors.nombre},null,8,["message"])]),a("div",co,[l(m,{for:"identificacion",value:"Identificación"}),l(g,{id:"identificacion",type:"text",class:"mt-1 block w-full",modelValue:s(o).identificacion,"onUpdate:modelValue":e[3]||(e[3]=t=>s(o).identificacion=t),required:""},null,8,["modelValue"]),l(v,{class:"mt-2",message:s(o).errors.identificacion},null,8,["message"])]),a("div",uo,[l(m,{for:"tipo_documento",value:"Tipo de Documento"}),C(a("select",{id:"tipo_documento","onUpdate:modelValue":e[4]||(e[4]=t=>s(o).tipo_documento=t),class:"mt-1 block w-full border-gray-300 rounded-lg"},[e[35]||(e[35]=a("option",{value:"",disabled:""},"Seleccione tipo de documento",-1)),(d(!0),u(z,null,P(s(We),t=>(d(),u("option",{key:t.id,value:t.nombre},w(t.nombre),9,mo))),128))],512),[[J,s(o).tipo_documento]]),l(v,{class:"mt-2",message:s(o).errors.tipo_documento},null,8,["message"])]),a("div",po,[l(m,{for:"nacimiento",value:"Fecha de Nacimiento"}),l(g,{id:"nacimiento",type:"date",class:"mt-1 block w-full",modelValue:s(o).nacimiento,"onUpdate:modelValue":e[5]||(e[5]=t=>s(o).nacimiento=t),required:""},null,8,["modelValue"]),l(v,{class:"mt-2",message:s(o).errors.nacimiento},null,8,["message"]),U.value?(d(),u("p",fo,w(U.value),1)):I("",!0)]),a("div",vo,[l(m,{class:"col-span-3",for:"nacimiento",value:"Fecha de Nacimiento"}),a("div",go,[l(m,{for:"nacimientoDia",value:"Día"}),l(g,{id:"nacimientoDia",type:"number",class:"block",modelValue:H.value,"onUpdate:modelValue":e[6]||(e[6]=t=>H.value=t)},null,8,["modelValue"])]),a("div",bo,[l(m,{for:"nacimientoMes",value:"Mes"}),l(g,{id:"nacimientoMes",type:"number",class:"block",modelValue:W.value,"onUpdate:modelValue":e[7]||(e[7]=t=>W.value=t)},null,8,["modelValue"])]),a("div",xo,[l(m,{for:"nacimientoAnnio",value:"Año"}),l(g,{id:"nacimientoAnnio",type:"number",class:"block",modelValue:K.value,"onUpdate:modelValue":e[8]||(e[8]=t=>K.value=t)},null,8,["modelValue"])]),l(v,{class:"mt-2",message:s(o).errors.nacimiento},null,8,["message"]),U.value?(d(),u("p",ho,w(U.value),1)):I("",!0)]),a("div",yo,[a("button",{type:"button",class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white p-2 rounded-md shadow-xl",onClick:e[9]||(e[9]=t=>Me(1))}," Siguiente ")])])):I("",!0),b.value==1?(d(),u("div",wo,[a("div",_o,[l(m,{for:"genero",value:"Identidad de Género"}),a("div",ko,[a("div",Vo,[C(a("input",{type:"radio",id:"masculino",value:"Masculino","onUpdate:modelValue":e[10]||(e[10]=t=>s(o).genero=t)},null,512),[[ie,s(o).genero]]),e[36]||(e[36]=a("label",{class:"ps-2 text-sm sm:text-base",for:"masculino"},"Masculino",-1))]),a("div",Co,[C(a("input",{type:"radio",id:"two",value:"Femenino","onUpdate:modelValue":e[11]||(e[11]=t=>s(o).genero=t)},null,512),[[ie,s(o).genero]]),e[37]||(e[37]=a("label",{class:"ps-2 text-sm sm:text-base",for:"two"},"Femenino",-1))]),G.value?(d(),u("div",Do,[l(m,{class:"sm:text-sm text-xs",for:"genero",value:"¿Cual?"}),l(g,{id:"genero",type:"text",class:"mt-1 block w-full p-0 sm:p-1",modelValue:s(o).genero,"onUpdate:modelValue":e[12]||(e[12]=t=>s(o).genero=t),autocomplete:"genero"},null,8,["modelValue"]),l(v,{class:"mt-1",message:s(o).errors.genero},null,8,["message"])])):(d(),u("div",Eo,[C(a("input",{type:"radio",id:"tres",value:"true","onUpdate:modelValue":e[13]||(e[13]=t=>G.value=t)},null,512),[[ie,G.value]]),e[38]||(e[38]=a("label",{class:"ps-2 text-sm sm:text-base",for:"tres"},"Otro",-1))]))])]),a("div",So,[l(m,{for:"etnia",value:"Grupo poblacional"}),C(a("select",{id:"etnia","onUpdate:modelValue":e[14]||(e[14]=t=>s(o).etnia=t),class:"mt-1 block w-full border-gray-300 rounded-lg"},[e[39]||(e[39]=a("option",{value:"",disabled:""}," Seleccione grupo poblacional perteneciente ",-1)),(d(!0),u(z,null,P(s(Ke),t=>(d(),u("option",{key:t.id,value:t.nombre},w(t.nombre),9,jo))),128))],512),[[J,s(o).etnia]]),l(v,{class:"mt-2",message:s(o).errors.etnia},null,8,["message"])]),a("div",Fo,[l(m,{for:"condicion",value:"Condición poblacional"}),C(a("select",{id:"condicion","onUpdate:modelValue":e[15]||(e[15]=t=>s(o).condicion=t),class:"mt-1 block w-full border-gray-300 rounded-lg"},[e[40]||(e[40]=a("option",{value:"",disabled:""}," Seleccione condición poblacional ",-1)),(d(!0),u(z,null,P(s(Xe),t=>(d(),u("option",{key:t.id,value:t.nombre},w(t.nombre),9,Uo))),128))],512),[[J,s(o).condicion]]),l(v,{class:"mt-2",message:s(o).errors.condicion},null,8,["message"])]),a("div",$o,[a("div",null,[l(m,{for:"celular",value:"Celular"}),a("div",qo,[e[41]||(e[41]=a("div",{class:"flex items-center w-auto[20%] block p-2 border border-gray-400 bg-gray-100 rounded-md"},[a("p",null,"+57")],-1)),l(g,{id:"celular",type:"number",class:"w-[80%] flex",modelValue:s(o).celular,"onUpdate:modelValue":e[16]||(e[16]=t=>s(o).celular=t),required:""},null,8,["modelValue"])]),l(v,{class:"mt-2",message:s(o).errors.celular},null,8,["message"])])]),a("div",Bo,[l(m,{for:"comuna",value:"Comuna/Corregimiento"}),l(s(_e),{id:"comuna",modelValue:ee.value,"onUpdate:modelValue":e[17]||(e[17]=t=>ee.value=t),options:ne.value,filter:"",optionLabel:"detalle",placeholder:"Seleccione comuna/corregimiento del proyecto",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),l(v,{class:"mt-2",message:s(o).errors.comuna},null,8,["message"])]),a("div",Io,[l(m,{for:"barrio",value:"Barrio/Vereda"}),l(s(_e),{id:"barrio",modelValue:s(o).barrio,"onUpdate:modelValue":e[18]||(e[18]=t=>s(o).barrio=t),options:oe.value,filter:"",placeholder:"Seleccione barrio/vereda de dirección",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),de.value?(d(),u("div",Mo,[l(m,{for:"barrio_otro",value:"Cual?"}),l(g,{id:"barrio_otro",type:"text",class:"mt-1 block w-full",modelValue:s(o).barrio,"onUpdate:modelValue":e[19]||(e[19]=t=>s(o).barrio=t)},null,8,["modelValue"])])):I("",!0),l(v,{class:"mt-2",message:s(o).errors.barrio},null,8,["message"])]),a("div",To,[l(m,{for:"direccion",value:"Dirección"}),l(g,{id:"direccion",type:"text",class:"mt-1 block w-full",modelValue:s(o).direccion,"onUpdate:modelValue":e[20]||(e[20]=t=>s(o).direccion=t),required:""},null,8,["modelValue"]),l(v,{class:"mt-2",message:s(o).errors.direccion},null,8,["message"])]),a("div",zo,[l(m,{for:"email",value:"Correo Electrónico"}),l(g,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:s(o).email,"onUpdate:modelValue":e[21]||(e[21]=t=>s(o).email=t)},null,8,["modelValue"]),l(v,{class:"mt-2",message:s(o).errors.email},null,8,["message"])]),e[45]||(e[45]=a("div",{class:"mb-2"},[a("div",{class:"bg-azul rounded-md p-2 w-full h-full"},[a("p",{class:"text-white text-base"}," Digite una contraseña fácil de recordar para luego acceder a votar. ")])],-1)),a("div",Ro,[l(m,{for:"password",value:"Contraseña (mínimo: 8 caracteres)"}),l(s(to),{id:"password",modelValue:s(o).password,"onUpdate:modelValue":e[22]||(e[22]=t=>s(o).password=t),required:"",toggleMask:"",autocomplete:"current-password"},null,8,["modelValue"]),l(v,{class:"mt-2",message:s(o).errors.password},null,8,["message"])]),a("div",No,[C(a("input",{type:"checkbox",id:"consentimiento1",name:"consentimiento1",required:"","onUpdate:modelValue":e[23]||(e[23]=t=>s(o).checked=t)},null,512),[[be,s(o).checked]]),e[42]||(e[42]=a("label",{for:"consentimiento1",class:"ps-4 pe-12 sm:text-base text-sm text-gray-500"},[M("Conozco y Acepto la Política de Privacidad de Datos "),a("a",{href:"https://www.pereira.gov.co/publicaciones/38/politicas-de-privacidad-y-condiciones-de-uso/",target:"_blank",class:"underline !text-azul cursor-pointer"},"politica")],-1)),l(v,{class:"mt-1",message:s(o).errors.checked},null,8,["message"])]),a("div",Oo,[C(a("input",{type:"checkbox",id:"consentimiento2",name:"consentimiento2",required:"","onUpdate:modelValue":e[24]||(e[24]=t=>s(o).declaracion=t)},null,512),[[be,s(o).declaracion]]),e[43]||(e[43]=a("label",{for:"consentimiento2",class:"ps-4 pe-12 sm:text-base text-sm text-gray-500"},[M("Manifiesto que acepto, bajo juramento, la "),a("a",{href:"https://www.pereira.gov.co/loader.php?lServicio=Tools2&lTipo=descargas&lFuncion=visorpdf&file=https%3A%2F%2Fwww.pereira.gov.co%2Floader.php%3FlServicio%3DTools2%26lTipo%3Ddescargas%26lFuncion%3DexposeDocument%26idFile%3D211273%26tmp%3De1c59e50ed23a13cda9087f627ac4f4d%26urlDeleteFunction%3Dhttps%253A%252F%252Fwww.pereira.gov.co%252Floader.php%253FlServicio%253DTools2%2526lTipo%253Ddescargas%2526lFuncion%253DdeleteTemporalFile%2526tmp%253De1c59e50ed23a13cda9087f627ac4f4d&pdf=1&tmp=e1c59e50ed23a13cda9087f627ac4f4d&fileItem=211273",target:"_blank",class:"underline !text-azul cursor-pointer"},"Declaración"),M(" sobre la veracidad de la información registrada")],-1)),l(v,{class:"mt-1",message:s(o).errors.declaracion},null,8,["message"])]),a("div",Ao,[a("div",Lo,[a("button",{type:"button",onClick:e[25]||(e[25]=t=>me(0)),class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white px-4 rounded-md shadow-xl"}," Atrás ")]),a("div",Po,[l(we,{type:"button",class:xe(["h-full",{"opacity-25":s(o).processing}]),onClick:pe,disabled:s(o).processing},{default:B(()=>e[44]||(e[44]=[M(" Siguiente ")])),_:1},8,["class","disabled"])])])])):I("",!0),b.value==2?(d(),u("div",Go,[a("div",Yo,[e[47]||(e[47]=a("div",{class:"col-span-2 text-sm sm:text-base text-gray-800 pt-6"},[a("h3",{class:"text-lg font-semibold"}," Cargue documento de identificación parte frontal "),a("p",null," Para cargar el documento frontal, asegúrese de que la imagen sea clara y legible. El documento debe estar bien iluminado y sin reflejos. ")],-1)),a("div",Ho,[a("div",Wo,[e[46]||(e[46]=a("h4",{class:"text-2xl underline"},"Ejemplo parte frontal",-1)),a("img",{src:s(Qe),alt:"Documento Frontal ejemplo",class:"w-full h-full object-contain mt-2"},null,8,Ko)])]),a("div",Xo,[a("div",Zo,[l(g,{id:"cedula_front",type:"file",class:"mt-1 !border-0",accept:"image/jpeg,image/jpg,image/png,image/gif,image/svg+xml,image/webp",onInput:e[26]||(e[26]=t=>Fe("cedula_front",t)),maxFileSize:2e6}),l(v,{class:"mt-2",message:s(o).errors.cedula_front},null,8,["message"]),a("div",Jo,[$.value?(d(),u("img",{key:0,src:je($.value,1),alt:s(o).cedula_front,class:"w-4/6 h-full object-contain"},null,8,Qo)):(d(),Ye(s(ao),{key:1,class:"w-2/6 text-gray-300 flex justify-center items-center"}))]),$.value?(d(),u("div",et,[a("button",{onClick:e[27]||(e[27]=t=>Ue(1)),type:"button",class:"bg-red-500 text-white px-4 py-2 rounded"}," Eliminar Imagen ")])):I("",!0)])])]),a("div",ot,[l(g,{id:"campo_obligatorio",type:"text",class:"mt-1 !border-0 hidden",modelValue:s(o).campoObligatorio,"onUpdate:modelValue":e[28]||(e[28]=t=>s(o).campoObligatorio=t)},null,8,["modelValue"])]),a("div",tt,[a("div",at,[a("button",{type:"button",onClick:e[29]||(e[29]=t=>me(1)),class:"bg-secondary hover:bg-primary text-xs sm:text-sm text-white px-4 rounded-md shadow-xl"}," Atrás ")]),a("div",st,[l(we,{type:"button",onClick:Te,class:xe({"opacity-25":s(o).processing}),disabled:s(o).processing},{default:B(()=>e[48]||(e[48]=[M(" Siguiente ")])),_:1},8,["class","disabled"])])])])):I("",!0)])])]),_:1}),l(le,{show:h.value,closeable:!1},{default:B(()=>[e[50]||(e[50]=a("h2",{class:"py-4 text-2xl font-semibold text-gray-800 flex tex-center justify-center bg-azul text-white"}," Cargando datos... ",-1)),a("div",it,[l(s(Je),{"aria-label":"Loading"})])]),_:1},8,["show"]),l(le,{show:_.value,closeable:!0},{default:B(()=>[e[52]||(e[52]=a("h2",{class:"py-4 text-2xl font-semibold text-gray-800 flex flex-wrap tex-center justify-center bg-azul text-white"}," Validación Biométrica ",-1)),e[53]||(e[53]=a("div",{class:"mt-4 px-4"},[a("p",{class:"text-sm sm:text-base text-gray-800"}," Por favor, asegúrese de que su rostro esté bien iluminado y visible en la cámara (sin gorras, tapabocas, gafas). ")],-1)),a("div",lt,[e[51]||(e[51]=a("label",{for:"camera"},"Seleccionar cámara:",-1)),C(a("select",{id:"camera","onUpdate:modelValue":e[30]||(e[30]=t=>N.value=t),class:"rounded-lg w-auto ms-4"},[(d(!0),u(z,null,P(Y.value,t=>(d(),u("option",{key:t.deviceId,value:t.deviceId},w(t.label||"Cámara desconocida"),9,rt))),128))],512),[[J,N.value]]),a("video",{ref_key:"video",ref:D,autoplay:"",muted:"",width:"400",height:"340",class:"rounded-xl shadow-lg flex mx-auto mt-6"},null,512),a("button",{type:"button",disabled:E.value,class:"bg-secondary hover:bg-primary z-1000 text-base sm:text-base text-white p-2 rounded-md shadow-xl flex mx-auto mt-4 disabled:bg-gray-500",onClick:e[31]||(e[31]=t=>qe())}," Validar ",8,nt),M(" "+w(y.value),1)])]),_:1},8,["show"]),l(le,{show:R.value,closeable:!0},{default:B(()=>[e[54]||(e[54]=a("div",{class:"flex justify-between items-center bg-azul text-white px-4 py-4"},[a("h2",{class:"text-2xl font-semibold text-center"}," Registros duplicados o similares ")],-1)),a("div",ct,[(d(!0),u(z,null,P(i.usuarios,t=>(d(),u("div",{key:t.id,class:"flex gap-4 items-center mb-4 border-b pb-2"},[a("img",{src:i.getUrlPhoto(t.biometrico.photo),alt:"Foto",class:"w-36 h-full object-cover rounded"},null,8,dt),a("div",null,[a("p",ut," Nombre: "+w(t.nombre),1),a("p",mt," Identificación: "+w(t.identificacion),1),a("p",pt,"Estado: "+w(t.biometrico.estado),1)])]))),128)),a("button",{type:"button",class:"bg-secondary hover:bg-primary z-1000 text-base sm:text-base text-white p-2 rounded-md shadow-xl flex mx-auto mt-4 disabled:bg-gray-500",onClick:e[32]||(e[32]=t=>R.value=!1)}," Cancelar registro "),a("button",{type:"button",class:"bg-blue-600 hover:bg-blue-400 z-1000 text-base sm:text-base text-white p-2 rounded-md shadow-xl flex mx-auto mt-4 disabled:bg-gray-500",onClick:e[33]||(e[33]=t=>Q.value=!0)}," aprobar registro ")])]),_:1},8,["show"])],64))}};export{Nt as default};
