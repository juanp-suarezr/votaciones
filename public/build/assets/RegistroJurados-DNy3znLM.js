import{x as E,r as b,T as $,l as U,o as m,d as g,b as a,e as t,u as s,Z as B,j as c,B as x,f as _,c as v,F as w,k as y,t as V,v as k,n as R}from"./app-idO8rmG9.js";import{_ as h}from"./PrimaryButton-Dsi1RdKZ.js";/* empty css                                                                   */import{_ as i}from"./InputError-fc0TwFpo.js";import{_ as n}from"./InputLabel-DNPFCYV1.js";import{_ as f}from"./TextInput-BBvGPvZ-.js";import{s as j}from"./index-C-fU4vDW.js";import{s as q}from"./index-DqsCiYFX.js";import{c as I}from"./comunas-DceGOULS.js";import{_ as M}from"./AuthenticatedLayout-CHeVNrVV.js";import{_ as J}from"./SecondaryLink-hLM3Wh9U.js";import"./index-CdX_mebD.js";import"./index-WlmsCYGD.js";import"./index-rigkT7o0.js";import"./index-Cjw6RQOq.js";import"./index-CsId_lVy.js";import"./index-DTM4B8Aa.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BreadCrumb-BrMf3ja_.js";import"./SecondaryButtonReturn-CDq0qDPu.js";import"./XCircleIcon-D7qfKJLw.js";import"./index-ChMPPBT1.js";const L={class:"w-full h-full sm:grid sm:grid-cols-2 mx-auto bg-white shadow-lg rounded-lg px-4 sm:px-6 py-12 z-10 gap-6"},N={class:"col-span-2 w-full"},D={class:"mb-2"},F={class:"mb-2"},P={class:"mb-2"},T={class:"mb-2"},O={class:"mb-2"},G={class:"mb-2"},H=["value"],Z={class:"mb-2"},K={class:"mb-2"},Q={class:"mt-4 flex flex-col items-end"},W={class:"w-full bg-white border shadow-sm rounded-xl"},X={class:"w-full h-full flex px-4"},Y={class:"mt-6 w-full"},ee=["href"],oe={class:"mt-2"},se=["value"],te={class:"mt-12 flex flex-col items-end"},je={__name:"RegistroJurados",props:{eventos:{type:Array,default:()=>[]},puntos_votacion:{type:Array,default:()=>[]}},setup(p){const u=E("$swal");b(null),b("imagen"),b(null);const l=p,S=[{url:route("delegados.index"),text:"Gestion de jurados"},{url:"",text:"Añadir Jurado"}],o=$({nombre:"",identificacion:"",contacto:"",comuna:"",punto_votacion:"",id_evento:"",tipo:"jurado",email:"",password:"",jurados:""}),A=()=>{console.log(o),o.comuna=o.comuna.value,o.punto_votacion=o.punto_votacion.id,o.post(route("registro-jurados.store"),{forceFormData:!0,onSuccess:()=>{o.reset(),u.fire({title:"Registro exitoso",text:"El jurado ha sido registrado correctamente.",icon:"success",confirmButtonText:"Aceptar"}).then(d=>{})},onError:d=>{console.error(d),u.fire({title:"Error",text:"Hubo un problema al registrar el jurado. Por favor, revisa los campos e intenta nuevamente.",icon:"error",confirmButtonText:"Aceptar"})}})},z=d=>{const e=d.target.files[0];if(!e){o.errors.jurados="Por favor, selecciona un archivo.";return}if(e.size>2*1024*1024){o.errors.jurados="El archivo no debe ser mayor a 2 MB.";return}o.errors.jurados=null,o.jurados=e,console.log(o.jurados)},C=()=>{o.post(route("cargueJurados"),{forceFormData:!0,onSuccess:()=>{l.numRegistrosInsertados!==void 0&&l.numRegistrosActualizados!==void 0?u({title:"Registros Cargados",text:`Se han importado ${l.numRegistrosInsertados} nuevos registros correctamente y ${l.numRegistrosActualizados} actualizados`,icon:"success"}):l.numRegistrosInsertados!==void 0&&l.numRegistrosActualizados==null?u({title:"Registros Cargados",text:`Se han importado ${l.numRegistrosInsertados} nuevos registros correctamente y 0 actualizados`,icon:"success"}):l.numRegistrosInsertados==null&&l.numRegistrosActualizados!==void 0?u({title:"Registros Cargados",text:`Se han importado 0 nuevos registros correctamente y ${l.numRegistrosActualizados} actualizados`,icon:"success"}):u({title:"Registros Cargados",text:"Se han importado los registros de forma masiva",icon:"success"})},onError:d=>{u({title:"Error",text:"Hubo un problema al procesar la solicitud.",icon:"error"})}})};return(d,e)=>(m(),U(M,{breadCrumbLinks:S},{default:g(()=>[a(s(B),{title:"Registro de jurados"}),t("div",L,[t("div",N,[e[11]||(e[11]=t("h1",{class:"text-2xl font-bold text-center text-gray-800"}," Registro Jurados ",-1)),a(J,{class:"text-right",href:d.route("delegados.index")},{default:g(()=>e[10]||(e[10]=[c(" Regresar ")])),_:1},8,["href"])]),t("form",{onSubmit:x(A,["prevent"]),enctype:"multipart/form-data",class:"sm:grid sm:grid-cols-2 gap-4 mt-6"},[t("div",D,[a(n,{for:"nombre",value:"Nombre(*)"}),a(f,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:s(o).nombre,"onUpdate:modelValue":e[0]||(e[0]=r=>s(o).nombre=r),required:"",autofocus:"",autocomplete:"off"},null,8,["modelValue"]),a(i,{class:"mt-2",message:s(o).errors.nombre},null,8,["message"])]),t("div",F,[a(n,{for:"identificacion",value:"Identificación"}),a(f,{id:"identificacion",type:"number",class:"mt-1 block w-full",modelValue:s(o).identificacion,"onUpdate:modelValue":e[1]||(e[1]=r=>s(o).identificacion=r),required:"",autofocus:"",autocomplete:"off"},null,8,["modelValue"]),a(i,{class:"mt-2",message:s(o).errors.identificacion},null,8,["message"])]),t("div",P,[a(n,{for:"contacto",value:"Numero de contacto"}),a(f,{id:"contacto",type:"number",class:"mt-1 block w-full",modelValue:s(o).contacto,"onUpdate:modelValue":e[2]||(e[2]=r=>s(o).contacto=r),required:"",autofocus:"",autocomplete:"off"},null,8,["modelValue"]),a(i,{class:"mt-2",message:s(o).errors.contacto},null,8,["message"])]),t("div",T,[a(n,{for:"comuna",value:"Comuna/corregimiento correspondiente"}),a(s(j),{id:"comuna",modelValue:s(o).comuna,"onUpdate:modelValue":e[3]||(e[3]=r=>s(o).comuna=r),options:s(I),filter:"",optionLabel:"label",placeholder:"Seleccione comuna",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),a(i,{class:"mt-2",message:s(o).errors.comuna},null,8,["message"])]),t("div",O,[a(n,{for:"punto_votacion",value:"Punto de votación"}),a(s(j),{id:"punto_votacion",modelValue:s(o).punto_votacion,"onUpdate:modelValue":e[4]||(e[4]=r=>s(o).punto_votacion=r),options:p.puntos_votacion,filter:"",optionLabel:"detalle",placeholder:"Seleccione un punto de votación",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),a(i,{class:"mt-2",message:s(o).errors.punto_votacion},null,8,["message"])]),t("div",G,[a(n,{for:"id_evento",value:"Asignar Evento"}),_(t("select",{id:"id_evento","onUpdate:modelValue":e[5]||(e[5]=r=>s(o).id_evento=r),class:"block mt-1 w-full rounded-md form-select focus:border-sky-600"},[e[12]||(e[12]=t("option",{value:"",disabled:"",selected:""},"Seleccione un evento",-1)),(m(!0),v(w,null,y(p.eventos,r=>(m(),v("option",{key:r.id,value:r.id},V(r.nombre),9,H))),128))],512),[[k,s(o).id_evento]]),a(i,{class:"mt-2",message:s(o).errors.id_evento},null,8,["message"])]),t("div",Z,[a(n,{for:"email",value:"Correo Electrónico"}),a(f,{id:"email",type:"email",class:"mt-1 block",modelValue:s(o).email,"onUpdate:modelValue":e[6]||(e[6]=r=>s(o).email=r),required:""},null,8,["modelValue"]),a(i,{class:"mt-2",message:s(o).errors.email},null,8,["message"])]),e[14]||(e[14]=t("div",{class:"mb-2 col-span-2"},[t("div",{class:"bg-azul rounded-md p-2 w-full h-full"},[t("p",{class:"text-white text-base"}," Asegúrese de que la contraseña sea facil de recordar para usted, ya que la necesitará para acceder a su cuenta en el momento de la votación. ")])],-1)),t("div",K,[a(n,{for:"password",value:"Contraseña (mínimo: 8 caracteres)"}),a(s(q),{id:"password",modelValue:s(o).password,"onUpdate:modelValue":e[7]||(e[7]=r=>s(o).password=r),required:"",toggleMask:""},null,8,["modelValue"]),a(i,{class:"mt-2",message:s(o).errors.password},null,8,["message"])]),t("div",Q,[a(h,{class:R({"opacity-25":s(o).processing}),disabled:s(o).processing},{default:g(()=>e[13]||(e[13]=[c(" Registrarse ")])),_:1},8,["class","disabled"])])],32),t("div",W,[e[20]||(e[20]=t("div",{class:"bg-gray-100 border-b rounded-t-xl py-3 px-4 md:py-4 md:px-5 flex"},[t("h3",{class:"text-gray-500 m-auto"},"CARGUE MASIVO")],-1)),t("div",X,[t("div",Y,[e[18]||(e[18]=t("p",{class:""},[t("b",null,"Nota:"),c(" Para subir masivamente la lista de jurados, debe descargar la plantilla, dando clic en el siguiente botón. ")],-1)),t("a",{href:d.route("plantillaJur.excel"),class:"flex inline-flex text-white bg-green-800 hover:bg-blue-800 font-medium rounded-lg text-sm px-4 py-2 mt-4"},e[15]||(e[15]=[t("i",{class:"fa-solid fa-file-arrow-down m-auto me-2"},null,-1),c("Descargar plantilla ")]),8,ee),e[19]||(e[19]=t("p",{class:"mt-4"}," Luego de descargar la plantilla y cargar los datos, subir el mismo archivo excel en el apartado de abajo. ",-1)),t("form",{onSubmit:x(C,["prevent"])},[t("div",oe,[a(n,{for:"id_evento",value:"Asignar Evento"}),_(t("select",{id:"id_evento","onUpdate:modelValue":e[8]||(e[8]=r=>s(o).id_evento=r),class:"block mt-1 w-full rounded-md form-select focus:border-sky-600"},[e[16]||(e[16]=t("option",{value:"",disabled:"",selected:""}," Seleccione un evento ",-1)),(m(!0),v(w,null,y(p.eventos,r=>(m(),v("option",{key:r.id,value:r.id},V(r.nombre),9,se))),128))],512),[[k,s(o).id_evento]]),a(i,{class:"mt-2",message:s(o).errors.id_evento},null,8,["message"])]),a(f,{id:"cargueMasivoJurados",type:"file",class:"mt-4 block w-full",onChange:e[9]||(e[9]=r=>z(r))}),a(i,{class:"mt-2",message:s(o).errors.jurados},null,8,["message"]),t("div",null,[t("div",te,[a(h,{class:R({"opacity-25":s(o).processing}),disabled:s(o).processing},{default:g(()=>e[17]||(e[17]=[c(" Enviar ")])),_:1},8,["class","disabled"])])])],32)])])])])]),_:1}))}};export{je as default};
