import{x as N,r as I,T as A,Q as F,w as $,s as R,c as i,o as r,b as c,u as x,Z as j,d as g,e as t,m as S,j as y,F as m,k as b,t as n,z as L,N as V}from"./app-CT680WbL.js";import{_ as B}from"./AuthenticatedLayout-D0EhdYoe.js";import{_ as h}from"./Pagination-BEzcmtW2.js";import{c as D}from"./comunas_completas-Gg-gMHNz.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BreadCrumb-BCO3_6qP.js";import"./SecondaryButtonReturn-C3teBeRc.js";import"./index-JKhcEbL9.js";import"./index-DQrz5kO6.js";import"./index-Cuyrp-m7.js";import"./PrimaryButton-CC4x-6gw.js";import"./XCircleIcon-Dv5PCz4G.js";const E={class:"flex flex-wrap gap-4 mb-8"},T={class:"flex flex-col"},M=["disabled"],z={key:0},G={key:1},H={class:"flex flex-col"},Q={class:"mb-10"},Z={class:"overflow-x-auto"},q={class:"min-w-full divide-y divide-gray-200 rounded-lg overflow-hidden"},J={class:"px-4 py-2 text-sm text-gray-900"},K={class:"px-4 py-2 text-sm text-gray-700"},O={class:"px-4 py-2 text-sm text-gray-700"},P={class:"px-4 py-2 text-sm text-gray-700"},U={class:"flex flex-col items-center border-t bg-white/40 mt-1 px-5 py-3 xs:flex-row xs:justify-between"},W={class:"overflow-x-auto"},X={class:"min-w-full divide-y divide-gray-200 rounded-lg overflow-hidden"},Y={class:"px-4 py-2 text-sm text-gray-900"},tt={class:"px-4 py-2 text-sm text-gray-900"},et={class:"px-4 py-2 text-sm text-gray-900"},st={class:"px-4 py-2 text-sm text-gray-900"},ot={class:"px-4 py-2 text-sm text-gray-700"},nt={class:"px-4 py-2 text-sm text-gray-700"},at={class:"px-4 py-2 text-sm text-gray-700"},it={class:"flex flex-col items-center border-t bg-white/40 mt-1 px-5 py-3 xs:flex-row xs:justify-between"},_t={__name:"Index",props:{votantes_fisicos:{type:Array,default:()=>[]},votos_anulados:{type:Array,default:()=>[]},numRegistrosInsertados:{type:Number,default:void 0},numInconsistencias:{type:Number,default:void 0}},setup(l){const u=N("$swal");console.log(l);const v=[{url:"",text:"Cargue de votantes físicos"}],d=I(null),a=A({file:null}),_=o=>{d.value=o.target.files[0],a.file=d.value},w=o=>{var e;return console.log(o),(e=D.find(s=>s.value==o))==null?void 0:e.label},k=()=>{if(!a.file)return;const o=new FormData;o.append("file",a.file),L.post(route("votantesFisicos.cargueMasivo"),o,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{const s=e.data.numRegistrosInsertados??0,p=e.data.numInconsistencias??0;u({title:"Registros Cargados",text:`Se han importado ${s} nuevos registros correctamente y se ha generado ${p} inconsistencias`,icon:"success"}),a.reset(),d.value=null,V.get(route("votantesFisicos.index"),{},{preserveState:!1})}).catch(e=>{console.error(e),u.fire("Error","Hubo un problema al cargar el archivo.","error")})},C=o=>o?new Date(o).toLocaleString():"",f=F();return $(()=>({inserted:f.props.numRegistrosInsertados,inconsistencias:f.props.numInconsistencias}),o=>{const{inserted:e,inconsistencias:s}=o;(e!==void 0||s!==void 0)&&(u({title:"Registros Cargados",text:`Se han importado ${e??0} nuevos registros correctamente y se ha generado ${s??0} inconsistencias`,icon:"success"}),a.reset(),d.value=null)}),R(()=>{const o=f.props.numRegistrosInsertados||void 0,e=f.props.numInconsistencias||void 0;(o!==void 0||e!==void 0)&&(u({title:"Registros Cargados",text:`Se han importado ${o??0} nuevos registros correctamente y se ha generado ${e??0} inconsistencias`,icon:"success"}),a.reset(),d.value=null)}),(o,e)=>(r(),i(m,null,[c(x(j),{title:"Cargue de votantes físicos"}),c(B,{breadCrumbLinks:v},{header:g(()=>e[0]||(e[0]=[y(" Cargue de votantes físicos ")])),default:g(()=>[t("div",E,[t("div",T,[e[1]||(e[1]=t("label",{for:"carga-masiva",class:"text-xs font-semibold mb-1"},"Carga masiva de votantes físicos",-1)),t("input",{id:"carga-masiva",type:"file",class:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none",onChange:_,accept:".csv,.xlsx"},null,32),t("button",{class:"mt-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:!x(a).file||x(a).processing,onClick:k},[x(a).processing?(r(),i("span",z,"Cargando...")):(r(),i("span",G,"Enviar archivo"))],8,M)]),t("div",H,[e[3]||(e[3]=t("label",{class:"text-xs font-semibold mb-1"},"Actualizar información",-1)),c(x(S),{href:o.route("votantesFisicos.cargarInformacion"),class:"mt-2 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center justify-center"},{default:g(()=>e[2]||(e[2]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1),y(" Cargar información de votantes ")])),_:1},8,["href"])])]),t("div",Q,[e[5]||(e[5]=t("h2",{class:"text-lg font-bold mb-2"},"Votantes físicos",-1)),t("div",Z,[t("table",q,[e[4]||(e[4]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Nombre "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Identificación "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Género "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Fecha de creación ")])],-1)),t("tbody",null,[(r(!0),i(m,null,b(l.votantes_fisicos.data,s=>(r(),i("tr",{key:s.id,class:"bg-white hover:bg-gray-50"},[t("td",J,n(s.votante.nombre||"N/A"),1),t("td",K,n(s.votante.identificacion),1),t("td",O,n(s.votante.genero||"N/A"),1),t("td",P,n(C(s.created_at)),1)]))),128))])])]),t("div",U,[c(h,{links:l.votantes_fisicos.links},null,8,["links"])])]),t("div",null,[e[7]||(e[7]=t("h2",{class:"text-lg font-bold mb-2"},"Votos anulados",-1)),t("div",W,[t("table",X,[e[6]||(e[6]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Nombre de votante "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Identificación de votante "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Comuna/Corregimiento "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Tipo "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Cantidad de votos anulados "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Fecha de creación "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Evento ")])],-1)),t("tbody",null,[(r(!0),i(m,null,b(l.votos_anulados.data,s=>(r(),i("tr",{key:s.id,class:"bg-white hover:bg-gray-50"},[t("td",Y,n(s.votante.nombre||"N/A"),1),t("td",tt,n(s.votante.identificacion||"N/A"),1),t("td",et,n(w(s.votante.comuna)||"N/A"),1),t("td",st,n(s.tipo||"N/A"),1),t("td",ot,n(s.cantidad_anulada),1),t("td",nt,n(s.created_at),1),t("td",at,n(s.evento.nombre),1)]))),128))])])]),t("div",it,[c(h,{links:l.votos_anulados.links},null,8,["links"])])])]),_:1})],64))}};export{_t as default};
