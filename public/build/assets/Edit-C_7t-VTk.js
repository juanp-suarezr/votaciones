import{x as U,r as g,T as N,c as L,w as T,a as h,b as _,d as a,u as t,Z as D,e as c,f as o,t as v,j as m,p as M,n as w,m as y,i as P,g as z,v as O,F as q}from"./app-C4KnmPqA.js";import{_ as R}from"./AuthenticatedLayout-DXBYX0JH.js";import{_ as r}from"./InputError-DCBFQekZ.js";import{_ as p}from"./InputLabel-ts8l7eFb.js";import{_ as G}from"./PrimaryButton-Ci4pi88X.js";import{_ as V}from"./TextInput-d3r-2nXa.js";import{_ as H}from"./SecondaryButton-xRxTt8R4.js";import{s as I}from"./index-Cienp_zU.js";import{s as Y}from"./index-BCHpR05D.js";import{s as S}from"./index-tqOZyPjf.js";import{s as Z}from"./index-Cyr0PSL4.js";import{_ as J}from"./SecondaryLink-VE7nGZHX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-Ur12_tdS.js";import"./index-Dw8xiFlH.js";import"./index-Bn1k_uBH.js";import"./index-Be1fzYNM.js";import"./index-B9Va--vc.js";import"./index-DwhoyFj-.js";import"./index-Up_SAiLM.js";import"./index-DlBP5cYi.js";import"./index-CM9VOctz.js";import"./index-C081SlLU.js";const K={class:"flex flex-col bg-white border shadow-sm rounded-xl w-full"},Q={class:"bg-gray-100 border-b rounded-t-xl py-3 px-4 md:py-4 md:px-5 grid grid-cols-2 gap-4"},W={class:"mt-1 text-gray-500"},X={class:"text-right"},ee={class:"p-4 md:p-5"},te={class:"mb-2"},se={class:"mb-2"},oe={class:"col-span-2 mb-2"},ae={key:0},le={class:"col-span-2 mb-2 flex gap-4"},ie={class:"flex flex-wrap gap-4"},ne={class:"card flex justify-content-center"},re={class:"flex flex-wrap gap-4"},de={class:"card flex gap-2 justify-content-center"},ce={class:"mb-2"},me={class:"mb-2"},pe={class:"mb-2"},ue={class:"mt-4 flex flex-col items-end"},De={__name:"Edit",props:{evento:{type:Object,default:()=>({})},tipos:{type:Object,default:()=>({})},eventos:{type:Object,default:()=>({})}},setup(u){const $=U("$swal");g(null);const f=g(!1),d=g(!1),i=u,e=N({nombre:i.evento.nombre||"",descripcion:i.evento.descripcion||"",fecha_inicio:i.evento.fecha_inicio||"",fecha_fin:i.evento.fecha_fin||"",dependencias:i.evento.dependencias||"",tipos:i.evento.tipos!="NA"?i.evento.tipos.split("|"):"",evento_padre:i.evento.evento_padre||null,estado:i.evento.estado||"",id:i.evento.id});console.log(i.evento);const k=[{url:"/eventos",text:"Listado de eventos"},{url:"",text:"Editar evento"}],b=L(()=>{const s=e.descripcion.trim().length;return s>=300?f.value=!0:f.value=!1,s});T(b,()=>{e.descripcion=e.descripcion.trim()});const x=n=>{const s=n.getFullYear(),l=String(n.getMonth()+1).padStart(2,"0"),F=String(n.getDate()).padStart(2,"0"),A=String(n.getHours()).padStart(2,"0"),C=String(n.getMinutes()).padStart(2,"0"),B=String(n.getSeconds()).padStart(2,"0");return`${s}-${l}-${F} ${A}:${C}:${B}`},j=()=>{d.value=!d.value,d&&(e.evento_padre=null)},E=()=>{e.fecha_inicio=x(new Date(e.fecha_inicio)),e.fecha_fin=x(new Date(e.fecha_fin)),e.tipos=e.tipos==""?"NA":e.tipos.join("|"),e.patch(route("eventos.update",i.evento.id),{onSuccess:()=>$({title:"Registro Actualizado",text:"El evento se ha actualizado exitosamente",icon:"success"}).then(n=>{window.location.reload()})})};return(n,s)=>(_(),h(q,null,[a(t(D),{title:"Editar evento"}),a(R,{breadCrumbLinks:k},{header:c(()=>[m(" Editar Evento "+v(u.evento.id),1)]),default:c(()=>[o("div",K,[o("div",Q,[o("h3",W,v(u.evento.nombre),1),o("div",X,[a(J,{href:n.route("eventos.index")},{default:c(()=>s[8]||(s[8]=[m(" Regresar ")])),_:1},8,["href"])])]),o("div",ee,[o("form",{onSubmit:M(E,["prevent"]),class:"grid sm:grid-cols-2 gap-4"},[o("div",te,[a(p,{for:"nombre",value:"Nombre del evento"}),a(V,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:t(e).nombre,"onUpdate:modelValue":s[0]||(s[0]=l=>t(e).nombre=l),required:"",autofocus:"",autocomplete:"nombre"},null,8,["modelValue"]),a(r,{class:"mt-2",message:t(e).errors.nombre},null,8,["message"])]),o("div",se,[a(p,{for:"dependencias",value:"dependencias del evento"}),a(V,{id:"dependencias",type:"text",class:"mt-1 block w-full",modelValue:t(e).dependencias,"onUpdate:modelValue":s[1]||(s[1]=l=>t(e).dependencias=l),required:"",autocomplete:"dependencias"},null,8,["modelValue"]),a(r,{class:"mt-2",message:t(e).errors.dependencias},null,8,["message"])]),o("div",oe,[s[9]||(s[9]=o("p",{class:"text-gray-600 text-sm"}," InformaciÃ³n adicional sobre el evento (max 300 caracteres) ",-1)),a(t(Y),{modelValue:t(e).descripcion,"onUpdate:modelValue":s[2]||(s[2]=l=>t(e).descripcion=l),variant:"filled",autoResize:"",rows:"5",class:"mt-1 block w-full",required:"",autocomplete:"descripcion"},null,8,["modelValue"]),o("p",{class:w(["text-gray-500 text-sm mt-2",{"text-red-500":f.value}])},[m(v(b.value)+" caracteres ",1),f.value?(_(),h("span",ae,"Limite de caracteres superado")):y("",!0)],2),a(r,{class:"mt-2",message:t(e).errors.descripcion},null,8,["message"])]),o("div",le,[o("div",ie,[a(p,{for:"tipos",value:"Tipos"}),o("div",ne,[a(t(I),{id:"tipos",modelValue:t(e).tipos,"onUpdate:modelValue":s[3]||(s[3]=l=>t(e).tipos=l),display:"chip",options:Object.values(u.tipos),placeholder:"Seleccione los tipos",maxSelectedLabels:6,class:"w-full md:w-20rem"},null,8,["modelValue","options"])]),a(r,{class:"mt-2",message:t(e).errors.tipos},null,8,["message"])]),o("div",re,[a(p,{for:"tipos",value:"Asignar evento padre"}),o("div",de,[t(e).evento_padre||d.value==!0?(_(),P(t(Z),{key:0,id:"evento_padre",modelValue:t(e).evento_padre,"onUpdate:modelValue":s[4]||(s[4]=l=>t(e).evento_padre=l),display:"chip",options:i.eventos,"option-label":"nombre","option-value":"id",placeholder:"Asignar un evento padre",maxSelectedLabels:1,class:"w-full md:w-20rem"},null,8,["modelValue","options"])):y("",!0),a(H,{type:"button",onClick:j,class:"w-full md:w-20rem"},{default:c(()=>[m(v(d.value||t(e).evento_padre!=null?"Cancelar":"Asignar evento padre"),1)]),_:1})]),a(r,{class:"mt-2",message:t(e).errors.tipos},null,8,["message"])])]),o("div",ce,[a(t(S),{modelValue:t(e).fecha_inicio,"onUpdate:modelValue":s[5]||(s[5]=l=>t(e).fecha_inicio=l),showTime:"",hourFormat:"24",locale:"es",dateFormat:"dd/mm/yy",variant:"filled",showButtonBar:"",placeholder:"Fecha inicio",class:"my-4 flex justify-center"},null,8,["modelValue"]),a(r,{class:"mt-2",message:t(e).errors.fecha_inicio},null,8,["message"])]),o("div",me,[a(t(S),{modelValue:t(e).fecha_fin,"onUpdate:modelValue":s[6]||(s[6]=l=>t(e).fecha_fin=l),showTime:"",hourFormat:"24",locale:"es",dateFormat:"dd/mm/yy",variant:"filled",showButtonBar:"",placeholder:"Fecha inicio",class:"my-4 flex justify-center"},null,8,["modelValue"]),a(r,{class:"mt-2",message:t(e).errors.fecha_fin},null,8,["message"])]),o("div",pe,[a(p,{for:"estado",value:"Estado"}),z(o("select",{id:"estado","onUpdate:modelValue":s[7]||(s[7]=l=>t(e).estado=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-auto p-2. px-4"},s[10]||(s[10]=[o("option",{value:"Activo"},"Activo",-1),o("option",{value:"Pendiente"},"Pendiente",-1),o("option",{value:"Cerrado"},"Cerrado",-1)]),512),[[O,t(e).estado]]),a(r,{class:"mt-2",message:t(e).errors.estado},null,8,["message"])]),o("div",null,[o("div",ue,[a(G,{class:w({"opacity-25":t(e).processing}),disabled:t(e).processing},{default:c(()=>s[11]||(s[11]=[m(" Guardar Evento ")])),_:1},8,["class","disabled"])])])],32)])])]),_:1})],64))}};export{De as default};
