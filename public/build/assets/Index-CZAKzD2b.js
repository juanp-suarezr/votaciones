import{x as k,r as C,T as N,Q as I,w as $,s as F,c as i,o as r,b as u,u as f,Z as A,d as m,e as t,F as g,k as y,t as a,j as R,z as S,N as V}from"./app-BQ65KfR3.js";import{_ as j}from"./AuthenticatedLayout-DbuffPLl.js";import{_ as b}from"./Pagination-B-A70syX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BreadCrumb-wfK7zAci.js";import"./SecondaryButtonReturn-BrdSiKkG.js";import"./index-D1uG_drD.js";import"./index-BRNhUGfd.js";import"./index--J77SL6X.js";import"./PrimaryButton-BMNcvLkq.js";import"./XCircleIcon-16N1kWmy.js";const D={class:"flex items-center gap-4 mb-8"},E={class:"flex flex-col"},L=["disabled"],B={key:0},T={key:1},M={class:"mb-10"},z={class:"overflow-x-auto"},G={class:"min-w-full divide-y divide-gray-200 rounded-lg overflow-hidden"},H={class:"px-4 py-2 text-sm text-gray-900"},Q={class:"px-4 py-2 text-sm text-gray-700"},Z={class:"px-4 py-2 text-sm text-gray-700"},q={class:"px-4 py-2 text-sm text-gray-700"},J={class:"flex flex-col items-center border-t bg-white/40 mt-1 px-5 py-3 xs:flex-row xs:justify-between"},K={class:"overflow-x-auto"},O={class:"min-w-full divide-y divide-gray-200 rounded-lg overflow-hidden"},P={class:"px-4 py-2 text-sm text-gray-900"},U={class:"px-4 py-2 text-sm text-gray-900"},W={class:"px-4 py-2 text-sm text-gray-700"},X={class:"px-4 py-2 text-sm text-gray-700"},Y={class:"px-4 py-2 text-sm text-gray-700"},tt={class:"flex flex-col items-center border-t bg-white/40 mt-1 px-5 py-3 xs:flex-row xs:justify-between"},pt={__name:"Index",props:{votantes_fisicos:{type:Array,default:()=>[]},votos_anulados:{type:Array,default:()=>[]},numRegistrosInsertados:{type:Number,default:void 0},numInconsistencias:{type:Number,default:void 0}},setup(l){const c=k("$swal");console.log(l);const v=[{url:"",text:"Cargue de votantes físicos"}],d=C(null),n=N({file:null}),h=o=>{d.value=o.target.files[0],n.file=d.value},_=()=>{if(!n.file)return;const o=new FormData;o.append("file",n.file),S.post(route("votantesFisicos.cargueMasivo"),o,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{const s=e.data.numRegistrosInsertados??0,p=e.data.numInconsistencias??0;c({title:"Registros Cargados",text:`Se han importado ${s} nuevos registros correctamente y se ha generado ${p} inconsistencias`,icon:"success"}),n.reset(),d.value=null,V.get(route("votantesFisicos.index"),{},{preserveState:!1})}).catch(e=>{console.error(e),c.fire("Error","Hubo un problema al cargar el archivo.","error")})},w=o=>o?new Date(o).toLocaleString():"",x=I();return $(()=>({inserted:x.props.value.numRegistrosInsertados,inconsistencias:x.props.value.numInconsistencias}),o=>{const{inserted:e,inconsistencias:s}=o;(e!==void 0||s!==void 0)&&(c({title:"Registros Cargados",text:`Se han importado ${e??0} nuevos registros correctamente y se ha generado ${s??0} inconsistencias`,icon:"success"}),n.reset(),d.value=null)}),F(()=>{const o=x.props.value.numRegistrosInsertados||void 0,e=x.props.value.numInconsistencias||void 0;(o!==void 0||e!==void 0)&&(c({title:"Registros Cargados",text:`Se han importado ${o??0} nuevos registros correctamente y se ha generado ${e??0} inconsistencias`,icon:"success"}),n.reset(),d.value=null)}),(o,e)=>(r(),i(g,null,[u(f(A),{title:"Cargue de votantes físicos"}),u(j,{breadCrumbLinks:v},{header:m(()=>e[0]||(e[0]=[R(" Cargue de votantes físicos ")])),default:m(()=>[t("div",D,[t("div",E,[e[1]||(e[1]=t("label",{for:"carga-masiva",class:"text-xs font-semibold mb-1"},"Carga masiva de votantes físicos",-1)),t("input",{id:"carga-masiva",type:"file",class:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none",onChange:h,accept:".csv,.xlsx"},null,32),t("button",{class:"mt-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:!f(n).file||f(n).processing,onClick:_},[f(n).processing?(r(),i("span",B,"Cargando...")):(r(),i("span",T,"Enviar archivo"))],8,L)])]),t("div",M,[e[3]||(e[3]=t("h2",{class:"text-lg font-bold mb-2"},"Votantes físicos",-1)),t("div",z,[t("table",G,[e[2]||(e[2]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Nombre "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Identificación "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Género "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Fecha de creación ")])],-1)),t("tbody",null,[(r(!0),i(g,null,y(l.votantes_fisicos.data,s=>(r(),i("tr",{key:s.id,class:"bg-white hover:bg-gray-50"},[t("td",H,a(s.votante.nombre||"N/A"),1),t("td",Q,a(s.votante.identificacion),1),t("td",Z,a(s.votante.genero||"N/A"),1),t("td",q,a(w(s.created_at)),1)]))),128))])])]),t("div",J,[u(b,{links:l.votantes_fisicos.links},null,8,["links"])])]),t("div",null,[e[5]||(e[5]=t("h2",{class:"text-lg font-bold mb-2"},"Votos anulados",-1)),t("div",K,[t("table",O,[e[4]||(e[4]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Nombre de votante "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Identificación de votante "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Cantidad de votos anulados "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Fecha de creación "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Evento ")])],-1)),t("tbody",null,[(r(!0),i(g,null,y(l.votos_anulados.data,s=>(r(),i("tr",{key:s.id,class:"bg-white hover:bg-gray-50"},[t("td",P,a(s.votante.nombre||"N/A"),1),t("td",U,a(s.votante.identificacion||"N/A"),1),t("td",W,a(s.cantidad_anulada),1),t("td",X,a(s.created_at),1),t("td",Y,a(s.evento.nombre),1)]))),128))])])]),t("div",tt,[u(b,{links:l.votos_anulados.links},null,8,["links"])])])]),_:1})],64))}};export{pt as default};
