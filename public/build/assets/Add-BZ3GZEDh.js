import{x as L,r as m,T as P,q as V,w as h,c,o as f,b as s,u as t,Z as q,d as v,e as l,j as d,B,n as j,p as k,t as _,f as D,v as O,F as T}from"./app-BCaQpHsm.js";import{_ as R}from"./AuthenticatedLayout-CTACvArd.js";import{_ as i}from"./InputError-LbTHJH9P.js";import{_ as n}from"./InputLabel-ChtIGuf9.js";import{_ as M}from"./PrimaryButton-BvR2ZBVo.js";import{_ as S}from"./TextInput-gPjD-s9X.js";import{_ as z}from"./SecondaryButton-DgnP6oQ4.js";import{s as F}from"./index-Ci0YbxBF.js";import{_ as I}from"./SecondaryLink-DIv-mlaB.js";import{s as $}from"./index-IHmaUcFW.js";import{s as G}from"./index-DDuaK1FI.js";import{s as H}from"./index-Dptqq3B_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BreadCrumb-JJJk67pW.js";import"./SecondaryButtonReturn-Cnh4hNV0.js";import"./XCircleIcon-CMPOU9ID.js";import"./index-C4bEG7Ur.js";import"./index-CHuUmmzU.js";import"./index-Cge1yt0f.js";import"./index-C7EsHN12.js";import"./index-C9s61hU0.js";import"./index-BKw5CTfp.js";import"./index-D5FaGjaM.js";const Z={class:"flex flex-col bg-white border shadow-sm rounded-xl w-full"},J={class:"bg-gray-100 border-b rounded-t-xl py-3 px-4 md:py-4 md:px-5 grid grid-cols-2 gap-4"},K={class:"text-right"},Q={class:"p-4 md:p-5"},W={class:"mb-2"},X={class:"mb-2"},Y={class:"col-span-2 mb-2"},ee={key:0},oe={class:"col-span-2 flex md:grid grid-cols-2 flex-wrap gap-4"},te={class:"w-auto"},se={class:"w-auto"},le={class:"card flex inline-flex justify-content-center border border-gray-400 rounded-md shadow-md py-1 px-2 mt-2 !text-gray-500"},re={class:"w-auto mt-4"},ae={key:0,class:"card flex justify-content-center"},ie={key:1,class:"text-xs text-gray-600"},ne=["href"],de={class:"w-auto"},ue={class:"w-full h-full mt-2"},pe={class:"flex flex-wrap items-center w-auto gap-4"},me={key:0,class:"px-2 py-4 w-full border border-gray-400 rounded-md shadow-md mt-4"},ce={class:"mt-4"},fe={class:"mb-2"},ve={class:"mb-2"},be={class:"mt-4 flex flex-col items-end"},Re={__name:"Add",props:{roles:{type:Object,default:()=>({})},tipos:{type:Object,default:()=>({})},eventos:{type:Object,default:()=>({})},parametros:{type:Array,default:()=>[]},subtipos:{type:Array,default:()=>[]},tipo_proyectos:{type:Array,default:()=>[]}},setup(u){const x=L("$swal"),N=m(null),y=u;console.log(y);const e=P({detalle:"",descripcion:"",numero_tarjeton:"",tipo:"Proyecto",eventos:[],subtipo:0,estado:1,tipo_proyecto:""});m([]);const b=m(null),p=m(!1),g=m(!1),A=[{url:route("proyectos.index"),text:"Listado de proyectos"},{url:"",text:"Nuevo proyecto"}],U=()=>{var a;return e.subtipo==0?"por default":typeof e.subtipo=="object"?e.subtipo.detalle:(a=y.subtipos.find(o=>o.id===parseInt(e.subtipo)))==null?void 0:a.detalle},C=V(()=>b.value?y.subtipos.filter(a=>a.codParametro===b.value):[]);h(p,a=>{a||(e.subtipo=0)});const w=V(()=>{const o=e.descripcion.trim().length;return o>=500?g.value=!0:g.value=!1,o});h(w,()=>{e.descripcion=e.descripcion.trim()});const E=()=>{console.log(e),e.subtipo=e.subtipo.id,e.post(route("proyectos.store"),{onSuccess:function(){x({title:"Registro Guardado",text:"El proyecto se ha almacenado exitosamente",icon:"success",didClose:()=>{e.reset(),N.value=null,window.location.href=route("proyectos.index")}})},onError:function(a){console.log(a),x({title:"Error",text:"Ha ocurrido un error al intentar guardar el proyecto",icon:"error"})}})};return(a,o)=>(f(),c(T,null,[s(t(q),{title:"Agregar proyecto"}),s(R,{breadCrumbLinks:A},{header:v(()=>o[9]||(o[9]=[d(" Nuevo proyecto ")])),default:v(()=>[l("div",Z,[l("div",J,[o[11]||(o[11]=l("h3",{class:"mt-1 text-gray-500"},"Nuevo proyecto",-1)),l("div",K,[s(I,{href:a.route("proyectos.index")},{default:v(()=>o[10]||(o[10]=[d(" Regresar ")])),_:1},8,["href"])])]),l("div",Q,[l("form",{onSubmit:B(E,["prevent"]),class:"grid sm:grid-cols-2 gap-4"},[l("div",W,[s(n,{for:"nombre",value:"Nombre del proyecto"}),s(S,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:t(e).detalle,"onUpdate:modelValue":o[0]||(o[0]=r=>t(e).detalle=r),required:"",autofocus:"",autocomplete:"nombre"},null,8,["modelValue"]),s(i,{class:"mt-2",message:t(e).errors.detalle},null,8,["message"])]),l("div",X,[s(n,{for:"numero_tarjeton",value:"Numero tarjeton"}),s(S,{id:"numero_tarjeton",type:"number",class:"mt-1 block w-full",modelValue:t(e).numero_tarjeton,"onUpdate:modelValue":o[1]||(o[1]=r=>t(e).numero_tarjeton=r),autocomplete:"numero_tarjeton"},null,8,["modelValue"]),s(i,{class:"mt-2",message:t(e).errors.numero_tarjeton},null,8,["message"])]),l("div",Y,[o[12]||(o[12]=l("p",{class:"text-gray-600 text-sm"}," Información adicional sobre el evento (max 500 caracteres) ",-1)),s(t(H),{modelValue:t(e).descripcion,"onUpdate:modelValue":o[2]||(o[2]=r=>t(e).descripcion=r),variant:"filled",autoResize:"",rows:"5",class:"mt-1 block w-full",required:"",autocomplete:"descripcion"},null,8,["modelValue"]),l("p",{class:j(["text-gray-500 text-sm mt-2",{"text-red-500":g.value}])},[d(_(w.value)+" caracteres ",1),g.value?(f(),c("span",ee,"Limite de caracteres superado")):k("",!0)],2),s(i,{class:"mt-2",message:t(e).errors.descripcion},null,8,["message"])]),l("div",oe,[l("div",te,[l("div",se,[s(n,{for:"tipos",value:"Tipos de usuarios"}),l("div",le,_(t(e).tipo),1),s(i,{class:"mt-2",message:t(e).errors.tipos},null,8,["message"])]),l("div",re,[s(n,{for:"evento",value:"Asignar evento"}),u.eventos.length?(f(),c("div",ae,[s(t(F),{id:"eventos",modelValue:t(e).eventos,"onUpdate:modelValue":o[3]||(o[3]=r=>t(e).eventos=r),display:"chip",options:u.eventos,"option-label":"nombre","option-value":"id",placeholder:"Seleccione los eventos",maxSelectedLabels:6,class:"w-full md:w-20rem"},null,8,["modelValue","options"])])):(f(),c("p",ie,[o[13]||(o[13]=d(" No hay eventos registrados, registrar uno nuevo ")),l("a",{href:a.route("eventos.create")},"Aquí",8,ne)])),s(i,{class:"mt-2",message:t(e).errors.eventos},null,8,["message"])])]),l("div",de,[l("div",ue,[l("div",pe,[s(n,{for:"tipo_user",value:"Subtipos - "+U()},null,8,["value"]),s(z,{onClick:o[4]||(o[4]=r=>p.value=!p.value),class:"items-center"},{default:v(()=>[d(_(p.value?"Cancelar":"Agregar subtipo"),1)]),_:1})]),p.value?(f(),c("div",me,[l("div",null,[s(n,{for:"parametro",value:"Parámetro"}),s(t($),{id:"parametro",modelValue:b.value,"onUpdate:modelValue":o[5]||(o[5]=r=>b.value=r),options:u.parametros,"option-label":"detalle","option-value":"cod",placeholder:"Seleccione un parámetro",class:"w-full"},null,8,["modelValue","options"]),s(i,{class:"mt-2",message:t(e).errors.parametro},null,8,["message"])]),l("div",ce,[s(n,{for:"parametroDetalle",value:"Subtipo"}),s(t(G),{id:"parametroDetalle",modelValue:t(e).subtipo,"onUpdate:modelValue":o[6]||(o[6]=r=>t(e).subtipo=r),options:C.value,filter:"",optionLabel:"detalle",placeholder:"Seleccione un subtipo",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),s(i,{class:"mt-2",message:t(e).errors.subtipo},null,8,["message"])])])):k("",!0)])])]),l("div",fe,[s(n,{for:"estado",value:"Estado"}),D(l("select",{id:"estado","onUpdate:modelValue":o[7]||(o[7]=r=>t(e).estado=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-auto p-2. px-4"},o[14]||(o[14]=[l("option",{value:"1"},"Activo",-1),l("option",{value:"0"},"Bloqueado",-1)]),512),[[O,t(e).estado]]),s(i,{class:"mt-2",message:t(e).errors.estado},null,8,["message"])]),l("div",ve,[s(n,{for:"tipo_proyecto",value:"Tipo Proyecto"}),s(t($),{id:"tipo_proyecto",modelValue:t(e).tipo_proyecto,"onUpdate:modelValue":o[8]||(o[8]=r=>t(e).tipo_proyecto=r),options:u.tipo_proyectos,"option-label":"nombre","option-value":"id",placeholder:"Seleccione el tipo de proyecto",class:"w-full"},null,8,["modelValue","options"]),s(i,{class:"mt-2",message:t(e).errors.tipo_proyecto},null,8,["message"])]),l("div",null,[l("div",be,[s(M,{class:j({"opacity-25":t(e).processing}),disabled:t(e).processing},{default:v(()=>o[15]||(o[15]=[d(" Registrar proyecto ")])),_:1},8,["class","disabled"])])])],32)])])]),_:1})],64))}};export{Re as default};
