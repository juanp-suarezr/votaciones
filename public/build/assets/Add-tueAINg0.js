import{x,r as w,T as y,o as r,c,a,u as s,w as d,F as v,Z as S,b as u,d as o,l as V,h as C,v as $,i as E,n as N,t as j}from"./app-OVwMhCVp.js";import{_ as k}from"./AuthenticatedLayout-5ouGCpnZ.js";import{_ as g}from"./InputError-Hg4VGmGw.js";import{_}from"./InputLabel--mJkzC7n.js";import{_ as O}from"./PrimaryButton-rsCEzybH.js";import{s as A}from"./multiselect.esm-4r6JX63i.js";import"./calendar.esm-qPdY0Fpz.js";import{_ as B}from"./SecondaryLink-HuiDQUpJ.js";import"./index.esm-jARlJr64.js";import"./ripple.esm-EegZ8Qrz.js";import"./basecomponent.esm--bRO937y.js";import"./portal.esm-b3PjLxF5.js";const R={class:"flex flex-col bg-white border shadow-sm rounded-xl w-full"},z={class:"bg-gray-100 border-b rounded-t-xl py-3 px-4 md:py-4 md:px-5 grid grid-cols-2 gap-4"},D=o("h3",{class:"mt-1 text-gray-500"}," Nuevo Candidato ",-1),F={class:"text-right"},L={class:"p-4 md:p-5"},M={class:"col-span-2 flex gap-4"},T={class:"card flex justify-content-center"},U=o("option",{selected:"",value:"",disabled:""},"Elegir evento de votaciÃ³n",-1),G=["value"],Z={class:"col-span-2"},q={class:"mt-4 flex flex-col items-end"},te={__name:"Add",props:{eventos:{type:Object,default:()=>({})},tipos:{type:Object,default:()=>({})}},setup(m){const p=x("$swal"),f=m;console.log(f);const l=w([]),e=y({eventos:"",candidatos:[]}),b=()=>{if(e.eventos){e.candidatos=[],l.value=[],console.log(e.eventos);const i=f.eventos.find(t=>t.id===e.eventos);console.log(i),i.votantes.forEach(t=>{l.value.push({id:t.id_votante,nombre:t.votante.nombre})}),console.log(l.value)}else l.value=[]},h=()=>{console.log(e),e.patch(route("candidatos.update",e.eventos),{onSuccess:function(){p({title:"Registros Guardado",text:"los candidatos han sido asignados al evento",icon:"success"}).then(i=>{window.location.reload()})},onError:function(){p({title:"Registros fallados",text:"los candidatos no han sido asignados al evento",icon:"error"})}})};return(i,t)=>(r(),c(v,null,[a(s(S),{title:"Agregar candidato"}),a(k,null,{header:d(()=>[u(" Nuevo Candidato ")]),default:d(()=>[o("div",R,[o("div",z,[D,o("div",F,[a(B,{href:i.route("candidatos.index")},{default:d(()=>[u(" Regresar ")]),_:1},8,["href"])])]),o("div",L,[o("form",{onSubmit:V(h,["prevent"]),class:"grid sm:grid-cols-2 gap-4"},[o("div",M,[a(_,{for:"eventos",value:"Eventos"}),o("div",T,[C(o("select",{id:"eventos",name:"eventoSelect","onUpdate:modelValue":t[0]||(t[0]=n=>s(e).eventos=n),onChange:b,class:"block w-full p-2 text-base text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"},[U,(r(!0),c(v,null,E(m.eventos,n=>(r(),c("option",{class:"flex cursor mb-2 sm:mb-auto",key:n.id,value:n.id},j(n.nombre),9,G))),128))],544),[[$,s(e).eventos]])]),a(g,{class:"mt-2",message:s(e).errors.tipos},null,8,["message"])]),o("div",Z,[a(_,{for:"candidatos",value:"Seleccionar Candidatos"}),a(s(A),{modelValue:s(e).candidatos,"onUpdate:modelValue":t[1]||(t[1]=n=>s(e).candidatos=n),options:l.value,filter:"",virtualScrollerOptions:{itemSize:44},optionLabel:"nombre",optionValue:"id",placeholder:"Seleccione candidatos",class:"w-full",disabled:!s(e).eventos},null,8,["modelValue","options","disabled"]),a(g,{class:"mt-2",message:s(e).errors.candidatos},null,8,["message"])]),o("div",null,[o("div",q,[a(O,{class:N({"opacity-25":s(e).processing}),disabled:s(e).processing},{default:d(()=>[u(" Asignar Candidato(s) ")]),_:1},8,["class","disabled"])])])],32)])])]),_:1})],64))}};export{te as default};
