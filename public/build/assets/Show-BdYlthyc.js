import{M as J,T as K,r as h,e as M,c as a,o as r,a as v,u as m,Z as Q,w as b,b as e,d as l,t as s,m as W,h as Y,v as _,F as U,i as ee}from"./app-B-HWhmwY.js";import{_ as te}from"./AuthenticatedLayout-BmU_ZgJp.js";import{_ as oe}from"./SecondaryButton-DBnpnSan.js";import{_ as se}from"./PrimaryButton-D-JOvshb.js";import{c as ne}from"./comunas-Cmo4ygD3.js";import{N as ie}from"./vue-easy-lightbox.esm.min-V_LkV6Na.js";import{_ as le}from"./Modal-n9wpIgma.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ae={class:"p-4"},re={class:"bg-white shadow-md rounded-lg p-6 mb-6"},de={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ce={class:"bg-white shadow-md rounded-lg p-6 flex flex-wrap gap-8 items-start"},ue={class:"flex-shrink-0 flex flex-col items-center"},ve=["src"],me={key:1,class:"text-gray-400 italic"},be={class:"flex-shrink-0 flex flex-col items-center"},ge=["src"],fe={key:1,class:"text-gray-400 italic"},xe={class:"flex-shrink-0 flex flex-col items-center"},pe=["src"],he={key:1,class:"text-gray-400 italic"},we={class:"bg-white shadow-md rounded-lg p-6 mt-6 flex flex-col md:flex-row gap-8 items-start"},ye={class:"w-auto"},ke={class:""},Ne={key:0,class:""},$e={class:"flex flex-col gap-2 w-full md:w-1/3"},Ce={class:"flex flex-col md:flex-row gap-4 mt-8 justify-center items-center h-full"},De={class:"flex justify-between items-center bg-azul text-white px-4 py-4"},Re={class:"px-6 py-4"},je=["src"],Ae={class:"text-gray-800 font-medium"},Se={class:"flex justify-end items-center gap-2 mt-6"},Ee=["disabled"],ze=["disabled"],$=5,Ue={__name:"Show",props:{votante:{type:Object,required:!0},duplicados:{type:Object}},setup(o){const g=J("$swal"),f=o;console.log(f);const c=K({id:f.votante.id,motivo:""}),C=h(""),w=h(!1),y=h(!1),u=h(1),D=M(()=>Math.ceil(f.duplicados.length/$)),G=M(()=>{const n=(u.value-1)*$;return f.duplicados.slice(n,n+$)}),k=n=>{C.value=n,w.value=!0},O=()=>{w.value=!1},q=[{url:route("gestion_registros.index"),text:"Gestion de registros"},{url:"",text:"Detalle registro"}],N=n=>`/storage/uploads/fotos/${n}`,x=n=>`/storage/uploads/documentos/${n}`,H=n=>{var t;return console.log(n),(t=ne.find(p=>p.value==n))==null?void 0:t.label},X=()=>{c.post(route("aprobarRegistro"),{onSuccess:function(){g({title:"Registro Aprobado",text:"El registro ha sido aprobado exitosamente",icon:"success"}).then(()=>{window.location.href=route("gestion_registros.index")})},onError:function(){g({title:"Error al aprobar registro",text:"Error al intentar aprobar este registro, por favor vuelve a intentar",icon:"error"})}})},Z=()=>{c.post(route("rechazarRegistro"),{onSuccess:function(){g({title:"Registro Rechazado",text:"El registro ha sido rechazado exitosamente",icon:"success"}).then(()=>{window.location.href=route("gestion_registros.index")})},onError:function(){g({title:"Error al rechazar registro",text:"Error al intentar rechazar este registro, por favor vuelve a intentar",icon:"error"})}})};return(n,t)=>(r(),a(U,null,[v(m(Q),{title:"Validación del votante"}),v(te,{breadCrumbLinks:q},{header:b(()=>t[8]||(t[8]=[e("div",{class:"flex justify-between items-center"},[e("h1",{class:"text-2xl font-bold"},"Detalle del Registro")],-1)])),default:b(()=>{var p,R,j,A,S,E,z,P,F,V,I,L,T,B;return[e("div",ae,[e("div",re,[t[18]||(t[18]=e("h2",{class:"text-lg font-bold mb-4 text-blue-900"},"Datos del votante",-1)),e("div",de,[e("div",null,[t[9]||(t[9]=e("b",null,"Nombre:",-1)),l(" "+s(((p=o.votante.votante)==null?void 0:p.nombre)||"Sin información"),1)]),e("div",null,[t[10]||(t[10]=e("b",null,"Tipo de documento:",-1)),l(" "+s(((R=o.votante.votante)==null?void 0:R.tipo_documento)||"N/A"),1)]),e("div",null,[t[11]||(t[11]=e("b",null,"Número de documento:",-1)),l(" "+s(((j=o.votante.votante)==null?void 0:j.identificacion)||"N/A"),1)]),e("div",null,[t[12]||(t[12]=e("b",null,"Fecha expedición documento:",-1)),l(" "+s(((A=o.votante.votante)==null?void 0:A.fecha_expedicion)||"N/A"),1)]),e("div",null,[t[13]||(t[13]=e("b",null,"Fecha de nacimiento:",-1)),l(" "+s(((S=o.votante.votante)==null?void 0:S.nacimiento)||"N/A"),1)]),e("div",null,[t[14]||(t[14]=e("b",null,"Genero:",-1)),l(" "+s(((E=o.votante.votante)==null?void 0:E.genero)||"N/A"),1)]),e("div",null,[t[15]||(t[15]=e("b",null,"Comuna:",-1)),l(" "+s(H(o.votante.subtipo)||"N/A"),1)]),e("div",null,[t[16]||(t[16]=e("b",null,"Barrio:",-1)),l(" "+s(((z=o.votante.votante)==null?void 0:z.barrio)||"N/A"),1)]),e("div",null,[t[17]||(t[17]=e("b",null,"Dirección:",-1)),l(" "+s(((P=o.votante.votante)==null?void 0:P.direccion)||"N/A"),1)])])]),e("div",ce,[e("div",ue,[(F=o.votante.votante)!=null&&F.user.biometrico?(r(),a("img",{key:0,src:N((V=o.votante.votante)==null?void 0:V.user.biometrico.photo),alt:"Foto del votante",onClick:t[0]||(t[0]=i=>{var d;return k(N((d=o.votante.votante)==null?void 0:d.user.biometrico.photo))}),class:"w-64 h-64 cursor-pointer object-cover rounded-lg border shadow"},null,8,ve)):(r(),a("span",me,"Sin foto"))]),e("div",be,[(I=o.votante.votante)!=null&&I.user.biometrico?(r(),a("img",{key:0,src:x((L=o.votante.votante)==null?void 0:L.user.biometrico.cedula_front),alt:"Foto del votante",onClick:t[1]||(t[1]=i=>{var d;return k(x((d=o.votante.votante)==null?void 0:d.user.biometrico.cedula_front))}),class:"w-full h-64 cursor-pointer object-cover rounded-lg border shadow"},null,8,ge)):(r(),a("span",fe,"Sin foto"))]),e("div",xe,[(T=o.votante.votante)!=null&&T.user.biometrico?(r(),a("img",{key:0,src:x((B=o.votante.votante)==null?void 0:B.user.biometrico.cedula_back),alt:"Foto del votante",onClick:t[2]||(t[2]=i=>{var d;return k(x((d=o.votante.votante)==null?void 0:d.user.biometrico.cedula_back))}),class:"w-full h-64 cursor-pointer object-cover rounded-lg border shadow"},null,8,pe)):(r(),a("span",he,"Sin foto"))])]),e("div",we,[e("div",ye,[e("div",ke,[t[19]||(t[19]=e("b",null,"Validación:",-1)),l(" "+s(o.votante.validaciones),1)]),o.duplicados.length>0?(r(),a("div",Ne,[e("button",{onClick:t[3]||(t[3]=i=>y.value=!0),class:"bg-secondary text-white hover:scale-105 hover:bg-primary p-2 cursor-pointer rounded-md mt-2"}," Ver duplicados ")])):W("",!0)]),e("div",$e,[t[21]||(t[21]=e("b",null,"Motivo de rechazo:",-1)),Y(e("select",{"onUpdate:modelValue":t[4]||(t[4]=i=>m(c).motivo=i),class:"border rounded p-2"},t[20]||(t[20]=[e("option",{value:"",disabled:""},"Seleccione un motivo",-1),e("option",{value:"aprobado"},"No hay motivos (aprobado)",-1),e("option",{value:"Documentos incorrectos"}," Documentos incorrectos ",-1),e("option",{value:"Identidad no validada"},"Identidad no validada",-1),e("option",{value:"Parte frontal del documento poco visible"}," Parte frontal del documento poco visible ",-1),e("option",{value:"Parte Trasera del documento poco visible"}," Parte Trasera del documento poco visible ",-1),e("option",{value:"Registro duplicado"},"Registro duplicado",-1),e("option",{value:"Información errónea, en comparación con la documentación"}," Información errónea, en comparación con la documentación ",-1),e("option",{value:"Dirección diferente a la comuna"}," Dirección diferente a la comuna ",-1)]),512),[[_,m(c).motivo]])])]),e("div",Ce,[v(se,{onClick:X,class:"flex h-full items-center",disabled:m(c).processing},{default:b(()=>t[22]||(t[22]=[l(" Aprobar ")])),_:1},8,["disabled"]),v(oe,{onClick:Z,class:"!bg-red-500 text-white",disabled:m(c).processing},{default:b(()=>t[23]||(t[23]=[l(" Rechazar ")])),_:1},8,["disabled"])]),v(m(ie),{visible:w.value,imgs:[C.value],onHide:O},null,8,["visible","imgs"])]),v(le,{show:y.value,closeable:!0},{default:b(()=>[e("div",De,[t[24]||(t[24]=e("h2",{class:"text-2xl font-semibold text-center"}," Registros duplicados o similares ",-1)),e("button",{onClick:t[5]||(t[5]=i=>y.value=!1),class:"text-white text-xl hover:text-gray-300"}," X ")]),e("div",Re,[(r(!0),a(U,null,ee(G.value,i=>(r(),a("div",{key:i.id,class:"flex gap-4 items-center mb-4 border-b pb-2"},[e("img",{src:N(i.photo),alt:"Foto",class:"w-36 h-full object-cover rounded"},null,8,je),e("div",null,[e("p",Ae,"Estado: "+s(i.estado),1)])]))),128)),e("div",Se,[e("button",{class:"px-3 py-1 bg-gray-200 text-sm rounded hover:bg-gray-300",disabled:u.value===1,onClick:t[6]||(t[6]=i=>u.value--)}," Anterior ",8,Ee),e("span",null,"Página "+s(u.value)+" de "+s(D.value),1),e("button",{class:"px-3 py-1 bg-gray-200 text-sm rounded hover:bg-gray-300",disabled:u.value===D.value,onClick:t[7]||(t[7]=i=>u.value++)}," Siguiente ",8,ze)])])]),_:1},8,["show"])]}),_:1})],64))}};export{Ue as default};
