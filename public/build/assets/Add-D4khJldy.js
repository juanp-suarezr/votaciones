import{r as v,T as M,a as m,b as u,d as a,u as o,Z as N,e as f,f as s,j as b,p as R,g as S,v as U,n as _,m as h,F as T}from"./app-CBQEfEju.js";import{_ as j}from"./AuthenticatedLayout-DM7daT9R.js";import{_ as c}from"./InputError-BJ4ZtN8O.js";import{_ as g}from"./InputLabel-EtYAxeKT.js";import{_ as A}from"./PrimaryButton-BP7N8KiN.js";import{_ as x}from"./TextInput-BvnSg9vi.js";import{_ as B}from"./SecondaryLink-ilTKm5dF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"px-4 mx-auto bg-white border shadow-sm rounded-xl mt-8"},q={class:"bg-gray-100 border-b rounded-t-xl py-3 px-4 md:py-4 md:px-5 flex justify-between items-center"},P={class:"p-4 md:p-5"},X={class:"mb-2"},Y={class:"mb-2"},z={class:"mb-2"},E={class:"flex gap-4 mb-2"},J={key:0},W={key:0,class:"mt-2"},Z=["src"],G={key:1},H={key:0,class:"mt-2"},I=["src"],K={class:"mt-4 flex flex-col items-end"},ne={__name:"Add",setup(O){const n=v(null),d=v("imagen"),i=v(null);let p=!1;const t=M({nombre:"",cargo:"",tipo:"secretario",firma:null}),k=l=>{const e=l.target.files[0];if(t.firma=e,e){const r=new FileReader;r.onload=$=>{n.value=$.target.result},r.readAsDataURL(e)}else n.value=null},C=l=>{p=!0;const e=i.value.getContext("2d");e.beginPath(),e.moveTo(l.offsetX,l.offsetY)},V=l=>{if(!p)return;const e=i.value.getContext("2d");e.lineTo(l.offsetX,l.offsetY),e.strokeStyle="#222",e.lineWidth=2,e.stroke()},w=()=>{p=!1},y=()=>{i.value.getContext("2d").clearRect(0,0,i.value.width,i.value.height),n.value=null,t.firma=null},D=()=>{i.value.toBlob(l=>{t.firma=new File([l],"firma.webp",{type:"image/webp"});const e=new FileReader;e.onload=r=>{n.value=r.target.result},e.readAsDataURL(t.firma)},"image/webp")},F=()=>{t.post(route("delegados.store"),{forceFormData:!0,onSuccess:()=>{t.reset(),n.value=null,y()}})};return(l,e)=>(u(),m(T,null,[a(o(N),{title:"Agregar delegado"}),a(j,null,{header:f(()=>e[5]||(e[5]=[b(" Nuevo delegado ")])),default:f(()=>[s("div",L,[s("div",q,[e[7]||(e[7]=s("h3",{class:"text-gray-500"},"Nuevo delegado",-1)),a(B,{href:l.route("delegados.index")},{default:f(()=>e[6]||(e[6]=[b(" Regresar ")])),_:1},8,["href"])]),s("div",P,[s("form",{onSubmit:R(F,["prevent"]),enctype:"multipart/form-data",class:"sm:grid sm:grid-cols-2 gap-4"},[s("div",X,[a(g,{for:"nombre",value:"Nombre(*)"}),a(x,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:o(t).nombre,"onUpdate:modelValue":e[0]||(e[0]=r=>o(t).nombre=r),required:"",autofocus:"",autocomplete:"off"},null,8,["modelValue"]),a(c,{class:"mt-2",message:o(t).errors.nombre},null,8,["message"])]),s("div",Y,[a(g,{for:"cargo",value:"Cargo"}),a(x,{id:"cargo",type:"text",class:"mt-1 block w-full",modelValue:o(t).cargo,"onUpdate:modelValue":e[1]||(e[1]=r=>o(t).cargo=r),required:"",autocomplete:"off"},null,8,["modelValue"]),a(c,{class:"mt-2",message:o(t).errors.cargo},null,8,["message"])]),s("div",z,[a(g,{for:"tipo",value:"Tipo"}),S(s("select",{id:"tipo","onUpdate:modelValue":e[2]||(e[2]=r=>o(t).tipo=r),class:"block mt-1 w-full rounded-md form-select focus:border-sky-600"},e[8]||(e[8]=[s("option",{value:"",disabled:"",selected:""},"Seleccione un tipo",-1),s("option",{value:"secretario"},"Secretario",-1),s("option",{value:"jurado"},"Jurado",-1)]),512),[[U,o(t).tipo]]),a(c,{class:"mt-2",message:o(t).errors.tipo},null,8,["message"])]),s("div",null,[a(g,{for:"firma",value:"Firma"}),s("div",E,[s("button",{type:"button",class:_(["px-2 py-1 rounded",d.value==="imagen"?"bg-blue-600 text-white":"bg-gray-200"]),onClick:e[3]||(e[3]=r=>d.value="imagen")}," Cargar imagen ",2),s("button",{type:"button",class:_(["px-2 py-1 rounded",d.value==="canvas"?"bg-blue-600 text-white":"bg-gray-200"]),onClick:e[4]||(e[4]=r=>d.value="canvas")}," Dibujar firma ",2)]),d.value==="imagen"?(u(),m("div",J,[a(x,{id:"firma",type:"file",class:"mt-1 block w-full",accept:"image/*",onChange:k}),a(c,{class:"mt-2",message:o(t).errors.firma},null,8,["message"]),n.value?(u(),m("div",W,[s("img",{src:n.value,alt:"Vista previa de la firma",class:"h-24 border rounded"},null,8,Z)])):h("",!0)])):(u(),m("div",G,[s("canvas",{ref_key:"canvas",ref:i,width:"200",height:"100",class:"border border-gray-400 rounded-md bg-white cursor-crosshair",onMousedown:C,onMousemove:V,onMouseup:w,onMouseleave:w},null,544),s("div",{class:"flex gap-2 mt-1"},[s("button",{type:"button",onClick:y,class:"text-xl text-blue-600 underline"}," Limpiar "),s("button",{type:"button",onClick:D,class:"text-xl text-green-600 underline"}," Usar firma ")]),a(c,{class:"mt-2",message:o(t).errors.firma},null,8,["message"]),n.value?(u(),m("div",H,[s("img",{src:n.value,alt:"Vista previa de la firma",class:"h-24 border rounded"},null,8,I)])):h("",!0)]))]),s("div",K,[a(A,{class:_({"opacity-25":o(t).processing}),disabled:o(t).processing},{default:f(()=>e[9]||(e[9]=[b(" Registrar Delegado ")])),_:1},8,["class","disabled"])])],32)])])]),_:1})],64))}};export{ne as default};
