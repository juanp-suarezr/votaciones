import{x as k,r as g,T as B,e as N,f as U,o as h,c as b,a as o,u as s,w as m,F as T,Z as A,b as u,t as f,d as t,l as C,n as x,m as D,h as M,v as z}from"./app-h2eVGlAo.js";import{_ as q}from"./AuthenticatedLayout-0Lx5B2OY.js";import{_ as r}from"./InputError-1JT9Jcwt.js";import{_ as p}from"./InputLabel-tSsswJHg.js";import{_ as O}from"./PrimaryButton-bmC-xnXP.js";import{_ as y}from"./TextInput-M_sSCjHe.js";import{s as P}from"./multiselect.esm--Bg49J3D.js";import{s as R,a as w}from"./calendar.esm-f6LZa6q5.js";import{_ as L}from"./SecondaryLink-Db-lTHUA.js";import"./index.esm-ggPAMPNt.js";import"./ripple.esm-tSX4VvqJ.js";import"./basecomponent.esm-U5Bu4RZK.js";import"./portal.esm-xrAVjLXa.js";const G={class:"flex flex-col bg-white border shadow-sm rounded-xl w-full"},H={class:"bg-gray-100 border-b rounded-t-xl py-3 px-4 md:py-4 md:px-5 grid grid-cols-2 gap-4"},I={class:"mt-1 text-gray-500"},Y={class:"text-right"},Z={class:"p-4 md:p-5"},J={class:"mb-2"},K={class:"mb-2"},Q={class:"col-span-2 mb-2"},W=t("p",{class:"text-gray-600 text-sm"}," InformaciÃ³n adicional sobre el evento (max 300 caracteres) ",-1),X={key:0},ee={class:"col-span-2 mb-2 flex gap-4"},se={class:"card flex justify-content-center"},te={class:"mb-2"},oe={class:"mb-2"},ae={class:"mb-2"},ie=t("option",{value:"Activo"},"Activo",-1),le=t("option",{value:"Pendiente"},"Pendiente",-1),ne=t("option",{value:"Cerrado"},"Cerrado",-1),re=[ie,le,ne],de={class:"mt-4 flex flex-col items-end"},Ve={__name:"Edit",props:{evento:{type:Object,default:()=>({})},tipos:{type:Object,default:()=>({})}},setup(d){const V=k("$swal");g(null);const c=g(!1),l=d,e=B({nombre:l.evento.nombre||"",descripcion:l.evento.descripcion||"",fecha_inicio:l.evento.fecha_inicio||"",fecha_fin:l.evento.fecha_fin||"",dependencias:l.evento.dependencias||"",tipos:l.evento.tipos!="NA"?l.evento.tipos.split("|"):"",estado:l.evento.estado||"",id:l.evento.id}),_=N(()=>{const a=e.descripcion.trim().length;return a>=300?c.value=!0:c.value=!1,a});U(_,()=>{e.descripcion=e.descripcion.trim()});const v=n=>{const a=n.getFullYear(),i=String(n.getMonth()+1).padStart(2,"0"),$=String(n.getDate()).padStart(2,"0"),F=String(n.getHours()).padStart(2,"0"),E=String(n.getMinutes()).padStart(2,"0"),j=String(n.getSeconds()).padStart(2,"0");return`${a}-${i}-${$} ${F}:${E}:${j}`},S=()=>{e.fecha_inicio=v(new Date(e.fecha_inicio)),e.fecha_fin=v(new Date(e.fecha_fin)),e.tipos=e.tipos==""?"NA":e.tipos.join("|"),e.patch(route("eventos.update",l.evento.id),{onSuccess:()=>V({title:"Registro Actualizado",text:"El evento se ha actualizado exitosamente",icon:"success"}).then(n=>{window.location.reload()})})};return(n,a)=>(h(),b(T,null,[o(s(A),{title:"Editar evento"}),o(q,null,{header:m(()=>[u(" Editar Evento "+f(d.evento.id),1)]),default:m(()=>[t("div",G,[t("div",H,[t("h3",I,f(d.evento.nombre),1),t("div",Y,[o(L,{href:n.route("eventos.index")},{default:m(()=>[u(" Regresar ")]),_:1},8,["href"])])]),t("div",Z,[t("form",{onSubmit:C(S,["prevent"]),class:"grid sm:grid-cols-2 gap-4"},[t("div",J,[o(p,{for:"nombre",value:"Nombre del evento"}),o(y,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:s(e).nombre,"onUpdate:modelValue":a[0]||(a[0]=i=>s(e).nombre=i),required:"",autofocus:"",autocomplete:"nombre"},null,8,["modelValue"]),o(r,{class:"mt-2",message:s(e).errors.nombre},null,8,["message"])]),t("div",K,[o(p,{for:"dependencias",value:"dependencias del evento"}),o(y,{id:"dependencias",type:"text",class:"mt-1 block w-full",modelValue:s(e).dependencias,"onUpdate:modelValue":a[1]||(a[1]=i=>s(e).dependencias=i),required:"",autocomplete:"dependencias"},null,8,["modelValue"]),o(r,{class:"mt-2",message:s(e).errors.dependencias},null,8,["message"])]),t("div",Q,[W,o(s(R),{modelValue:s(e).descripcion,"onUpdate:modelValue":a[2]||(a[2]=i=>s(e).descripcion=i),variant:"filled",autoResize:"",rows:"5",class:"mt-1 block w-full",required:"",autocomplete:"descripcion"},null,8,["modelValue"]),t("p",{class:x(["text-gray-500 text-sm mt-2",{"text-red-500":c.value}])},[u(f(_.value)+" caracteres ",1),c.value?(h(),b("span",X,"Limite de caracteres superado")):D("",!0)],2),o(r,{class:"mt-2",message:s(e).errors.descripcion},null,8,["message"])]),t("div",ee,[o(p,{for:"tipos",value:"Tipos"}),t("div",se,[o(s(P),{id:"tipos",modelValue:s(e).tipos,"onUpdate:modelValue":a[3]||(a[3]=i=>s(e).tipos=i),display:"chip",options:Object.values(d.tipos),placeholder:"Seleccione los tipos",maxSelectedLabels:6,class:"w-full md:w-20rem"},null,8,["modelValue","options"])]),o(r,{class:"mt-2",message:s(e).errors.tipos},null,8,["message"])]),t("div",te,[o(s(w),{modelValue:s(e).fecha_inicio,"onUpdate:modelValue":a[4]||(a[4]=i=>s(e).fecha_inicio=i),showTime:"",hourFormat:"24",locale:"es",dateFormat:"dd/mm/yy",variant:"filled",showButtonBar:"",placeholder:"Fecha inicio",class:"my-4 flex justify-center"},null,8,["modelValue"]),o(r,{class:"mt-2",message:s(e).errors.fecha_inicio},null,8,["message"])]),t("div",oe,[o(s(w),{modelValue:s(e).fecha_fin,"onUpdate:modelValue":a[5]||(a[5]=i=>s(e).fecha_fin=i),showTime:"",hourFormat:"24",locale:"es",dateFormat:"dd/mm/yy",variant:"filled",showButtonBar:"",placeholder:"Fecha inicio",class:"my-4 flex justify-center"},null,8,["modelValue"]),o(r,{class:"mt-2",message:s(e).errors.fecha_fin},null,8,["message"])]),t("div",ae,[o(p,{for:"estado",value:"Estado"}),M(t("select",{id:"estado","onUpdate:modelValue":a[6]||(a[6]=i=>s(e).estado=i),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-auto p-2. px-4"},re,512),[[z,s(e).estado]]),o(r,{class:"mt-2",message:s(e).errors.estado},null,8,["message"])]),t("div",null,[t("div",de,[o(O,{class:x({"opacity-25":s(e).processing}),disabled:s(e).processing},{default:m(()=>[u(" Guardar Evento ")]),_:1},8,["class","disabled"])])])],32)])])]),_:1})],64))}};export{Ve as default};
