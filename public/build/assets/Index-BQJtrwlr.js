import{x as w,r as k,T as C,Q as N,w as I,s as A,A as F,c as r,o as l,b as p,u as f,Z as $,d as m,e as t,F as g,k as y,t as a,j as R,z as S,N as V}from"./app-D_OgLw8g.js";import{_ as j}from"./AuthenticatedLayout-C1hPjEBa.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BreadCrumb-YsMa9BFB.js";import"./SecondaryButtonReturn-GH01UQ8X.js";import"./index-BL8LO2yb.js";import"./index-BhVN8j1u.js";import"./index-C_qznUdx.js";import"./PrimaryButton-DNGXRZKc.js";import"./XCircleIcon-DF301Xnz.js";const D={class:"flex items-center gap-4 mb-8"},E={class:"flex flex-col"},L=["disabled"],B={key:0},T={key:1},M={class:"mb-10"},z={class:"overflow-x-auto"},G={class:"min-w-full divide-y divide-gray-200 rounded-lg overflow-hidden"},H={class:"px-4 py-2 text-sm text-gray-900"},Q={class:"px-4 py-2 text-sm text-gray-700"},Z={class:"px-4 py-2 text-sm text-gray-700"},q={class:"px-4 py-2 text-sm text-gray-700"},J={class:"flex flex-col items-center border-t bg-white/40 mt-1 px-5 py-3 xs:flex-row xs:justify-between"},K={class:"overflow-x-auto"},O={class:"min-w-full divide-y divide-gray-200 rounded-lg overflow-hidden"},P={class:"px-4 py-2 text-sm text-gray-900"},U={class:"px-4 py-2 text-sm text-gray-900"},W={class:"px-4 py-2 text-sm text-gray-700"},X={class:"px-4 py-2 text-sm text-gray-700"},Y={class:"px-4 py-2 text-sm text-gray-700"},tt={class:"flex flex-col items-center border-t bg-white/40 mt-1 px-5 py-3 xs:flex-row xs:justify-between"},pt={__name:"Index",props:{votantes_fisicos:{type:Array,default:()=>[]},votos_anulados:{type:Array,default:()=>[]},numRegistrosInsertados:{type:Number,default:void 0},numInconsistencias:{type:Number,default:void 0}},setup(c){const x=w("$swal");console.log(c);const b=[{url:"",text:"Cargue de votantes físicos"}],d=k(null),n=C({file:null}),v=o=>{d.value=o.target.files[0],n.file=d.value},h=()=>{if(!n.file)return;const o=new FormData;o.append("file",n.file),S.post(route("votantesFisicos.cargueMasivo"),o,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{const i=e.data.numRegistrosInsertados??0,s=e.data.numInconsistencias??0;x({title:"Registros Cargados",text:`Se han importado ${i} nuevos registros correctamente y se ha generado ${s} inconsistencias`,icon:"success"}),n.reset(),d.value=null,V.get(route("votantesFisicos.index"),{},{preserveState:!1})}).catch(e=>{console.error(e),x.fire("Error","Hubo un problema al cargar el archivo.","error")})},_=o=>o?new Date(o).toLocaleString():"",u=N();return I(()=>({inserted:u.props.value.numRegistrosInsertados,inconsistencias:u.props.value.numInconsistencias}),o=>{const{inserted:e,inconsistencias:i}=o;(e!==void 0||i!==void 0)&&(x({title:"Registros Cargados",text:`Se han importado ${e??0} nuevos registros correctamente y se ha generado ${i??0} inconsistencias`,icon:"success"}),n.reset(),d.value=null)}),A(()=>{const o=u.props.value.numRegistrosInsertados,e=u.props.value.numInconsistencias;(o!==void 0||e!==void 0)&&(x({title:"Registros Cargados",text:`Se han importado ${o??0} nuevos registros correctamente y se ha generado ${e??0} inconsistencias`,icon:"success"}),n.reset(),d.value=null)}),(o,e)=>{const i=F("pagination");return l(),r(g,null,[p(f($),{title:"Cargue de votantes físicos"}),p(j,{breadCrumbLinks:b},{header:m(()=>e[0]||(e[0]=[R(" Cargue de votantes físicos ")])),default:m(()=>[t("div",D,[t("div",E,[e[1]||(e[1]=t("label",{for:"carga-masiva",class:"text-xs font-semibold mb-1"},"Carga masiva de votantes físicos",-1)),t("input",{id:"carga-masiva",type:"file",class:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none",onChange:v,accept:".csv,.xlsx"},null,32),t("button",{class:"mt-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:!f(n).file||f(n).processing,onClick:h},[f(n).processing?(l(),r("span",B,"Cargando...")):(l(),r("span",T,"Enviar archivo"))],8,L)])]),t("div",M,[e[3]||(e[3]=t("h2",{class:"text-lg font-bold mb-2"},"Votantes físicos",-1)),t("div",z,[t("table",G,[e[2]||(e[2]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Nombre "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Identificación "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Género "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Fecha de creación ")])],-1)),t("tbody",null,[(l(!0),r(g,null,y(c.votantes_fisicos.data,s=>(l(),r("tr",{key:s.id,class:"bg-white hover:bg-gray-50"},[t("td",H,a(s.votante.nombre||"N/A"),1),t("td",Q,a(s.votante.identificacion),1),t("td",Z,a(s.votante.genero||"N/A"),1),t("td",q,a(_(s.created_at)),1)]))),128))])])]),t("div",J,[p(i,{links:c.votantes_fisicos.links},null,8,["links"])])]),t("div",null,[e[5]||(e[5]=t("h2",{class:"text-lg font-bold mb-2"},"Votos anulados",-1)),t("div",K,[t("table",O,[e[4]||(e[4]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Nombre de votante "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Identificación de votante "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Cantidad de votos anulados "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Fecha de creación "),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-gray-700"}," Evento ")])],-1)),t("tbody",null,[(l(!0),r(g,null,y(c.votos_anulados.data,s=>(l(),r("tr",{key:s.id,class:"bg-white hover:bg-gray-50"},[t("td",P,a(s.votante.nombre||"N/A"),1),t("td",U,a(s.votante.identificacion||"N/A"),1),t("td",W,a(s.cantidad_anulada),1),t("td",X,a(s.created_at),1),t("td",Y,a(s.evento.nombre),1)]))),128))])])]),t("div",tt,[p(i,{links:c.votos_anulados.links},null,8,["links"])])])]),_:1})],64)}}};export{pt as default};
