import{r as c,c as X,w as D,o as G,a as u,b as i,d as f,u as g,Z as T,e as j,f as e,g as Z,F as m,h as A,t as p,v as q,n as H,i as V,j as R}from"./app-CR4eLG3C.js";import{_ as J}from"./AuthenticatedLayout-sK4X6MGy.js";import{s as $,a as Q}from"./index-Dc_sRJId.js";import{s as z}from"./index-C9zmi6S4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-Be1fzYNM.js";import"./index-DPFR-CHp.js";import"./index-BcKcvVRW.js";import"./index-rTwsoCi1.js";const W={class:""},Y={key:0,class:"flex flex-col justify-center"},tt={class:"sm:flex justify-center items-center"},et=["value"],st={class:"flex inline-flex justify-center gap-4 sm:gap-6 mb-4 mt-6 text-lg sm:mb-auto"},ot=["onClick"],at={class:"sm:grid grid-cols-2 md:gap-6 sm:gap-4 mt-6"},lt={class:"flex h-full m-auto flex-col justify-center mb-4 px-4"},nt={class:"flex h-full m-auto flex-col justify-center mb-4 px-4"},rt={class:"h-full mt-4 w-full col-span-2"},it={class:"flex flex-col overflow-x-auto"},dt={class:"inline-block rounded-lg shadow"},ct={class:"inline-block min-w-full py-2"},ut={class:"overflow-x-auto"},vt={class:"w-full whitespace-no-wrap"},pt={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},gt={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},bt={class:"text-gray-900 whitespace-no-wrap"},ft={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},xt={class:"text-gray-900 whitespace-no-wrap"},mt={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},yt={class:"text-gray-900 whitespace-no-wrap"},ht={class:"flex items-center border-b bg-gray-50 px-5 py-2 xs:flex-row justify-between text-gray-500 text-xs font-semibold"},_t=["disabled"],wt=["disabled"],kt={key:1,class:"flex justify-center"},Dt={__name:"Index",props:{eventos:Object,candidatos:Object,votantes:Object},setup(b){const n=b,I=[{url:"/",text:"Análisis"}];console.log(n);const y=c(),h=c(),_=c(),w=c(),r=c(n.eventos.length?n.eventos[0].id:""),d=c(n.eventos.length?n.eventos.find(o=>o.id==r.value).tipos.split("|")[0]:"NA"),x=c(n.candidatos.filter(o=>{let t=o.id_evento==r.value,s=o.tipo==d.value;return t&&s})),B=o=>{d.value=o,y.value=E(),h.value=N(),_.value=O(),w.value=P(),x.value=n.candidatos.filter(t=>{let s=t.id_evento==r.value,l=t.tipo==d.value;return s&&l}),console.log(x.value)},S=c(8),v=c(0),k=X(()=>Math.ceil(x.value.length/S.value)),L=()=>{v.value>0&&v.value--},M=()=>{v.value<k.value-1&&v.value++};D(S,()=>{v.value=0});const F=o=>`/storage/uploads/usuarios/${o}`,K=function(o){let t=o.split(" "),s="",l=0;for(var a=0;a<t.length&&l<2;a++)t[a].length>0&&t[a]!==""&&(s+=t[a][0],l++);return s};D(r,o=>{d.value=n.eventos.length?n.eventos.find(t=>t.id==o).tipos.split("|")[0]:"NA",B(d.value)}),G(()=>{y.value=E(),h.value=N(),_.value=O(),w.value=P()});const E=()=>{getComputedStyle(document.body);let o=n.eventos.find(a=>a.id==r.value),t=n.candidatos.filter(a=>{let C=a.id_evento==r.value,U=a.tipo==d.value;return C&&U}),s=[],l=[];return t.forEach(a=>{s.push(a.votante.nombre),l.push(o.votos.filter(C=>C.id_candidato==a.id_votante).length)}),{labels:s.join(", ").split(",").map(a=>a.trim()),datasets:[{label:"Votos",data:l.join(", ").split(",").map(a=>a.trim()),backgroundColor:"#E20613"}]}},N=()=>{const o="#000";return{indexAxis:"x",maintainAspectRatio:!0,aspectRatio:1,plugins:{legend:{labels:{color:o}}},scales:{x:{ticks:{color:o,font:{weight:500}},grid:{display:!1,drawBorder:!0}},y:{ticks:{color:o},grid:{color:"#b0b6c0",drawBorder:!0}}}}},O=()=>{getComputedStyle(document.body);let o=n.eventos.find(a=>a.id==r.value),t=[],s=n.votantes.filter(a=>a.tipo==d.value&&a.id_evento==o.id).length,l=o.votos.filter(a=>a.tipo==d.value).length;return t.push(s-l,l),console.log(o),{labels:["Abstinencia","votos realizados"],datasets:[{label:"Cantidad",data:t,backgroundColor:["#004884","#585857"],hoverBackgroundColor:["#3b82f6","#b0b6c0"]}]}},P=()=>({maintainAspectRatio:!0,aspectRatio:1,plugins:{legend:{labels:{cutout:"60%",color:"#000"}}}});return(o,t)=>(i(),u(m,null,[f(g(T),{title:"Análisis"}),f(J,{breadCrumbLinks:I},{header:j(()=>t[2]||(t[2]=[R(" Análisis resultados ")])),default:j(()=>[e("div",W,[b.eventos.length?(i(),u("div",Y,[e("div",tt,[Z(e("select",{id:"evento_selected",name:"evento_selected","onUpdate:modelValue":t[0]||(t[0]=s=>r.value=s),onChange:t[1]||(t[1]=(...s)=>o.handleEnterKey&&o.handleEnterKey(...s)),class:"block w-full p-2 text-base text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"},[t[3]||(t[3]=e("option",{selected:"",value:"",disabled:""},"Elegir evento de votación",-1)),(i(!0),u(m,null,A(b.eventos,s=>(i(),u("option",{class:"flex cursor mb-2 sm:mb-auto",key:s.id,value:s.id},p(s.nombre),9,et))),128))],544),[[q,r.value]])]),e("div",st,[(i(!0),u(m,null,A(b.eventos.find(s=>s.id==r.value).tipos.split("|"),s=>(i(),u("button",{key:s,class:H(["flex cursor mb-2 sm:mb-auto",s==d.value?"underline text-blue-600":"text-gray-600"]),onClick:l=>B(s)},p(s)+" | ",11,ot))),128))]),e("div",at,[e("div",lt,[t[4]||(t[4]=e("h2",{class:"text-gray-600 text-lg sm:text-xl font-bold text-center flex justify-center"}," Resultado Votaciones ",-1)),f(g($),{type:"bar",data:y.value,options:h.value,class:"h-full w-full mt-4"},null,8,["data","options"])]),e("div",nt,[t[5]||(t[5]=e("h2",{class:"text-gray-600 text-lg sm:text-xl font-bold text-center flex justify-center"}," Nivel de votaciones ",-1)),f(g($),{type:"doughnut",data:_.value,options:w.value,class:"h-full w-full mt-4"},null,8,["data","options"])]),e("div",rt,[e("div",it,[e("div",dt,[e("div",ct,[e("div",ut,[e("table",vt,[t[6]||(t[6]=e("thead",null,[e("tr",{class:"border-b bg-gray-50 text-left text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("th",{colspan:"2",class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Nombre "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Identificación "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," votos ")])],-1)),e("tbody",null,[(i(!0),u(m,null,A(x.value,s=>(i(),u("tr",{key:s.id,class:"text-gray-700"},[e("td",pt,[s.votante.imagen=="user.png"?(i(),V(g(z),{key:0,label:K(s.votante.nombre),class:"bg-indigo-200 text-indigo-800 text-xl",size:"xlarge",shape:"circle"},null,8,["label"])):(i(),V(g(z),{key:1,image:F(s.votante.imagen),class:"bg-indigo-200 text-indigo-800",size:"xlarge",shape:"circle"},null,8,["image"]))]),e("td",gt,[e("p",bt,p(s.votante.nombre),1)]),e("td",ft,[e("p",xt,p(s.votante.identificacion),1)]),e("td",mt,[e("p",yt,p(b.eventos.find(l=>l.id==r.value).votos.filter(l=>l.id_candidato==s.id_votante).length),1)])]))),128))])]),e("div",ht,[e("button",{class:"hover:scale-125 transition duration-500 cursor-pointer",onClick:L,disabled:v.value===0},t[7]||(t[7]=[e("i",{class:"fa-solid fa-arrow-left"},null,-1)]),8,_t),e("p",null,"Pagina "+p(v.value+1)+" de "+p(k.value),1),e("button",{class:"hover:scale-125 transition duration-500 cursor-pointer",onClick:M,disabled:v.value===k.value-1},t[8]||(t[8]=[e("i",{class:"fa-solid fa-arrow-right"},null,-1)]),8,wt)])])])])])])])])):(i(),u("div",kt,[f(g(Q),{severity:"info",sticky:o.sticky,class:"text-center w-fit",life:3e3},{default:j(()=>t[9]||(t[9]=[R("El análisis de los eventos de votación se mostrará en esta sección")])),_:1},8,["sticky"])]))])]),_:1})],64))}};export{Dt as default};
