import{x as N,r as v,T as O,c as $,w as C,a as n,b as u,f as a,d as o,e as V,j as b,m as g,u as t,t as q,g as B,v as D,n as R,M as z,p as I}from"./app-D6ZAVPTE.js";import{_ as m}from"./InputError-DTWEfcoR.js";import{_ as d}from"./InputLabel-DTg0HcFB.js";import{_ as E}from"./PrimaryButton-DuV0HlwJ.js";import{_ as w}from"./TextInput-BJGWsFij.js";import{s as _}from"./index-Cfq6Q2HT.js";import{s as L}from"./index-BeLlD-27.js";import{_ as P}from"./SecondaryLink-DFHMBg16.js";import{s as T}from"./index-PRWAo1hB.js";import{_ as M}from"./SecondaryButton-DnFZKOUa.js";import"./index-iryFZE1P.js";import"./index-ARwC81Nd.js";import"./index-Dp7rsxvc.js";import"./index-Be1fzYNM.js";import"./index-C0sc7JcW.js";import"./index-Db8lodK7.js";import"./index-BDKuXpXP.js";import"./index-BJQhEiHc.js";import"./index-BgoO431Z.js";const F={class:"text-right"},G={key:0},H={class:"sm:flex sm:flex-wrap gap-4"},J={key:0},K={key:0,class:"card flex justify-content-center"},Q={key:1,class:"text-xs text-gray-600"},W=["href"],X={key:1,class:"w-full h-full mt-2"},Y={class:"flex flex-wrap items-center w-auto gap-4"},Z={key:0,class:"px-2 py-4 w-full border border-gray-400 rounded-md shadow-md mt-4"},ee={class:"mt-4"},te={class:"card flex justify-content-center"},se={key:0,class:"card flex justify-content-center"},oe={key:1,class:"text-xs text-gray-600"},le=["href"],ae={class:"sm:flex gap-4"},ie={class:"flex items-center gap-4"},re={key:0,class:"text-sm text-gray-600"},je={__name:"UpdateProfileInformationForm",props:{user:{type:Object,default:()=>({})},roles:{type:Object,default:()=>({})},userRoles:{type:Object,default:()=>({})},tipos:{type:Object,default:()=>({})},eventos:{type:Object,default:()=>({})},parametros:{type:Array,default:()=>[]},subtipos:{type:Array,default:()=>[]}},setup(p){const h=N("$swal"),c=p;console.log(c);const f=Object.values(c.userRoles),r=c.user,k=r.eventos!=="NA"?r.eventos.split("|").map(i=>parseInt(i)):[];v([]);const y=v(null),x=v(!1),e=O({name:r.name,email:r.email,identificacion:r.votantes?r.votantes.identificacion:"",tipo:r.tipos!="NA"?r.tipos.split("|"):"",subtipo:r.subtipo==0?0:r.subtipo,estado:r.estado,roles_user:f,eventos:k||[]}),A=()=>{var i;return console.log(e.subtipo),e.subtipo==0?"No contiene subtipo":typeof e.subtipo=="object"?e.subtipo.detalle:(i=c.subtipos.find(s=>s.id===parseInt(e.subtipo)))==null?void 0:i.detalle},S=$(()=>y.value?c.subtipos.filter(i=>i.codParametro===y.value):[]),j=()=>{e.tipo=e.tipo==""?"NA":e.tipo.join("|"),e.subtipo=typeof e.subtipo!="object"?e.subtipo:e.subtipo.id,e.patch(route("users.update",r.id),{onSuccess:()=>h({title:"Registro Actualizado",text:"El usuario se ha actualizado exitosamente",icon:"success"}).then(i=>{window.location.reload()})})},U=v(e.candidato?"Candidato":"Usuario");return v(["Candidato","Usuario"]),C(U,i=>{i=="Candidato"?e.candidato=1:e.candidato=0}),(i,s)=>(u(),n("section",null,[a("header",null,[a("div",F,[o(P,{href:i.route("users.index")},{default:V(()=>s[10]||(s[10]=[b(" Regresar ")])),_:1},8,["href"])]),s[11]||(s[11]=a("h2",{class:"text-lg font-medium text-gray-900"},"Información usuario",-1)),s[12]||(s[12]=a("p",{class:"mt-1 text-sm text-gray-600"}," Actualice la información del usuario y la dirección de Usuario. ",-1))]),a("form",{onSubmit:I(j,["prevent"]),class:"mt-6 space-y-6"},[a("div",null,[o(d,{for:"name",value:"Nombre"}),o(w,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:t(e).name,"onUpdate:modelValue":s[0]||(s[0]=l=>t(e).name=l),required:"",autofocus:"",autocomplete:"name"},null,8,["modelValue"]),o(m,{class:"mt-2",message:t(e).errors.name},null,8,["message"])]),a("div",null,[o(d,{for:"email",value:"Usuario"}),o(w,{id:"email",type:"text",class:"mt-1 block w-full",modelValue:t(e).email,"onUpdate:modelValue":s[1]||(s[1]=l=>t(e).email=l),required:"",autocomplete:"username"},null,8,["modelValue"]),o(m,{class:"mt-2",message:t(e).errors.email},null,8,["message"])]),t(f).find(l=>l!="Administrador")?(u(),n("div",G,[o(d,{for:"identificacion",value:"Identificación"}),o(w,{id:"identificacion",type:"identificacion",class:"mt-1 block w-full",modelValue:t(e).identificacion,"onUpdate:modelValue":s[2]||(s[2]=l=>t(e).identificacion=l),required:"",autocomplete:"username"},null,8,["modelValue"]),o(m,{class:"mt-2",message:t(e).errors.identificacion},null,8,["message"])])):g("",!0),a("div",H,[t(f).find(l=>l!="Administrador")?(u(),n("div",J,[o(d,{for:"tipo",value:"Tipo votante"}),p.tipos?(u(),n("div",K,[o(t(_),{id:"tipo",modelValue:t(e).tipo,"onUpdate:modelValue":s[3]||(s[3]=l=>t(e).tipo=l),display:"chip",options:Object.values(p.tipos),placeholder:"Seleccione tipo votante",maxSelectedLabels:3,class:"w-full md:w-20rem"},null,8,["modelValue","options"])])):(u(),n("p",Q,[s[13]||(s[13]=b(" No hay tipos de usuarios registrados, registrar uno nuevo ")),a("a",{href:i.route("tipos.index")},"Aquí",8,W)])),o(m,{class:"mt-2",message:t(e).errors.tipo},null,8,["message"])])):g("",!0),t(f).find(l=>l!="Administrador")?(u(),n("div",X,[a("div",Y,[o(d,{for:"tipo_user",value:"Subtipos - "+A()},null,8,["value"]),o(M,{onClick:s[4]||(s[4]=l=>x.value=!x.value),class:"items-center"},{default:V(()=>[b(q(x.value?"Cancelar":t(e).subtipo!=0?"Actualizar subtipo":"Agregar subtipo"),1)]),_:1})]),t(f).find(l=>l!="Administrador")&&x.value?(u(),n("div",Z,[a("div",null,[o(d,{for:"parametro",value:"Parámetro"}),o(t(L),{id:"parametro",modelValue:y.value,"onUpdate:modelValue":s[5]||(s[5]=l=>y.value=l),options:p.parametros,"option-label":"detalle","option-value":"cod",placeholder:"Seleccione un parámetro",class:"w-full"},null,8,["modelValue","options"]),o(m,{class:"mt-2",message:t(e).errors.parametro},null,8,["message"])]),a("div",ee,[o(d,{for:"parametroDetalle",value:"Subtipo"}),o(t(T),{id:"parametroDetalle",modelValue:t(e).subtipo,"onUpdate:modelValue":s[6]||(s[6]=l=>t(e).subtipo=l),options:S.value,filter:"",optionLabel:"detalle",placeholder:"Seleccione un subtipo",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),o(m,{class:"mt-2",message:t(e).errors.subtipo},null,8,["message"])])])):g("",!0)])):g("",!0),a("div",null,[o(d,{for:"roles",value:"Roles"}),a("div",te,[o(t(_),{id:"roles",modelValue:t(e).roles_user,"onUpdate:modelValue":s[7]||(s[7]=l=>t(e).roles_user=l),display:"chip",options:Object.values(p.roles),placeholder:"Seleccione rol",maxSelectedLabels:3,class:"w-full md:w-20rem"},null,8,["modelValue","options"])]),o(m,{class:"mt-2",message:t(e).errors.roles_user},null,8,["message"])])]),a("div",null,[o(d,{for:"evento",value:"Evento votante"}),p.eventos.length?(u(),n("div",se,[o(t(_),{id:"eventos",modelValue:t(e).eventos,"onUpdate:modelValue":s[8]||(s[8]=l=>t(e).eventos=l),display:"chip",options:p.eventos,"option-label":"nombre","option-value":"id",placeholder:"Seleccione los eventos",maxSelectedLabels:6,class:"w-full md:w-20rem"},null,8,["modelValue","options"])])):(u(),n("p",oe,[s[14]||(s[14]=b(" No hay eventos registrados, registrar uno nuevo ")),a("a",{href:i.route("eventos.index")},"Aquí",8,le)])),o(m,{class:"mt-2",message:t(e).errors.eventos},null,8,["message"])]),a("div",ae,[a("div",null,[o(d,{for:"estado",value:"Estado"}),B(a("select",{id:"estado","onUpdate:modelValue":s[9]||(s[9]=l=>t(e).estado=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},s[15]||(s[15]=[a("option",{value:"Activo"},"Activo",-1),a("option",{value:"Bloqueado"},"Bloqueado",-1)]),512),[[D,t(e).estado]]),o(m,{class:"mt-2",message:t(e).errors.estado},null,8,["message"])])]),a("div",ie,[o(E,{class:R({"opacity-25":t(e).processing}),disabled:t(e).processing},{default:V(()=>s[16]||(s[16]=[b("Guardar ")])),_:1},8,["class","disabled"]),o(z,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:V(()=>[t(e).recentlySuccessful?(u(),n("p",re," Actualizado. ")):g("",!0)]),_:1})])],32)]))}};export{je as default};
