import{r as u,e as X,f as O,g as G,o as c,c as p,a as h,u as b,w as E,F as x,Z as L,d as e,h as T,v as Z,i as P,t as v,n as q,j as R,b as H}from"./app-AjIhVAht.js";import{_ as J}from"./AuthenticatedLayout-0euzCUtF.js";import{s as $,a as Q}from"./chart.esm-2bd92gns.js";import{s as z}from"./avatar.esm-O4-tLYG3.js";import"./index.esm-eDXzXUUK.js";import"./ripple.esm-CTCUIiQN.js";import"./basecomponent.esm-QnI0Rl4W.js";const W={class:""},Y={key:0,class:"flex flex-col justify-center"},ee={class:"sm:flex justify-center items-center"},te=e("option",{selected:"",value:"",disabled:""},"Elegir evento de votación",-1),se=["value"],oe={class:"flex inline-flex justify-center gap-4 sm:gap-6 mb-4 mt-6 text-lg sm:mb-auto"},ae=["onClick"],le={class:"sm:grid grid-cols-2 md:gap-6 sm:gap-4 mt-6"},ne={class:"flex h-full m-auto flex-col justify-center mb-4 px-4"},re=e("h2",{class:"text-gray-600 text-lg sm:text-xl font-bold text-center flex justify-center"}," Resultado Votaciones ",-1),ie={class:"flex h-full m-auto flex-col justify-center mb-4 px-4"},ce=e("h2",{class:"text-gray-600 text-lg sm:text-xl font-bold text-center flex justify-center"}," Nivel de votaciones ",-1),de={class:"h-full mt-4 w-full col-span-2"},ue={class:"flex flex-col overflow-x-auto"},pe={class:"inline-block rounded-lg shadow"},ge={class:"inline-block min-w-full py-2"},ve={class:"overflow-x-auto"},be={class:"w-full whitespace-no-wrap"},fe=e("thead",null,[e("tr",{class:"border-b bg-gray-50 text-left text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("th",{colspan:"2",class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Nombre "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Identificación "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," votos ")])],-1),he={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},xe={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},ye={class:"text-gray-900 whitespace-no-wrap"},me={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},_e={class:"text-gray-900 whitespace-no-wrap"},we={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},ke={class:"text-gray-900 whitespace-no-wrap"},Ce={class:"flex items-center border-b bg-gray-50 px-5 py-2 xs:flex-row justify-between text-gray-500 text-xs font-semibold"},je=["disabled"],Pe=e("i",{class:"fa-solid fa-arrow-left"},null,-1),Se=[Pe],Ve=["disabled"],Be=e("i",{class:"fa-solid fa-arrow-right"},null,-1),Ae=[Be],De={key:1,class:"flex justify-center"},Me={__name:"Index",props:{eventos:Object,candidatos:Object,votantes:Object},setup(f){const n=f,y=u(),m=u(),_=u(),w=u(),r=u(n.eventos.length?n.eventos[0].id:""),d=u(n.eventos.length?n.eventos.find(s=>s.id==r.value).tipos.split("|")[0]:"NA"),k=u(n.candidatos.filter(s=>{let o=s.id_eventos==r.value,t=s.tipo==d.value;return o&&t})),S=s=>{d.value=s,y.value=B(),m.value=A(),_.value=D(),w.value=N(),k.value=n.candidatos.filter(o=>{let t=o.id_eventos==r.value,l=o.tipo==d.value;return t&&l})},V=u(8),g=u(0),C=X(()=>Math.ceil(k.value.length/V.value)),I=()=>{g.value>0&&g.value--},M=()=>{g.value<C.value-1&&g.value++};O(V,()=>{g.value=0});const F=s=>`/storage/uploads/usuarios/${s}`,K=function(s){let o=s.split(" "),t="",l=0;for(var i=0;i<o.length&&l<2;i++)o[i].length>0&&o[i]!==""&&(t+=o[i][0],l++);return t};O(r,s=>{d.value=n.eventos.length?n.eventos.find(o=>o.id==s).tipos.split("|")[0]:"NA",S(d.value)}),G(()=>{y.value=B(),m.value=A(),_.value=D(),w.value=N()});const B=()=>{const s=getComputedStyle(document.body);let o=n.eventos.find(a=>a.id==r.value),t=n.candidatos.filter(a=>{let j=a.id_eventos==r.value,U=a.tipo==d.value;return j&&U}),l=[],i=[];return t.forEach(a=>{l.push(a.nombre),i.push(o.votos.filter(j=>j.id_candidato==a.id).length)}),{labels:l.join(", ").split(",").map(a=>a.trim()),datasets:[{label:"Votos",data:i.join(", ").split(",").map(a=>a.trim()),backgroundColor:[s.getPropertyValue("--gray-500")]}]}},A=()=>{const s="#000";return{indexAxis:"x",maintainAspectRatio:!0,aspectRatio:1,plugins:{legend:{labels:{color:s}}},scales:{x:{ticks:{color:s,font:{weight:500}},grid:{display:!1,drawBorder:!0}},y:{ticks:{color:s},grid:{color:"#b0b6c0",drawBorder:!0}}}}},D=()=>{const s=getComputedStyle(document.body);let o=n.eventos.find(a=>a.id==r.value),t=[],l=n.votantes.filter(a=>a.tipo==d.value).length,i=o.votos.filter(a=>a.tipo==d.value).length;return t.push(l-i,i),{labels:["Abstinencia","votos realizados"],datasets:[{label:"Cantidad",data:t,backgroundColor:[s.getPropertyValue("--red-900"),s.getPropertyValue("--gray-500")],hoverBackgroundColor:[s.getPropertyValue("--red-800"),s.getPropertyValue("--gray-400")]}]}},N=()=>({maintainAspectRatio:!0,aspectRatio:1,plugins:{legend:{labels:{cutout:"60%",color:"#000"}}}});return(s,o)=>(c(),p(x,null,[h(b(L),{title:"Dashboard"}),h(J,null,{default:E(()=>[e("div",W,[f.eventos.length?(c(),p("div",Y,[e("div",ee,[T(e("select",{id:"evento_selected",name:"evento_selected","onUpdate:modelValue":o[0]||(o[0]=t=>r.value=t),onChange:o[1]||(o[1]=(...t)=>s.handleEnterKey&&s.handleEnterKey(...t)),class:"block w-full p-2 text-base text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"},[te,(c(!0),p(x,null,P(f.eventos,t=>(c(),p("option",{class:"flex cursor mb-2 sm:mb-auto",key:t.id,value:t.id},v(t.nombre),9,se))),128))],544),[[Z,r.value]])]),e("div",oe,[(c(!0),p(x,null,P(f.eventos.find(t=>t.id==r.value).tipos.split("|"),t=>(c(),p("button",{key:t,class:q(["flex cursor mb-2 sm:mb-auto",t==d.value?"underline text-blue-600":"text-gray-600"]),onClick:l=>S(t)},v(t)+" | ",11,ae))),128))]),e("div",le,[e("div",ne,[re,h(b($),{type:"bar",data:y.value,options:m.value,class:"h-full w-full mt-4"},null,8,["data","options"])]),e("div",ie,[ce,h(b($),{type:"doughnut",data:_.value,options:w.value,class:"h-full w-full mt-4"},null,8,["data","options"])]),e("div",de,[e("div",ue,[e("div",pe,[e("div",ge,[e("div",ve,[e("table",be,[fe,e("tbody",null,[(c(!0),p(x,null,P(k.value,t=>(c(),p("tr",{key:t.id,class:"text-gray-700"},[e("td",he,[t.imagen=="user.png"?(c(),R(b(z),{key:0,label:K(t.nombre),class:"bg-indigo-200 text-indigo-800 text-xl",size:"xlarge",shape:"circle"},null,8,["label"])):(c(),R(b(z),{key:1,image:F(t.imagen),class:"bg-indigo-200 text-indigo-800",size:"xlarge",shape:"circle"},null,8,["image"]))]),e("td",xe,[e("p",ye,v(t.nombre),1)]),e("td",me,[e("p",_e,v(t.identificacion),1)]),e("td",we,[e("p",ke,v(f.eventos.find(l=>l.id==r.value).votos.filter(l=>l.id_candidato==t.id).length),1)])]))),128))])]),e("div",Ce,[e("button",{class:"hover:scale-125 transition duration-500 cursor-pointer",onClick:I,disabled:g.value===0},Se,8,je),e("p",null,"Pagina "+v(g.value+1)+" de "+v(C.value),1),e("button",{class:"hover:scale-125 transition duration-500 cursor-pointer",onClick:M,disabled:g.value===C.value-1},Ae,8,Ve)])])])])])])])])):(c(),p("div",De,[h(b(Q),{severity:"info",sticky:s.sticky,class:"text-center w-fit",life:3e3},{default:E(()=>[H("El análisis de los eventos de votación se mostrará en esta sección")]),_:1},8,["sticky"])]))])]),_:1})],64))}};export{Me as default};
