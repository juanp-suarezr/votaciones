import{_ as D}from"./AuthenticatedLayout-Blz8H4iR.js";import{k as L,T,r as x,a as n,b as r,d as a,u as v,Z as q,e as c,f as e,l as C,F as E,h as M,n as h,t as i,j as l,N as F}from"./app-CMTVtBfh.js";import{_ as g}from"./PrimaryButton-u56DK3CI.js";import{s as U}from"./index-R9XFxPM4.js";import{c as Z}from"./comunas-DN-PCrTT.js";import{_ as G}from"./Modal-CBy-F38V.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButtonReturn-DFXsv3C1.js";import"./index-Be1fzYNM.js";import"./index-CO6dpjqF.js";const H={class:"items-center flex flex-col justify-center mx-2"},J={class:"sm:flex w-full sm:grid md:grid-cols-2 grid-cols-2 gap-4 mt-6"},K={class:"mx-auto w-full flex justify-center items-center"},Q={key:0,class:"w-full flex justify-center items-center h-[200pt] sm:h-[300pt] bg-indigo-200 text-indigo-800"},R={class:"m-auto sm:text-4xxl text-xxl object-cover"},W={key:1,class:"w-full h-[200pt] sm:h-[300pt] bg-indigo-200 text-indigo-800"},X=["src"],Y={class:"mt-4 mx-auto"},tt={class:"sm:text-4xl text-2xl font-bold capitalize text-justify"},et={class:"sm:text-2xl text-xl text-justify"},st={class:"sm:text-2xl text-xl text-justify"},ot=["onClick"],lt={class:"sm:text-xl text-lg font-bold capitalize text-gray-600 text-justify"},it={class:"mt-4 mx-auto"},nt={class:"mx-auto"},rt={class:"w-full h-[200pt] sm:h-[300pt] bg-indigo-200 text-indigo-800"},at=["src"],dt={class:"mt-8 mx-auto"},ut={class:"flex justify-between mt-8"},ct={key:0,class:"fixed inset-0 bg-black px-4 sm:px-44 bg-opacity-50 flex items-center justify-center z-50"},xt={class:"bg-white p-6 rounded-lg w-full"},mt={class:"mb-4 text-base sm:text-2xl"},pt={class:"mb-4 text-base sm:text-2xl"},ft={key:1,class:"fixed inset-0 bg-black px-4 sm:px-44 bg-opacity-50 flex items-center justify-center z-50"},bt={class:"bg-white p-6 rounded-lg w-full"},vt={class:"flex flex-wrap gap-8 mt-4 text-base sm:text-4xl"},gt={class:"w-auto border-r pr-2 border-gray-600"},yt={class:"w-auto pr-2"},_t={class:"mt-6 text-base sm:text-4xl"},wt={class:"w-full flex flex-wrap justify-center gap-4 sm:gap-6 mt-6"},jt={class:"flex justify-center gap-4 text-center h-full my-6"},Pt={__name:"Proyectos",props:{proyectos:Object,votante:Object},setup(y){const $=L("$swal"),m=y;console.log(m);const d=T({isProyecto:!0,id_votante:m.votante[0].id,id_candidato:0,id_eventos:0,tipo:"",subtipo:0,estado:"Activo"}),z=[{url:"",text:"Votaciones"}],N=x(!0),_=x(!1),w=x(!1),j=x({proyecto:{detalle:""}}),f=x(0),u=x([]),O=function(s){let t=s.split(" "),o="",b=0;for(var p=0;p<t.length&&b<2;p++)t[p].length>0&&t[p]!==""&&(o+=t[p][0],b++);return o},I=s=>`/storage/uploads/usuarios/${s}`,P=s=>`/storage/uploads/proyectos/${s}`,k=s=>{var t;return console.log(s),(t=Z.find(o=>o.value==s))==null?void 0:t.label},S=(s,t)=>s?s.length>t?s.substring(0,t)+"...":s:"",A=s=>{j.value=s,_.value=!0},V=s=>{u.value=s,console.log(s),d.id_candidato=s?s.id_proyecto:0,d.id_eventos=s?s.id_evento:m.proyectos[0].id_evento,d.tipo=s?s.proyecto.tipo:m.proyectos[0].proyecto.tipo,d.subtipo=s?s.proyecto.subtipo:m.proyectos[0].proyecto.subtipo,f.value=s?s.id:null},B=()=>{d.post(route("votos.store"),{onSuccess:()=>$({title:"Voto registrado exitosamente",text:"Su voto ha sido registrado",icon:"success"}).then(s=>{F.get("dashboard")}),onError:()=>$({title:"Error en el registro",text:"Su voto no fue asignado, vuelve a intentar nuevamente",icon:"error"})})};return(s,t)=>(r(),n(E,null,[a(v(q),{title:"Votaciones"}),a(D,{breadCrumbLinks:z},{header:c(()=>t[6]||(t[6]=[l(" Votaciones ")])),default:c(()=>[e("div",H,[e("div",J,[(r(!0),n(E,null,M(y.proyectos,o=>(r(),n("div",{key:o.id,class:h(["flex flex-col w-full h-full p-2 inline-block m-auto mb-4 rounded-lg shadow-xl bg-gray-200 hover:bg-gray-300 text-gray-800",f.value===o.id?"border-4 border-red-500":""])},[e("div",K,[o.proyecto.imagen=="NA"?(r(),n("div",Q,[e("p",R,i(O(o.proyecto.detalle)),1)])):(r(),n("div",W,[e("img",{src:P(o.proyecto.imagen),alt:"Imagen de proyecto",class:"w-full h-full object-cover"},null,8,X)]))]),a(v(U),{value:k(o.proyecto.subtipo),class:"!bg-primary text-[8px] sm:text-sm !text-white w-full flex p-2"},null,8,["value"]),e("div",Y,[e("h2",tt," Numero tarjeton -- "+i(o.proyecto.numero_tarjeton),1),e("p",et,[t[7]||(t[7]=e("b",null,"Detalle:",-1)),t[8]||(t[8]=l()),t[9]||(t[9]=e("br",null,null,-1)),l(" "+i(o.proyecto.detalle),1)]),e("p",st,[t[10]||(t[10]=e("b",null,"Descripción:",-1)),t[11]||(t[11]=l()),t[12]||(t[12]=e("br",null,null,-1)),l(" "+i(S(o.proyecto.descripcion,80))+" ",1),o.proyecto.descripcion.length>80?(r(),n("span",{key:0,class:"text-blue-600 cursor-pointer underline",onClick:b=>A(o)}," Ver más ",8,ot)):C("",!0)]),e("p",lt," Tipo: "+i(o.proyecto.tipo),1)]),e("div",it,[a(g,{type:"button",onClick:b=>V(o),class:"sm:text-2xl text-xl"},{default:c(()=>t[13]||(t[13]=[l(" Seleccionar ")])),_:2},1032,["onClick"])])],2))),128)),e("div",{class:h(["flex flex-col w-full h-full p-2 inline-block m-auto mb-4 rounded-lg shadow-xl bg-gray-200 hover:bg-gray-300 text-gray-800",f.value===null?"border-4 border-red-500":""])},[e("div",nt,[e("div",rt,[e("img",{src:I("12345678_candidatos.jpg"),alt:"Imagen de voto en blanco",class:"w-full h-full object-cover"},null,8,at)])]),t[15]||(t[15]=e("div",{class:"mt-6 mx-auto"},[e("h2",{class:"sm:text-4xl text-2xl font-bold capitalize text-justify"},[l(" VOTO "),e("br"),l(" EN BLANCO ")])],-1)),e("div",dt,[a(g,{type:"button",onClick:t[0]||(t[0]=o=>V(null)),class:"sm:text-2xl text-xl"},{default:c(()=>t[14]||(t[14]=[l(" Seleccionar ")])),_:1})])],2)]),e("div",ut,[a(g,{disabled:f.value==0,type:"button",onClick:t[1]||(t[1]=o=>w.value=!0),class:"sm:text-6xl text-2xl"},{default:c(()=>t[16]||(t[16]=[l(" Enviar votación ")])),_:1},8,["disabled"])])]),_.value?(r(),n("div",ct,[e("div",xt,[t[18]||(t[18]=e("h2",{class:"sm:text-4xl text-xl font-bold mb-4 text-center"}," Detalle del Proyecto ",-1)),e("p",mt,i(j.value.proyecto.detalle),1),e("p",pt,[t[17]||(t[17]=e("b",null,"descripción:",-1)),l(" "+i(j.value.proyecto.descripcion),1)]),e("button",{onClick:t[2]||(t[2]=o=>_.value=!1),class:"bg-indigo-600 text-white px-4 py-2 rounded"}," Cerrar ")])])):C("",!0),w.value?(r(),n("div",ft,[e("div",bt,[t[22]||(t[22]=e("h2",{class:"sm:text-8xl text-2xl font-bold mb-8 pb-4 sm:py-8 border-b border-gray-300 text-center"}," 🗳️ Confirmar voto ",-1)),t[23]||(t[23]=e("p",{class:"mb-4 text-base sm:text-4xl"},[e("span",{class:"text-lg sm:text-5xl font-bold"},"Está a punto de votar por el siguiente proyecto:")],-1)),e("div",vt,[e("div",gt,[t[19]||(t[19]=e("span",{class:"text-gray-600"},"Número de tarjetón:",-1)),l(" "+i(u.value?u.value.proyecto.numero_tarjeton:"Elecciones presupuesto participativo 2025"),1)]),e("div",yt,[t[20]||(t[20]=e("span",{class:"text-gray-600"},"Comuna/Corregimiento:",-1)),l(" "+i(u.value?k(u.value.proyecto.subtipo):k(y.proyectos[0].proyecto.subtipo)),1)])]),e("div",_t,[t[21]||(t[21]=e("span",{class:"text-gray-600"},"Detalle:",-1)),l(" "+i(u.value?u.value.proyecto.detalle:"VOTO EN BLANCO"),1)]),e("div",wt,[e("button",{onClick:t[3]||(t[3]=o=>w.value=!1),class:"bg-red-600 text-white px-4 py-2 rounded sm:text-5xl"}," Cancelar "),e("button",{onClick:t[4]||(t[4]=o=>B()),class:"bg-indigo-600 text-white px-4 py-2 rounded sm:text-5xl"}," Confirmar ")])])])):C("",!0),a(G,{show:N.value,closeable:!0},{default:c(()=>[t[25]||(t[25]=e("h2",{class:"p-4 sm:text-4xl text-2x font-bold text-gray-800 flex text-center justify-center bg-azul text-white"}," Aviso Importante para el proceso de votación ",-1)),t[26]||(t[26]=e("div",{class:"text-justify sm:text-2xl text-xl p-6 mt-6"},[e("p",null," Es responsabilidad del votante verificar que cumple con todos los requisitos y condiciones antes de emitir su voto, ya que no se permitirá una segunda oportunidad para realizar esta acción. ")],-1)),e("div",jt,[a(g,{type:"button",class:h(["h-full text-xl sm:text-2xl",{"opacity-25":v(d).processing}]),onClick:t[5]||(t[5]=o=>N.value=!1),disabled:v(d).processing},{default:c(()=>t[24]||(t[24]=[l(" Continuar ")])),_:1},8,["class","disabled"])])]),_:1},8,["show"])]),_:1})],64))}};export{Pt as default};
