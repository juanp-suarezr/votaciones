import{x as Y,T as Z,r as w,q as L,c as r,o as l,b as m,u,Z as J,d as b,e as t,p as M,j as a,t as n,f as K,v as Q,F as B,k as W}from"./app-5_L4Tv-P.js";import{_}from"./AuthenticatedLayout-DQDUcVWs.js";import{_ as tt}from"./SecondaryButton-CXFa-esD.js";import{_ as et}from"./PrimaryButton-Con1zl-j.js";import{c as ot}from"./comunas-DceGOULS.js";import{N as nt}from"./vue-easy-lightbox.esm.min-BBa5NtWo.js";import{_ as st}from"./Modal-BBlWABtu.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BreadCrumb-PFVtVn6h.js";import"./SecondaryButtonReturn-CE-x1OVb.js";import"./XCircleIcon-Bw8uvzLV.js";import"./index-DLAlGlCH.js";import"./index-DwHZt00W.js";import"./index-BetQlhqP.js";const it={class:"p-4 overflow-x-hidden w-full"},at={class:"bg-white shadow-md rounded-lg p-6 mb-6"},rt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},lt={key:0},dt={class:"bg-white shadow-md rounded-lg p-6 flex flex-wrap gap-8 items-start"},ut={class:"sm:flex-shrink-0 flex flex-col items-center"},ct=["src"],vt={key:1,class:"text-gray-400 italic"},mt={class:"sm:flex-shrink-0 flex flex-col items-center"},gt=["src"],bt={key:1,class:"text-gray-400 italic"},ft={class:"bg-white shadow-md rounded-lg p-6 mt-6 flex flex-col md:flex-row gap-8 items-start"},pt={class:"w-auto"},xt={class:""},ht={key:0,class:""},wt={class:"flex flex-col gap-2 w-full md:w-1/3"},yt={class:"flex flex-col md:flex-row gap-4 mt-8 justify-center items-center h-full"},kt={class:"flex justify-between items-center bg-azul text-white px-4 py-4"},Nt={class:"px-6 py-4"},Dt=["src"],$t={class:"text-gray-800 font-medium"},Ct={class:"text-gray-800 font-medium"},St={class:"text-gray-800 font-medium"},jt={class:"text-gray-800 font-medium"},Rt={class:"text-gray-800 font-medium"},At={class:"flex justify-end items-center gap-2 mt-6"},zt=["disabled"],Et=["disabled"],D=5,Yt={__name:"Show",props:{votante:{type:Object,required:!0},duplicados:{type:Object}},setup(o){const f=Y("$swal"),p=o;console.log(p);const d=Z({id:p.votante.id,motivo:""}),$=w(""),y=w(!1),k=w(!1),c=w(1),C=L(()=>Math.ceil(p.duplicados.length/D)),T=L(()=>{const i=(c.value-1)*D;return p.duplicados.slice(i,i+D)}),S=i=>{$.value=i,y.value=!0},U=()=>{y.value=!1},q=i=>{const e=new Date(i),v=e.getFullYear(),x=String(e.getMonth()+1).padStart(2,"0"),h=String(e.getDate()).padStart(2,"0");return`${v}-${x}-${h}`},G=[{url:route("gestion_registros.index"),text:"Gestion de registros"},{url:"",text:"Detalle registro"}],N=i=>`/storage/uploads/fotos/${i}`,j=i=>`/storage/uploads/documentos/${i}`,O=i=>{var e;return console.log(i),(e=ot.find(v=>v.value==i))==null?void 0:e.label},H=()=>{d.post(route("aprobarRegistro"),{onSuccess:function(){f({title:"Registro Aprobado",text:"El registro ha sido aprobado exitosamente",icon:"success"}).then(()=>{window.location.href=route("gestion_registros.index")})},onError:function(){f({title:"Error al aprobar registro",text:"Error al intentar aprobar este registro, por favor vuelve a intentar",icon:"error"})}})},X=()=>{d.post(route("rechazarRegistro"),{onSuccess:function(){f({title:"Registro Rechazado",text:"El registro ha sido rechazado exitosamente",icon:"success"}).then(()=>{window.location.href=route("gestion_registros.index")})},onError:function(){f({title:"Error al rechazar registro",text:"Error al intentar rechazar este registro, por favor vuelve a intentar",icon:"error"})}})};return(i,e)=>(l(),r(B,null,[m(u(J),{title:"Validación del votante"}),m(_,{breadCrumbLinks:G},{header:b(()=>e[7]||(e[7]=[t("div",{class:"flex justify-between items-center"},[t("h1",{class:"text-2xl font-bold"},"Detalle del Registro")],-1)])),default:b(()=>{var v,x,h,R,A,z,E,F,I,V,P;return[t("div",it,[t("div",at,[e[17]||(e[17]=t("h2",{class:"text-lg font-bold mb-4 text-blue-900"},"Datos del votante",-1)),t("div",rt,[t("div",null,[e[8]||(e[8]=t("b",null,"Nombre:",-1)),a(" "+n(((v=o.votante.votante)==null?void 0:v.nombre)||"Sin información"),1)]),t("div",null,[e[9]||(e[9]=t("b",null,"Tipo de documento:",-1)),a(" "+n(((x=o.votante.votante)==null?void 0:x.tipo_documento)||"N/A"),1)]),t("div",null,[e[10]||(e[10]=t("b",null,"Número de documento:",-1)),a(" "+n(((h=o.votante.votante)==null?void 0:h.identificacion)||"N/A"),1)]),t("div",null,[e[11]||(e[11]=t("b",null,"Fecha de nacimiento:",-1)),a(" "+n(((R=o.votante.votante)==null?void 0:R.nacimiento)||"N/A"),1)]),t("div",null,[e[12]||(e[12]=t("b",null,"Genero:",-1)),a(" "+n(((A=o.votante.votante)==null?void 0:A.genero)||"N/A"),1)]),t("div",null,[e[13]||(e[13]=t("b",null,"Comuna/Corregimiento:",-1)),a(" "+n(O(o.votante.subtipo)||"N/A"),1)]),t("div",null,[e[14]||(e[14]=t("b",null,"Barrio:",-1)),a(" "+n(((z=o.votante.votante)==null?void 0:z.barrio)||"N/A"),1)]),t("div",null,[e[15]||(e[15]=t("b",null,"Dirección:",-1)),a(" "+n(((E=o.votante.votante)==null?void 0:E.direccion)||"N/A"),1)]),o.votante.intentos>0?(l(),r("div",lt,[e[16]||(e[16]=t("b",null,"Motivo rechazo:",-1)),a(" "+n(o.votante.motivo||"N/A"),1)])):M("",!0)])]),t("div",dt,[t("div",ut,[e[18]||(e[18]=t("h2",null,"Fotografía",-1)),(F=o.votante.votante)!=null&&F.user.biometrico?(l(),r("img",{key:0,src:N((I=o.votante.votante)==null?void 0:I.user.biometrico.photo),alt:"Foto del votante",onClick:e[0]||(e[0]=s=>{var g;return S(N((g=o.votante.votante)==null?void 0:g.user.biometrico.photo))}),class:"sm:w-64 sm:h-64 w-full cursor-pointer sm:object-cover object-contain rounded-lg border shadow"},null,8,ct)):(l(),r("span",vt,"Sin foto"))]),t("div",mt,[e[19]||(e[19]=t("h2",null,"Frontal",-1)),(V=o.votante.votante)!=null&&V.user.biometrico?(l(),r("img",{key:0,src:j((P=o.votante.votante)==null?void 0:P.user.biometrico.cedula_front),alt:"Foto del votante",onClick:e[1]||(e[1]=s=>{var g;return S(j((g=o.votante.votante)==null?void 0:g.user.biometrico.cedula_front))}),class:"w-full sm:h-64 cursor-pointer sm:object-cover object-contain rounded-lg border shadow"},null,8,gt)):(l(),r("span",bt,"Sin foto"))])]),t("div",ft,[t("div",pt,[t("div",xt,[e[20]||(e[20]=t("b",null,"Validación:",-1)),a(" "+n(o.votante.validaciones),1)]),o.duplicados.length>0?(l(),r("div",ht,[t("button",{onClick:e[2]||(e[2]=s=>k.value=!0),class:"bg-secondary text-white hover:scale-105 hover:bg-primary p-2 cursor-pointer rounded-md mt-2"}," Ver duplicados ")])):M("",!0)]),t("div",wt,[e[22]||(e[22]=t("b",null,"Motivo de rechazo:",-1)),K(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>u(d).motivo=s),class:"border rounded p-2"},e[21]||(e[21]=[t("option",{value:"",disabled:""},"Seleccione un motivo",-1),t("option",{value:"aprobado"},"No hay motivos (aprobado)",-1),t("option",{value:"Documentos incorrectos"}," Documento incorrecto ",-1),t("option",{value:"Identidad no validada"},"Identidad no validada",-1),t("option",{value:"Parte frontal del documento poco visible"}," Parte frontal del documento poco visible ",-1),t("option",{value:"Registro duplicado"},"Registro duplicado",-1),t("option",{value:"Información errónea, en comparación con la documentación"}," Información errónea, en comparación con la documentación ",-1),t("option",{value:"Dirección diferente a la comuna/corregimiento"}," Dirección diferente a la comuna/corregimiento ",-1)]),512),[[Q,u(d).motivo]])])]),t("div",yt,[m(et,{onClick:H,class:"flex h-full items-center",disabled:u(d).processing||u(d).motivo!==""&&u(d).motivo!=="aprobado"},{default:b(()=>e[23]||(e[23]=[a(" Aprobar ")])),_:1},8,["disabled"]),m(tt,{onClick:X,class:"!bg-red-500 text-white",disabled:u(d).processing},{default:b(()=>e[24]||(e[24]=[a(" Rechazar ")])),_:1},8,["disabled"])]),m(u(nt),{visible:y.value,imgs:[$.value],onHide:U},null,8,["visible","imgs"])]),m(st,{show:k.value,closeable:!0},{default:b(()=>[t("div",kt,[e[25]||(e[25]=t("h2",{class:"text-2xl font-semibold text-center"}," Registros duplicados o similares ",-1)),t("button",{onClick:e[4]||(e[4]=s=>k.value=!1),class:"text-white text-xl hover:text-gray-300"}," X ")]),t("div",Nt,[(l(!0),r(B,null,W(T.value,s=>(l(),r("div",{key:s.id,class:"flex gap-4 items-center mb-4 border-b pb-2"},[t("img",{src:N(s.photo),alt:"Foto",class:"w-36 h-full object-cover rounded"},null,8,Dt),t("div",null,[t("p",$t," ID: "+n(s.user.votantes.hash_votantes[0].id),1),t("p",Ct," Nombre: "+n(s.user.votantes.nombre),1),t("p",St," Identificación: "+n(s.user.votantes.identificacion),1),t("p",jt," Creación: "+n(q(s.user.votantes.hash_votantes[0].created_at)),1),t("p",Rt,"Estado: "+n(s.estado),1)])]))),128)),t("div",At,[t("button",{class:"px-3 py-1 bg-gray-200 text-sm rounded hover:bg-gray-300",disabled:c.value===1,onClick:e[5]||(e[5]=s=>c.value--)}," Anterior ",8,zt),t("span",null,"Página "+n(c.value)+" de "+n(C.value),1),t("button",{class:"px-3 py-1 bg-gray-200 text-sm rounded hover:bg-gray-300",disabled:c.value===C.value,onClick:e[6]||(e[6]=s=>c.value++)}," Siguiente ",8,Et)])])]),_:1},8,["show"])]}),_:1})],64))}};export{Yt as default};
