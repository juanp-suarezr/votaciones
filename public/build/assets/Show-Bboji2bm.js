import{k as K,T as Q,r as w,c as U,a as r,b as l,d as g,u as c,Z as W,e as f,f as t,l as T,j as a,t as n,g as _,v as tt,F as G,h as et}from"./app-D0Bra57b.js";import{_ as ot}from"./AuthenticatedLayout-CsMSnnmI.js";import{_ as nt}from"./SecondaryButton-CEgl9K-H.js";import{_ as st}from"./PrimaryButton-Cj-2MkGp.js";import{c as it}from"./comunas-DN-PCrTT.js";import{N as at}from"./vue-easy-lightbox.esm.min-Cveba2Gs.js";import{_ as rt}from"./Modal-CkhTNj7c.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButtonReturn-CdZ6mk0D.js";const lt={class:"p-4"},dt={class:"bg-white shadow-md rounded-lg p-6 mb-6"},ut={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ct={key:0},vt={class:"bg-white shadow-md rounded-lg p-6 flex flex-wrap gap-8 items-start"},mt={class:"flex-shrink-0 flex flex-col items-center"},gt=["src"],ft={key:1,class:"text-gray-400 italic"},bt={class:"flex-shrink-0 flex flex-col items-center"},pt=["src"],xt={key:1,class:"text-gray-400 italic"},ht={class:"flex-shrink-0 flex flex-col items-center"},wt=["src"],yt={key:1,class:"text-gray-400 italic"},kt={class:"bg-white shadow-md rounded-lg p-6 mt-6 flex flex-col md:flex-row gap-8 items-start"},$t={class:"w-auto"},Nt={class:""},Dt={key:0,class:""},Ct={class:"flex flex-col gap-2 w-full md:w-1/3"},Ft={class:"flex flex-col md:flex-row gap-4 mt-8 justify-center items-center h-full"},St={class:"flex justify-between items-center bg-azul text-white px-4 py-4"},jt={class:"px-6 py-4"},Rt=["src"],At={class:"text-gray-800 font-medium"},zt={class:"text-gray-800 font-medium"},Et={class:"text-gray-800 font-medium"},It={class:"text-gray-800 font-medium"},Vt={class:"text-gray-800 font-medium"},Pt={class:"flex justify-end items-center gap-2 mt-6"},Lt=["disabled"],Bt=["disabled"],D=5,Zt={__name:"Show",props:{votante:{type:Object,required:!0},duplicados:{type:Object}},setup(o){const b=K("$swal"),p=o;console.log(p);const d=Q({id:p.votante.id,motivo:""}),C=w(""),y=w(!1),k=w(!1),v=w(1),F=U(()=>Math.ceil(p.duplicados.length/D)),O=U(()=>{const s=(v.value-1)*D;return p.duplicados.slice(s,s+D)}),$=s=>{C.value=s,y.value=!0},q=()=>{y.value=!1},H=s=>{const e=new Date(s),m=e.getFullYear(),x=String(e.getMonth()+1).padStart(2,"0"),h=String(e.getDate()).padStart(2,"0");return`${m}-${x}-${h}`},X=[{url:route("gestion_registros.index"),text:"Gestion de registros"},{url:"",text:"Detalle registro"}],N=s=>`/storage/uploads/fotos/${s}`,S=s=>`/storage/uploads/documentos/${s}`,j=s=>`/storage/uploads/firmas/${s}`,Y=s=>{var e;return console.log(s),(e=it.find(m=>m.value==s))==null?void 0:e.label},Z=()=>{d.post(route("aprobarRegistro"),{onSuccess:function(){b({title:"Registro Aprobado",text:"El registro ha sido aprobado exitosamente",icon:"success"}).then(()=>{window.location.href=route("gestion_registros.index")})},onError:function(){b({title:"Error al aprobar registro",text:"Error al intentar aprobar este registro, por favor vuelve a intentar",icon:"error"})}})},J=()=>{d.post(route("rechazarRegistro"),{onSuccess:function(){b({title:"Registro Rechazado",text:"El registro ha sido rechazado exitosamente",icon:"success"}).then(()=>{window.location.href=route("gestion_registros.index")})},onError:function(){b({title:"Error al rechazar registro",text:"Error al intentar rechazar este registro, por favor vuelve a intentar",icon:"error"})}})};return(s,e)=>(l(),r(G,null,[g(c(W),{title:"Validación del votante"}),g(ot,{breadCrumbLinks:X},{header:f(()=>e[8]||(e[8]=[t("div",{class:"flex justify-between items-center"},[t("h1",{class:"text-2xl font-bold"},"Detalle del Registro")],-1)])),default:f(()=>{var m,x,h,R,A,z,E,I,V,P,L,B,M;return[t("div",lt,[t("div",dt,[e[18]||(e[18]=t("h2",{class:"text-lg font-bold mb-4 text-blue-900"},"Datos del votante",-1)),t("div",ut,[t("div",null,[e[9]||(e[9]=t("b",null,"Nombre:",-1)),a(" "+n(((m=o.votante.votante)==null?void 0:m.nombre)||"Sin información"),1)]),t("div",null,[e[10]||(e[10]=t("b",null,"Tipo de documento:",-1)),a(" "+n(((x=o.votante.votante)==null?void 0:x.tipo_documento)||"N/A"),1)]),t("div",null,[e[11]||(e[11]=t("b",null,"Número de documento:",-1)),a(" "+n(((h=o.votante.votante)==null?void 0:h.identificacion)||"N/A"),1)]),t("div",null,[e[12]||(e[12]=t("b",null,"Fecha de nacimiento:",-1)),a(" "+n(((R=o.votante.votante)==null?void 0:R.nacimiento)||"N/A"),1)]),t("div",null,[e[13]||(e[13]=t("b",null,"Genero:",-1)),a(" "+n(((A=o.votante.votante)==null?void 0:A.genero)||"N/A"),1)]),t("div",null,[e[14]||(e[14]=t("b",null,"Comuna/Corregimiento:",-1)),a(" "+n(Y(o.votante.subtipo)||"N/A"),1)]),t("div",null,[e[15]||(e[15]=t("b",null,"Barrio:",-1)),a(" "+n(((z=o.votante.votante)==null?void 0:z.barrio)||"N/A"),1)]),t("div",null,[e[16]||(e[16]=t("b",null,"Dirección:",-1)),a(" "+n(((E=o.votante.votante)==null?void 0:E.direccion)||"N/A"),1)]),o.votante.intentos>0?(l(),r("div",ct,[e[17]||(e[17]=t("b",null,"motivo rechazo:",-1)),a(" "+n(o.votante.motivo||"N/A"),1)])):T("",!0)])]),t("div",vt,[t("div",mt,[e[19]||(e[19]=t("h2",null,"Fotografía",-1)),(I=o.votante.votante)!=null&&I.user.biometrico?(l(),r("img",{key:0,src:N((V=o.votante.votante)==null?void 0:V.user.biometrico.photo),alt:"Foto del votante",onClick:e[0]||(e[0]=i=>{var u;return $(N((u=o.votante.votante)==null?void 0:u.user.biometrico.photo))}),class:"w-64 h-64 cursor-pointer object-cover rounded-lg border shadow"},null,8,gt)):(l(),r("span",ft,"Sin foto"))]),t("div",bt,[e[20]||(e[20]=t("h2",null,"frontal",-1)),(P=o.votante.votante)!=null&&P.user.biometrico?(l(),r("img",{key:0,src:S((L=o.votante.votante)==null?void 0:L.user.biometrico.cedula_front),alt:"Foto del votante",onClick:e[1]||(e[1]=i=>{var u;return $(S((u=o.votante.votante)==null?void 0:u.user.biometrico.cedula_front))}),class:"w-full h-64 cursor-pointer object-cover rounded-lg border shadow"},null,8,pt)):(l(),r("span",xt,"Sin foto"))]),t("div",ht,[e[21]||(e[21]=t("h2",null,"Firma",-1)),(B=o.votante.votante)!=null&&B.user.biometrico?(l(),r("img",{key:0,src:j((M=o.votante.votante)==null?void 0:M.user.biometrico.firma),alt:"Foto del votante",onClick:e[2]||(e[2]=i=>{var u;return $(j((u=o.votante.votante)==null?void 0:u.user.biometrico.firma))}),class:"w-full h-64 cursor-pointer object-cover rounded-lg border shadow"},null,8,wt)):(l(),r("span",yt,"Sin foto"))])]),t("div",kt,[t("div",$t,[t("div",Nt,[e[22]||(e[22]=t("b",null,"Validación:",-1)),a(" "+n(o.votante.validaciones),1)]),o.duplicados.length>0?(l(),r("div",Dt,[t("button",{onClick:e[3]||(e[3]=i=>k.value=!0),class:"bg-secondary text-white hover:scale-105 hover:bg-primary p-2 cursor-pointer rounded-md mt-2"}," Ver duplicados ")])):T("",!0)]),t("div",Ct,[e[24]||(e[24]=t("b",null,"Motivo de rechazo:",-1)),_(t("select",{"onUpdate:modelValue":e[4]||(e[4]=i=>c(d).motivo=i),class:"border rounded p-2"},e[23]||(e[23]=[t("option",{value:"",disabled:""},"Seleccione un motivo",-1),t("option",{value:"aprobado"},"No hay motivos (aprobado)",-1),t("option",{value:"Documentos incorrectos"}," Documentos incorrectos ",-1),t("option",{value:"Identidad no validada"},"Identidad no validada",-1),t("option",{value:"Parte frontal del documento poco visible"}," Parte frontal del documento poco visible ",-1),t("option",{value:"Firma poco visible"},"Firma poco visible",-1),t("option",{value:"Firma diferente a la presentada en el documento de identificación"}," Firma diferente a la presentada en el documento de identificación ",-1),t("option",{value:"Registro duplicado"},"Registro duplicado",-1),t("option",{value:"Información errónea, en comparación con la documentación"}," Información errónea, en comparación con la documentación ",-1),t("option",{value:"Dirección diferente a la comuna/corregimiento"}," Dirección diferente a la comuna/corregimiento ",-1)]),512),[[tt,c(d).motivo]])])]),t("div",Ft,[g(st,{onClick:Z,class:"flex h-full items-center",disabled:c(d).processing||c(d).motivo!==""&&c(d).motivo!=="aprobado"},{default:f(()=>e[25]||(e[25]=[a(" Aprobar ")])),_:1},8,["disabled"]),g(nt,{onClick:J,class:"!bg-red-500 text-white",disabled:c(d).processing},{default:f(()=>e[26]||(e[26]=[a(" Rechazar ")])),_:1},8,["disabled"])]),g(c(at),{visible:y.value,imgs:[C.value],onHide:q},null,8,["visible","imgs"])]),g(rt,{show:k.value,closeable:!0},{default:f(()=>[t("div",St,[e[27]||(e[27]=t("h2",{class:"text-2xl font-semibold text-center"}," Registros duplicados o similares ",-1)),t("button",{onClick:e[5]||(e[5]=i=>k.value=!1),class:"text-white text-xl hover:text-gray-300"}," X ")]),t("div",jt,[(l(!0),r(G,null,et(O.value,i=>(l(),r("div",{key:i.id,class:"flex gap-4 items-center mb-4 border-b pb-2"},[t("img",{src:N(i.photo),alt:"Foto",class:"w-36 h-full object-cover rounded"},null,8,Rt),t("div",null,[t("p",At,"ID: "+n(i.user.votantes.hash_votantes[0].id),1),t("p",zt,"Nombre: "+n(i.user.votantes.nombre),1),t("p",Et,"Identificación: "+n(i.user.votantes.identificacion),1),t("p",It,"Creación: "+n(H(i.user.votantes.hash_votantes[0].created_at)),1),t("p",Vt,"Estado: "+n(i.estado),1)])]))),128)),t("div",Pt,[t("button",{class:"px-3 py-1 bg-gray-200 text-sm rounded hover:bg-gray-300",disabled:v.value===1,onClick:e[6]||(e[6]=i=>v.value--)}," Anterior ",8,Lt),t("span",null,"Página "+n(v.value)+" de "+n(F.value),1),t("button",{class:"px-3 py-1 bg-gray-200 text-sm rounded hover:bg-gray-300",disabled:v.value===F.value,onClick:e[7]||(e[7]=i=>v.value++)}," Siguiente ",8,Bt)])])]),_:1},8,["show"])]}),_:1})],64))}};export{Zt as default};
